(self.webpackChunkudonarium=self.webpackChunkudonarium||[]).push([[2460],{383:(l,Q,te)=>{"use strict";te.r(Q),te.d(Q,{default:()=>k});var a=te(5861),P=te(3604),V=te.n(P);class k extends(V()){dynamicImportI18n(B,E){return(0,a.Z)(function*(){return(yield te(6507)(`./${B}.${E}.json`)).default})()}dynamicImport(B){return(0,a.Z)(function*(){yield te(85)(`./${B}`)})()}}},5904:(l,Q,te)=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0}),te(8827),te(4748),te(9202),te(8465);var a=te(3583),P=te(3693),V=function(){function k(j,B){this.internal=B??a.BCDice.Base.$new(j)}return k.eval=function(j){var B=a.BCDice.Base.$eval(j);return P.parseResult(B)},Object.defineProperty(k.prototype,"randomizer",{get:function(){return this.internal.randomizer},enumerable:!1,configurable:!0}),k.prototype.eval=function(){var j=this.internal.$eval();return P.parseResult(j)},k}();Q.default=V},8827:(l,Q,te)=>{te(9993),Opal.queue(function(a){var X,q,I,y,g,M,w,U,P=a.module,V=a.ensure_kwargs,k=a.truthy,j=a.thrower,B=a.def,E=[],W=a.nil,Y=a.$$$;return X=E,q=U=[P(E[0],"BCDice")].concat(X),w=[M=P(U[0],"ArithmeticEvaluator")].concat(q),y=[I=a.get_singleton_class(M)].concat(w),g=a.$r(y),B(I,"$eval",function(R,_){try{j("eval_return");var f,T=W;return null==(f=(_=V(_)).$$smap.round_type)&&(f=Y(g("RoundType"),"FLOOR")),k(R)&&k(T=g("Arithmetic").$eval(R,f))?T:0}catch(v){if(v===a.t_eval_return)return v.$v;throw v}},-2)})},9202:(l,Q,te)=>{te(9993),Opal.modules.json=function(a){var w,M,P=a.module,V=a.klass,k=a.send,j=a.Object,B=a.hash2,E=a.eqeqeq,W=a.defs,Y=a.truthy,H=a.def,X=a.return_val,K=[],U=a.nil,x=a.$$$;return function(q,M){var I,w=P(q,"JSON"),D=[w].concat(M),y=a.$r(D);V(D[0],y("StandardError"),"JSONError"),V(D[0],y("JSONError"),"ParserError");var g=a.hasOwnProperty;function z(_){try{return JSON.parse(_)}catch(b){w.$raise(x(y("JSON"),"ParserError"),b.message)}}function R(_,b){var f,T,v,S,d,G;switch(typeof _){case"string":case"number":return _;case"boolean":return!!_;case"undefined":return U;case"object":if(!_)return U;if(_.$$is_array){for(T=b.array_class.$new(),S=0,d=_.length;S<d;S++)T.$push(R(_[S],b));return T}for(G in v=b.object_class.$new(),_)g.call(_,G)&&(I=[G,R(_[G],b)],k(v,"[]=",I));return b.parse||(f=v["$[]"](y("JSON").$create_id()))==U?v:j.$const_get(f).$json_create(v)}}a.get_singleton_class(w).$attr_accessor("create_id"),w["$create_id="]("json_class"),W(w,"$[]",function(b,f){return null==f&&(f=B([],{})),E(y("String"),b)?this.$parse(b,f):this.$generate(b,f)},-2),W(w,"$parse",function(b,f){return null==f&&(f=B([],{})),this.$from_object(z(b),f.$merge(B(["parse"],{parse:!0})))},-2),W(w,"$parse!",function(b,f){return null==f&&(f=B([],{})),this.$parse(b,f)},-2),W(w,"$load",function(b,f){return null==f&&(f=B([],{})),this.$from_object(z(b),f)},-2),W(w,"$from_object",function(b,f){return null==f&&(f=B([],{})),Y(f["$[]"]("object_class"))||f["$[]="]("object_class",y("Hash")),Y(f["$[]"]("array_class"))||f["$[]="]("array_class",y("Array")),R(b,f.$$smap)},-2),W(w,"$generate",function(b,f){return null==f&&(f=B([],{})),b.$to_json(f)},-2),W(w,"$dump",function(b,f,T){var S;return null==f&&(f=U),null==T&&(T=U),S=this.$generate(b),Y(f)?(Y(f["$responds_to?"]("to_io"))&&(f=f.$to_io()),f.$write(S),f):S},-2)}(K[0],K),w=V(K[0],null,"Object"),H(w,"$to_json",function(){return this.$to_s().$to_json()}),M=P(K[0],"Enumerable"),H(M,"$to_json",function(){return this.$to_a().$to_json()}),function(q,M){var w=V(q,null,"Array");H(w,"$to_json",function(){for(var y=[],g=0,z=this.length;g<z;g++)y.push(this[g].$to_json());return"["+y.join(",")+"]"})}(K[0]),function(q,M){var w=V(q,null,"Boolean");H(w,"$to_json",function(){return 1==this?"true":"false"})}(K[0]),function(q,M){var w=V(q,null,"Hash");H(w,"$to_json",function(){for(var _,b,y=[],g=0,z=this.$$keys,R=z.length;g<R;g++)(_=z[g]).$$is_string?b=this.$$smap[_]:(b=_.value,_=_.key),y.push(_.$to_s().$to_json()+":"+b.$to_json());return"{"+y.join(",")+"}"})}(K[0]),function(q,M){var w=V(q,null,"NilClass");H(w,"$to_json",X("null"))}(K[0]),function(q,M){var w=V(q,null,"Numeric");H(w,"$to_json",function(){return this.toString()})}(K[0]),function(q,M){var w=V(q,null,"String");H(w,"$to_json",function(){return JSON.stringify(this)})}(K[0]),function(q,M){var w=V(q,null,"Time");H(w,"$to_json",function(){return this.$strftime("%FT%T%z").$to_json()})}(K[0]),function(q,M){var w=V(q,null,"Date");return H(w,"$to_json",function(){return this.$to_s().$to_json()}),H(w,"$as_json",function(){return this.$to_s()})}(K[0])},Opal.modules.i18n=function(a){var g,_,f,T,z,R,P=a.module,V=a.class_variable_set,k=a.class_variable_get,j=a.def,B=a.truthy,E=a.hash2,W=a.send,Y=a.ensure_kwargs,H=a.kwrestargs,X=a.to_a,U=a.alias,x=a.klass,q=a.return_val,w=[],I=a.nil,D=a.$$$;return a.top.$require("json"),g=w,R=[z=P(w[0],"I18n")].concat(g),_=a.get_singleton_class(z),f=[_].concat(R),T=a.$r(f),V(f[1],"@@load_path",[]),V(f[1],"@@table",I),j(_,"$load_path",function(){return k(f[1],"@@load_path",!1)}),j(_,"$default_locale",function(){return k(f[1],"@@default_locale",!1)}),j(_,"$default_locale=",function(S){return V(f[1],"@@default_locale",S)}),j(_,"$fallbacks",function(){return D(D(T("I18n"),"Locale"),"Fallbacks").$new()}),j(_,"$load_default_translation",function(){return B(k(f[1],"@@table",!1)["$nil?"]())?(V(f[1],"@@table",E([],{})),this.$load_translation(JSON.stringify(te(6884)))):I}),j(_,"$load_translation",function(S){var G;return this.$load_default_translation(),G=T("JSON").$parse(S,E(["symbolize_names"],{symbolize_names:!0})),V(f[1],"@@table",W(k(f[1],"@@table",!1),"merge",[G],function(h,$,r){return null==h&&(h=I),null==$&&($=I),null==r&&(r=I),$.$merge(r)}))}),j(_,"$clear_translate_table",function(){return V(f[1],"@@table",I)}),j(_,"$translate",function(S,d){var G,m,$,r,e=I,n=I,t=I;null==(G=(d=Y(d)).$$smap.locale)&&(G=I),m=H(d,{locale:!0}),this.$load_default_translation(),$=W(S.$split("."),"map",[],"to_sym".$to_proc()),r=k(f[1],"@@table",!1),e=k(f[1],"@@default_locale",!1),n=B(t=W(r,"dig",[G].concat(X($))))?t:W(r,"dig",[e].concat(X($)));try{B(n["$is_a?"](T("String")))&&(n=this.$format(n,a.to_hash(m)))}catch(i){if(!a.rescue(i,[T("ArgumentError"),T("KeyError")]))throw i;a.pop_exception()}return B(t=n)?t:m["$[]"]("default")},-2),U(_,"t","translate"),function(_,b){var S,d,G,T=[P(_,"Locale")].concat(b),v=a.$r(T);S=T[0],d=v("Hash"),G=x(S,d,"Fallbacks"),j(G,"$defaults=",q(I))}(R[0],R),function(_,b){var T=[P(_,"Backend")].concat(b);P(T[0],"Simple")}(R[0],R),function(_,b){var v,f=P(_,"Thread");return[f].concat(b),v=a.get_singleton_class(f),j(v,"$current",function(){return E(["i18n_fallbacks"],{i18n_fallbacks:I})})}(R[0],R)},Opal.modules["i18n/backend/fallbacks"]=function(a){var D,z,_,b,y,g,P=a.module,V=a.class_variable_set,k=a.truthy,j=a.class_variable_get,B=a.def,E=a.send,W=a.send2,Y=a.find_super,H=a.hash2,X=a.find_block_super,K=a.neqeq,U=a.thrower,x=a.return_val,q=[],M=a.nil,w=a.$$$;return D=q,g=[y=P(q[0],"I18n")].concat(D),V(g[0],"@@fallbacks",M),z=a.get_singleton_class(y),_=[z].concat(g),b=a.$r(_),B(z,"$fallbacks",function(){var v=M;return V(_[1],"@@fallbacks",k(null!=_[1].$$cvars["@@fallbacks"]?"class variable":M)&&k(v=j(_[1],"@@fallbacks",!1))?v:w(w(b("I18n"),"Locale"),"Fallbacks").$new()),k(v=b("Thread").$current()["$[]"]("i18n_fallbacks"))?v:j(_[1],"@@fallbacks",!1)}),B(z,"$fallbacks=",function(T){var v;return V(_[1],"@@fallbacks",k(T["$is_a?"](b("Array")))?w(w(b("I18n"),"Locale"),"Fallbacks").$new(T):T),v=["i18n_fallbacks",j(_[1],"@@fallbacks",!1)],E(b("Thread").$current(),"[]=",v),v[v.length-1]}),function(z,R){var T,v,S,d,b=[P(z,"Backend")].concat(R);return T=b,S=[v=P(b[0],"Fallbacks")].concat(T),d=a.$r(S),B(v,"$translate",function G(m,h,$){try{var r=U("return"),e=G.$$p||M,n=this,t=M,i=M;return G.$$p=null,null==$&&($=d("EMPTY_HASH")),k($.$fetch("fallback",!0))?k($["$[]"]("fallback_in_progress"))?W(n,Y(n,"translate",G,!1,!0),"translate",[m,h,$],e):(k($["$[]"]("default"))&&(t=n["$extract_non_symbol_default!"]($)),i=$.$merge(H(["fallback_in_progress"],{fallback_in_progress:!0})),E(d("I18n").$fallbacks()["$[]"](m),"each",[],function s(c){var u=null==s.$$s?this:s.$$s;null==c&&(c=M);try{return E(u,"catch",["exception"],function N(){var C=null==N.$$s?this:N.$$s,J=M;if(J=W(C,X(C,"translate",N.$$def||s.$$def||G,!1,!1),"translate",[c,h,i],null),k(J["$nil?"]()))return M;K(m.$to_s(),c.$to_s())&&C.$on_fallback(m,c,h,$),r.$throw(J)},{$$s:u,$$ret:r})}catch(N){if(!a.rescue(N,[w(d("I18n"),"InvalidLocale")]))throw N;try{return M}finally{a.pop_exception()}}},{$$s:n}),k($["$key?"]("default"))&&k($["$[]"]("default")["$nil?"]())?M:k(t)?W(n,Y(n,"translate",G,!1,!0),"translate",[m,M,$.$merge(H(["default"],{default:t}))],null):n.$throw("exception",w(d("I18n"),"MissingTranslation").$new(m,h,$))):W(n,Y(n,"translate",G,!1,!0),"translate",[m,h,$],e)}catch(s){if(s===r)return s.$v;throw s}},-3),B(v,"$extract_non_symbol_default!",function(m){var $,h=M;return h=[m["$[]"]("default")].$flatten(),$=E(h,"detect",[],function(e){return null==e&&(e=M),e["$is_a?"](d("Symbol"))["$!"]()}),k($)&&m["$[]="]("default",h["$[]"](0,h.$index($))),$}),B(v,"$exists?",function G(m,h,$){try{var r=U("return"),e=G.$$p||M,n=this;return G.$$p=null,null==$&&($=d("EMPTY_HASH")),k($.$fetch("fallback",!0))?(E(d("I18n").$fallbacks()["$[]"](m),"each",[],function t(i){var s=null==t.$$s?this:t.$$s;null==i&&(i=M);try{if(!k(W(s,X(s,"exists?",t.$$def||G,!1,!1),"exists?",[i,h],null)))return M;r.$throw(!0)}catch(c){if(!a.rescue(c,[w(d("I18n"),"InvalidLocale")]))throw c;try{return M}finally{a.pop_exception()}}},{$$s:n,$$ret:r}),!1):W(n,Y(n,"exists?",G,!1,!0),"exists?",[m,h,$],e)}catch(t){if(t===r)return t.$v;throw t}},-3),v.$private(),B(v,"$on_fallback",x(M))}(g[0],g)},Opal.modules["bcdice/randomizer"]=function(a){var y,f,T,v,S,d,z,R,V=a.klass,k=a.const_set,j=a.def,B=a.truthy,E=a.rb_gt,W=a.rb_plus,Y=a.rb_le,H=a.send,X=a.rb_minus,K=a.eqeq,U=a.rb_times,x=a.eqeqeq,q=a.rb_ge,M=[],w=a.nil,I=a.$$$;return y=M,z=[(0,a.module)(M[0],"BCDice")].concat(y),R=a.$r(z),f=z,v=[T=V(z[0],null,"Randomizer")].concat(f),S=a.$r(v),(d=T.$$prototype).rand_results=d.detailed_rand_results=w,k(v[0],"UPPER_LIMIT_DICE_TIMES",200),k(v[0],"UPPER_LIMIT_DICE_SIDES",1e4),k(v[0],"UPPER_LIMIT_RANDS",1e4),j(T,"$initialize",function(){return this.rand_results=[],this.detailed_rand_results=[]}),T.$attr_reader("rand_results"),T.$attr_reader("detailed_rand_results"),k(v[0],"DetailedRandResult",S("Struct").$new("kind","sides","value")),j(T,"$roll_barabara",function(m,h){var $=this;return B(E(W($.rand_results.$size(),m),S("UPPER_LIMIT_RANDS")))&&$.$raise(S("TooManyRandsError")),B(Y(m,0))||B(E(m,S("UPPER_LIMIT_DICE_TIMES")))?[]:H(S("Array"),"new",[m],function r(){return(null==r.$$s?this:r.$$s).$roll_once(h)},{$$s:$})}),j(T,"$roll_sum",function(m,h){return this.$roll_barabara(m,h).$sum()}),j(T,"$roll_once",function(m){var $=w;return B(Y(m,0))||B(E(m,S("UPPER_LIMIT_DICE_SIDES")))?0:($=this.$rand_inner(m),this.$push_to_detail("normal",m,$),$)}),j(T,"$roll_index",function(m){return X(this.$roll_once(m),1)}),j(T,"$roll_tens_d10",function(){var $,h=w;return h=this.$rand_inner(10),K(h,10)&&(h=0),$=U(h,10),this.$push_to_detail("tens_d10",10,$),$}),j(T,"$roll_d9",function(){var h;return h=X(this.$rand_inner(10),1),this.$push_to_detail("d9",10,h),h}),j(T,"$roll_d66",function(m){var r,$=w;return $=H(S("Array"),"new",[2],function e(){return(null==e.$$s?this:e.$$s).$roll_once(6)},{$$s:this}),x(I(S("D66SortType"),"ASC"),r=m)?$["$sort!"]():x(I(S("D66SortType"),"DESC"),r)&&$["$sort!"]()["$reverse!"](),W(U($["$[]"](0),10),$["$[]"](1))}),T.$private(),j(T,"$rand_inner",function(m){var $,h=this;return B(q(h.rand_results.$size(),S("UPPER_LIMIT_RANDS")))&&h.$raise(S("TooManyRandsError")),$=h.$random(m),h.rand_results["$<<"]([$,m]),$}),j(T,"$random",function(m){return W(S("Kernel").$rand(m),1)}),j(T,"$push_to_detail",function(m,h,$){var e;return e=S("DetailedRandResult").$new(m,h,$),this.detailed_rand_results.$push(e)}),V(z[0],R("StandardError"),"TooManyRandsError"),w},Opal.modules["bcdice/dice_table/roll_result"]=function(a){var H,x,D,y,g,z,R,M,K,P=a.module,V=a.klass,k=a.def,j=a.truthy,B=a.return_val,E=[],W=a.nil;return H=E,x=K=[P(E[0],"BCDice")].concat(H),D=M=[P(K[0],"DiceTable")].concat(x),g=[y=V(M[0],null,"RollResult")].concat(D),z=a.$r(g),(R=y.$$prototype).table_name=R.value=R.body=W,k(y,"$initialize",function(b,f,T){var v=this;return v.table_name=b,v.value=f,v.body=T}),y.$attr_reader("table_name"),y.$attr_reader("value"),y.$attr_reader("body"),k(y,"$to_s",function(){var b=this;return b.table_name+"("+b.value+") \uff1e "+b.body}),k(y,"$last_body",function(){var b=this;return j(b.body["$is_a?"](z("RollResult")))?b.body.$last_body():b.body}),k(y,"$empty?",B(!1))},Opal.modules["bcdice/dice_table/chain_table"]=function(a){var H,x,D,y,g,z,R,M,K,P=a.module,V=a.klass,k=a.truthy,j=a.def,B=a.rb_minus,E=[],W=a.nil;return H=E,x=K=[P(E[0],"BCDice")].concat(H),D=M=[P(K[0],"DiceTable")].concat(x),g=[y=V(M[0],null,"ChainTable")].concat(D),z=a.$r(g),(R=y.$$prototype).times=R.sides=R.items=R.name=W,j(y,"$initialize",function(b,f,T){var v=this,S=W;return v.name=b,v.items=T.$freeze(),S=/(\d+)D(\d+)/i.$match(f),k(S)||v.$raise(z("ArgumentError"),"Unexpected table type: "+f),v.times=S["$[]"](1).$to_i(),v.sides=S["$[]"](2).$to_i()}),j(y,"$roll",function(b){var T,v,f=this,S=W;return T=b.$roll_sum(f.times,f.sides),v=B(T,f.times),S=f.items["$[]"](v),k(S["$respond_to?"]("roll"))&&(S=S.$roll(b)),z("RollResult").$new(f.name,T,S)})},Opal.modules["bcdice/dice_table/d66_grid_table"]=function(a){var U,w,z,R,_,b,f,D,q,P=a.module,V=a.klass,k=a.hash2,j=a.defs,B=a.def,E=a.rb_plus,W=a.rb_times,Y=a.rb_minus,H=[],X=a.nil;return U=H,w=q=[P(H[0],"BCDice")].concat(U),z=D=[P(q[0],"DiceTable")].concat(w),_=[R=V(D[0],null,"D66GridTable")].concat(z),b=a.$r(_),(f=R.$$prototype).name=f.items=X,j(R,"$from_i18n",function(v,S){var G=X;return G=b("I18n").$t(v,k(["locale","raise"],{locale:S,raise:!0})),this.$new(G["$[]"]("name"),G["$[]"]("items"))}),B(R,"$initialize",function(v,S){return this.name=v,this.items=S.$freeze()}),B(R,"$roll",function(v){var d,G,m,h,$;return d=v.$roll_once(6),G=v.$roll_once(6),m=E(W(d,10),G),h=Y(d,1),$=Y(G,1),b("RollResult").$new(this.name,m,this.items["$[]"](h)["$[]"]($))})},Opal.modules["bcdice/dice_table/d66_half_grid_table"]=function(a){var X,q,g,z,R,_,w,I,U,P=a.module,V=a.klass,k=a.hash2,j=a.defs,B=a.def,W=[],Y=a.nil;return a.top.$require("bcdice/dice_table/d66_grid_table"),X=W,q=U=[P(W[0],"BCDice")].concat(X),w=[P(U[0],"DiceTable")].concat(q),I=a.$r(w),g=w,R=[z=V(w[0],I("D66GridTable"),"D66HalfGridTable")].concat(g),_=a.$r(R),j(z,"$from_i18n",function(f,T){var S=Y;return S=_("I18n").$t(f,k(["locale","raise"],{locale:T,raise:!0})),this.$new(S["$[]"]("name"),S["$[]"]("items_1_2_3"),S["$[]"]("items_4_5_6"))}),B(z,"$initialize",function(f,T,v){return this.name=f,this.items=[T,T,T,v,v,v].$freeze()})},Opal.modules["bcdice/dice_table/d66_one_third_table"]=function(a){var X,q,g,z,R,_,w,I,U,P=a.module,V=a.klass,k=a.hash2,j=a.defs,B=a.def,W=[],Y=a.nil;return a.top.$require("bcdice/dice_table/d66_grid_table"),X=W,q=U=[P(W[0],"BCDice")].concat(X),w=[P(U[0],"DiceTable")].concat(q),I=a.$r(w),g=w,R=[z=V(w[0],I("D66GridTable"),"D66OneThirdTable")].concat(g),_=a.$r(R),j(z,"$from_i18n",function(f,T){var S=Y;return S=_("I18n").$t(f,k(["locale","raise"],{locale:T,raise:!0})),this.$new(S["$[]"]("name"),S["$[]"]("items_1_2"),S["$[]"]("items_3_4"),S["$[]"]("items_5_6"))}),B(z,"$initialize",function(f,T,v,S){return this.name=f,this.items=[T,T,v,v,S,S].$freeze()})},Opal.modules["bcdice/dice_table/d66_table"]=function(a){var q,D,_,b,f,T,v,g,w,P=a.module,V=a.klass,k=a.hash2,j=a.defs,B=a.def,E=a.eqeqeq,W=a.rb_plus,Y=a.rb_times,H=a.truthy,X=[],K=a.nil,U=a.$$$;return q=X,D=w=[P(X[0],"BCDice")].concat(q),_=g=[P(w[0],"DiceTable")].concat(D),f=[b=V(g[0],null,"D66Table")].concat(_),T=a.$r(f),(v=b.$$prototype).sort_type=v.items=v.name=K,j(b,"$from_i18n",function(d,G){var $,h=K;return h=T("I18n").$t(d,k(["locale"],{locale:G})),$=T("D66SortType").$const_get(h["$[]"]("d66_sort_type")),this.$new(h["$[]"]("name"),$,h["$[]"]("items"))}),B(b,"$initialize",function(d,G,m){var h=this;return h.name=d,h.sort_type=G,h.items=m.$freeze()}),B(b,"$roll",function(d){var G=this,m=K,h=K,$=K,r=K;return m=d.$roll_barabara(2,6),E(U(T("D66SortType"),"ASC"),h=G.sort_type)?m["$sort!"]():E(U(T("D66SortType"),"DESC"),h)&&m["$sort!"]()["$reverse!"](),$=W(Y(m["$[]"](0),10),m["$[]"](1)),r=H(h=G.items["$[]"]($))?h:G.items["$[]"]($.$to_s()),H(r["$respond_to?"]("roll"))&&(r=r.$roll(d)),T("RollResult").$new(G.name,$,r)}),B(b,"$choice",function(d){return T("RollResult").$new(this.name,d,this.items["$[]"](d))})},Opal.modules["bcdice/dice_table/d66_left_range_table"]=function(a){var M,y,z,R,I,P=a.module,V=a.klass,k=a.hash2,j=a.send,B=a.to_ary,E=a.rb_plus,W=a.rb_times,Y=a.send2,H=a.find_super,X=a.def,U=[],x=a.nil;return a.top.$require("bcdice/dice_table/d66_table"),M=U,y=I=[P(U[0],"BCDice")].concat(M),z=[P(I[0],"DiceTable")].concat(y),R=a.$r(z),X(V(z[0],R("D66Table"),"D66LeftRangeTable"),"$initialize",function T(v,S,d){var h;return T.$$p=null,h=k([],{}),j(d,"each",[],function(r){var e,i;return null==r&&(r=x),e=B(r),i=null==e[1]?x:e[1],j(null==e[0]?x:e[0],"each",[],function(c){return null==c&&(c=x),j(i,"each_with_index",[],function(N,C){var J,ne;return null==N&&(N=x),null==C&&(C=x),ne=E(W(c,10),E(C,1)),j(h,"[]=",J=[ne,N]),J[J.length-1]})})}),Y(this,H(this,"initialize",T,!1,!0),"initialize",[v,S,h],null)})},Opal.modules["bcdice/dice_table/d66_parity_table"]=function(a){var x,I,R,_,b,f,T,y,M,P=a.module,V=a.klass,k=a.hash2,j=a.defs,B=a.def,E=a.truthy,W=a.rb_minus,Y=a.rb_plus,H=a.rb_times,X=[],K=a.nil;return x=X,I=M=[P(X[0],"BCDice")].concat(x),R=y=[P(M[0],"DiceTable")].concat(I),b=[_=V(y[0],null,"D66ParityTable")].concat(R),f=a.$r(b),(T=_.$$prototype).odd=T.even=T.name=K,j(_,"$from_i18n",function(S,d){var m=K;return m=f("I18n").$t(S,k(["locale","raise"],{locale:d,raise:!0})),this.$new(m["$[]"]("name"),m["$[]"]("odd"),m["$[]"]("even"))}),B(_,"$initialize",function(S,d,G){var m=this;return m.name=S,m.odd=d.$freeze(),m.even=G.$freeze()}),B(_,"$roll",function(S){var m,$,r,d=this,G=K;return G=S.$roll_once(6),m=S.$roll_once(6),$=(E(G["$odd?"]())?d.odd:d.even)["$[]"](W(m,1)),r=Y(H(G,10),m),f("RollResult").$new(d.name,r,$)})},Opal.modules["bcdice/dice_table/d66_range_table"]=function(a){var X,q,y,g,z,R,_,w,U,P=a.module,V=a.klass,k=a.def,j=a.rb_plus,B=a.rb_times,E=a.send,W=[],Y=a.nil;return X=W,q=U=[P(W[0],"BCDice")].concat(X),y=w=[P(U[0],"DiceTable")].concat(q),z=[g=V(w[0],null,"D66RangeTable")].concat(y),R=a.$r(z),(_=g.$$prototype).items=_.name=Y,k(g,"$initialize",function(f,T){return this.name=f,this.items=T.$freeze()}),k(g,"$roll",function(f){var v,S,d,G=Y;return v=f.$roll_once(6),S=f.$roll_once(6),d=j(B(v,10),S),G=E(this.items,"find",[],function(h){return null==h&&(h=Y),h["$[]"](0)["$include?"](d)}),R("RollResult").$new(this.name,d,G["$[]"](1))})},Opal.modules["bcdice/dice_table/range_table"]=function(a){var x,I,R,_,b,f,T,y,M,P=a.module,V=a.klass,k=a.const_set,j=a.send,B=a.truthy,E=a.def,W=a.eqeqeq,Y=a.rb_times,H=a.rb_plus,X=[],K=a.nil;return x=X,I=M=[P(X[0],"BCDice")].concat(x),R=y=[P(M[0],"DiceTable")].concat(I),b=[_=V(y[0],null,"RangeTable")].concat(R),f=a.$r(b),(T=_.$$prototype).name=T.items=T.num_of_dice=T.num_of_sides=T.formatter=K,k(b[0],"RollResult",j(f("Struct"),"new",["sum","values","content","formatted"],function v(){return(null==v.$$s?this:v.$$s).$alias_method("to_s","formatted")},{$$s:_})),k(b[0],"Item",f("Struct").$new("range","content")),k(b[0],"DICE_ROLL_METHOD_RE",/^(\d+)D(\d+)$/i.$freeze()),k(b[0],"DEFAULT_FORMATTER",j(_,"lambda",[],function(S,d){return null==S&&(S=K),null==d&&(d=K),S.$name()+"("+d.$sum()+") \uff1e "+d.$content()})),_.$attr_reader("name"),_.$attr_reader("num_of_dice"),_.$attr_reader("num_of_sides"),E(_,"$initialize",function v(S,d,G){var $,m=v.$$p||K,h=this,r=K;return v.$$p=null,h.name=S.$freeze(),h.formatter=B($=m)?$:f("DEFAULT_FORMATTER"),r=f("DICE_ROLL_METHOD_RE").$match(d),B(r)||h.$raise(f("ArgumentError"),h.name+": invalid dice roll method: "+d),h.num_of_dice=r["$[]"](1).$to_i(),h.num_of_sides=r["$[]"](2).$to_i(),h.$store(G)}),E(_,"$fetch",function(S){var G,d=this;return G=j(d.items,"find",[],function(h){return null==h&&(h=K),h.$range()["$include?"](S)}),B(G)||d.$raise(f("RangeError"),d.name+": value is out of range: "+S),G}),E(_,"$roll",function(S){var m,d=this,G=K,h=K;return m=(G=S.$roll_barabara(d.num_of_dice,d.num_of_sides)).$sum(),(h=f("RollResult").$new(m,G,d.$fetch(m).$content()))["$formatted="](d.formatter["$[]"](d,h)),h}),_.$private(),E(_,"$store",function(S){var G,m,d=this;return G=j(S,"map",[],function h($,r){return null==$&&($=K),null==r&&(r=K),[(null==h.$$s?this:h.$$s).$coerce_to_int_range($),r]},{$$s:d}),m=j(G,"sort_by",[],function($,r){return null==$&&($=K),null==r&&(r=K),$.$min()}),d.$assert_min_sum_is_covered(m),d.$assert_max_sum_is_covered(m),d.$assert_no_gap_or_overlap_in_ranges(m),d.items=j(m,"map",[],function($,r){return null==$&&($=K),null==r&&(r=K),f("Item").$new($,r.$freeze()).$freeze()}).$freeze(),d}),E(_,"$coerce_to_int_range",function(S){var G;return W(f("Integer"),G=S)?f("Range").$new(S,S):W(f("Range"),G)&&B(S.$begin()["$is_a?"](f("Integer")))&&B(S.$end()["$is_a?"](f("Integer")))?S:this.$raise(f("TypeError"),this.name+": "+S+" ("+S.$class()+") must be an Integer or a Range with Integers ")}),E(_,"$assert_min_sum_is_covered",function(S){var G,d=this,m=K;return G=d.num_of_dice,m=S.$first()["$[]"](0),B(m["$include?"](G))||d.$raise(f("RangeError"),d.name+": min value ("+G+") is not covered: "+m),d}),E(_,"$assert_max_sum_is_covered",function(S){var G,d=this,m=K;return G=Y(d.num_of_dice,d.num_of_sides),m=S.$last()["$[]"](0),B(m["$include?"](G))||d.$raise(f("RangeError"),d.name+": max value ("+G+") is not covered: "+m),d}),E(_,"$assert_no_gap_or_overlap_in_ranges",function(S){return j(S,"each_cons",[2],function G(m,h){var n,t,$=null==G.$$s?this:G.$$s,r=K,e=K;return null==$.name&&($.name=K),null==m&&(m=K),null==h&&(h=K),r=m["$[]"](0),e=h["$[]"](0),n=r.$max(),t=H(n,1),B(e["$include?"](n))&&$.$raise(f("RangeError"),$.name+": Range overlap: "+r+" and "+e),B(e["$include?"](t))?K:$.$raise(f("RangeError"),$.name+": Range gap: "+r+" and "+e)},{$$s:this}),this})},Opal.modules["bcdice/dice_table/sai_fic_skill_table/category"]=function(a){var K,M,g,f,T,v,S,R,I,x,P=a.module,V=a.klass,k=a.send,j=a.def,B=a.rb_minus,E=a.return_ivar,W=[],Y=a.nil,H=a.$$$;return K=W,M=x=[P(W[0],"BCDice")].concat(K),g=I=[P(x[0],"DiceTable")].concat(M),f=R=[V(I[0],null,"SaiFicSkillTable")].concat(g),v=[T=V(R[0],null,"Category")].concat(f),S=a.$r(v),j(T,"$initialize",function(G,m,h,$){var r=this;return r.name=G,r.skills=k(m.$map(),"with_index",[2],function(n,t){return null==n&&(n=Y),null==t&&(t=Y),H(S("SaiFicSkillTable"),"Skill").$new(G,n,h,t,$)}),r.dice=h}),j(T,"$roll",function(G){return this.$skills()["$[]"](B(G.$roll_sum(2,6),2))}),j(T,"$to_s",E("name")),T.$attr_reader("name","dice","skills")},Opal.modules["bcdice/dice_table/sai_fic_skill_table/skill"]=function(a){var Y,U,I,R,_,y,q,X,P=a.module,V=a.klass,k=a.def,j=a.hash2,B=[],E=a.nil;return Y=B,U=X=[P(B[0],"BCDice")].concat(Y),I=q=[P(X[0],"DiceTable")].concat(U),y=[V(q[0],null,"SaiFicSkillTable")].concat(I),(_=(R=V(y[0],null,"Skill")).$$prototype).s_format=_.category_dice=_.row_dice=_.category_name=_.name=E,k(R,"$initialize",function(f,T,v,S,d){var G=this;return G.category_name=f,G.name=T,G.category_dice=v,G.row_dice=S,G.s_format=d}),k(R,"$to_s",function(){var f=this;return f.$format(f.s_format,j(["category_dice","row_dice","category_name","skill_name"],{category_dice:f.category_dice,row_dice:f.row_dice,category_name:f.category_name,skill_name:f.name}))}),R.$attr_reader("category_name","name","category_dice","row_dice")},Opal.modules["bcdice/dice_table/sai_fic_skill_table"]=function(a){var y,_,S,d,G,m,h,f,z,P=a.module,V=a.klass,k=a.ensure_kwargs,j=a.hash2,B=a.send,W=a.defs,Y=a.const_set,H=a.to_ary,X=a.def,K=a.truthy,U=a.rb_minus,x=a.rb_plus,q=a.top,M=[],w=a.nil,I=a.$$$;return q.$require("bcdice/dice_table/sai_fic_skill_table/category"),q.$require("bcdice/dice_table/sai_fic_skill_table/skill"),y=M,_=z=[P(M[0],"BCDice")].concat(y),S=f=[P(z[0],"DiceTable")].concat(_),G=[d=V(f[0],null,"SaiFicSkillTable")].concat(S),m=a.$r(G),(h=d.$$prototype).rtt=h.rtt_format=h.rct=h.rct_format=h.rttn=h.rttn_format=h.categories=w,W(d,"$from_i18n",function(r,e,n){var t,i,s,C,N=w;return null==(t=(n=k(n)).$$smap.rtt)&&(t=w),null==(i=n.$$smap.rct)&&(i=w),null==(s=n.$$smap.rttn)&&(s=w),C=(N=m("I18n").$t("RTT",j(["locale","raise","default"],{locale:e,raise:!1,default:j([],{})})).$merge(m("I18n").$t(r,j(["locale","raise"],{locale:e,raise:!0}))))["$[]"]("items"),N=B(N,"select",[],function(ne,se){return null==ne&&(ne=w),null==se&&(se=w),["rtt_format","rttn_format","rct_format","s_format"]["$include?"](ne)}),this.$new(C,a.to_hash(N).$merge(j(["rtt","rct","rttn"],{rtt:t,rct:i,rttn:s})))},-3),Y(G[0],"DEFAULT_RTT","\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s"),Y(G[0],"DEFAULT_RCT","\u30e9\u30f3\u30c0\u30e0\u5206\u91ce\u8868(%<category_dice>d) \uff1e %<category_name>s"),Y(G[0],"DEFAULT_RTTN","%<category_name>s\u5206\u91ce\u30e9\u30f3\u30c0\u30e0\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"),Y(G[0],"DEFAULT_S","\u300a%<skill_name>s\uff0f%<category_name>s%<row_dice>d\u300b"),X(d,"$initialize",function(r,e){var n,t,i,s,c,u,N,C=this;return null==(n=(e=k(e)).$$smap.rtt)&&(n=w),null==(t=e.$$smap.rct)&&(t=w),null==(i=e.$$smap.rttn)&&(i=w),null==(s=e.$$smap.rtt_format)&&(s=m("DEFAULT_RTT")),null==(c=e.$$smap.rct_format)&&(c=m("DEFAULT_RCT")),null==(u=e.$$smap.rttn_format)&&(u=m("DEFAULT_RTTN")),null==(N=e.$$smap.s_format)&&(N=m("DEFAULT_S")),C.categories=B(r.$map(),"with_index",[1],function(ne,se){var oe,$e,re;return null==ne&&(ne=w),null==se&&(se=w),$e=null==(oe=H(ne))[0]?w:oe[0],re=null==oe[1]?w:oe[1],I(m("SaiFicSkillTable"),"Category").$new($e,re,se,N)},{$$has_top_level_mlhs_arg:!0}),C.rtt=n,C.rct=t,C.rttn=i.$to_a(),C.rtt_format=s,C.rct_format=c,C.rttn_format=u},-2),Y(G[0],"RTTN",["RTT1","RTT2","RTT3","RTT4","RTT5","RTT6"].$freeze()),d.$attr_reader("categories"),X(d,"$roll_command",function(r,e){var t,n=this,i=w,s=w;return K(["RTT",n.rtt]["$include?"](t=e))?n.$format_skill(n.rtt_format,n.$roll_skill(r)):K(["RCT",n.rct]["$include?"](t))?(i=n.$roll_category(r),n.$format(n.rct_format,j(["category_dice","category_name"],{category_dice:i.$dice(),category_name:i.$name()}))):K(s=m("RTTN").$index(t))||K(s=n.rttn.$index(t))?n.$format_skill(n.rttn_format,n.categories["$[]"](s).$roll(r)):w}),X(d,"$roll_category",function(r){return this.categories["$[]"](U(r.$roll_once(6),1))}),X(d,"$roll_skill",function(r){return this.$roll_category(r).$roll(r)}),X(d,"$prefixes",function(){var r=this;return x(["RTT[1-6]?","RCT",r.rtt,r.rct],r.rttn).$compact()}),d.$private(),X(d,"$format_skill",function(r,e){return this.$format(r,j(["category_dice","row_dice","category_name","skill_name","text"],{category_dice:e.$category_dice(),row_dice:e.$row_dice(),category_name:e.$category_name(),skill_name:e.$name(),text:e.$to_s()}))})},Opal.modules["bcdice/dice_table/table"]=function(a){var K,M,g,z,R,_,b,I,x,P=a.module,V=a.klass,k=a.hash2,j=a.defs,B=a.truthy,E=a.def,W=a.rb_minus,Y=[],H=a.nil;return K=Y,M=x=[P(Y[0],"BCDice")].concat(K),g=I=[P(x[0],"DiceTable")].concat(M),R=[z=V(I[0],null,"Table")].concat(g),_=a.$r(R),(b=z.$$prototype).times=b.sides=b.name=b.items=H,j(z,"$from_i18n",function(T,v){var d=H;return d=_("I18n").$t(T,k(["locale"],{locale:v})),this.$new(d["$[]"]("name"),d["$[]"]("type"),d["$[]"]("items"))}),E(z,"$initialize",function(T,v,S){var d=this,G=H;return d.name=T,d.items=S.$freeze(),G=/(\d+)D(\d+)/i.$match(v),B(G)||d.$raise(_("ArgumentError"),"Unexpected table type: "+v),d.times=G["$[]"](1).$to_i(),d.sides=G["$[]"](2).$to_i()}),E(z,"$roll",function(T){var S,v=this;return S=T.$roll_sum(v.times,v.sides),v.$choice(S)}),E(z,"$choice",function(T){var S,v=this;return S=W(T,v.times),_("RollResult").$new(v.name,T,v.items["$[]"](S))})},Opal.modules["bcdice/dice_table"]=function(a){var P=a.top;return P.$require("bcdice/dice_table/roll_result"),P.$require("bcdice/dice_table/chain_table"),P.$require("bcdice/dice_table/d66_grid_table"),P.$require("bcdice/dice_table/d66_half_grid_table"),P.$require("bcdice/dice_table/d66_one_third_table"),P.$require("bcdice/dice_table/d66_left_range_table"),P.$require("bcdice/dice_table/d66_parity_table"),P.$require("bcdice/dice_table/d66_range_table"),P.$require("bcdice/dice_table/d66_table"),P.$require("bcdice/dice_table/range_table"),P.$require("bcdice/dice_table/sai_fic_skill_table"),P.$require("bcdice/dice_table/table")},Opal.modules["bcdice/enum"]=function(a){var E,X,U,Y,P=a.module,V=a.const_set,k=[];return E=k,X=Y=[P(k[0],"BCDice")].concat(E),U=[P(Y[0],"D66SortType")].concat(X),V(U[0],"NO_SORT","no_sort"),V(U[0],"ASC","asc"),V(U[0],"DESC","desc"),function(H,X){var U=[P(H,"RoundType")].concat(X);return V(U[0],"CEIL","ceil"),V(U[0],"FLOOR","floor"),V(U[0],"ROUND","round")}(Y[0],Y)},Opal.modules["bcdice/translate"]=function(a){var X,q,M,w,I,U,P=a.module,V=a.ensure_kwargs,k=a.kwrestargs,B=a.hash2,E=a.def,W=[],Y=a.nil;return X=W,q=U=[P(W[0],"BCDice")].concat(X),w=[M=P(U[0],"Translate")].concat(q),I=a.$r(w),E(M,"$translate",function(y,g){var z,R=this;return null==R.locale&&(R.locale=Y),g=V(g),z=k(g,{}),I("I18n").$translate(y,B(["locale","raise"],{locale:R.locale,raise:!0}).$merge(a.to_hash(z)))},-2)},Opal.modules["bcdice/result"]=function(a){var M,D,w,X,U,V=a.klass,k=a.send,j=a.def,B=a.return_val,E=a.return_ivar,W=[],Y=a.nil;return X=W,M=U=[(0,a.module)(W[0],"BCDice")].concat(X),[w=V(U[0],null,"Result")].concat(M),j(D=a.get_singleton_class(w),"$success",function(z){return k(this.$new(),"tap",[],function(b){var f;return null==b&&(b=Y),b["$text="](z),k(b,"success=",f=[!0]),f[f.length-1]})}),j(D,"$failure",function(z){return k(this.$new(),"tap",[],function(b){var f;return null==b&&(b=Y),b["$text="](z),k(b,"failure=",f=[!0]),f[f.length-1]})}),j(D,"$critical",function(z){return k(this.$new(),"tap",[],function(b){var f;return null==b&&(b=Y),b["$text="](z),b["$critical="](!0),k(b,"success=",f=[!0]),f[f.length-1]})}),j(D,"$fumble",function(z){return k(this.$new(),"tap",[],function(b){var f;return null==b&&(b=Y),b["$text="](z),b["$fumble="](!0),k(b,"failure=",f=[!0]),f[f.length-1]})}),j(D,"$nothing",B("nothing")),j(w,"$initialize",function(y){var g=this;return null==y&&(y=Y),g.text=y,g.rands=Y,g.detailed_rands=Y,g.secret=!1,g.success=!1,g.failure=!1,g.critical=!1,g.fumble=!1},-1),w.$attr_accessor("text","rands","detailed_rands"),w.$attr_writer("secret","success","failure","critical","fumble"),j(w,"$secret?",E("secret")),j(w,"$success?",E("success")),j(w,"$failure?",E("failure")),j(w,"$critical?",E("critical")),j(w,"$fumble?",E("fumble")),j(w,"$condition=",function(y){return this.success=y,this.failure=y["$!"]()})},Opal.modules["racc/parser"]=function(a){var T,S,d,P=a.module,V=a.klass,k=a.truthy,j=a.const_set,B=a.defs,E=a.gvars,W=a.rb_lt,Y=a.def,H=a.to_ary,X=a.send,K=a.neqeq,U=a.rb_plus,x=a.eqeq,q=a.rb_ge,M=a.rb_gt,w=a.rb_minus,I=a.rb_le,D=a.rb_times,y=a.assign_ivar_val,z=[],R=a.$r(z),_=a.nil,b=a.$$$;return T=z,S=[P(z[0],"Racc")].concat(T),d=a.$r(S),V(S[0],d("StandardError"),"ParseError"),k(b("::","ParseError","skip_raise")?"constant":_)||j(z[0],"ParseError",b(R("Racc"),"ParseError")),function(f,T){var $,r,e,n,t,d=[P(f,"Racc")].concat(T),G=a.$r(d);return k(G("Racc_No_Extensions","skip_raise")?"constant":_)||j(d[0],"Racc_No_Extensions",!1),$=d,e=[r=V(d[0],null,"Parser")].concat($),n=a.$r(e),(t=r.$$prototype).yydebug=t.racc_debug_out=t.racc_error_status=t.racc_t=t.racc_vstack=t.racc_val=t.racc_state=t.racc_tstack=_,j(e[0],"Racc_Runtime_Version","1.4.6"),j(e[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),j(e[0],"Racc_Runtime_Core_Version_R","1.4.6"),j(e[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),j(e[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),j(e[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),j(e[0],"Racc_Runtime_Core_Version",n("Racc_Runtime_Core_Version_R")),j(e[0],"Racc_Runtime_Core_Revision",n("Racc_Runtime_Core_Revision_R")),j(e[0],"Racc_Runtime_Type","ruby"),B(n("Parser"),"$racc_runtime_type",function(){return n("Racc_Runtime_Type")}),Y(r,"$_racc_setup",function(){var s,c,u=this,N=_,C=_;return null==E.stderr&&(E.stderr=_),k(b(u.$class(),"Racc_debug_parser"))||(u.yydebug=!1),k(null!=(s=u.yydebug)&&s!==_?"instance-variable":_)||(u.yydebug=!1),k(u.yydebug)&&(k(null!=(c=u.racc_debug_out)&&c!==_?"instance-variable":_)||(u.racc_debug_out=E.stderr),u.racc_debug_out=k(N=u.racc_debug_out)?N:E.stderr),C=b(u.$class(),"Racc_arg"),k(W(C.$size(),14))&&C["$[]="](13,!0),C}),Y(r,"$_racc_init_sysvars",function(){var s=this;return s.racc_state=[0],s.racc_tstack=[],s.racc_vstack=[],s.racc_t=_,s.racc_val=_,s.racc_read_next=!0,s.racc_user_yyerror=!1,s.racc_error_status=0}),Y(r,"$do_parse",function(){return this.$__send__(n("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),Y(r,"$next_token",function(){return this.$raise(n("NotImplementedError"),this.$class()+"#next_token is not defined")}),Y(r,"$_racc_do_parse_rb",function(s,c){var u,C=this,J=_,ne=_,se=_,oe=_,$e=_,re=_,le=_,ee=_;return u=H(s),J=null==u[0]?_:u[0],ne=null==u[1]?_:u[1],se=null==u[2]?_:u[2],oe=null==u[3]?_:u[3],$e=null==u[10]?_:u[10],C.$_racc_init_sysvars(),re=le=ee=_,X(C,"catch",["racc_end_parse"],function A(){var L,O,o=null==A.$$s?this:A.$$s,p=_;for(null==o.racc_state&&(o.racc_state=_),null==o.racc_read_next&&(o.racc_read_next=_),null==o.racc_t&&(o.racc_t=_),null==o.yydebug&&(o.yydebug=_),null==o.racc_val&&(o.racc_val=_);k(!0);)for(k(ee=oe["$[]"](o.racc_state["$[]"](-1)))?(k(o.racc_read_next)&&K(o.racc_t,0)&&(O=o.$next_token(),L=H(O),re=null==L[0]?_:L[0],o.racc_val=null==L[1]?_:L[1],o.racc_t=k(re)?k(p=$e["$[]"](re))?p:1:0,k(o.yydebug)&&o.$racc_read_token(o.racc_t,re,o.racc_val),o.racc_read_next=!1),ee=U(ee,o.racc_t),k(q(ee,0))&&k(le=J["$[]"](ee))&&x(ne["$[]"](ee),o.racc_state["$[]"](-1))||(le=se["$[]"](o.racc_state["$[]"](-1)))):le=se["$[]"](o.racc_state["$[]"](-1));k(le=o.$_racc_evalact(le,s)););},{$$s:C})}),Y(r,"$yyparse",function(s,c){return this.$__send__(n("Racc_YY_Parse_Method"),s,c,this.$_racc_setup(),!0)}),Y(r,"$_racc_yyparse_rb",function(s,c,u,N){var C,se=_,oe=_,ae=_,$e=_,le=_,ee=_,A=_;return C=H(u),se=null==C[0]?_:C[0],oe=null==C[1]?_:C[1],ae=null==C[2]?_:C[2],$e=null==C[3]?_:C[3],le=null==C[10]?_:C[10],this.$_racc_init_sysvars(),ee=_,A=_,X(this,"catch",["racc_end_parse"],function L(){var O=null==L.$$s?this:L.$$s;for(null==O.racc_state&&(O.racc_state=_);!k(A=$e["$[]"](O.racc_state["$[]"](-1)));)for(;k(ee=O.$_racc_evalact(ae["$[]"](O.racc_state["$[]"](-1)),u)););return X(s,"__send__",[c],function o(p,F){var Z=null==o.$$s?this:o.$$s,ie=_,ue=_;for(null==Z.racc_t&&(Z.racc_t=_),null==Z.racc_state&&(Z.racc_state=_),null==Z.racc_read_next&&(Z.racc_read_next=_),null==p&&(p=_),null==F&&(F=_),Z.racc_t=k(p)?k(ie=le["$[]"](p))?ie:1:0,Z.racc_val=F,Z.racc_read_next=!1,A=U(A,Z.racc_t),k(q(A,0))&&k(ee=se["$[]"](A))&&x(oe["$[]"](A),Z.racc_state["$[]"](-1))||(ee=ae["$[]"](Z.racc_state["$[]"](-1)));k(ee=Z.$_racc_evalact(ee,u)););for(;k(k(ie=k(ue=(A=$e["$[]"](Z.racc_state["$[]"](-1)))["$!"]())?ue:Z.racc_read_next["$!"]())?ie:Z.racc_t["$=="](0));)for(k(A)&&k(A=U(A,Z.racc_t))&&k(q(A,0))&&k(ee=se["$[]"](A))&&x(oe["$[]"](A),Z.racc_state["$[]"](-1))||(ee=ae["$[]"](Z.racc_state["$[]"](-1)));k(ee=Z.$_racc_evalact(ee,u)););},{$$s:O})},{$$s:this})}),Y(r,"$_racc_evalact",function(s,c){var u,ae,C=this,J=_,ne=_,oe=_,$e=_,re=_,le=_;if(J=null==(u=H(c))[0]?_:u[0],ne=null==u[1]?_:u[1],oe=null==u[3]?_:u[3],ae=null==u[11]?_:u[11],$e=null==u[12]?_:u[12],k(M(s,0))&&k(W(s,ae)))k(M(C.racc_error_status,0))&&(x(C.racc_t,1)||(C.racc_error_status=w(C.racc_error_status,1))),C.racc_vstack.$push(C.racc_val),C.racc_state.$push(s),C.racc_read_next=!0,k(C.yydebug)&&(C.racc_tstack.$push(C.racc_t),C.$racc_shift(C.racc_t,C.racc_tstack,C.racc_vstack));else if(k(W(s,0))&&k(M(s,$e["$-@"]()))){if(re=X(C,"catch",["racc_jump"],function ee(){var A=null==ee.$$s?this:ee.$$s;return null==A.racc_state&&(A.racc_state=_),A.racc_state.$push(A.$_racc_do_reduce(c,s)),!1},{$$s:C}),k(re))switch(re){case 1:return C.racc_user_yyerror=!0,$e["$-@"]();case 2:return ae;default:C.$raise("[Racc Bug] unknown jump code")}}else if(x(s,ae))k(C.yydebug)&&C.$racc_accept(),C.$throw("racc_end_parse",C.racc_vstack["$[]"](0));else{if(x(s,$e["$-@"]())){switch(C.racc_error_status){case 0:k(c["$[]"](21))||C.$on_error(C.racc_t,C.racc_val,C.racc_vstack);break;case 3:x(C.racc_t,0)&&C.$throw("racc_end_parse",_),C.racc_read_next=!0}for(C.racc_user_yyerror=!1,C.racc_error_status=3;k(!0)&&!(k(le=oe["$[]"](C.racc_state["$[]"](-1)))&&(le=U(le,1),k(q(le,0))&&k(s=J["$[]"](le))&&x(ne["$[]"](le),C.racc_state["$[]"](-1))));)k(I(C.racc_state.$size(),1))&&C.$throw("racc_end_parse",_),C.racc_state.$pop(),C.racc_vstack.$pop(),k(C.yydebug)&&(C.racc_tstack.$pop(),C.$racc_e_pop(C.racc_state,C.racc_tstack,C.racc_vstack));return s}C.$raise("[Racc Bug] unknown action "+s.$inspect())}return k(C.yydebug)&&C.$racc_next_state(C.racc_state["$[]"](-1),C.racc_state),_}),Y(r,"$_racc_do_reduce",function(s,c){var u,$e,le,p,F,Z,ce,C=this,ne=_,se=_,oe=_,ae=_,re=_,ee=_,A=_,L=_,O=_,o=_,ie=_,ue=_,fe=_;return ne=null==(u=H(s))[4]?_:u[4],se=null==u[5]?_:u[5],oe=null==u[6]?_:u[6],ae=null==u[7]?_:u[7],$e=null==u[8]?_:u[8],re=null==u[9]?_:u[9],le=null==u[13]?_:u[13],ee=C.racc_state,A=C.racc_vstack,L=C.racc_tstack,O=D(c,-3),o=re["$[]"](O),p=re["$[]"](U(O,1)),F=re["$[]"](U(O,2)),Z=[],k(C.yydebug)&&(ie=L["$[]"](o["$-@"](),o)),ue=A["$[]"](o["$-@"](),o),k(C.yydebug)&&L["$[]="](o["$-@"](),o,Z),A["$[]="](o["$-@"](),o,Z),ee["$[]="](o["$-@"](),o,Z),k(le)?A.$push(C.$__send__(F,ue,A,ue["$[]"](0))):A.$push(C.$__send__(F,ue,A)),L.$push(p),k(C.yydebug)&&C.$racc_reduce(ie,p,L,A),ce=w(p,$e),k(O=ae["$[]"](ce))&&(O=U(O,ee["$[]"](-1)),k(q(O,0))&&k(fe=ne["$[]"](O))&&x(se["$[]"](O),ce))?fe:oe["$[]"](ce)}),Y(r,"$on_error",function(s,c,u){var C,N=this;return N.$raise(n("ParseError"),N.$sprintf("\nparse error on value %s (%s)",c.$inspect(),k(C=N.$token_to_str(s))?C:"?"))}),Y(r,"$yyerror",function(){return this.$throw("racc_jump",1)}),Y(r,"$yyaccept",function(){return this.$throw("racc_jump",2)}),Y(r,"$yyerrok",y("racc_error_status",0)),Y(r,"$racc_read_token",function(s,c,u){var N=this;return N.racc_debug_out.$print("read    "),N.racc_debug_out.$print(c.$inspect(),"(",N.$racc_token2str(s),") "),N.racc_debug_out.$puts(u.$inspect()),N.racc_debug_out.$puts()}),Y(r,"$racc_shift",function(s,c,u){var N=this;return N.racc_debug_out.$puts("shift   "+N.$racc_token2str(s)),N.$racc_print_stacks(c,u),N.racc_debug_out.$puts()}),Y(r,"$racc_reduce",function(s,c,u,N){var C=this,J=_;return(J=C.racc_debug_out).$print("reduce "),k(s["$empty?"]())?J.$print(" <none>"):X(s,"each",[],function ne(se){return null==se&&(se=_),J.$print(" ",(null==ne.$$s?this:ne.$$s).$racc_token2str(se))},{$$s:C}),J.$puts(" --\x3e "+C.$racc_token2str(c)),C.$racc_print_stacks(u,N),C.racc_debug_out.$puts()}),Y(r,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),Y(r,"$racc_e_pop",function(s,c,u){var N=this;return N.racc_debug_out.$puts("error recovering mode: pop token"),N.$racc_print_states(s),N.$racc_print_stacks(c,u),N.racc_debug_out.$puts()}),Y(r,"$racc_next_state",function(s,c){var u=this;return u.racc_debug_out.$puts("goto    "+s),u.$racc_print_states(c),u.racc_debug_out.$puts()}),Y(r,"$racc_print_stacks",function(s,c){var N=_;return(N=this.racc_debug_out).$print("        ["),X(s,"each_index",[],function C(J){return null==J&&(J=_),N.$print(" (",(null==C.$$s?this:C.$$s).$racc_token2str(s["$[]"](J))," ",c["$[]"](J).$inspect(),")")},{$$s:this}),N.$puts(" ]")}),Y(r,"$racc_print_states",function(s){var u=_;return(u=this.racc_debug_out).$print("        ["),X(s,"each",[],function(C){return null==C&&(C=_),u.$print(" ",C)}),u.$puts(" ]")}),Y(r,"$racc_token2str",function(s){var u;return k(u=b(this.$class(),"Racc_token_to_s_table")["$[]"](s))?u:this.$raise("[Racc Bug] can't convert token "+s+" to string")}),Y(r,"$token_to_str",function(s){return b(this.$class(),"Racc_token_to_s_table")["$[]"](s)})}(z[0],z)},Opal.modules["bcdice/arithmetic/node"]=function(a){var y,_,v,$,r,d,G,f,z,P=a.module,V=a.klass,k=a.def,j=a.thrower,B=a.return_ivar,E=a.send2,W=a.find_super,Y=a.eqeq,H=a.const_set,X=a.eqeqeq,K=a.rb_divide,U=a.truthy,x=a.assign_ivar,q=a.alias,M=[],w=a.nil,I=a.$$$;return y=M,_=z=[P(M[0],"BCDice")].concat(y),v=f=[P(z[0],"Arithmetic")].concat(_),d=[P(f[0],"Node")].concat(v),G=a.$r(d),(r=($=V(d[0],null,"BinaryOp")).$$prototype).lhs=r.rhs=r.op=w,k($,"$initialize",function(n,t,i){var s=this;return s.lhs=n,s.op=t,s.rhs=i}),k($,"$eval",function(n){try{j("eval_return");var c,i=this,s=w;return s=i.lhs.$eval(n),c=i.rhs.$eval(n),s.$send(i.op,c)}catch(u){if(u===a.t_eval_return)return u.$v;throw u}}),k($,"$output",function(){var n=this;return""+n.lhs.$output()+n.op+n.rhs.$output()}),k($,"$s_exp",function(){var n=this;return"("+n.$op_for_s_exp()+" "+n.lhs.$s_exp()+" "+n.rhs.$s_exp()+")"}),k($,"$op_for_s_exp",B("op")),function(m,h,$){var r=V(m,h,"DivideBase"),e=[r].concat($),n=a.$r(e),t=r.$$prototype;t.lhs=t.rhs=t.op=w,k(r,"$initialize",function i(s,c){return i.$$p=null,E(this,W(this,"initialize",i,!1,!0),"initialize",[s,"/",c],null)}),k(r,"$eval",function(s){try{j("eval_return");var N,C,u=this;return N=u.lhs.$eval(s),C=u.rhs.$eval(s),Y(C,0)&&u.$raise(n("ZeroDivisionError")),u.$divide_and_round(N,C,s)}catch(J){if(J===a.t_eval_return)return J.$v;throw J}}),k(r,"$output",function i(){var s=i.$$p||w,c=this;return i.$$p=null,""+E(c,W(c,"output",i,!1,!0),"output",[],s)+c.$rounding_method()}),r.$private(),k(r,"$rounding_method",function(){return I(this.$class(),"ROUNDING_METHOD")}),k(r,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),k(r,"$divide_and_round",function(s,c,u){return this.$raise(n("NotImplementedError"))})}(d[0],G("BinaryOp"),d),function(m,h,$){var r=V(m,h,"DivideWithGameSystemDefault"),e=[r].concat($),n=a.$r(e);H(e[0],"ROUNDING_METHOD",""),r.$private(),k(r,"$divide_and_round",function(i,s,c){var u,N=w;return X(I(n("RoundType"),"CEIL"),u=c)?K(i.$to_f(),s).$ceil():X(I(n("RoundType"),"ROUND"),u)?(N=K(i.$to_f(),s),U(N["$negative?"]())?N.$abs().$round()["$-@"]():N.$round()):K(i,s).$floor()})}(d[0],G("DivideBase"),d),function(m,h,$){var r=V(m,h,"DivideWithCeil"),e=[r].concat($);H(e[0],"ROUNDING_METHOD","C"),r.$private(),k(r,"$divide_and_round",function(t,i,s){return K(t.$to_f(),i).$ceil()})}(d[0],G("DivideBase"),d),function(m,h,$){var r=V(m,h,"DivideWithRound"),e=[r].concat($);H(e[0],"ROUNDING_METHOD","R"),r.$private(),k(r,"$divide_and_round",function(t,i,s){var c=w;return c=K(t.$to_f(),i),U(c["$negative?"]())?c.$abs().$round()["$-@"]():c.$round()})}(d[0],G("DivideBase"),d),function(m,h,$){var r=V(m,h,"DivideWithFloor"),e=[r].concat($);H(e[0],"ROUNDING_METHOD","F"),r.$private(),k(r,"$divide_and_round",function(t,i,s){return K(t,i).$floor()})}(d[0],G("DivideBase"),d),function(m,h){var $=V(m,null,"Negative");$.$$prototype.body=w,k($,"$initialize",x("body")),k($,"$eval",function(n){try{return j("eval_return"),this.body.$eval(n)["$-@"]()}catch(s){if(s===a.t_eval_return)return s.$v;throw s}}),k($,"$output",function(){return"-"+this.body.$output()}),k($,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(d[0]),function(m,h){var $=V(m,null,"Parenthesis");$.$$prototype.expr=w,k($,"$initialize",x("expr")),k($,"$eval",function(n){try{return j("eval_return"),this.expr.$eval(n)}catch(s){if(s===a.t_eval_return)return s.$v;throw s}}),k($,"$output",function(){return"("+this.expr.$output()+")"}),k($,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(d[0]),function(m,h){var $=V(m,null,"Number");return $.$$prototype.value=w,k($,"$initialize",x("value")),k($,"$eval",B("value")),k($,"$output",function(){return this.value.$to_s()}),q($,"s_exp","output")}(d[0])},Opal.modules.strscan=function(a){var x,q,M,w,I,V=a.def,k=a.truthy,j=a.eqeqeq,B=a.Opal,E=a.return_ivar,W=a.send,Y=a.alias,H=[],X=a.nil;return x=H,M=[q=(0,a.klass)(H[0],null,"StringScanner")].concat(x),w=a.$r(M),(I=q.$$prototype).pos=I.string=I.working=I.matched=I.prev_pos=I.match=X,q.$attr_reader("pos","matched"),V(q,"$initialize",function(y){var g=this;return g.string=y,g.pos=0,g.matched=X,g.working=y,g.match=[]}),q.$attr_reader("string"),V(q,"$beginning_of_line?",function(){var y=this;return 0===y.pos||"\n"===y.string.charAt(y.pos-1)}),V(q,"$scan",function(y){var g=this,z=(y=g.$anchor(y)).exec(g.working);return null==z?g.matched=X:(g.prev_pos=g.pos,g.pos+=z[0].length,g.working=g.working.substring(z[0].length),g.matched=z[0],g.match=z,z[0])}),V(q,"$scan_until",function(y){var g=this;y=g.$anchor(y);for(var z=g.working,R=0;z.length!=R;++R){var _=y.exec(z.substr(R));if(null!==_){var b=R+_[0].length,f=z.substr(0,b);return g.matched=_[0],g.match=_,g.prev_pos=g.pos+R,g.pos+=b,g.working=z.substr(b),f}}return g.matched=X}),V(q,"$[]",function(y){var z;if(k(this.match["$empty?"]()))return X;j(w("Symbol"),z=y)?y=y.$to_s():j(w("String"),z)||(y=B["$coerce_to!"](y,w("Integer"),"to_int"));var R=this.match;return y<0&&(y+=R.length),y<0||y>=R.length||null==R[y]?X:R[y]}),V(q,"$check",function(y){var g=this,z=(y=g.$anchor(y)).exec(g.working);return g.matched=null==z?X:z[0]}),V(q,"$check_until",function(y){var g=this,z=g.prev_pos,R=g.pos,_=g.working,b=g.$scan_until(y);return g.prev_pos=z,g.pos=R,g.working=_,b}),V(q,"$peek",function(y){return this.working.substring(0,y)}),V(q,"$eos?",function(){return 0===this.working.length}),V(q,"$exist?",function(y){var z=y.exec(this.working);return null==z?X:0==z.index?0:z.index+1}),V(q,"$skip",function(y){var g=this,z=(y=g.$anchor(y)).exec(g.working);if(null==z)return g.match=[],g.matched=X;var R=z[0],_=R.length;return g.matched=R,g.match=z,g.prev_pos=g.pos,g.pos+=_,g.working=g.working.substring(_),_}),V(q,"$skip_until",function(y){var z=this.$scan_until(y);return z===X?X:(this.matched=z.substr(-1),z.length)}),V(q,"$get_byte",function(){var y=this,g=X;return y.pos<y.string.length?(y.prev_pos=y.pos,y.pos+=1,g=y.matched=y.working.substring(0,1),y.working=y.working.substring(1)):y.matched=X,g}),V(q,"$match?",function(y){var g=this,z=(y=g.$anchor(y)).exec(g.working);return null==z?X:(g.prev_pos=g.pos,z[0].length)}),V(q,"$pos=",function(y){var g=this;return y<0&&(y+=g.string.$length()),g.pos=y,g.working=g.string.slice(y)}),V(q,"$matched_size",function(){return this.matched===X?X:this.matched.length}),V(q,"$post_match",function(){var y=this;return y.matched===X?X:y.string.substr(y.pos)}),V(q,"$pre_match",function(){var y=this;return y.matched===X?X:y.string.substr(0,y.prev_pos)}),V(q,"$reset",function(){var y=this;return y.working=y.string,y.matched=X,y.pos=0}),V(q,"$rest",E("working")),V(q,"$rest?",function(){return 0!==this.working.length}),V(q,"$rest_size",function(){return this.$rest().$size()}),V(q,"$terminate",function(){var y,g=this;return g.match=X,y=[g.string.$length()],W(g,"pos=",y),y[y.length-1]}),V(q,"$unscan",function(){var y=this;return y.pos=y.prev_pos,y.prev_pos=X,y.match=X,y}),Y(q,"bol?","beginning_of_line?"),Y(q,"getch","get_byte"),q.$private(),V(q,"$anchor",function(y){var g=y.toString().match(/\/([^\/]+)$/);return g=g?g[1]:void 0,new RegExp("^(?:"+y.source+")",g)})},Opal.modules["bcdice/normalize"]=function(a){var Y,U,X,P=a.module,V=a.eqeqeq,k=a.def,j=a.eqeq,B=[],E=a.nil;return Y=B,X=[P(B[0],"BCDice")].concat(Y),(U=P(X[0],"Normalize")).$module_function(),k(U,"$comparison_operator",function(q){var M;return V(/<=|=</,M=q)?"<=":V(/>=|=>/,M)?">=":V(/<>|!=|=!/,M)?"!=":V(/</,M)?"<":V(/>/,M)?">":V(/=/,M)?"==":E}),k(U,"$target_number",function(q){return j(q,"?")?q:q.$to_i()})},Opal.modules["bcdice/command/lexer"]=function(a){var x,I,R,_,b,f,T,y,M,P=a.module,V=a.klass,k=a.const_set,j=a.hash2,B=a.truthy,E=a.send,W=a.def,Y=a.thrower,H=a.top,X=[],K=a.nil;return H.$require("strscan"),H.$require("bcdice/normalize"),x=X,I=M=[P(X[0],"BCDice")].concat(x),R=y=[P(M[0],"Command")].concat(I),b=[_=V(y[0],null,"Lexer")].concat(R),f=a.$r(b),(T=_.$$prototype).scanner=T.notations=K,k(b[0],"SYMBOLS",j(["+","-","*","/","(",")","?","@","#","$"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","?":"QUESTION","@":"AT","#":"SHARP",$:"DOLLAR"}).$freeze()),W(_,"$initialize",function(S,d){var G,m,$;return S=B($=(G=(m=S)===K||null==m?K:m.$split(" ",2))===K||null==G?K:G.$first())?$:"",this.scanner=f("StringScanner").$new(S),this.notations=E(d,"map",[],function(e){return null==e&&(e=K),B(e["$is_a?"](f("String")))?f("Regexp").$new(e):e})}),W(_,"$next_token",function(){try{var S=Y("return"),d=this,G=K,m=K,$=K,r=K;return B(d.scanner["$eos?"]())?[!1,"$"]:(E(d.notations,"each",[],function e(n){var i,t=null==e.$$s?this:e.$$s;if(null==t.scanner&&(t.scanner=K),null==n&&(n=K),i=t.scanner.$scan(n),!B(i))return K;S.$throw(["NOTATION",i])},{$$s:d,$$ret:S}),B(G=d.scanner.$scan(/\d+/))?["NUMBER",G.$to_i()]:B(m=d.scanner.$scan(/[<>!=]+/))?(m=f("Normalize").$comparison_operator(m),[B(m)?"CMP_OP":"ILLEGAL",m]):($=d.scanner.$getch().$upcase(),[B(r=f("SYMBOLS")["$[]"]($))?r:$.$to_sym(),$]))}catch(e){if(e===S)return e.$v;throw e}}),W(_,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/command/parsed"]=function(a){var H,x,D,y,g,z,R,M,K,P=a.module,V=a.klass,k=a.def,j=a.return_ivar,B=a.truthy,E=[],W=a.nil;return H=E,x=K=[P(E[0],"BCDice")].concat(H),D=M=[P(K[0],"Command")].concat(x),g=[y=V(M[0],null,"Parsed")].concat(D),z=a.$r(g),(R=y.$$prototype).critical=R.fumble=R.dollar=R.modify_number=R.question_target=R.target_number=R.prefix_number=R.command=R.suffix_number=R.cmp_op=W,y.$attr_accessor("command"),y.$attr_accessor("prefix_number"),y.$attr_accessor("suffix_number"),y.$attr_accessor("critical"),y.$attr_accessor("fumble"),y.$attr_accessor("dollar"),y.$attr_accessor("modify_number"),y.$attr_accessor("cmp_op"),y.$attr_accessor("target_number"),y.$attr_writer("question_target"),k(y,"$initialize",function(){var b=this;return b.prefix_number=W,b.suffix_number=W,b.critical=W,b.fumble=W,b.dollar=W,b.cmp_op=W,b.target_number=W,b.question_target=!1}),k(y,"$question_target?",j("question_target")),k(y,"$to_s",function(b){var f=this,T=W,v=W,S=W,d=W,G=W;switch(null==b&&(b="after_command"),T=B(f.critical)?"@"+f.critical:W,v=B(f.fumble)?"#"+f.fumble:W,S=B(f.dollar)?"$"+f.dollar:W,d=z("Format").$modifier(f.modify_number),G=B(f.question_target)?"?":f.target_number,b){case"after_command":return[f.prefix_number,f.command,f.suffix_number,T,v,S,d,f.cmp_op,G].$join();case"after_modify_number":return[f.prefix_number,f.command,f.suffix_number,d,T,v,S,f.cmp_op,G].$join();case"after_target_number":return[f.prefix_number,f.command,f.suffix_number,d,f.cmp_op,G,T,v,S].$join();default:return W}},-1)},Opal.modules["bcdice/command/parser"]=function(a){var b,S,r,i,s,c,u,N,C,J,ne,se,$e,e,n,t,ee,G,m,T,P=a.klass,V=a.module,k=a.slice,j=a.extract_kwargs,B=a.ensure_kwargs,E=a.get_kwarg,W=a.send2,Y=a.find_super,H=a.def,X=a.send,K=a.eqeq,U=a.thrower,x=a.hash,q=a.const_set,M=a.truthy,w=a.to_ary,I=a.hash2,D=a.top,y=[],g=a.$r(y),z=a.nil,R=a.$$$;return D.$require("racc/parser.rb"),D.$require("bcdice/arithmetic/node"),D.$require("bcdice/command/lexer"),D.$require("bcdice/command/parsed"),P(R(g("BCDice"),"Command"),R(g("Racc"),"Parser"),"Parser"),b=y,S=T=[V(y[0],"BCDice")].concat(b),G=[V(T[0],"Command")].concat(S),m=a.$r(G),r=G,n=[e=P(G[0],R(m("Racc"),"Parser"),"Parser")].concat(r),t=a.$r(n),(ee=e.$$prototype).notations=ee.lexer=ee.modifier=ee.suffix_number=ee.prefix_number=ee.need_suffix_number=ee.need_prefix_number=ee.critical=ee.fumble=ee.dollar=ee.allowed_cmp_op=ee.question_target=z,H(e,"$initialize",function A(L,O){var o,p,F,Z,ue=this;return A.$$p=null,o=k(arguments),p=j(o),p=B(p),F=o,Z=E(p,"round_type"),W(ue,Y(ue,"initialize",A,!1,!0),"initialize",[],null),ue.notations=F,ue.round_type=Z,ue.prefix_number=!1,ue.suffix_number=!1,ue.need_prefix_number=!1,ue.need_suffix_number=!1,ue.modifier=!0,ue.critical=!1,ue.fumble=!1,ue.dollar=!1,ue.allowed_cmp_op=[z,">=",">","<=","<","==","!="],ue.question_target=!1},-2),H(e,"$disable_modifier",function(){return this.modifier=!1,this}),H(e,"$enable_prefix_number",function(){return this.prefix_number=!0,this}),H(e,"$enable_suffix_number",function(){return this.suffix_number=!0,this}),H(e,"$has_prefix_number",function(){var L=this;return L.prefix_number=!0,L.need_prefix_number=!0,L}),H(e,"$has_suffix_number",function(){var L=this;return L.suffix_number=!0,L.need_suffix_number=!0,L}),H(e,"$enable_critical",function(){return this.critical=!0,this}),H(e,"$enable_fumble",function(){return this.fumble=!0,this}),H(e,"$enable_dollar",function(){return this.dollar=!0,this}),H(e,"$restrict_cmp_op_to",function(L){var O;return O=k(arguments),this.allowed_cmp_op=O,this},-1),H(e,"$enable_question_target",function(){return this.question_target=!0,this}),H(e,"$parse",function(L){var O=this;try{return O.lexer=t("Lexer").$new(L,O.notations),O.$do_parse()}catch(o){if(!a.rescue(o,[t("ParseError"),t("ZeroDivisionError")]))throw o;try{return z}finally{a.pop_exception()}}}),e.$private(),H(e,"$parsed",function(L,O,o,p){try{return U("eval_return"),X(t("Parsed").$new(),"tap",[],function ie(ue){var ce,fe,_e,de,me,he,ge,ve=null==ie.$$s?this:ie.$$s;return null==ve.round_type&&(ve.round_type=z),null==ue&&(ue=z),ue["$command="](L["$[]"]("command")),ue["$prefix_number="]((ce=L["$[]"]("prefix"))===z||null==ce?z:ce.$eval(ve.round_type)),ue["$suffix_number="]((fe=L["$[]"]("suffix"))===z||null==fe?z:fe.$eval(ve.round_type)),ue["$critical="]((_e=O["$[]"]("critical"))===z||null==_e?z:_e.$eval(ve.round_type)),ue["$fumble="]((de=O["$[]"]("fumble"))===z||null==de?z:de.$eval(ve.round_type)),ue["$dollar="]((me=O["$[]"]("dollar"))===z||null==me?z:me.$eval(ve.round_type)),ue["$modify_number="](o.$eval(ve.round_type)),ue["$cmp_op="](p["$[]"]("cmp_op")),K(p["$[]"]("target"),"?")?(ue["$question_target="](!0),X(ue,"target_number=",he=[0]),he[he.length-1]):(ue["$question_target="](!1),he=[(ge=p["$[]"]("target"),ge===z||null==ge?z:ge.$eval(ve.round_type))],X(ue,"target_number=",he),he[he.length-1])},{$$s:this})}catch(ie){if(ie===a.t_eval_return)return ie.$v;throw ie}}),H(e,"$next_token",function(){return this.lexer.$next_token()}),i=a.large_array_unpack("6,6,6,6,7,28,29,17,18,5,5,5,5,6,26,12,4,45,17,18,10,11,5,10,11,6,23,24,25,26,17,18,6,20,5,33,34,17,18,6,35,5,28,29,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,33,34,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,36,37,17,18,6,,5,,,17,18,6,,5,,,17,18,,,5,23,24,25,26,56,54,55,57"),s=a.large_array_unpack("0,4,26,12,1,21,21,26,26,0,4,26,12,5,21,3,0,26,5,5,8,8,5,2,2,10,8,8,8,8,10,10,11,7,10,14,14,11,11,17,14,11,9,9,17,17,18,,17,15,15,18,18,23,,18,30,30,23,23,24,,23,31,31,24,24,25,,24,44,44,25,25,28,,25,47,47,28,28,29,,28,48,48,29,29,33,,29,49,49,33,33,34,,33,50,50,34,34,36,,34,,,36,36,37,,36,,,37,37,,,37,27,27,27,27,52,52,52,52"),c=a.large_array_unpack("-2,4,16,-3,-1,11,,33,13,35,23,30,1,,28,40,,37,44,,,-2,,51,58,65,0,106,72,79,47,54,,86,93,,100,107,,,,,,,63,,,68,75,82,89,,120,,,,,"),u=a.large_array_unpack("-35,-35,-8,-35,-7,-35,-34,-35,-16,-8,-35,-35,-5,-6,-35,-21,-24,-35,-35,-32,58,-16,-3,-35,-35,-35,-35,-16,-35,-35,-12,-13,-4,-35,-35,-33,-35,-35,-30,-31,-1,-9,-10,-11,-17,-18,-2,-14,-15,-19,-20,-22,-25,-23,-26,-27,-28,-29"),N=a.large_array_unpack("30,31,38,39,14,8,1,22,41,42,43,9,27,2,53,,,21,47,48,40,51,52,49,50,44,46,3,,,,13,,,,,,,,32"),C=a.large_array_unpack("8,8,7,7,9,3,1,5,7,7,7,4,3,2,10,,,4,8,8,5,7,7,8,8,9,5,6,,,,6,,,,,,,,6"),J=[z,6,13,3,9,-1,27,-15,-10,-1,-38],ne=[z,z,z,z,z,z,19,16,15,z,z],se=a.large_array_unpack("0,0,racc_error,4,20,_reduce_1,4,20,_reduce_2,3,20,_reduce_3,3,21,_reduce_4,2,21,_reduce_5,2,21,_reduce_6,1,21,_reduce_7,0,22,_reduce_8,3,22,_reduce_9,3,22,_reduce_10,3,22,_reduce_11,2,23,_reduce_12,2,23,_reduce_13,3,23,_reduce_14,3,23,_reduce_15,0,24,_reduce_16,2,24,_reduce_17,2,24,_reduce_18,3,28,_reduce_19,3,28,_reduce_20,1,28,_reduce_none,3,27,_reduce_22,4,27,_reduce_23,1,27,_reduce_none,0,29,_reduce_25,1,29,_reduce_26,1,29,_reduce_27,1,29,_reduce_28,1,29,_reduce_29,2,26,_reduce_30,2,26,_reduce_31,1,26,_reduce_none,3,25,_reduce_33,1,25,_reduce_34"),$e=x(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12,"AT",13,"SHARP",14,"DOLLAR",15,"CMP_OP",16,"QUESTION",17,"NOTATION",18),q(n[0],"Racc_arg",[i,s,u,c,N,C,ne,J,19,se,$e,58,35,!0]),q(n[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","AT","SHARP","DOLLAR","CMP_OP","QUESTION","NOTATION","$start","expr","notation","option","modifier","target","term","unary","mul","add","round_type"]),q(n[0],"Racc_debug_parser",!1),H(e,"$_reduce_1",function(L,O,o){var p,Z=this;return M(Z.modifier)||Z.$raise(t("ParseError")),p=w(L),Z.$parsed(null==p[0]?z:p[0],null==p[1]?z:p[1],null==p[2]?z:p[2],null==p[3]?z:p[3])}),H(e,"$_reduce_2",function(L,O,o){var p,Z=this;return M(Z.modifier)||Z.$raise(t("ParseError")),p=w(L),Z.$parsed(null==p[0]?z:p[0],null==p[2]?z:p[2],null==p[1]?z:p[1],null==p[3]?z:p[3])}),H(e,"$_reduce_3",function(L,O,o){var p,ce;return ce=null==(p=w(L))[2]?z:p[2],this.$parsed(null==p[0]?z:p[0],null==p[1]?z:p[1],R(R(t("Arithmetic"),"Node"),"Number").$new(0),ce)}),H(e,"$_reduce_4",function(L,O,o){var p=this;return M(p.prefix_number)&&M(p.suffix_number)||p.$raise(t("ParseError")),I(["command","prefix","suffix"],{command:L["$[]"](1),prefix:L["$[]"](0),suffix:L["$[]"](2)})}),H(e,"$_reduce_5",function(L,O,o){var p=this;return M(p.prefix_number)||p.$raise(t("ParseError")),M(p.need_suffix_number)&&p.$raise(t("ParseError")),I(["command","prefix"],{command:L["$[]"](1),prefix:L["$[]"](0)})}),H(e,"$_reduce_6",function(L,O,o){var p=this;return M(p.suffix_number)||p.$raise(t("ParseError")),M(p.need_prefix_number)&&p.$raise(t("ParseError")),I(["command","suffix"],{command:L["$[]"](0),suffix:L["$[]"](1)})}),H(e,"$_reduce_7",function(L,O,o){var p=this;return(M(p.need_prefix_number)||M(p.need_suffix_number))&&p.$raise(t("ParseError")),I(["command"],{command:L["$[]"](0)})}),H(e,"$_reduce_8",function(L,O,o){return I([],{})}),H(e,"$_reduce_9",function(L,O,o){var p,ce,ie=z;return ie=null==(p=w(L))[0]?z:p[0],ce=null==p[2]?z:p[2],M(this.critical)&&M(ie["$[]"]("critical")["$nil?"]())||this.$raise(t("ParseError")),ie["$[]="]("critical",ce),ie}),H(e,"$_reduce_10",function(L,O,o){var p,ce,ie=z;return ie=null==(p=w(L))[0]?z:p[0],ce=null==p[2]?z:p[2],M(this.fumble)&&M(ie["$[]"]("fumble")["$nil?"]())||this.$raise(t("ParseError")),ie["$[]="]("fumble",ce),ie}),H(e,"$_reduce_11",function(L,O,o){var p,ce,ie=z;return ie=null==(p=w(L))[0]?z:p[0],ce=null==p[2]?z:p[2],M(this.dollar)&&M(ie["$[]"]("dollar")["$nil?"]())||this.$raise(t("ParseError")),ie["$[]="]("dollar",ce),ie}),H(e,"$_reduce_12",function(L,O,o){return L["$[]"](1)}),H(e,"$_reduce_13",function(L,O,o){return R(R(t("Arithmetic"),"Node"),"Negative").$new(L["$[]"](1))}),H(e,"$_reduce_14",function(L,O,o){return R(R(t("Arithmetic"),"Node"),"BinaryOp").$new(L["$[]"](0),"+",L["$[]"](2))}),H(e,"$_reduce_15",function(L,O,o){return R(R(t("Arithmetic"),"Node"),"BinaryOp").$new(L["$[]"](0),"-",L["$[]"](2))}),H(e,"$_reduce_16",function(L,O,o){return M(this.allowed_cmp_op["$include?"](z))||this.$raise(t("ParseError")),I([],{})}),H(e,"$_reduce_17",function(L,O,o){var p,ie,ue;return ue=null==(p=w(L))[1]?z:p[1],M(this.allowed_cmp_op["$include?"](ie=null==p[0]?z:p[0]))||this.$raise(t("ParseError")),I(["cmp_op","target"],{cmp_op:ie,target:ue})}),H(e,"$_reduce_18",function(L,O,o){var F,p=this;return F=L["$[]"](0),M(p.question_target)||p.$raise(t("ParseError")),M(p.allowed_cmp_op["$include?"](F))||p.$raise(t("ParseError")),I(["cmp_op","target"],{cmp_op:F,target:"?"})}),H(e,"$_reduce_19",function(L,O,o){return R(R(t("Arithmetic"),"Node"),"BinaryOp").$new(L["$[]"](0),"+",L["$[]"](2))}),H(e,"$_reduce_20",function(L,O,o){return R(R(t("Arithmetic"),"Node"),"BinaryOp").$new(L["$[]"](0),"-",L["$[]"](2))}),H(e,"$_reduce_22",function(L,O,o){return R(R(t("Arithmetic"),"Node"),"BinaryOp").$new(L["$[]"](0),"*",L["$[]"](2))}),H(e,"$_reduce_23",function(L,O,o){return L["$[]"](3).$new(L["$[]"](0),L["$[]"](2))}),H(e,"$_reduce_25",function(L,O,o){return R(R(t("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),H(e,"$_reduce_26",function(L,O,o){return R(R(t("Arithmetic"),"Node"),"DivideWithCeil")}),H(e,"$_reduce_27",function(L,O,o){return R(R(t("Arithmetic"),"Node"),"DivideWithCeil")}),H(e,"$_reduce_28",function(L,O,o){return R(R(t("Arithmetic"),"Node"),"DivideWithRound")}),H(e,"$_reduce_29",function(L,O,o){return R(R(t("Arithmetic"),"Node"),"DivideWithFloor")}),H(e,"$_reduce_30",function(L,O,o){return L["$[]"](1)}),H(e,"$_reduce_31",function(L,O,o){return R(R(t("Arithmetic"),"Node"),"Negative").$new(L["$[]"](1))}),H(e,"$_reduce_33",function(L,O,o){return L["$[]"](1)}),H(e,"$_reduce_34",function(L,O,o){return R(R(t("Arithmetic"),"Node"),"Number").$new(L["$[]"](0))}),H(e,"$_reduce_none",function(L,O,o){return L["$[]"](0)})},Opal.modules["bcdice/deprecated/checker"]=function(a){var X,q,D,y,g,z,w,U,P=a.module,V=a.send,k=a.eqeqeq,j=a.truthy,B=a.def,E=a.return_val,W=[],Y=a.nil;return X=W,q=U=[P(W[0],"BCDice")].concat(X),D=w=[P(U[0],"Deprecated")].concat(q),g=[y=P(w[0],"Checker")].concat(D),z=a.$r(g),y.$private(),B(y,"$check_result_legacy",function(_,b,f,T){var G,v=this,S=Y,d=Y,m=Y,h=Y;return S=V(b,"map",[],"sides".$to_proc()),G=(d=V(b,"map",[],"value".$to_proc())).$sum(),m=k([100],h=S)?v.$check_1D100(_,G,f,T):k([20],h)?v.$check_1D20(_,G,f,T):k([6,6],h)?v.$check_2D6(_,G,d,f,T):Y,(j(m["$nil?"]())||j(m["$empty?"]()))&&(m=k([10],h=S.$uniq())?v.$check_nD10(_,G,d,f,T):k([6],h)?v.$check_nD6(_,G,d,f,T):Y,j(m["$nil?"]())||j(m["$empty?"]()))?Y:z("Result").$new(m.$delete_prefix(" \uff1e "))}),B(y,"$check_1D100",E(Y)),B(y,"$check_1D20",E(Y)),B(y,"$check_nD10",E(Y)),B(y,"$check_2D6",E(Y)),B(y,"$check_nD6",E(Y))},Opal.queue(function(a){var g,v,h,t,s,c,$,r,e,n,d,P=a.module,V=a.klass,k=a.slice,j=a.rb_plus,B=a.truthy,E=a.def,W=a.regexp,Y=a.send,H=a.thrower,X=a.return_ivar,K=a.assign_ivar_val,U=a.eqeqeq,x=a.eqeq,q=a.return_val,M=a.range,w=a.rb_minus,I=a.rb_divide,D=a.rb_times,y=a.rb_ge,z=a.top,R=[],_=a.$r(R),b=a.nil,f=a.$$$;return z.$require("i18n"),z.$require("i18n/backend/fallbacks"),z.$require("bcdice/randomizer"),z.$require("bcdice/dice_table"),z.$require("bcdice/enum"),z.$require("bcdice/translate"),z.$require("bcdice/result"),z.$require("bcdice/command/parser"),z.$require("bcdice/deprecated/checker"),v=R,h=d=[P(R[0],"BCDice")].concat(v),r=[$=V(d[0],null,"Base")].concat(h),e=a.$r(r),(n=$.$$prototype).raw_input=n.randomizer=n.enabled_upcase_input=n.debug=b,s=[t=a.get_singleton_class($)].concat(r),c=a.$r(s),t.$attr_reader("prefixes"),E(t,"$register_prefix",function(N){var J,se;return null==this.prefixes&&(this.prefixes=b),J=k(arguments),this.prefixes=j(B(se=this.prefixes)?se:[],J.$flatten())},-1),E(t,"$register_prefix_from_super_class",function(){return this.$register_prefix(this.$superclass().$prefixes())}),E(t,"$prefixes_pattern",function(){var N=this,C=b;return null==N.prefixes_pattern&&(N.prefixes_pattern=b),null==N.prefixes&&(N.prefixes=b),N.prefixes_pattern=B(C=N.prefixes_pattern)?C:b,B(N.prefixes_pattern)?N.prefixes_pattern:(N.prefixes=B(C=N.prefixes)?C:[],N.prefixes.$freeze(),N.prefixes_pattern=(B(N.prefixes["$empty?"]())?/(?!)/:W(["^(S)?(",N.prefixes.$join("|"),")"],"i")).$freeze())}),E(t,"$command_pattern",function(){var N=this,C=b,J=b;return null==N.command_pattern&&(N.command_pattern=b),null==N.prefixes&&(N.prefixes=b),N.command_pattern=B(C=N.command_pattern)?C:b,B(N.command_pattern)?N.command_pattern:(N.prefixes=B(C=N.prefixes)?C:[],N.prefixes.$freeze(),J=j(Y(f(c("CommonCommand"),"COMMANDS"),"map",[],function(se){return null==se&&(se=b),f(se,"PREFIX_PATTERN").$source()}),N.prefixes),N.command_pattern=W(["^S?(",J.$join("|"),")"],"i").$freeze())}),E(t,"$eval",function(N){try{return H("eval_return"),this.$new(N).$eval()}catch(ne){if(ne===a.t_eval_return)return ne.$v;throw ne}}),$.$include(e("Translate")),$.$include(f(e("Deprecated"),"Checker")),E($,"$initialize",function(i){var s=this;return s.raw_input=i,s.sort_add_dice=!1,s.sort_barabara_dice=!1,s.d66_sort_type=f(e("D66SortType"),"NO_SORT"),s.enabled_d9=!1,s.round_type=f(e("RoundType"),"FLOOR"),s.sides_implicit_d=6,s.upper_dice_reroll_threshold=b,s.reroll_dice_reroll_threshold=b,s.default_cmp_op=b,s.default_target_number=b,s.enabled_upcase_input=!0,s.locale="ja_jp",s.randomizer=f(e("BCDice"),"Randomizer").$new(),s.debug=!1}),$.$attr_accessor("randomizer"),$.$attr_reader("d66_sort_type"),$.$attr_reader("round_type"),$.$attr_reader("sides_implicit_d"),$.$attr_reader("upper_dice_reroll_threshold"),$.$attr_reader("reroll_dice_reroll_threshold"),$.$attr_reader("default_cmp_op"),$.$attr_reader("default_target_number"),E($,"$sort_add_dice?",X("sort_add_dice")),E($,"$sort_barabara_dice?",X("sort_barabara_dice")),E($,"$enabled_d9?",X("enabled_d9")),E($,"$enable_debug",K("debug",!0)),E($,"$eval",function(){var s,u,i=this,c=b;return s=f(e("BCDice"),"Preprocessor").$process(i.raw_input,i),c=B(u=i.$dice_command(s))?u:i.$eval_common_command(i.raw_input),B(c)?(c["$rands="](i.randomizer.$rand_results()),c["$detailed_rands="](i.randomizer.$detailed_rand_results()),c):b}),E($,"$change_text",function(i){return i}),E($,"$check_result",function(i,s,c,u){var N=this,C=b,J=b,ne=b,se=b,oe=b;return C=N.$check_result_legacy(i,s,c,u),B(C)?C:(J=Y(s,"map",[],"sides".$to_proc()),se=(ne=Y(s,"map",[],"value".$to_proc())).$sum(),C=U([100],oe=J)?N.$result_1d100(i,se,c,u):U([20],oe)?N.$result_1d20(i,se,c,u):U([6,6],oe)?N.$result_2d6(i,se,ne,c,u):b,x(C,e("Result").$nothing())?b:B(C)?C:(C=U([10],oe=J.$uniq())?N.$result_nd10(i,se,ne,c,u):U([6],oe)?N.$result_nd6(i,se,ne,c,u):b,x(C,e("Result").$nothing())?b:B(C)?C:N.$result_ndx(i,c,u)))}),E($,"$grich_text",q(b)),$.$private(),E($,"$eval_common_command",function(i){try{H("eval_return");var c=H("return");return i=this.$change_text(i),Y(f(e("CommonCommand"),"COMMANDS"),"each",[],function N(C){var ne,J=null==N.$$s?this:N.$$s;if(null==J.randomizer&&(J.randomizer=b),null==C&&(C=b),ne=C.$eval(i,J,J.randomizer),!B(ne))return b;c.$throw(ne)},{$$s:this,$$ret:c}),b}catch(N){if(N===a.t_eval_return||N===c)return N.$v;throw N}}),E($,"$dice_command",function(i){var s=this,c=b,u=b,N=b,C=b;return B(s.enabled_upcase_input)&&(i=i.$upcase()),c=s.$class().$prefixes_pattern().$match(i),B(c)?(u=c["$[]"](1)["$nil?"]()["$!"](),B(u)&&(i=i["$[]"](M(1,-1,!1))),N=s.$eval_game_system_specific_command(i),B(N["$is_a?"](e("Result")))?(N["$secret="](B(C=N["$secret?"]())?C:u),N):B(N["$nil?"]())||B(N["$empty?"]())||x(N,"1")?b:Y(e("Result").$new(),"tap",[],function(ne){var se;return null==ne&&(ne=b),ne["$text="](N.$to_s()),Y(ne,"secret=",se=[u]),se[se.length-1]})):b}),E($,"$eval_game_system_specific_command",q(b)),E($,"$result_ndx",function(i,s,c){return B(c["$is_a?"](e("String")))?b:B(i.$send(s,c))?e("Result").$success(this.$translate("success")):e("Result").$failure(this.$translate("failure"))}),E($,"$result_1d100",q(b)),E($,"$result_1d20",q(b)),E($,"$result_nd10",q(b)),E($,"$result_2d6",q(b)),E($,"$result_nd6",q(b)),E($,"$get_table_by_2d6",function(i){return this.$get_table_by_nD6(i,2)}),E($,"$get_table_by_1d6",function(i){return this.$get_table_by_nD6(i,1)}),E($,"$get_table_by_nD6",function(i,s){return this.$get_table_by_nDx(i,s,6)}),E($,"$get_table_by_nDx",function(i,s,c){var N,C=b;return N=this.randomizer.$roll_sum(s,c),C=this.$get_table_value(i["$[]"](w(N,s))),B(C["$nil?"]())?["1",0]:[C,N]}),E($,"$get_table_by_1d3",function(i){var u,N,s=this,C=b;return s.$debug("get_table_by_1d3"),u=s.randomizer.$roll_sum(1,6),s.$debug("num",u),N=I(w(u,1),2).$to_i(),s.$debug("index",N),C=i["$[]"](N),B(C["$nil?"]())?["1",0]:[C,u]}),E($,"$get_table_by_d66_swap",function(i){var c;return c=this.randomizer.$roll_d66(f(e("D66SortType"),"ASC")),[this.$get_table_by_number(c,i),c]}),E($,"$get_table_by_d66",function(i){var c,u,N,J,C=b;return c=this.randomizer.$roll_once(6),u=this.randomizer.$roll_once(6),N=j(D(w(c,1),6),w(u,1)),C=i["$[]"](N),J=""+c+u,B(C["$nil?"]())?["1",J]:[C,J]}),E($,"$get_table_by_number",function(i,s,c){try{var u=H("return");return null==c&&(c="1"),Y(s,"each",[],function C(J){var se,ne=null==C.$$s?this:C.$$s;if(null==J&&(J=b),se=J["$[]"](0),!B(y(se,i)))return b;u.$throw(ne.$get_table_value(J["$[]"](1)))},{$$s:this,$$ret:u}),this.$get_table_value(c)}catch(C){if(C===u)return C.$v;throw C}},-3),E($,"$get_table_value",function(i){return B(i["$is_a?"](e("Proc")))?i.$call():i}),E($,"$roll_tables",function(i,s){var u=b;return u=s["$[]"](i),B(u)?u.$roll(this.randomizer).$to_s():b}),E($,"$debug",function(i,s){var u,N=this,C=b,J=b;return u=k(arguments,1),B(N.debug)?(C=B(i["$is_a?"](e("String")))?i:i.$inspect(),B(u["$empty?"]())?N.$warn(C):(J=Y(u,"map",[],function(se){return null==se&&(se=b),B(se["$is_a?"](e("String")))?'"'+se+'"':se.$inspect()}),N.$warn(C+": "+J.$join(", ")))):b},-2),f(f(_("I18n"),"Backend"),"Simple").$include(f(f(_("I18n"),"Backend"),"Fallbacks")),_("I18n").$load_path()["$<<"](_("Dir")["$[]"](_("File").$join("bcdice","../../i18n/**/*.yml"))),_("I18n")["$default_locale="]("ja_jp"),g=[["ja_jp"]],Y(_("I18n").$fallbacks(),"defaults=",g),g[g.length-1]})},4748:(l,Q,te)=>{te(9993),Opal.modules["bcdice/normalize"]=function(a){var Y,U,X,P=a.module,V=a.eqeqeq,k=a.def,j=a.eqeq,B=[],E=a.nil;return Y=B,X=[P(B[0],"BCDice")].concat(Y),(U=P(X[0],"Normalize")).$module_function(),k(U,"$comparison_operator",function(q){var M;return V(/<=|=</,M=q)?"<=":V(/>=|=>/,M)?">=":V(/<>|!=|=!/,M)?"!=":V(/</,M)?"<":V(/>/,M)?">":V(/=/,M)?"==":E}),k(U,"$target_number",function(q){return j(q,"?")?q:q.$to_i()})},Opal.modules["racc/parser"]=function(a){var T,S,d,P=a.module,V=a.klass,k=a.truthy,j=a.const_set,B=a.defs,E=a.gvars,W=a.rb_lt,Y=a.def,H=a.to_ary,X=a.send,K=a.neqeq,U=a.rb_plus,x=a.eqeq,q=a.rb_ge,M=a.rb_gt,w=a.rb_minus,I=a.rb_le,D=a.rb_times,y=a.assign_ivar_val,z=[],R=a.$r(z),_=a.nil,b=a.$$$;return T=z,S=[P(z[0],"Racc")].concat(T),d=a.$r(S),V(S[0],d("StandardError"),"ParseError"),k(b("::","ParseError","skip_raise")?"constant":_)||j(z[0],"ParseError",b(R("Racc"),"ParseError")),function(f,T){var $,r,e,n,t,d=[P(f,"Racc")].concat(T),G=a.$r(d);return k(G("Racc_No_Extensions","skip_raise")?"constant":_)||j(d[0],"Racc_No_Extensions",!1),$=d,e=[r=V(d[0],null,"Parser")].concat($),n=a.$r(e),(t=r.$$prototype).yydebug=t.racc_debug_out=t.racc_error_status=t.racc_t=t.racc_vstack=t.racc_val=t.racc_state=t.racc_tstack=_,j(e[0],"Racc_Runtime_Version","1.4.6"),j(e[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),j(e[0],"Racc_Runtime_Core_Version_R","1.4.6"),j(e[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),j(e[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),j(e[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),j(e[0],"Racc_Runtime_Core_Version",n("Racc_Runtime_Core_Version_R")),j(e[0],"Racc_Runtime_Core_Revision",n("Racc_Runtime_Core_Revision_R")),j(e[0],"Racc_Runtime_Type","ruby"),B(n("Parser"),"$racc_runtime_type",function(){return n("Racc_Runtime_Type")}),Y(r,"$_racc_setup",function(){var s,c,u=this,N=_,C=_;return null==E.stderr&&(E.stderr=_),k(b(u.$class(),"Racc_debug_parser"))||(u.yydebug=!1),k(null!=(s=u.yydebug)&&s!==_?"instance-variable":_)||(u.yydebug=!1),k(u.yydebug)&&(k(null!=(c=u.racc_debug_out)&&c!==_?"instance-variable":_)||(u.racc_debug_out=E.stderr),u.racc_debug_out=k(N=u.racc_debug_out)?N:E.stderr),C=b(u.$class(),"Racc_arg"),k(W(C.$size(),14))&&C["$[]="](13,!0),C}),Y(r,"$_racc_init_sysvars",function(){var s=this;return s.racc_state=[0],s.racc_tstack=[],s.racc_vstack=[],s.racc_t=_,s.racc_val=_,s.racc_read_next=!0,s.racc_user_yyerror=!1,s.racc_error_status=0}),Y(r,"$do_parse",function(){return this.$__send__(n("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),Y(r,"$next_token",function(){return this.$raise(n("NotImplementedError"),this.$class()+"#next_token is not defined")}),Y(r,"$_racc_do_parse_rb",function(s,c){var u,C=this,J=_,ne=_,se=_,oe=_,$e=_,re=_,le=_,ee=_;return u=H(s),J=null==u[0]?_:u[0],ne=null==u[1]?_:u[1],se=null==u[2]?_:u[2],oe=null==u[3]?_:u[3],$e=null==u[10]?_:u[10],C.$_racc_init_sysvars(),re=le=ee=_,X(C,"catch",["racc_end_parse"],function A(){var L,O,o=null==A.$$s?this:A.$$s,p=_;for(null==o.racc_state&&(o.racc_state=_),null==o.racc_read_next&&(o.racc_read_next=_),null==o.racc_t&&(o.racc_t=_),null==o.yydebug&&(o.yydebug=_),null==o.racc_val&&(o.racc_val=_);k(!0);)for(k(ee=oe["$[]"](o.racc_state["$[]"](-1)))?(k(o.racc_read_next)&&K(o.racc_t,0)&&(O=o.$next_token(),L=H(O),re=null==L[0]?_:L[0],o.racc_val=null==L[1]?_:L[1],o.racc_t=k(re)?k(p=$e["$[]"](re))?p:1:0,k(o.yydebug)&&o.$racc_read_token(o.racc_t,re,o.racc_val),o.racc_read_next=!1),ee=U(ee,o.racc_t),k(q(ee,0))&&k(le=J["$[]"](ee))&&x(ne["$[]"](ee),o.racc_state["$[]"](-1))||(le=se["$[]"](o.racc_state["$[]"](-1)))):le=se["$[]"](o.racc_state["$[]"](-1));k(le=o.$_racc_evalact(le,s)););},{$$s:C})}),Y(r,"$yyparse",function(s,c){return this.$__send__(n("Racc_YY_Parse_Method"),s,c,this.$_racc_setup(),!0)}),Y(r,"$_racc_yyparse_rb",function(s,c,u,N){var C,se=_,oe=_,ae=_,$e=_,le=_,ee=_,A=_;return C=H(u),se=null==C[0]?_:C[0],oe=null==C[1]?_:C[1],ae=null==C[2]?_:C[2],$e=null==C[3]?_:C[3],le=null==C[10]?_:C[10],this.$_racc_init_sysvars(),ee=_,A=_,X(this,"catch",["racc_end_parse"],function L(){var O=null==L.$$s?this:L.$$s;for(null==O.racc_state&&(O.racc_state=_);!k(A=$e["$[]"](O.racc_state["$[]"](-1)));)for(;k(ee=O.$_racc_evalact(ae["$[]"](O.racc_state["$[]"](-1)),u)););return X(s,"__send__",[c],function o(p,F){var Z=null==o.$$s?this:o.$$s,ie=_,ue=_;for(null==Z.racc_t&&(Z.racc_t=_),null==Z.racc_state&&(Z.racc_state=_),null==Z.racc_read_next&&(Z.racc_read_next=_),null==p&&(p=_),null==F&&(F=_),Z.racc_t=k(p)?k(ie=le["$[]"](p))?ie:1:0,Z.racc_val=F,Z.racc_read_next=!1,A=U(A,Z.racc_t),k(q(A,0))&&k(ee=se["$[]"](A))&&x(oe["$[]"](A),Z.racc_state["$[]"](-1))||(ee=ae["$[]"](Z.racc_state["$[]"](-1)));k(ee=Z.$_racc_evalact(ee,u)););for(;k(k(ie=k(ue=(A=$e["$[]"](Z.racc_state["$[]"](-1)))["$!"]())?ue:Z.racc_read_next["$!"]())?ie:Z.racc_t["$=="](0));)for(k(A)&&k(A=U(A,Z.racc_t))&&k(q(A,0))&&k(ee=se["$[]"](A))&&x(oe["$[]"](A),Z.racc_state["$[]"](-1))||(ee=ae["$[]"](Z.racc_state["$[]"](-1)));k(ee=Z.$_racc_evalact(ee,u)););},{$$s:O})},{$$s:this})}),Y(r,"$_racc_evalact",function(s,c){var u,ae,C=this,J=_,ne=_,oe=_,$e=_,re=_,le=_;if(J=null==(u=H(c))[0]?_:u[0],ne=null==u[1]?_:u[1],oe=null==u[3]?_:u[3],ae=null==u[11]?_:u[11],$e=null==u[12]?_:u[12],k(M(s,0))&&k(W(s,ae)))k(M(C.racc_error_status,0))&&(x(C.racc_t,1)||(C.racc_error_status=w(C.racc_error_status,1))),C.racc_vstack.$push(C.racc_val),C.racc_state.$push(s),C.racc_read_next=!0,k(C.yydebug)&&(C.racc_tstack.$push(C.racc_t),C.$racc_shift(C.racc_t,C.racc_tstack,C.racc_vstack));else if(k(W(s,0))&&k(M(s,$e["$-@"]()))){if(re=X(C,"catch",["racc_jump"],function ee(){var A=null==ee.$$s?this:ee.$$s;return null==A.racc_state&&(A.racc_state=_),A.racc_state.$push(A.$_racc_do_reduce(c,s)),!1},{$$s:C}),k(re))switch(re){case 1:return C.racc_user_yyerror=!0,$e["$-@"]();case 2:return ae;default:C.$raise("[Racc Bug] unknown jump code")}}else if(x(s,ae))k(C.yydebug)&&C.$racc_accept(),C.$throw("racc_end_parse",C.racc_vstack["$[]"](0));else{if(x(s,$e["$-@"]())){switch(C.racc_error_status){case 0:k(c["$[]"](21))||C.$on_error(C.racc_t,C.racc_val,C.racc_vstack);break;case 3:x(C.racc_t,0)&&C.$throw("racc_end_parse",_),C.racc_read_next=!0}for(C.racc_user_yyerror=!1,C.racc_error_status=3;k(!0)&&!(k(le=oe["$[]"](C.racc_state["$[]"](-1)))&&(le=U(le,1),k(q(le,0))&&k(s=J["$[]"](le))&&x(ne["$[]"](le),C.racc_state["$[]"](-1))));)k(I(C.racc_state.$size(),1))&&C.$throw("racc_end_parse",_),C.racc_state.$pop(),C.racc_vstack.$pop(),k(C.yydebug)&&(C.racc_tstack.$pop(),C.$racc_e_pop(C.racc_state,C.racc_tstack,C.racc_vstack));return s}C.$raise("[Racc Bug] unknown action "+s.$inspect())}return k(C.yydebug)&&C.$racc_next_state(C.racc_state["$[]"](-1),C.racc_state),_}),Y(r,"$_racc_do_reduce",function(s,c){var u,$e,le,p,F,Z,ce,C=this,ne=_,se=_,oe=_,ae=_,re=_,ee=_,A=_,L=_,O=_,o=_,ie=_,ue=_,fe=_;return ne=null==(u=H(s))[4]?_:u[4],se=null==u[5]?_:u[5],oe=null==u[6]?_:u[6],ae=null==u[7]?_:u[7],$e=null==u[8]?_:u[8],re=null==u[9]?_:u[9],le=null==u[13]?_:u[13],ee=C.racc_state,A=C.racc_vstack,L=C.racc_tstack,O=D(c,-3),o=re["$[]"](O),p=re["$[]"](U(O,1)),F=re["$[]"](U(O,2)),Z=[],k(C.yydebug)&&(ie=L["$[]"](o["$-@"](),o)),ue=A["$[]"](o["$-@"](),o),k(C.yydebug)&&L["$[]="](o["$-@"](),o,Z),A["$[]="](o["$-@"](),o,Z),ee["$[]="](o["$-@"](),o,Z),k(le)?A.$push(C.$__send__(F,ue,A,ue["$[]"](0))):A.$push(C.$__send__(F,ue,A)),L.$push(p),k(C.yydebug)&&C.$racc_reduce(ie,p,L,A),ce=w(p,$e),k(O=ae["$[]"](ce))&&(O=U(O,ee["$[]"](-1)),k(q(O,0))&&k(fe=ne["$[]"](O))&&x(se["$[]"](O),ce))?fe:oe["$[]"](ce)}),Y(r,"$on_error",function(s,c,u){var C,N=this;return N.$raise(n("ParseError"),N.$sprintf("\nparse error on value %s (%s)",c.$inspect(),k(C=N.$token_to_str(s))?C:"?"))}),Y(r,"$yyerror",function(){return this.$throw("racc_jump",1)}),Y(r,"$yyaccept",function(){return this.$throw("racc_jump",2)}),Y(r,"$yyerrok",y("racc_error_status",0)),Y(r,"$racc_read_token",function(s,c,u){var N=this;return N.racc_debug_out.$print("read    "),N.racc_debug_out.$print(c.$inspect(),"(",N.$racc_token2str(s),") "),N.racc_debug_out.$puts(u.$inspect()),N.racc_debug_out.$puts()}),Y(r,"$racc_shift",function(s,c,u){var N=this;return N.racc_debug_out.$puts("shift   "+N.$racc_token2str(s)),N.$racc_print_stacks(c,u),N.racc_debug_out.$puts()}),Y(r,"$racc_reduce",function(s,c,u,N){var C=this,J=_;return(J=C.racc_debug_out).$print("reduce "),k(s["$empty?"]())?J.$print(" <none>"):X(s,"each",[],function ne(se){return null==se&&(se=_),J.$print(" ",(null==ne.$$s?this:ne.$$s).$racc_token2str(se))},{$$s:C}),J.$puts(" --\x3e "+C.$racc_token2str(c)),C.$racc_print_stacks(u,N),C.racc_debug_out.$puts()}),Y(r,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),Y(r,"$racc_e_pop",function(s,c,u){var N=this;return N.racc_debug_out.$puts("error recovering mode: pop token"),N.$racc_print_states(s),N.$racc_print_stacks(c,u),N.racc_debug_out.$puts()}),Y(r,"$racc_next_state",function(s,c){var u=this;return u.racc_debug_out.$puts("goto    "+s),u.$racc_print_states(c),u.racc_debug_out.$puts()}),Y(r,"$racc_print_stacks",function(s,c){var N=_;return(N=this.racc_debug_out).$print("        ["),X(s,"each_index",[],function C(J){return null==J&&(J=_),N.$print(" (",(null==C.$$s?this:C.$$s).$racc_token2str(s["$[]"](J))," ",c["$[]"](J).$inspect(),")")},{$$s:this}),N.$puts(" ]")}),Y(r,"$racc_print_states",function(s){var u=_;return(u=this.racc_debug_out).$print("        ["),X(s,"each",[],function(C){return null==C&&(C=_),u.$print(" ",C)}),u.$puts(" ]")}),Y(r,"$racc_token2str",function(s){var u;return k(u=b(this.$class(),"Racc_token_to_s_table")["$[]"](s))?u:this.$raise("[Racc Bug] can't convert token "+s+" to string")}),Y(r,"$token_to_str",function(s){return b(this.$class(),"Racc_token_to_s_table")["$[]"](s)})}(z[0],z)},Opal.modules.strscan=function(a){var x,q,M,w,I,V=a.def,k=a.truthy,j=a.eqeqeq,B=a.Opal,E=a.return_ivar,W=a.send,Y=a.alias,H=[],X=a.nil;return x=H,M=[q=(0,a.klass)(H[0],null,"StringScanner")].concat(x),w=a.$r(M),(I=q.$$prototype).pos=I.string=I.working=I.matched=I.prev_pos=I.match=X,q.$attr_reader("pos","matched"),V(q,"$initialize",function(y){var g=this;return g.string=y,g.pos=0,g.matched=X,g.working=y,g.match=[]}),q.$attr_reader("string"),V(q,"$beginning_of_line?",function(){var y=this;return 0===y.pos||"\n"===y.string.charAt(y.pos-1)}),V(q,"$scan",function(y){var g=this,z=(y=g.$anchor(y)).exec(g.working);return null==z?g.matched=X:(g.prev_pos=g.pos,g.pos+=z[0].length,g.working=g.working.substring(z[0].length),g.matched=z[0],g.match=z,z[0])}),V(q,"$scan_until",function(y){var g=this;y=g.$anchor(y);for(var z=g.working,R=0;z.length!=R;++R){var _=y.exec(z.substr(R));if(null!==_){var b=R+_[0].length,f=z.substr(0,b);return g.matched=_[0],g.match=_,g.prev_pos=g.pos+R,g.pos+=b,g.working=z.substr(b),f}}return g.matched=X}),V(q,"$[]",function(y){var z;if(k(this.match["$empty?"]()))return X;j(w("Symbol"),z=y)?y=y.$to_s():j(w("String"),z)||(y=B["$coerce_to!"](y,w("Integer"),"to_int"));var R=this.match;return y<0&&(y+=R.length),y<0||y>=R.length||null==R[y]?X:R[y]}),V(q,"$check",function(y){var g=this,z=(y=g.$anchor(y)).exec(g.working);return g.matched=null==z?X:z[0]}),V(q,"$check_until",function(y){var g=this,z=g.prev_pos,R=g.pos,_=g.working,b=g.$scan_until(y);return g.prev_pos=z,g.pos=R,g.working=_,b}),V(q,"$peek",function(y){return this.working.substring(0,y)}),V(q,"$eos?",function(){return 0===this.working.length}),V(q,"$exist?",function(y){var z=y.exec(this.working);return null==z?X:0==z.index?0:z.index+1}),V(q,"$skip",function(y){var g=this,z=(y=g.$anchor(y)).exec(g.working);if(null==z)return g.match=[],g.matched=X;var R=z[0],_=R.length;return g.matched=R,g.match=z,g.prev_pos=g.pos,g.pos+=_,g.working=g.working.substring(_),_}),V(q,"$skip_until",function(y){var z=this.$scan_until(y);return z===X?X:(this.matched=z.substr(-1),z.length)}),V(q,"$get_byte",function(){var y=this,g=X;return y.pos<y.string.length?(y.prev_pos=y.pos,y.pos+=1,g=y.matched=y.working.substring(0,1),y.working=y.working.substring(1)):y.matched=X,g}),V(q,"$match?",function(y){var g=this,z=(y=g.$anchor(y)).exec(g.working);return null==z?X:(g.prev_pos=g.pos,z[0].length)}),V(q,"$pos=",function(y){var g=this;return y<0&&(y+=g.string.$length()),g.pos=y,g.working=g.string.slice(y)}),V(q,"$matched_size",function(){return this.matched===X?X:this.matched.length}),V(q,"$post_match",function(){var y=this;return y.matched===X?X:y.string.substr(y.pos)}),V(q,"$pre_match",function(){var y=this;return y.matched===X?X:y.string.substr(0,y.prev_pos)}),V(q,"$reset",function(){var y=this;return y.working=y.string,y.matched=X,y.pos=0}),V(q,"$rest",E("working")),V(q,"$rest?",function(){return 0!==this.working.length}),V(q,"$rest_size",function(){return this.$rest().$size()}),V(q,"$terminate",function(){var y,g=this;return g.match=X,y=[g.string.$length()],W(g,"pos=",y),y[y.length-1]}),V(q,"$unscan",function(){var y=this;return y.pos=y.prev_pos,y.prev_pos=X,y.match=X,y}),Y(q,"bol?","beginning_of_line?"),Y(q,"getch","get_byte"),q.$private(),V(q,"$anchor",function(y){var g=y.toString().match(/\/([^\/]+)$/);return g=g?g[1]:void 0,new RegExp("^(?:"+y.source+")",g)})},Opal.modules["bcdice/common_command/lexer"]=function(a){var K,M,g,z,R,_,I,x,P=a.module,V=a.klass,k=a.const_set,j=a.hash2,B=a.truthy,E=a.def,W=a.top,Y=[],H=a.nil;return W.$require("strscan"),W.$require("bcdice/normalize"),K=Y,M=x=[P(Y[0],"BCDice")].concat(K),g=I=[P(x[0],"CommonCommand")].concat(M),R=[z=V(I[0],null,"Lexer")].concat(g),_=a.$r(R),z.$$prototype.scanner=H,k(R[0],"SYMBOLS",j(["+","-","*","/","(",")","[","]","?","@"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","[":"BRACKETL","]":"BRACKETR","?":"QUESTION","@":"AT"}).$freeze()),E(z,"$initialize",function(T){var S;return T=B(S=T.$split(" ",2).$first())?S:"",this.scanner=_("StringScanner").$new(T)}),E(z,"$next_token",function(){var T=this,v=H,S=H,d=H,m=H;return B(T.scanner["$eos?"]())?[!1,"$"]:B(v=T.scanner.$scan(/\d+/))?["NUMBER",v.$to_i()]:B(S=T.scanner.$scan(/[<>!=]+/))?["CMP_OP",_("Normalize").$comparison_operator(S)]:(d=T.scanner.$getch().$upcase(),[B(m=_("SYMBOLS")["$[]"](d))?m:d.$to_sym(),d])}),E(z,"$source",function(){return this.scanner.$string()})},Opal.modules.singleton=function(a){var K,w,I,D,y,U,x,q,P=a.module,V=a.def,k=a.send2,j=a.find_super,B=a.send,E=a.truthy,W=a.defs,Y=[],H=a.nil;return K=Y,x=[U=P(Y[0],"Singleton")].concat(K),q=a.$r(x),V(U,"$clone",function(){return this.$raise(q("TypeError"),"can't clone instance of singleton "+this.$class())}),V(U,"$dup",function(){return this.$raise(q("TypeError"),"can't dup instance of singleton "+this.$class())}),w=x,D=[I=P(x[0],"SingletonClassMethods")].concat(w),y=a.$r(D),V(I,"$clone",function g(){var z=g.$$p||H;return g.$$p=null,y("Singleton").$__init__(k(this,j(this,"clone",g,!1,!0),"clone",[],z))}),V(I,"$inherited",function g(z){var R=g.$$p||H;return g.$$p=null,k(this,j(this,"inherited",g,!1,!0),"inherited",[z],R),y("Singleton").$__init__(z)}),function(M,w){var I=[M].concat(w),D=a.$r(I);return V(M,"$__init__",function(g){return B(g,"instance_eval",[],function R(){return(null==R.$$s?this:R.$$s).singleton__instance__=H},{$$s:this}),W(g,"$instance",function(){var _=this;return null==_.singleton__instance__&&(_.singleton__instance__=H),E(_.singleton__instance__)?_.singleton__instance__:_.singleton__instance__=_.$new()}),g}),V(M,"$included",function y(g){var z=y.$$p||H;return y.$$p=null,k(this,j(this,"included",y,!1,!0),"included",[g],z),g.$extend(D("SingletonClassMethods")),D("Singleton").$__init__(g)})}(a.get_singleton_class(q("Singleton")),x)},Opal.modules["bcdice/common_command/add_dice/node"]=function(a){var f,d,$,t,C,J,ne,se,oe,s,c,e,m,v,P=a.module,V=a.klass,k=a.def,j=a.rb_plus,B=a.thrower,E=a.truthy,W=a.rb_le,Y=a.send,H=a.return_val,X=a.alias,K=a.return_ivar,U=a.send2,x=a.find_super,q=a.const_set,M=a.eqeqeq,w=a.rb_divide,I=a.assign_ivar,D=a.not,y=a.neqeq,z=[],R=a.nil,_=a.$$$;return a.top.$require("singleton"),f=z,d=v=[P(z[0],"BCDice")].concat(f),$=m=[P(v[0],"CommonCommand")].concat(d),t=e=[P(m[0],"AddDice")].concat($),s=[P(e[0],"Node")].concat(t),c=a.$r(s),C=s,ne=[J=V(s[0],null,"Command")].concat(C),se=a.$r(ne),(oe=J.$$prototype).lhs=oe.rhs=oe.cmp_op=R,J.$attr_reader("lhs"),J.$attr_reader("cmp_op"),J.$attr_reader("rhs"),k(J,"$initialize",function($e,re,le,ee){var A=this;return null==le&&(le=R),null==ee&&(ee=R),A.secret=$e,A.lhs=re,A.cmp_op=le,A.rhs=ee},-3),k(J,"$expr",function($e){try{var le;return B("eval_return"),j(j(this.lhs.$expr($e),this.$cmp_op_text()),(le=this.rhs,le===R||null==le?R:le.$eval($e,R)).$to_s())}catch(A){if(A===a.t_eval_return)return A.$v;throw A}}),k(J,"$s_exp",function(){var $e=this;return E($e.cmp_op)?"(Command ("+$e.cmp_op+" "+$e.lhs.$s_exp()+" "+$e.rhs.$s_exp()+"))":"(Command "+$e.lhs.$s_exp()+")"}),k(J,"$eval",function($e,re){try{B("eval_return");var ee,F,A=this,L=R,O=R,o=R,p=R,Z=R;return re=se("Randomizer").$new(re,$e),L=A.lhs.$eval($e,re),O=E(W(re.$rand_results().$size(),1))&&E(A.lhs["$is_a?"](_(se("Node"),"DiceRoll")))?R:A.lhs.$output(),o=E(A.cmp_op)?(p=A.rhs.$eval($e,R),$e.$check_result(L,re.$rand_results(),A.cmp_op,p)):R,o=E(F=o)?F:se("Result").$new(),Z=["("+A.$expr($e)+")",O,L,(ee=o,ee===R||null==ee?R:ee.$text())].$compact(),Y(o,"tap",[],function ie(ue){var ce,fe=null==ie.$$s?this:ie.$$s;return null==fe.secret&&(fe.secret=R),null==ue&&(ue=R),ue["$secret="](fe.secret),ce=[Z.$join(" \uff1e ")],Y(ue,"text=",ce),ce[ce.length-1]},{$$s:A})}catch(ie){if(ie===a.t_eval_return)return ie.$v;throw ie}}),J.$private(),k(J,"$cmp_op_text",function(){switch(this.cmp_op){case"!=":return"<>";case"==":return"=";default:return this.cmp_op.$to_s()}}),function(u,N,C){var J=V(u,null,"UndecidedTarget"),ne=[J].concat(C),se=a.$r(ne);J.$include(se("Singleton")),k(J,"$eval",H("?")),k(J,"$include_dice?",H(!1)),k(J,"$expr",H("?")),k(J,"$output",H("?")),X(J,"s_exp","output")}(s[0],0,s),function(u,N){var C=V(u,null,"BinaryOp"),J=C.$$prototype;J.lhs=J.rhs=J.op=R,k(C,"$initialize",function(se,oe,ae){return this.lhs=se,this.op=oe,this.rhs=ae}),k(C,"$eval",function(se,oe){try{var re,le;return B("eval_return"),re=this.lhs.$eval(se,oe),le=this.rhs.$eval(se,oe),this.$calc(re,le,se.$round_type()).$to_i()}catch(ee){if(ee===a.t_eval_return)return ee.$v;throw ee}}),k(C,"$include_dice?",function(){var oe;return E(oe=this.lhs["$include_dice?"]())?oe:this.rhs["$include_dice?"]()}),k(C,"$expr",function(se){var ae,$e;return ae=this.lhs.$expr(se),$e=this.rhs.$expr(se),""+ae+this.op+$e}),k(C,"$output",function(){return""+this.lhs.$output()+this.op+this.rhs.$output()}),k(C,"$s_exp",function(){return"("+this.$op_for_s_exp()+" "+this.lhs.$s_exp()+" "+this.rhs.$s_exp()+")"}),C.$private(),k(C,"$calc",function(se,oe,ae){return se.$send(this.op,oe).$to_i()}),k(C,"$op_for_s_exp",K("op"))}(s[0]),function(u,N,C){var J=V(u,N,"DivideBase"),ne=[J].concat(C),se=a.$r(ne);J.$$prototype.op=R,k(J,"$initialize",function ae($e,re){return ae.$$p=null,U(this,x(this,"initialize",ae,!1,!0),"initialize",[$e,"/",re],null)}),k(J,"$expr",function ae($e){return ae.$$p=null,""+U(this,x(this,"expr",ae,!1,!0),"expr",[$e],null)+this.$rounding_method()}),k(J,"$output",function ae(){var $e=ae.$$p||R;return ae.$$p=null,""+U(this,x(this,"output",ae,!1,!0),"output",[],$e)+this.$rounding_method()}),J.$private(),k(J,"$rounding_method",function(){return _(this.$class(),"ROUNDING_METHOD")}),k(J,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),k(J,"$calc",function($e,re,le){return E(re["$zero?"]())?1:this.$divide_and_round($e,re,le).$to_i()}),k(J,"$divide_and_round",function($e,re,le){return this.$raise(se("NotImplementedError"))})}(s[0],c("BinaryOp"),s),function(u,N,C){var J=V(u,N,"DivideWithGameSystemDefault"),ne=[J].concat(C),se=a.$r(ne);q(ne[0],"ROUNDING_METHOD",""),J.$private(),k(J,"$divide_and_round",function(ae,$e,re){var le,ee=R;return M(_(se("RoundType"),"CEIL"),le=re)?w(ae.$to_f(),$e).$ceil():M(_(se("RoundType"),"ROUND"),le)?(ee=w(ae.$to_f(),$e),E(ee["$negative?"]())?ee.$abs().$round()["$-@"]():ee.$round()):w(ae,$e).$floor()})}(s[0],c("DivideBase"),s),function(u,N,C){var J=V(u,N,"DivideWithRoundingUp"),ne=[J].concat(C);q(ne[0],"ROUNDING_METHOD","U"),J.$private(),k(J,"$divide_and_round",function(oe,ae,$e){return w(oe.$to_f(),ae).$ceil()})}(s[0],c("DivideBase"),s),function(u,N,C){var J=V(u,N,"DivideWithRoundingOff"),ne=[J].concat(C);q(ne[0],"ROUNDING_METHOD","R"),J.$private(),k(J,"$divide_and_round",function(oe,ae,$e){var re=R;return re=w(oe.$to_f(),ae),E(re["$negative?"]())?re.$abs().$round()["$-@"]():re.$round()})}(s[0],c("DivideBase"),s),function(u,N,C){var J=V(u,N,"DivideWithRoundingDown"),ne=[J].concat(C);q(ne[0],"ROUNDING_METHOD","F"),J.$private(),k(J,"$divide_and_round",function(oe,ae,$e){return w(oe,ae).$floor()})}(s[0],c("DivideBase"),s),function(u,N){var C=V(u,null,"Negate");C.$$prototype.body=R,C.$attr_reader("body"),k(C,"$initialize",I("body")),k(C,"$eval",function(se,oe){try{return B("eval_return"),this.body.$eval(se,oe).$to_i()["$-@"]()}catch(re){if(re===a.t_eval_return)return re.$v;throw re}}),k(C,"$include_dice?",function(){return this.body["$include_dice?"]()}),k(C,"$expr",function(se){return"-"+this.body.$expr(se)}),k(C,"$output",function(){return"-"+this.body.$output()}),k(C,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(s[0]),function(u,N){var C=V(u,null,"DiceRoll"),J=C.$$prototype;J.times=J.sides=R,k(C,"$initialize",function(se,oe){return this.times=se,this.sides=oe,this.text=R}),k(C,"$eval",function(se,oe){try{B("eval_return");var re,le,ee=R,A=R;return re=this.times.$eval(se,R),le=this.$eval_sides(se),A=(ee=oe.$roll(re,le)).$sum(),this.text=A+"["+ee.$join(",")+"]",A.$to_i()}catch(L){if(L===a.t_eval_return)return L.$v;throw L}}),k(C,"$include_dice?",H(!0)),k(C,"$expr",function(se){try{return B("eval_return"),this.times.$eval(se,R)+"D"+this.$eval_sides(se)}catch(le){if(le===a.t_eval_return)return le.$v;throw le}}),k(C,"$output",K("text")),k(C,"$s_exp",function(){return"(DiceRoll "+this.times.$s_exp()+" "+this.sides.$s_exp()+")"}),C.$private(),k(C,"$eval_sides",function(se){try{return B("eval_return"),this.sides.$eval(se,R)}catch($e){if($e===a.t_eval_return)return $e.$v;throw $e}})}(s[0]),function(u,N){var C=V(u,N,"ImplicitSidesDiceRoll");C.$$prototype.times=R,k(C,"$initialize",function(se){return this.times=se,this.text=R}),k(C,"$s_exp",function(){return"(ImplicitSidesDiceRoll "+this.times.$s_exp()+")"}),C.$private(),k(C,"$eval_sides",function(se){return se.$sides_implicit_d()})}(s[0],c("DiceRoll")),function(u,N,C){var J=V(u,null,"DiceRollWithFilter"),ne=[J].concat(C),se=a.$r(ne),oe=J.$$prototype;oe.times=oe.n_filtering=oe.filter=oe.sides=R,q(ne[0],"Filter",se("Struct").$new("abbr","apply")),q(ne[0],"KEEP_HIGHEST",se("Filter").$new("KH",Y(J,"lambda",[],function($e,re){return null==$e&&($e=R),null==re&&(re=R),$e.$reverse().$take(re)})).$freeze()),q(ne[0],"KEEP_LOWEST",se("Filter").$new("KL",Y(J,"lambda",[],function($e,re){return null==$e&&($e=R),null==re&&(re=R),$e.$take(re)})).$freeze()),q(ne[0],"DROP_HIGHEST",se("Filter").$new("DH",Y(J,"lambda",[],function($e,re){return null==$e&&($e=R),null==re&&(re=R),$e.$reverse().$drop(re)})).$freeze()),q(ne[0],"DROP_LOWEST",se("Filter").$new("DL",Y(J,"lambda",[],function($e,re){return null==$e&&($e=R),null==re&&(re=R),$e.$drop(re)})).$freeze()),k(J,"$initialize",function($e,re,le,ee){var A=this;return y(re,"implicit")&&D(re["$respond_to?"]("eval"))&&A.$raise(se("TypeError"),"sides must be a Node or :implicit ("+re.$inspect()+")"),A.times=$e,A.sides=re,A.n_filtering=le,A.filter=ee,A.text=R}),k(J,"$eval",function($e,re){try{B("eval_return");var A,L,O,ee=this,o=R,p=R;return A=ee.times.$eval($e,R),L=ee.$eval_sides($e),O=ee.n_filtering.$eval($e,R),o=re.$roll(A,L).$sort(),p=ee.filter.$apply()["$[]"](o,O).$sum(),ee.text=p+"["+o.$join(",")+"]",p.$to_i()}catch(F){if(F===a.t_eval_return)return F.$v;throw F}}),k(J,"$include_dice?",H(!0)),k(J,"$implicit_sides?",function(){return this.sides["$=="]("implicit")}),k(J,"$expr",function($e){try{var ee,A,L;return B("eval_return"),ee=this.times.$eval($e,R),A=this.$eval_sides($e),L=this.n_filtering.$eval($e,R),ee+"D"+A+this.filter.$abbr()+L}catch(O){if(O===a.t_eval_return)return O.$v;throw O}}),k(J,"$output",K("text")),k(J,"$s_exp",function(){var re,$e=this;return re=E($e["$implicit_sides?"]())?$e.sides.$inspect():$e.sides.$s_exp(),"(DiceRollWithFilter "+$e.times.$s_exp()+" "+re+" "+$e.filter.$abbr().$inspect()+" "+$e.n_filtering.$s_exp()+")"}),J.$private(),k(J,"$eval_sides",function($e){try{return B("eval_return"),E(this["$implicit_sides?"]())?$e.$sides_implicit_d():this.sides.$eval($e,R)}catch(ee){if(ee===a.t_eval_return)return ee.$v;throw ee}})}(s[0],0,s),function(u,N){var C=V(u,null,"Parenthesis");C.$$prototype.expr=R,k(C,"$initialize",I("expr")),k(C,"$eval",function(se,oe){try{return B("eval_return"),this.expr.$eval(se,oe).$to_i()}catch(re){if(re===a.t_eval_return)return re.$v;throw re}}),k(C,"$include_dice?",function(){return this.expr["$include_dice?"]()}),k(C,"$expr",function(se){return"("+this.expr.$expr(se)+")"}),k(C,"$output",function(){return"("+this.expr.$output()+")"}),k(C,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(s[0]),function(u,N,C){var J=V(u,null,"Number"),ne=[J].concat(C),se=a.$r(ne);return J.$$prototype.literal=R,J.$attr_reader("literal"),k(J,"$initialize",function($e){return this.literal=$e.$to_i()}),k(J,"$negate",function(){return se("Number").$new(this.literal["$-@"]())}),k(J,"$eval",function($e,re){return this.literal.$to_i()}),k(J,"$include_dice?",H(!1)),k(J,"$expr",function($e){return this.literal.$to_s()}),k(J,"$output",function(){return this.literal.$to_s()}),X(J,"s_exp","output")}(s[0],0,s)},Opal.modules["bcdice/common_command/add_dice/parser"]=function(a){var y,_,v,$,t,i,s,c,u,N,C,J,ne,ae,r,e,n,d,G,f,z,P=a.module,V=a.klass,k=a.defs,j=a.def,B=a.truthy,E=a.eqeq,W=a.hash,Y=a.const_set,H=a.to_ary,X=a.not,K=a.return_val,U=a.neqeq,x=a.hash2,q=a.top,M=[],w=a.nil,I=a.$$$;return q.$require("racc/parser.rb"),q.$require("bcdice/common_command/lexer"),q.$require("bcdice/common_command/add_dice/node"),y=M,_=z=[P(M[0],"BCDice")].concat(y),v=f=[P(z[0],"CommonCommand")].concat(_),d=[P(f[0],"AddDice")].concat(v),G=a.$r(d),$=d,e=[r=V(d[0],I(G("Racc"),"Parser"),"Parser")].concat($),n=a.$r(e),r.$$prototype.lexer=w,k(r,"$parse",function(A){return this.$new().$parse(A)}),j(r,"$parse",function(A){try{return this.lexer=n("Lexer").$new(A),this.$do_parse()}catch(O){if(!a.rescue(O,[n("ParseError")]))throw O;try{return w}finally{a.pop_exception()}}}),r.$private(),j(r,"$next_token",function(){return this.lexer.$next_token()}),j(r,"$expand_negate",function(A,L){if(B(L["$is_a?"](I(n("Node"),"Negate")))){if(E(A,"+"))return["-",L.$body()];if(E(A,"-"))return["+",L.$body()]}return[A,L]}),t=a.large_array_unpack("14,14,50,12,51,19,20,14,14,14,12,3,12,17,18,14,8,9,12,4,13,13,28,8,9,8,9,13,13,13,14,8,9,12,15,13,14,23,14,12,56,12,19,20,57,14,8,9,12,,13,,8,9,8,9,13,14,13,,12,8,9,14,16,13,-27,-27,19,20,-27,17,18,8,9,,42,13,,17,18,40,39,13,,38,-28,-28,40,39,-28,,38,45,47,44,46,52,53,54,55"),i=a.large_array_unpack("16,12,38,16,38,6,6,2,36,8,2,0,8,27,27,9,16,16,9,1,16,12,16,2,2,8,8,2,36,8,13,9,9,13,4,9,17,11,18,17,50,18,29,29,51,19,13,13,19,,13,,17,17,18,18,17,20,18,,20,19,19,23,5,19,23,23,30,30,23,25,25,20,20,,25,20,,5,5,24,24,23,,24,33,33,34,34,33,,34,32,32,32,32,39,39,40,40"),s=a.large_array_unpack("7,19,5,,34,61,-15,,7,13,,32,-1,28,,,-2,34,36,43,55,,,61,76,53,,-5,,22,48,,79,81,83,,6,,-8,90,92,,,,,,,,,,29,31,,,,,,"),c=a.large_array_unpack("-3,-41,-41,-4,-41,-1,-9,-12,-41,-41,-20,-26,-41,-41,-40,58,-41,-41,-41,-41,-41,-18,-19,-22,-24,-41,-2,-5,-6,-7,-8,-10,-13,-21,-41,-25,-37,-30,-41,-41,-41,-38,-39,-11,-14,-15,-16,-17,-23,-29,-41,-41,-33,-34,-35,-36,-31,-32"),u=[24,5,21,22,29,30,35,1,2,26,43,33,25,31,32,27,48,34,w,w,w,w,w,w,49],N=[9,3,6,6,5,5,11,1,2,4,7,9,3,6,6,3,11,10,w,w,w,w,w,w,9],C=[w,7,8,-1,-7,-13,-6,-22,w,-12,-6,-18,w,w,w],J=[w,w,w,w,w,6,7,w,10,11,w,w,36,37,41],ne=a.large_array_unpack("0,0,racc_error,2,26,_reduce_1,4,26,_reduce_2,0,27,_reduce_3,1,27,_reduce_4,1,29,_reduce_none,1,29,_reduce_6,3,28,_reduce_7,3,28,_reduce_8,1,28,_reduce_none,3,30,_reduce_10,4,30,_reduce_11,1,30,_reduce_none,0,32,_reduce_13,1,32,_reduce_14,1,32,_reduce_15,1,32,_reduce_16,1,32,_reduce_17,2,31,_reduce_18,2,31,_reduce_19,1,31,_reduce_none,3,33,_reduce_21,2,33,_reduce_22,4,33,_reduce_23,2,33,_reduce_24,3,33,_reduce_25,1,33,_reduce_none,0,35,_reduce_27,1,35,_reduce_28,2,36,_reduce_29,1,36,_reduce_30,3,39,_reduce_31,3,39,_reduce_32,2,37,_reduce_33,2,37,_reduce_34,2,37,_reduce_35,2,37,_reduce_36,1,38,_reduce_none,1,38,_reduce_none,3,34,_reduce_39,1,34,_reduce_40"),ae=W(!1,0,"error",1,"NUMBER",2,"CMP_OP",3,"S",4,"D",5,"K",6,"H",7,"L",8,"M",9,"A",10,"X",11,"I",12,"N",13,"U",14,"R",15,"F",16,"C",17,"PLUS",18,"MINUS",19,"ASTERISK",20,"SLASH",21,"PARENL",22,"PARENR",23,"QUESTION",24),Y(e[0],"Racc_arg",[t,i,c,s,u,N,J,C,25,ne,ae,58,41,!0]),Y(e[0],"Racc_token_to_s_table",a.large_array_unpack("$end,error,NUMBER,CMP_OP,S,D,K,H,L,M,A,X,I,N,U,R,F,C,PLUS,MINUS,ASTERISK,SLASH,PARENL,PARENR,QUESTION,$start,command,secret,add,target,mul,unary,round_type,dice,term,explicit_or_implicit_sides,filter,filter_type,filter_type_with_shorthand,filter_shorthand")),Y(e[0],"Racc_debug_parser",!1),j(r,"$_reduce_1",function(A,L,O){var o,Z,ie=w;return Z=null==(o=H(A))[0]?w:o[0],B((ie=null==o[1]?w:o[1])["$include_dice?"]())||this.$raise(n("ParseError")),I(n("Node"),"Command").$new(Z,ie)}),j(r,"$_reduce_2",function(A,L,O){var o,Z,ie=w,ue=w,ce=w;return Z=null==(o=H(A))[0]?w:o[0],ue=null==o[2]?w:o[2],ce=null==o[3]?w:o[3],(X((ie=null==o[1]?w:o[1])["$include_dice?"]())||B(ce["$include_dice?"]())||B(ue["$nil?"]()))&&this.$raise(n("ParseError")),I(n("Node"),"Command").$new(Z,ie,ue,ce)}),j(r,"$_reduce_3",K(!1)),j(r,"$_reduce_4",K(!0)),j(r,"$_reduce_6",function(A,L,O){return I(n("Node"),"UndecidedTarget").$instance()}),j(r,"$_reduce_7",function(A,L,O){var o,p,Z,ie,ue;return Z=A["$[]"](0),p=this.$expand_negate("+",A["$[]"](2)),ie=null==(o=H(p))[0]?w:o[0],ue=null==o[1]?w:o[1],I(n("Node"),"BinaryOp").$new(Z,ie,ue)}),j(r,"$_reduce_8",function(A,L,O){var o,p,Z,ie,ue;return Z=A["$[]"](0),p=this.$expand_negate("-",A["$[]"](2)),ie=null==(o=H(p))[0]?w:o[0],ue=null==o[1]?w:o[1],I(n("Node"),"BinaryOp").$new(Z,ie,ue)}),j(r,"$_reduce_10",function(A,L,O){var o,p;return o=A["$[]"](0),p=A["$[]"](2),I(n("Node"),"BinaryOp").$new(o,"*",p)}),j(r,"$_reduce_11",function(A,L,O){var o,p;return o=A["$[]"](0),p=A["$[]"](2),A["$[]"](3).$new(o,p)}),j(r,"$_reduce_13",function(A,L,O){return I(n("Node"),"DivideWithGameSystemDefault")}),j(r,"$_reduce_14",function(A,L,O){return I(n("Node"),"DivideWithRoundingDown")}),j(r,"$_reduce_15",function(A,L,O){return I(n("Node"),"DivideWithRoundingUp")}),j(r,"$_reduce_16",function(A,L,O){return I(n("Node"),"DivideWithRoundingUp")}),j(r,"$_reduce_17",function(A,L,O){return I(n("Node"),"DivideWithRoundingOff")}),j(r,"$_reduce_18",function(A,L,O){return A["$[]"](1)}),j(r,"$_reduce_19",function(A,L,O){var o=w;return o=A["$[]"](1),B(o["$is_a?"](I(n("Node"),"Negate")))?o.$body():I(n("Node"),"Negate").$new(o)}),j(r,"$_reduce_21",function(A,L,O){var p=w,F=w;return p=A["$[]"](0),F=A["$[]"](2),(B(p["$include_dice?"]())||B(F["$include_dice?"]()))&&this.$raise(n("ParseError")),I(n("Node"),"DiceRoll").$new(p,F)}),j(r,"$_reduce_22",function(A,L,O){var p=w;return p=A["$[]"](0),B(p["$include_dice?"]())&&this.$raise(n("ParseError")),I(n("Node"),"ImplicitSidesDiceRoll").$new(p)}),j(r,"$_reduce_23",function(A,L,O){var Z,p=w,F=w,ie=w;return p=A["$[]"](0),F=A["$[]"](2),Z=A["$[]"](3)["$[]"]("filter"),ie=A["$[]"](3)["$[]"]("n_filtering"),U(F,"implicit")&&B(F["$include_dice?"]())&&this.$raise(n("ParseError")),(B(p["$include_dice?"]())||B(ie["$include_dice?"]()))&&this.$raise(n("ParseError")),I(n("Node"),"DiceRollWithFilter").$new(p,F,ie,Z)}),j(r,"$_reduce_24",function(A,L,O){var p,F=w;return p=I(n("Node"),"Number").$new(1),F=A["$[]"](1),B(F["$include_dice?"]())&&this.$raise(n("ParseError")),B(F["$instance_of?"](I(n("Node"),"Number")))&&E(F.$literal(),66)&&this.$raise(n("ParseError")),I(n("Node"),"DiceRoll").$new(p,F)}),j(r,"$_reduce_25",function(A,L,O){var p,Z,o=this,F=w,ie=w;return p=I(n("Node"),"Number").$new(1),F=A["$[]"](1),Z=A["$[]"](2)["$[]"]("filter"),ie=A["$[]"](2)["$[]"]("n_filtering"),U(F,"implicit")&&B(F["$include_dice?"]())&&o.$raise(n("ParseError")),B(ie["$include_dice?"]())&&o.$raise(n("ParseError")),B(F["$instance_of?"](I(n("Node"),"Number")))&&E(F.$literal(),66)&&o.$raise(n("ParseError")),I(n("Node"),"DiceRollWithFilter").$new(p,F,ie,Z)}),j(r,"$_reduce_27",K("implicit")),j(r,"$_reduce_28",function(A,L,O){return A["$[]"](0)}),j(r,"$_reduce_29",function(A,L,O){return x(["filter","n_filtering"],{filter:A["$[]"](0),n_filtering:A["$[]"](1)})}),j(r,"$_reduce_30",function(A,L,O){return x(["filter","n_filtering"],{filter:A["$[]"](0),n_filtering:I(n("Node"),"Number").$new(1)})}),j(r,"$_reduce_31",function(A,L,O){return I(I(n("Node"),"DiceRollWithFilter"),"KEEP_HIGHEST")}),j(r,"$_reduce_32",function(A,L,O){return I(I(n("Node"),"DiceRollWithFilter"),"KEEP_LOWEST")}),j(r,"$_reduce_33",function(A,L,O){return I(I(n("Node"),"DiceRollWithFilter"),"KEEP_HIGHEST")}),j(r,"$_reduce_34",function(A,L,O){return I(I(n("Node"),"DiceRollWithFilter"),"KEEP_LOWEST")}),j(r,"$_reduce_35",function(A,L,O){return I(I(n("Node"),"DiceRollWithFilter"),"DROP_HIGHEST")}),j(r,"$_reduce_36",function(A,L,O){return I(I(n("Node"),"DiceRollWithFilter"),"DROP_LOWEST")}),j(r,"$_reduce_39",function(A,L,O){return I(n("Node"),"Parenthesis").$new(A["$[]"](1))}),j(r,"$_reduce_40",function(A,L,O){return I(n("Node"),"Number").$new(A["$[]"](0))}),j(r,"$_reduce_none",function(A,L,O){return A["$[]"](0)})},Opal.modules["bcdice/common_command/add_dice/randomizer"]=function(a){var K,M,y,b,f,T,v,S,z,I,x,P=a.module,V=a.klass,k=a.const_set,j=a.def,B=a.eqeq,E=a.send,W=a.truthy,Y=[],H=a.nil;return K=Y,M=x=[P(Y[0],"BCDice")].concat(K),y=I=[P(x[0],"CommonCommand")].concat(M),b=z=[P(I[0],"AddDice")].concat(y),T=[f=V(z[0],null,"Randomizer")].concat(b),v=a.$r(T),(S=f.$$prototype).game_system=S.rand_source=S.rand_results=H,f.$attr_reader("rand_results"),k(T[0],"RandResult",v("Struct").$new("sides","value")),j(f,"$initialize",function(G,m){var h=this;return h.rand_source=G,h.game_system=m,h.rand_results=[]}),j(f,"$roll",function(G,m){var r,h=this,$=H;return $=B(m,66)?E(v("Array"),"new",[G],function e(){var n=null==e.$$s?this:e.$$s;return null==n.rand_source&&(n.rand_source=H),null==n.game_system&&(n.game_system=H),n.rand_source.$roll_d66(n.game_system.$d66_sort_type())},{$$s:h}):B(m,9)&&W(h.game_system["$enabled_d9?"]())?E(v("Array"),"new",[G],function e(){var n=null==e.$$s?this:e.$$s;return null==n.rand_source&&(n.rand_source=H),n.rand_source.$roll_d9()},{$$s:h}):h.rand_source.$roll_barabara(G,m),W(h.game_system["$sort_add_dice?"]())&&$["$sort!"](),r=E($,"map",[],function(n){return null==n&&(n=H),v("RandResult").$new(m,n)}),h.rand_results.$concat(r),$})},Opal.modules["bcdice/common_command/add_dice"]=function(a){var H,x,I,g,R,_,D,y,M,K,P=a.module,V=a.const_set,k=a.thrower,j=a.def,B=a.top,E=[],W=a.nil;return B.$require("bcdice/normalize"),B.$require("bcdice/common_command/add_dice/parser"),B.$require("bcdice/common_command/add_dice/randomizer"),H=E,x=K=[P(E[0],"BCDice")].concat(H),I=M=[P(K[0],"CommonCommand")].concat(x),V((y=[D=P(M[0],"AddDice")].concat(I))[0],"PREFIX_PATTERN",/[+\-(]*(\d+|D\d+)/.$freeze()),R=[g=a.get_singleton_class(D)].concat(y),_=a.$r(R),j(g,"$eval",function(f,T,v){try{var d;return k("eval_return"),(d=_("Parser").$parse(f))===W||null==d?W:d.$eval(T,v)}catch(m){if(m===a.t_eval_return)return m.$v;throw m}})},Opal.modules["bcdice/common_command/reroll_dice/node"]=function(a){var D,R,T,G,e,n,t,i,s,h,S,b,g,P=a.module,V=a.klass,k=a.ensure_kwargs,j=a.get_kwarg,B=a.def,E=a.truthy,W=a.send,Y=a.thrower,H=a.rb_lt,X=a.rb_plus,K=a.rb_gt,U=a.eqeq,x=a.rb_le,q=a.rb_ge,M=[],w=a.nil;return D=M,R=g=[P(M[0],"BCDice")].concat(D),T=b=[P(g[0],"CommonCommand")].concat(R),G=S=[P(b[0],"RerollDice")].concat(T),e=h=[P(S[0],"Node")].concat(G),t=[n=V(h[0],null,"Command")].concat(e),i=a.$r(t),(s=n.$$prototype).cmp_op=s.reroll_cmp_op=s.target_number_node=s.reroll_threshold_node=s.notations=s.source=w,B(n,"$initialize",function(u){var N,C,J,ne,se,oe,ae,$e=this;return u=k(u),N=j(u,"secret"),C=j(u,"notations"),J=j(u,"source"),null==(ne=u.$$smap.cmp_op)&&(ne=w),null==(se=u.$$smap.target_number)&&(se=w),null==(oe=u.$$smap.reroll_cmp_op)&&(oe=w),null==(ae=u.$$smap.reroll_threshold)&&(ae=w),$e.secret=N,$e.notations=C,$e.cmp_op=ne,$e.target_number_node=se,$e.reroll_cmp_op=oe,$e.reroll_threshold_node=ae,$e.source=J}),B(n,"$eval",function(u,N){try{Y("eval_return");var J,ne,oe,ae,re,ee,A,O,se=this,$e=w,le=w,L=w,o=w,p=w,F=w,Z=w,ie=w;return oe=u.$round_type(),ae=E($e=se.cmp_op)?$e:u.$default_cmp_op(),re=E($e=E(le=se.reroll_cmp_op)?le:ae)?$e:">=",ee=E($e=(J=se.target_number_node)===w||null==J?w:J.$eval(oe))?$e:u.$default_target_number(),A=E($e=E(le=(ne=se.reroll_threshold_node)===w||null==ne?w:ne.$eval(oe))?le:u.$reroll_dice_reroll_threshold())?$e:ee,L=i("RerollCondition").$new(re,A),O=W(se.notations,"map",[],function(ce){return null==ce&&(ce=w),ce.$to_dice(oe)}),E(W(O,"all?",[],function(ce){return null==ce&&(ce=w),L["$valid?"](ce.$sides())}))?(p=(o=se.$roll(O,N,L,u["$sort_barabara_dice?"]())).$flatten(),F=o.$take(se.notations.$size()).$flatten().$count(1),Z=E(ae)?W(p,"count",[],function(ce){return null==ce&&(ce=w),ce.$send(ae,ee)}):0,ie=[se.$expr(oe,L,ae,ee),W(o,"map",[],function(ce){return null==ce&&(ce=w),ce.$join(",")}).$join(" + "),"\u6210\u529f\u6570"+Z,u.$grich_text(F,p.$size(),Z)].$compact(),se.$result_with_text(ie.$join(" \uff1e "))):se.$result_with_text(se.source+" \uff1e \u6761\u4ef6\u304c\u9593\u9055\u3063\u3066\u3044\u307e\u3059\u30022R6>=5 \u3042\u308b\u3044\u306f 2R6[5] \u306e\u3088\u3046\u306b\u632f\u308a\u8db3\u3057\u76ee\u6a19\u5024\u3092\u6307\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002")}catch(ue){if(ue===a.t_eval_return)return ue.$v;throw ue}}),n.$private(),B(n,"$roll",function(u,N,C,J){var ne=w,se=w,oe=w,ae=w,$e=w,re=w;for(ne=[],se=0;E(E(oe=u["$empty?"]()["$!"]())?H(se,i("REROLL_LIMIT")):oe);)ae=u.$shift(),se=X(se,1),$e=ae.$roll(N),E(J)&&$e["$sort!"](),ne.$push($e),re=W($e,"count",[],function(ee){return null==ee&&(ee=w),C["$reroll?"](ee)}),E(K(re,0))&&u.$push(i("Dice").$new(re,ae.$sides()));return ne}),B(n,"$expr",function(u,N,C,J){var se,oe,ae;return se=W(this.notations,"map",[],function(re){return null==re&&(re=w),re.$to_dice(u)}).$join("+"),oe=U(N.$cmp_op(),C)?"":i("Format").$comparison_operator(N.$cmp_op()),ae=i("Format").$comparison_operator(C),"("+se+"["+oe+N.$threshold()+"]"+ae+J+")"}),B(n,"$result_with_text",function(u){return W(i("Result").$new(),"tap",[],function C(J){var ne,se=null==C.$$s?this:C.$$s;return null==se.secret&&(se.secret=w),null==J&&(J=w),J["$secret="](se.secret),W(J,"text=",ne=[u]),ne[ne.length-1]},{$$s:this})}),function($,r){var e=V($,null,"RerollCondition"),n=e.$$prototype;n.threshold=n.cmp_op=w,e.$attr_reader("cmp_op"),e.$attr_reader("threshold"),B(e,"$initialize",function(i,s){return this.cmp_op=i,this.threshold=s}),B(e,"$valid?",function(i){var s=this;if(!E(s.threshold))return!1;switch(s.cmp_op){case"<=":return H(s.threshold,i);case"<":return x(s.threshold,i);case">=":return K(s.threshold,1);case">":return q(s.threshold,1);case"!=":return a.Range.$new(1,i,!1)["$include?"](s.threshold);default:return!0}}),B(e,"$reroll?",function(i){return i.$send(this.cmp_op,this.threshold)})}(h[0]),function($,r,e){var n=V($,null,"Notation"),t=[n].concat(e),i=a.$r(t),s=n.$$prototype;s.times=s.sides=w,B(n,"$initialize",function(u,N){return this.times=u,this.sides=N}),B(n,"$to_dice",function(u){try{var J,ne;return Y("eval_return"),J=this.times.$eval(u),ne=this.sides.$eval(u),i("Dice").$new(J,ne)}catch(se){if(se===a.t_eval_return)return se.$v;throw se}})}(h[0],0,h),function($,r){var e=V($,null,"Dice");return e.$attr_reader("times","sides"),B(e,"$initialize",function(t,i){return this.times=t,this.sides=i}),B(e,"$roll",function(t){return t.$roll_barabara(this.$times(),this.$sides())}),B(e,"$to_s",function(){return this.$times()+"R"+this.$sides()})}(h[0])},Opal.modules["bcdice/arithmetic/node"]=function(a){var y,_,v,$,r,d,G,f,z,P=a.module,V=a.klass,k=a.def,j=a.thrower,B=a.return_ivar,E=a.send2,W=a.find_super,Y=a.eqeq,H=a.const_set,X=a.eqeqeq,K=a.rb_divide,U=a.truthy,x=a.assign_ivar,q=a.alias,M=[],w=a.nil,I=a.$$$;return y=M,_=z=[P(M[0],"BCDice")].concat(y),v=f=[P(z[0],"Arithmetic")].concat(_),d=[P(f[0],"Node")].concat(v),G=a.$r(d),(r=($=V(d[0],null,"BinaryOp")).$$prototype).lhs=r.rhs=r.op=w,k($,"$initialize",function(n,t,i){var s=this;return s.lhs=n,s.op=t,s.rhs=i}),k($,"$eval",function(n){try{j("eval_return");var c,i=this,s=w;return s=i.lhs.$eval(n),c=i.rhs.$eval(n),s.$send(i.op,c)}catch(u){if(u===a.t_eval_return)return u.$v;throw u}}),k($,"$output",function(){var n=this;return""+n.lhs.$output()+n.op+n.rhs.$output()}),k($,"$s_exp",function(){var n=this;return"("+n.$op_for_s_exp()+" "+n.lhs.$s_exp()+" "+n.rhs.$s_exp()+")"}),k($,"$op_for_s_exp",B("op")),function(m,h,$){var r=V(m,h,"DivideBase"),e=[r].concat($),n=a.$r(e),t=r.$$prototype;t.lhs=t.rhs=t.op=w,k(r,"$initialize",function i(s,c){return i.$$p=null,E(this,W(this,"initialize",i,!1,!0),"initialize",[s,"/",c],null)}),k(r,"$eval",function(s){try{j("eval_return");var N,C,u=this;return N=u.lhs.$eval(s),C=u.rhs.$eval(s),Y(C,0)&&u.$raise(n("ZeroDivisionError")),u.$divide_and_round(N,C,s)}catch(J){if(J===a.t_eval_return)return J.$v;throw J}}),k(r,"$output",function i(){var s=i.$$p||w,c=this;return i.$$p=null,""+E(c,W(c,"output",i,!1,!0),"output",[],s)+c.$rounding_method()}),r.$private(),k(r,"$rounding_method",function(){return I(this.$class(),"ROUNDING_METHOD")}),k(r,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),k(r,"$divide_and_round",function(s,c,u){return this.$raise(n("NotImplementedError"))})}(d[0],G("BinaryOp"),d),function(m,h,$){var r=V(m,h,"DivideWithGameSystemDefault"),e=[r].concat($),n=a.$r(e);H(e[0],"ROUNDING_METHOD",""),r.$private(),k(r,"$divide_and_round",function(i,s,c){var u,N=w;return X(I(n("RoundType"),"CEIL"),u=c)?K(i.$to_f(),s).$ceil():X(I(n("RoundType"),"ROUND"),u)?(N=K(i.$to_f(),s),U(N["$negative?"]())?N.$abs().$round()["$-@"]():N.$round()):K(i,s).$floor()})}(d[0],G("DivideBase"),d),function(m,h,$){var r=V(m,h,"DivideWithCeil"),e=[r].concat($);H(e[0],"ROUNDING_METHOD","C"),r.$private(),k(r,"$divide_and_round",function(t,i,s){return K(t.$to_f(),i).$ceil()})}(d[0],G("DivideBase"),d),function(m,h,$){var r=V(m,h,"DivideWithRound"),e=[r].concat($);H(e[0],"ROUNDING_METHOD","R"),r.$private(),k(r,"$divide_and_round",function(t,i,s){var c=w;return c=K(t.$to_f(),i),U(c["$negative?"]())?c.$abs().$round()["$-@"]():c.$round()})}(d[0],G("DivideBase"),d),function(m,h,$){var r=V(m,h,"DivideWithFloor"),e=[r].concat($);H(e[0],"ROUNDING_METHOD","F"),r.$private(),k(r,"$divide_and_round",function(t,i,s){return K(t,i).$floor()})}(d[0],G("DivideBase"),d),function(m,h){var $=V(m,null,"Negative");$.$$prototype.body=w,k($,"$initialize",x("body")),k($,"$eval",function(n){try{return j("eval_return"),this.body.$eval(n)["$-@"]()}catch(s){if(s===a.t_eval_return)return s.$v;throw s}}),k($,"$output",function(){return"-"+this.body.$output()}),k($,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(d[0]),function(m,h){var $=V(m,null,"Parenthesis");$.$$prototype.expr=w,k($,"$initialize",x("expr")),k($,"$eval",function(n){try{return j("eval_return"),this.expr.$eval(n)}catch(s){if(s===a.t_eval_return)return s.$v;throw s}}),k($,"$output",function(){return"("+this.expr.$output()+")"}),k($,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(d[0]),function(m,h){var $=V(m,null,"Number");return $.$$prototype.value=w,k($,"$initialize",x("value")),k($,"$eval",B("value")),k($,"$output",function(){return this.value.$to_s()}),q($,"s_exp","output")}(d[0])},Opal.modules["bcdice/common_command/barabara_dice/parser"]=function(a){var w,g,b,G,r,e,n,t,i,s,c,u,N,ne,m,h,$,T,v,R,D,P=a.module,V=a.klass,k=a.defs,j=a.def,B=a.hash,E=a.const_set,W=a.hash2,Y=a.return_val,H=a.to_ary,X=a.truthy,K=a.top,U=[],x=a.nil,q=a.$$$;return K.$require("racc/parser.rb"),K.$require("bcdice/common_command/lexer"),K.$require("bcdice/common_command/reroll_dice/node"),K.$require("bcdice/arithmetic/node"),w=U,g=D=[P(U[0],"BCDice")].concat(w),b=R=[P(D[0],"CommonCommand")].concat(g),T=[P(R[0],"BarabaraDice")].concat(b),v=a.$r(T),G=T,h=[m=V(T[0],q(v("Racc"),"Parser"),"Parser")].concat(G),$=a.$r(h),m.$$prototype.lexer=x,k(m,"$parse",function(re){return this.$new().$parse(re)}),j(m,"$parse",function(re){try{return this.lexer=$("Lexer").$new(re),this.$do_parse()}catch(ee){if(!a.rescue(ee,[$("ParseError")]))throw ee;try{return x}finally{a.pop_exception()}}}),m.$private(),j(m,"$next_token",function(){return this.lexer.$next_token()}),r=a.large_array_unpack("13,9,3,9,24,25,9,9,9,26,18,19,8,12,8,18,19,8,8,8,9,4,9,38,36,37,39,18,19,18,19,8,9,8,9,27,28,24,25,18,19,18,19,8,9,8,9,27,28,27,28,18,19,18,19,8,10,8,14"),e=a.large_array_unpack("5,2,0,8,15,15,13,14,12,15,8,8,2,5,8,12,12,13,14,12,18,1,19,34,34,34,34,18,18,19,19,18,24,19,25,16,16,21,21,24,24,25,25,24,27,25,28,31,31,32,32,27,27,28,28,27,4,28,7"),n=a.large_array_unpack("-6,21,-1,,56,-9,,55,1,,,,6,4,5,-5,24,,18,20,,28,,,30,32,,42,44,,,36,38,,19,,,,,"),t=a.large_array_unpack("-2,-25,-25,-3,-25,-4,-7,-25,-25,-24,40,-1,-25,-25,-25,-25,-11,-14,-25,-25,-22,-5,-6,-8,-25,-25,-23,-25,-25,-20,-21,-9,-10,-12,-15,-13,-16,-17,-18,-19"),i=[7,1,6,15,2,29,30,21,31,32,5,7,23,22,33,34,11,35],s=[7,1,6,5,2,9,9,5,8,8,3,7,7,6,9,9,4,10],c=[x,1,4,8,11,-5,0,-2,-16,-13,-17],u=[x,x,x,x,x,x,x,20,16,17,x],N=a.large_array_unpack("0,0,racc_error,3,24,_reduce_1,0,25,_reduce_2,1,25,_reduce_3,0,27,_reduce_4,2,27,_reduce_5,3,26,_reduce_6,1,26,_reduce_7,3,29,_reduce_8,3,28,_reduce_9,3,28,_reduce_10,1,28,_reduce_none,3,31,_reduce_12,4,31,_reduce_13,1,31,_reduce_none,0,33,_reduce_15,1,33,_reduce_16,1,33,_reduce_17,1,33,_reduce_18,1,33,_reduce_19,2,32,_reduce_20,2,32,_reduce_21,1,32,_reduce_none,3,30,_reduce_23,1,30,_reduce_24"),ne=B(!1,0,"error",1,"NUMBER",2,"B",3,"R",4,"U",5,"C",6,"F",7,"S",8,"PLUS",9,"MINUS",10,"ASTERISK",11,"SLASH",12,"PARENL",13,"PARENR",14,"BRACKETL",15,"BRACKETR",16,"LESS",17,"GREATER",18,"EQUAL",19,"NOT",20,"AT",21,"CMP_OP",22),E(h[0],"Racc_arg",[r,e,t,n,i,s,u,c,23,N,ne,40,25,!0]),E(h[0],"Racc_token_to_s_table",a.large_array_unpack("$end,error,NUMBER,B,R,U,C,F,S,PLUS,MINUS,ASTERISK,SLASH,PARENL,PARENR,BRACKETL,BRACKETR,LESS,GREATER,EQUAL,NOT,AT,CMP_OP,$start,expr,secret,notations,target,add,dice,term,mul,unary,round_type")),E(h[0],"Racc_debug_parser",!1),j(m,"$_reduce_1",function(re,le,ee){return q($("Node"),"Command").$new(W(["secret","notations","cmp_op","target_number"],{secret:re["$[]"](0),notations:re["$[]"](1),cmp_op:re["$[]"](2)["$[]"]("cmp_op"),target_number:re["$[]"](2)["$[]"]("target")}))}),j(m,"$_reduce_2",Y(!1)),j(m,"$_reduce_3",Y(!0)),j(m,"$_reduce_4",function(re,le,ee){return W([],{})}),j(m,"$_reduce_5",function(re,le,ee){var A,o,p;return p=null==(A=H(re))[1]?x:A[1],X(o=null==A[0]?x:A[0])||this.$raise($("ParseError")),W(["cmp_op","target"],{cmp_op:o,target:p})}),j(m,"$_reduce_6",function(re,le,ee){var A=x;return(A=re["$[]"](0)).$push(re["$[]"](2)),A}),j(m,"$_reduce_7",function(re,le,ee){return[re["$[]"](0)]}),j(m,"$_reduce_8",function(re,le,ee){var A,L;return A=re["$[]"](0),L=re["$[]"](2),q($("Node"),"Notation").$new(A,L)}),j(m,"$_reduce_9",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"BinaryOp").$new(re["$[]"](0),"+",re["$[]"](2))}),j(m,"$_reduce_10",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"BinaryOp").$new(re["$[]"](0),"-",re["$[]"](2))}),j(m,"$_reduce_12",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"BinaryOp").$new(re["$[]"](0),"*",re["$[]"](2))}),j(m,"$_reduce_13",function(re,le,ee){return re["$[]"](3).$new(re["$[]"](0),re["$[]"](2))}),j(m,"$_reduce_15",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),j(m,"$_reduce_16",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"DivideWithCeil")}),j(m,"$_reduce_17",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"DivideWithCeil")}),j(m,"$_reduce_18",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"DivideWithRound")}),j(m,"$_reduce_19",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"DivideWithFloor")}),j(m,"$_reduce_20",function(re,le,ee){return re["$[]"](1)}),j(m,"$_reduce_21",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"Negative").$new(re["$[]"](1))}),j(m,"$_reduce_23",function(re,le,ee){return re["$[]"](1)}),j(m,"$_reduce_24",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"Number").$new(re["$[]"](0))}),j(m,"$_reduce_none",function(re,le,ee){return re["$[]"](0)})},Opal.modules["bcdice/common_command/barabara_dice"]=function(a){var H,x,I,g,R,_,D,y,M,K,P=a.module,V=a.const_set,k=a.thrower,j=a.def,E=[],W=a.nil;return a.top.$require("bcdice/common_command/barabara_dice/parser"),H=E,x=K=[P(E[0],"BCDice")].concat(H),I=M=[P(K[0],"CommonCommand")].concat(x),V((y=[D=P(M[0],"BarabaraDice")].concat(I))[0],"PREFIX_PATTERN",/\d+B\d+/.$freeze()),R=[g=a.get_singleton_class(D)].concat(y),_=a.$r(R),j(g,"$eval",function(f,T,v){try{var d;return k("eval_return"),(d=_("Parser").$parse(f))===W||null==d?W:d.$eval(T,v)}catch(m){if(m===a.t_eval_return)return m.$v;throw m}})},Opal.modules["bcdice/result"]=function(a){var M,D,w,X,U,V=a.klass,k=a.send,j=a.def,B=a.return_val,E=a.return_ivar,W=[],Y=a.nil;return X=W,M=U=[(0,a.module)(W[0],"BCDice")].concat(X),[w=V(U[0],null,"Result")].concat(M),j(D=a.get_singleton_class(w),"$success",function(z){return k(this.$new(),"tap",[],function(b){var f;return null==b&&(b=Y),b["$text="](z),k(b,"success=",f=[!0]),f[f.length-1]})}),j(D,"$failure",function(z){return k(this.$new(),"tap",[],function(b){var f;return null==b&&(b=Y),b["$text="](z),k(b,"failure=",f=[!0]),f[f.length-1]})}),j(D,"$critical",function(z){return k(this.$new(),"tap",[],function(b){var f;return null==b&&(b=Y),b["$text="](z),b["$critical="](!0),k(b,"success=",f=[!0]),f[f.length-1]})}),j(D,"$fumble",function(z){return k(this.$new(),"tap",[],function(b){var f;return null==b&&(b=Y),b["$text="](z),b["$fumble="](!0),k(b,"failure=",f=[!0]),f[f.length-1]})}),j(D,"$nothing",B("nothing")),j(w,"$initialize",function(y){var g=this;return null==y&&(y=Y),g.text=y,g.rands=Y,g.detailed_rands=Y,g.secret=!1,g.success=!1,g.failure=!1,g.critical=!1,g.fumble=!1},-1),w.$attr_accessor("text","rands","detailed_rands"),w.$attr_writer("secret","success","failure","critical","fumble"),j(w,"$secret?",E("secret")),j(w,"$success?",E("success")),j(w,"$failure?",E("failure")),j(w,"$critical?",E("critical")),j(w,"$fumble?",E("fumble")),j(w,"$condition=",function(y){return this.success=y,this.failure=y["$!"]()})},Opal.modules["bcdice/common_command/tally_dice/node"]=function(a){var y,_,v,m,n,t,i,s,$,d,f,z,P=a.module,V=a.klass,k=a.const_set,j=a.ensure_kwargs,B=a.get_kwarg,E=a.def,W=a.truthy,Y=a.rb_gt,H=a.send,X=a.not,K=a.eqeq,U=a.hash2,x=a.thrower,q=a.alias,w=[],I=a.nil;return a.top.$require("bcdice/result"),y=w,_=z=[P(w[0],"BCDice")].concat(y),v=f=[P(z[0],"CommonCommand")].concat(_),m=d=[P(f[0],"TallyDice")].concat(v),n=$=[P(d[0],"Node")].concat(m),i=[t=V($[0],null,"Command")].concat(n),s=a.$r(i),t.$$prototype.notation=I,k(i[0],"MAX_SIDES",20),E(t,"$initialize",function(N){var C,J;return N=j(N),C=B(N,"secret"),J=B(N,"notation"),this.secret=C,this.notation=J}),E(t,"$eval",function(N,C){var ne=I,se=I,oe=I,ae=I,$e=I,re=I;return ne=this.notation.$to_dice(N.$round_type()),W(ne["$valid?"]())?W(Y(ne.$sides(),s("MAX_SIDES")))?s("Result").$new("("+ne+") \uff1e \u9762\u6570\u306f1\u4ee5\u4e0a\u3001"+s("MAX_SIDES")+"\u4ee5\u4e0b\u3068\u3057\u3066\u304f\u3060\u3055\u3044"):(se=ne.$roll(C),oe=(W(N["$sort_barabara_dice?"]())?se.$sort():se).$join(","),ae=H(H(se,"group_by",[],"itself".$to_proc()),"transform_values",[],"length".$to_proc()),$e=H(a.Range.$new(1,ne.$sides(),!1),"map",[],function(ee){var A;return null==ee&&(ee=I),A=ae.$fetch(ee,0),K(A,0)&&X(ne["$show_zeros?"]())?I:"["+ee+"]\xd7"+ae.$fetch(ee,0)}),re=["("+ne+")",oe,$e.$compact().$join(", ")].$compact(),H(s("Result").$new(),"tap",[],function le(ee){var A,L=null==le.$$s?this:le.$$s;return null==L.secret&&(L.secret=I),null==ee&&(ee=I),ee["$secret="](L.secret),A=[re.$join(" \uff1e ")],H(ee,"text=",A),A[A.length-1]},{$$s:this})):I}),function(r,e,n){var t=V(r,null,"Notation"),i=[t].concat(n),s=a.$r(i),c=t.$$prototype;c.times=c.sides=c.show_zeros=I,t.$attr_reader("times"),t.$attr_reader("sides"),t.$attr_reader("show_zeros"),E(t,"$initialize",function(N){var C,J,ne;return N=j(N),C=B(N,"times"),J=B(N,"sides"),ne=B(N,"show_zeros"),this.times=C,this.sides=J,this.show_zeros=ne}),E(t,"$to_dice",function(N){try{x("eval_return");var ne,se,J=this;return ne=J.times.$eval(N),se=J.sides.$eval(N),s("Dice").$new(U(["times","sides","show_zeros"],{times:ne,sides:se,show_zeros:J.show_zeros}))}catch(oe){if(oe===a.t_eval_return)return oe.$v;throw oe}})}($[0],0,$),function(r,e){var n=V(r,null,"Dice"),t=n.$$prototype;return t.times=t.sides=t.show_zeros=I,n.$attr_reader("times"),n.$attr_reader("sides"),n.$attr_reader("show_zeros"),q(n,"show_zeros?","show_zeros"),E(n,"$initialize",function(s){var c,u,N,C=this;return s=j(s),c=B(s,"times"),u=B(s,"sides"),N=B(s,"show_zeros"),C.times=c,C.sides=u,C.show_zeros=N}),E(n,"$valid?",function(){var c;return W(c=Y(this.times,0))?Y(this.sides,0):c}),E(n,"$roll",function(s){return s.$roll_barabara(this.times,this.sides)}),E(n,"$to_s",function(){var c,s=this;return c=W(s.show_zeros)?"Z":"Y",s.times+"T"+c+s.sides})}($[0])},Opal.modules["bcdice/common_command/tally_dice/parser"]=function(a){var q,D,R,S,h,$,r,e,n,t,i,s,c,C,d,G,m,b,f,g,w,P=a.module,V=a.klass,k=a.defs,j=a.def,B=a.hash,E=a.const_set,W=a.hash2,Y=a.return_val,H=a.top,X=[],K=a.nil,U=a.$$$;return H.$require("racc/parser.rb"),H.$require("bcdice/common_command/lexer"),H.$require("bcdice/common_command/tally_dice/node"),H.$require("bcdice/arithmetic/node"),q=X,D=w=[P(X[0],"BCDice")].concat(q),R=g=[P(w[0],"CommonCommand")].concat(D),b=[P(g[0],"TallyDice")].concat(R),f=a.$r(b),S=b,G=[d=V(b[0],U(f("Racc"),"Parser"),"Parser")].concat(S),m=a.$r(G),d.$$prototype.lexer=K,k(d,"$parse",function(ae){return this.$new().$parse(ae)}),j(d,"$parse",function(ae){try{return this.lexer=m("Lexer").$new(ae),this.$do_parse()}catch(re){if(!a.rescue(re,[m("ParseError")]))throw re;try{return K}finally{a.pop_exception()}}}),d.$private(),j(d,"$next_token",function(){return this.lexer.$next_token()}),h=a.large_array_unpack("8,8,18,19,20,21,8,8,8,22,14,15,3,7,7,14,15,14,15,7,7,7,8,4,8,35,33,34,36,8,9,14,15,14,15,7,8,7,14,15,23,24,7,23,24,14,15,23,24,7,10"),$=a.large_array_unpack("2,7,10,10,11,11,14,17,15,11,7,7,0,2,7,14,14,15,15,14,17,15,20,1,21,31,31,31,31,23,4,20,20,21,21,20,24,21,23,23,12,12,23,28,28,24,24,29,29,24,6"),r=a.large_array_unpack("2,23,-2,,30,,47,-1,,,-2,-7,27,,4,6,,5,,,20,22,,27,34,,,,30,34,,19,,,,,"),e=a.large_array_unpack("-2,-23,-23,-3,-23,-1,-23,-23,-22,37,-23,-23,-9,-12,-23,-23,-20,-23,-5,-6,-23,-23,-21,-23,-23,-18,-19,-4,-7,-8,-10,-13,-11,-14,-15,-16,-17"),n=[6,25,26,12,1,2,5,17,11,32,30,31,K,K,K,27,28,29],t=[4,8,8,7,1,2,3,5,6,9,8,8,K,K,K,4,7,7],i=[K,4,5,4,-2,-3,1,-4,-13,-22],s=[K,K,K,K,16,K,K,K,13,K],c=a.large_array_unpack("0,0,racc_error,2,18,_reduce_1,0,19,_reduce_2,1,19,_reduce_3,4,20,_reduce_4,1,22,_reduce_5,1,22,_reduce_6,3,23,_reduce_7,3,23,_reduce_8,1,23,_reduce_none,3,24,_reduce_10,4,24,_reduce_11,1,24,_reduce_none,0,26,_reduce_13,1,26,_reduce_14,1,26,_reduce_15,1,26,_reduce_16,1,26,_reduce_17,2,25,_reduce_18,2,25,_reduce_19,1,25,_reduce_none,3,21,_reduce_21,1,21,_reduce_22"),C=B(!1,0,"error",1,"NUMBER",2,"T",3,"Y",4,"Z",5,"R",6,"U",7,"C",8,"F",9,"S",10,"PLUS",11,"MINUS",12,"ASTERISK",13,"SLASH",14,"PARENL",15,"PARENR",16),E(G[0],"Racc_arg",[h,$,e,r,n,t,s,i,17,c,C,37,23,!0]),E(G[0],"Racc_token_to_s_table",["$end","error","NUMBER","T","Y","Z","R","U","C","F","S","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","$start","expr","secret","notation","term","show_zeros","add","mul","unary","round_type"]),E(G[0],"Racc_debug_parser",!1),j(d,"$_reduce_1",function(ae,$e,re){return U(m("Node"),"Command").$new(W(["secret","notation"],{secret:ae["$[]"](0),notation:ae["$[]"](1)}))}),j(d,"$_reduce_2",Y(!1)),j(d,"$_reduce_3",Y(!0)),j(d,"$_reduce_4",function(ae,$e,re){return U(m("Node"),"Notation").$new(W(["times","sides","show_zeros"],{times:ae["$[]"](0),sides:ae["$[]"](3),show_zeros:ae["$[]"](2)}))}),j(d,"$_reduce_5",Y(!1)),j(d,"$_reduce_6",Y(!0)),j(d,"$_reduce_7",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"BinaryOp").$new(ae["$[]"](0),"+",ae["$[]"](2))}),j(d,"$_reduce_8",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"BinaryOp").$new(ae["$[]"](0),"-",ae["$[]"](2))}),j(d,"$_reduce_10",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"BinaryOp").$new(ae["$[]"](0),"*",ae["$[]"](2))}),j(d,"$_reduce_11",function(ae,$e,re){return ae["$[]"](3).$new(ae["$[]"](0),ae["$[]"](2))}),j(d,"$_reduce_13",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),j(d,"$_reduce_14",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"DivideWithCeil")}),j(d,"$_reduce_15",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"DivideWithCeil")}),j(d,"$_reduce_16",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"DivideWithRound")}),j(d,"$_reduce_17",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"DivideWithFloor")}),j(d,"$_reduce_18",function(ae,$e,re){return ae["$[]"](1)}),j(d,"$_reduce_19",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"Negative").$new(ae["$[]"](1))}),j(d,"$_reduce_21",function(ae,$e,re){return ae["$[]"](1)}),j(d,"$_reduce_22",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"Number").$new(ae["$[]"](0))}),j(d,"$_reduce_none",function(ae,$e,re){return ae["$[]"](0)})},Opal.modules["bcdice/common_command/tally_dice"]=function(a){var H,x,I,g,R,_,D,y,M,K,P=a.module,V=a.const_set,k=a.thrower,j=a.def,E=[],W=a.nil;return a.top.$require("bcdice/common_command/tally_dice/parser"),H=E,x=K=[P(E[0],"BCDice")].concat(H),I=M=[P(K[0],"CommonCommand")].concat(x),V((y=[D=P(M[0],"TallyDice")].concat(I))[0],"PREFIX_PATTERN",/\d+T[YZ]\d+/.$freeze()),R=[g=a.get_singleton_class(D)].concat(y),_=a.$r(R),j(g,"$eval",function(f,T,v){try{var d;return k("eval_return"),(d=_("Parser").$parse(f))===W||null==d?W:d.$eval(T,v)}catch(m){if(m===a.t_eval_return)return m.$v;throw m}})},Opal.modules["bcdice/common_command/calc/node"]=function(a){var q,D,R,T,m,h,$,r,S,b,g,w,P=a.module,V=a.klass,k=a.ensure_kwargs,j=a.get_kwarg,B=a.def,E=a.truthy,W=a.send,Y=a.thrower,X=[],K=a.nil,U=a.$$$;return a.top.$require("bcdice/arithmetic/node"),q=X,D=w=[P(X[0],"BCDice")].concat(q),R=g=[P(w[0],"CommonCommand")].concat(D),T=b=[P(g[0],"Calc")].concat(R),m=S=[P(b[0],"Node")].concat(T),$=[h=V(S[0],null,"Command")].concat(m),r=a.$r($),h.$$prototype.expr=K,B(h,"$initialize",function(t){var i,s;return t=k(t),i=j(t,"secret"),s=j(t,"expr"),this.secret=i,this.expr=s}),B(h,"$eval",function(t){try{Y("eval_return");var c,u,s=this;return c=function(){try{return s.expr.$eval(t).$to_i()}catch(N){if(!a.rescue(N,[r("ZeroDivisionError")]))throw N;try{return"\u30bc\u30ed\u9664\u7b97\u304c\u767a\u751f\u3057\u305f\u305f\u3081\u8a08\u7b97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f"}finally{a.pop_exception()}}}(),u=E(s.expr["$is_a?"](U(U(r("Arithmetic"),"Node"),"Parenthesis")))?s.expr.$output():"("+s.expr.$output()+")",W(r("Result").$new(),"tap",[],function N(C){var J,ne=null==N.$$s?this:N.$$s;return null==ne.secret&&(ne.secret=K),null==C&&(C=K),C["$secret="](ne.secret),W(C,"text=",J=["c"+u+" \uff1e "+c]),J[J.length-1]},{$$s:s})}catch(N){if(N===a.t_eval_return)return N.$v;throw N}})},Opal.modules["bcdice/common_command/calc/parser"]=function(a){var q,D,R,S,h,$,r,e,n,t,i,s,c,C,d,G,m,b,f,g,w,P=a.module,V=a.klass,k=a.defs,j=a.def,B=a.hash,E=a.const_set,W=a.hash2,Y=a.return_val,H=a.top,X=[],K=a.nil,U=a.$$$;return H.$require("racc/parser.rb"),H.$require("bcdice/common_command/lexer"),H.$require("bcdice/common_command/calc/node"),H.$require("bcdice/arithmetic/node"),q=X,D=w=[P(X[0],"BCDice")].concat(q),R=g=[P(w[0],"CommonCommand")].concat(D),b=[P(g[0],"Calc")].concat(R),f=a.$r(b),S=b,G=[d=V(b[0],U(f("Racc"),"Parser"),"Parser")].concat(S),m=a.$r(G),d.$$prototype.lexer=K,k(d,"$parse",function(ae){return this.$new().$parse(ae)}),j(d,"$parse",function(ae){try{return this.lexer=m("Lexer").$new(ae),this.$do_parse()}catch(re){if(!a.rescue(re,[m("ParseError")]))throw re;try{return K}finally{a.pop_exception()}}}),d.$private(),j(d,"$next_token",function(){return this.lexer.$next_token()}),h=a.large_array_unpack("14,3,14,15,16,4,10,11,10,11,13,14,13,14,17,18,5,10,11,10,11,13,14,13,14,17,18,6,10,11,10,11,13,14,13,14,17,18,,10,11,10,11,13,,13,15,16,,,,26,30,28,29,31"),$=a.large_array_unpack("5,0,10,7,7,1,5,5,10,10,5,11,10,13,8,8,2,11,11,13,13,11,15,13,16,22,22,4,15,15,16,16,15,17,16,18,23,23,,17,17,18,18,17,,18,21,21,,,,21,25,25,25,25"),r=[-6,5,11,K,27,-2,K,-5,4,K,0,9,K,11,K,20,22,31,33,K,K,38,15,26,K,49,K,K,K,K,K,K],e=[-2,-20,-20,-3,-20,-20,32,-1,-6,-9,-20,-20,-17,-20,-19,-20,-20,-20,-20,-15,-16,-20,-4,-5,-7,-10,-18,-8,-11,-12,-13,-14],n=[7,1,19,20,22,23,2,27,21,24,25],t=[3,1,5,5,4,4,2,6,3,5,5],i=[K,1,6,-5,-11,-8,-18,K],s=[K,K,K,K,8,9,K,12],c=a.large_array_unpack("0,0,racc_error,3,15,_reduce_1,0,16,_reduce_2,1,16,_reduce_3,3,17,_reduce_4,3,17,_reduce_5,1,17,_reduce_none,3,18,_reduce_7,4,18,_reduce_8,1,18,_reduce_none,0,20,_reduce_10,1,20,_reduce_11,1,20,_reduce_12,1,20,_reduce_13,1,20,_reduce_14,2,19,_reduce_15,2,19,_reduce_16,1,19,_reduce_none,3,21,_reduce_18,1,21,_reduce_19"),C=B(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"S",7,"PLUS",8,"MINUS",9,"ASTERISK",10,"SLASH",11,"PARENL",12,"PARENR",13),E(G[0],"Racc_arg",[h,$,e,r,n,t,s,i,14,c,C,32,20,!0]),E(G[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","S","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","$start","expr","secret","add","mul","unary","round_type","term"]),E(G[0],"Racc_debug_parser",!1),j(d,"$_reduce_1",function(ae,$e,re){return U(m("Node"),"Command").$new(W(["secret","expr"],{secret:ae["$[]"](0),expr:ae["$[]"](2)}))}),j(d,"$_reduce_2",Y(!1)),j(d,"$_reduce_3",Y(!0)),j(d,"$_reduce_4",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"BinaryOp").$new(ae["$[]"](0),"+",ae["$[]"](2))}),j(d,"$_reduce_5",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"BinaryOp").$new(ae["$[]"](0),"-",ae["$[]"](2))}),j(d,"$_reduce_7",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"BinaryOp").$new(ae["$[]"](0),"*",ae["$[]"](2))}),j(d,"$_reduce_8",function(ae,$e,re){return ae["$[]"](3).$new(ae["$[]"](0),ae["$[]"](2))}),j(d,"$_reduce_10",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),j(d,"$_reduce_11",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"DivideWithCeil")}),j(d,"$_reduce_12",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"DivideWithCeil")}),j(d,"$_reduce_13",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"DivideWithRound")}),j(d,"$_reduce_14",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"DivideWithFloor")}),j(d,"$_reduce_15",function(ae,$e,re){return ae["$[]"](1)}),j(d,"$_reduce_16",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"Negative").$new(ae["$[]"](1))}),j(d,"$_reduce_18",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"Parenthesis").$new(ae["$[]"](1))}),j(d,"$_reduce_19",function(ae,$e,re){return U(U(m("Arithmetic"),"Node"),"Number").$new(ae["$[]"](0))}),j(d,"$_reduce_none",function(ae,$e,re){return ae["$[]"](0)})},Opal.modules["bcdice/common_command/calc"]=function(a){var H,x,I,g,R,_,D,y,M,K,P=a.module,V=a.const_set,k=a.thrower,j=a.def,E=[],W=a.nil;return a.top.$require("bcdice/common_command/calc/parser"),H=E,x=K=[P(E[0],"BCDice")].concat(H),I=M=[P(K[0],"CommonCommand")].concat(x),V((y=[D=P(M[0],"Calc")].concat(I))[0],"PREFIX_PATTERN",/C[+\-(]*\d+/.$freeze()),R=[g=a.get_singleton_class(D)].concat(y),_=a.$r(R),j(g,"$eval",function(f,T,v){try{var d;return k("eval_return"),(d=_("Parser").$parse(f))===W||null==d?W:d.$eval(T.$round_type())}catch(m){if(m===a.t_eval_return)return m.$v;throw m}})},Opal.modules["bcdice/common_command/choice"]=function(a){var g,b,d,e,t,G,m,h,$,T,R,P=a.module,V=a.klass,k=a.const_set,j=a.hash2,B=a.def,E=a.truthy,W=a.eqeq,Y=a.eqeqeq,H=a.send,X=a.rb_lt,K=a.thrower,U=a.rb_gt,x=a.ensure_kwargs,q=a.get_kwarg,w=[],I=a.nil,D=a.$$$;return a.top.$require("strscan"),g=w,b=R=[P(w[0],"BCDice")].concat(g),d=T=[P(R[0],"CommonCommand")].concat(b),m=[G=V(T[0],null,"Choice")].concat(d),h=a.$r(m),($=G.$$prototype).items=$.takes=$.block_delimiter=I,k(m[0],"PREFIX_PATTERN",/choice/.$freeze()),e=m,k((t=[P(m[0],"BlockDelimiter")].concat(e))[0],"BRACKET","bracket"),k(t[0],"PAREN","paren"),k(t[0],"SPACE","space"),k(m[0],"DELIMITER",j(["bracket","paren","space"],{bracket:/,/,paren:/,/,space:/\s+/}).$freeze()),k(m[0],"DELIMITER_CHAR",j(["bracket","paren","space"],{bracket:", ",paren:", ",space:" "}).$freeze()),k(m[0],"TERMINATION",j(["bracket","paren","space"],{bracket:/\]/,paren:/\)/,space:/$/}).$freeze()),k(m[0],"SUFFIX",j(["bracket","paren","space"],{bracket:"]",paren:")",space:""}).$freeze()),function(r,e){var n=[r].concat(e),t=a.$r(n);B(r,"$eval",function(s,c,u){var N;return(N=this.$parse(s))===I||null==N?I:N.$roll(u)}),r.$private(),B(r,"$parse",function(s){try{var u,J,oe,ae,$e,c=K("return"),C=I,ne=I,se=I,re=I,le=I,ee=I;if((C=t("StringScanner").$new(s)).$skip(/\s+/),J=C.$scan(/S/i)["$nil?"]()["$!"](),!E(C.$scan(/choice/i))||(ne=E(se=(u=C.$scan(/\d+/))===I||null==u?I:u.$to_i())?se:1,W(ne,0)))return I;for(oe=Y("[",se=C.$scan(/\(|\[|\s+/))?D(t("BlockDelimiter"),"BRACKET"):Y("(",se)?D(t("BlockDelimiter"),"PAREN"):Y(t("String"),se)?D(t("BlockDelimiter"),"SPACE"):void c.$throw(),ae=t("DELIMITER")["$[]"](oe),$e=t("TERMINATION")["$[]"](oe),re=[];E(le=C.$scan_until(ae));)re.$push(le.$delete_suffix(","));return ee=C.$scan_until($e),!E(ee)||(re.$push(ee.$delete_suffix(t("SUFFIX")["$[]"](oe))),re=H(H(re,"map",[],"strip".$to_proc()),"reject",[],"empty?".$to_proc()),W(re.$size(),1)&&(re=this.$parse_multi_item_shorthand(re.$first())),E(re["$empty?"]())||E(X(re.$size(),ne)))?I:this.$new(j(["secret","block_delimiter","takes","items"],{secret:J,block_delimiter:oe,takes:ne,items:re}))}catch(A){if(A===c)return A.$v;throw A}}),B(r,"$parse_multi_item_shorthand",function(s){var u,N;return E(u=E(N=this.$parse_multi_nums_shorthand(s))?N:this.$parse_multi_chars_shorthand(s))?u:[]}),B(r,"$parse_multi_nums_shorthand",function(s){var c=I,u=I,N=I;return c=/^(\d+)-(\d+)$/.$match(s),!E(c)||(u=c["$[]"](1).$to_i(),N=c["$[]"](2).$to_i(),E(U(u,N)))?I:u.$upto(N).$to_a()}),B(r,"$parse_multi_chars_shorthand",function(s){var u,c=I,N=I,C=I;return c=E(u=/^([a-z])-([a-z])$/.$match(s))?u:/^([A-Z])-([A-Z])$/.$match(s),!E(c)||(N=c["$[]"](1),C=c["$[]"](2),E(U(N,C)))?I:N.$upto(C).$to_a()})}(a.get_singleton_class(G),m),B(G,"$initialize",function(e){var n,t,i,s,c=this;return e=x(e),n=q(e,"secret"),t=q(e,"block_delimiter"),i=q(e,"takes"),s=q(e,"items"),c.secret=n,c.block_delimiter=t,c.takes=i,c.items=s}),B(G,"$roll",function(e){var n=this,t=I,i=I;return E(U(n.items.$size(),100))?h("Result").$new("\u9805\u76ee\u6570\u306f100\u4ee5\u4e0b\u3068\u3057\u3066\u304f\u3060\u3055\u3044"):(t=n.items.$dup(),i=[],H(n.takes,"times",[],function(){var c;return c=e.$roll_index(t.$size()),i["$<<"](t.$delete_at(c))}),H(h("Result").$new(),"tap",[],function s(c){var u,C,N=null==s.$$s?this:s.$$s;return null==N.block_delimiter&&(N.block_delimiter=I),null==N.secret&&(N.secret=I),null==c&&(c=I),C=i.$join(h("DELIMITER_CHAR")["$[]"](N.block_delimiter)),c["$secret="](N.secret),u=["("+N.$expr()+") \uff1e "+C],H(c,"text=",u),u[u.length-1]},{$$s:n}))}),B(G,"$expr",function(){var n,t,e=this;return n=W(e.takes,1)?I:e.takes,Y(D(h("BlockDelimiter"),"SPACE"),t=e.block_delimiter)?"choice"+n+" "+e.items.$join(" "):Y(D(h("BlockDelimiter"),"BRACKET"),t)?"choice"+n+"["+e.items.$join(",")+"]":Y(D(h("BlockDelimiter"),"PAREN"),t)?"choice"+n+"("+e.items.$join(",")+")":I})},Opal.modules["bcdice/common_command/d66_dice"]=function(a){var D,R,v,h,r,e,S,d,G,b,g,P=a.module,V=a.klass,k=a.const_set,j=a.thrower,B=a.def,E=a.truthy,W=a.hash2,Y=a.ensure_kwargs,H=a.get_kwarg,X=a.send,K=a.eqeqeq,U=a.rb_plus,x=a.rb_times,q=[],M=a.nil,w=a.$$$;return D=q,R=g=[P(q[0],"BCDice")].concat(D),v=b=[P(g[0],"CommonCommand")].concat(R),d=[S=V(b[0],null,"D66Dice")].concat(v),G=a.$r(d),S.$$prototype.sort_type=M,k(d[0],"PREFIX_PATTERN",/D66/.$freeze()),r=[h=a.get_singleton_class(S)].concat(d),e=a.$r(r),B(h,"$eval",function(t,i,s){try{var u;return j("eval_return"),(u=this.$parse(t,i))===M||null==u?M:u.$eval(s)}catch(J){if(J===a.t_eval_return)return J.$v;throw J}}),h.$private(),B(h,"$parse",function(t,i){var c=M,u=M;return t=t.$split(" ",2).$first(),c=/^(S)?D66([ANSD])?$/i.$match(t.$upcase()),E(c)?this.$new(W(["secret","sort_type","suffix"],{secret:c["$[]"](1)["$nil?"]()["$!"](),sort_type:E(u=this.$sort_type_from_suffix(c["$[]"](2)))?u:i.$d66_sort_type(),suffix:c["$[]"](2)})):M}),B(h,"$sort_type_from_suffix",function(t){switch(t){case"A":case"S":return w(e("D66SortType"),"ASC");case"D":return w(e("D66SortType"),"DESC");case"N":return w(e("D66SortType"),"NO_SORT");default:return M}}),B(S,"$initialize",function($){var r,e,n,t=this;return $=Y($),r=H($,"secret"),e=H($,"sort_type"),n=H($,"suffix"),t.secret=r,t.sort_type=e,t.suffix=n}),B(S,"$eval",function($){var e;return e=this.$roll($),X(G("Result").$new(),"tap",[],function n(t){var i,s=null==n.$$s?this:n.$$s;return null==s.secret&&(s.secret=M),null==s.suffix&&(s.suffix=M),null==t&&(t=M),t["$secret="](s.secret),X(t,"text=",i=["(D66"+s.suffix+") \uff1e "+e]),i[i.length-1]},{$$s:this})}),S.$private(),B(S,"$roll",function($){var n,e=M;return e=X(G("Array"),"new",[2],function(){return $.$roll_once(6)}),K(w(G("D66SortType"),"ASC"),n=this.sort_type)?e["$sort!"]():K(w(G("D66SortType"),"DESC"),n)&&e["$sort!"]()["$reverse!"](),U(x(e["$[]"](0),10),e["$[]"](1))})},Opal.modules["bcdice/common_command/repeat"]=function(a){var I,z,T,m,$,r,v,S,d,G,_,y,P=a.module,V=a.klass,k=a.const_set,j=a.def,B=a.truthy,E=a.hash2,W=a.ensure_kwargs,Y=a.get_kwarg,H=a.send,X=a.eqeq,K=a.thrower,U=a.rb_lt,q=[],M=a.nil;return a.top.$require("strscan"),I=q,z=y=[P(q[0],"BCDice")].concat(I),T=_=[P(y[0],"CommonCommand")].concat(z),S=[v=V(_[0],null,"Repeat")].concat(T),d=a.$r(S),(G=v.$$prototype).times=G.trailer=G.secret=M,k(S[0],"PREFIX_PATTERN",/(repeat|rep|x)\d+/.$freeze()),k(S[0],"REPEAT_LIMIT",100),$=[m=a.get_singleton_class(v)].concat(S),r=a.$r($),j(m,"$eval",function(n,t,i){var s;return(s=this.$parse(n))===M||null==s?M:s.$roll(t,i)}),m.$private(),j(m,"$parse",function(n){var t,c,s=M,u=M,N=M,C=M,J=M;return c=(s=r("StringScanner").$new(n)).$scan(/s/i)["$nil?"]()["$!"](),u=s.$scan(/repeat|rep|x/i),N=(t=s.$scan(/\d+/))===M||null==t?M:t.$to_i(),C=s.$scan(/\s+/),B(u["$nil?"]())||B(N["$nil?"]())||B(C["$nil?"]())||(J=s.$post_match(),B(J["$nil?"]())||B(J["$empty?"]()))?M:this.$new(E(["secret","times","trailer"],{secret:c,times:N,trailer:J}))}),j(v,"$initialize",function(h){var $,r,e,n=this;return h=W(h),$=Y(h,"secret"),r=Y(h,"times"),e=Y(h,"trailer"),n.secret=$,n.times=r,n.trailer=e}),j(v,"$roll",function(h,$){try{K("eval_return");var n,e=this,t=M,i=M,s=M,c=M;return n=e.$validate(),B(n)?n:(t=H(d("Array"),"new",[e.times],function u(){var N=null==u.$$s?this:u.$$s,C=M;return null==N.trailer&&(N.trailer=M),(C=h.$class().$new(N.trailer))["$randomizer="]($),C.$eval()},{$$s:e}),X(H(t,"count",[],function(N){return null==N&&(N=M),N["$=="](M)}),e.times)?e.$result_with_text("\u7e70\u308a\u8fd4\u3057\u5bfe\u8c61\u306e\u30b3\u30de\u30f3\u30c9\u304c\u5b9f\u884c\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f ("+e.trailer+")"):(i=H(t.$map(),"with_index",[1],function(N,C){return null==N&&(N=M),null==C&&(C=M),"#"+C+"\n"+N.$text()}).$join("\n\n"),s=B(c=e.secret)?c:H(t,"any?",[],"secret?".$to_proc()),H(d("Result").$new(),"tap",[],function(N){var C;return null==N&&(N=M),N["$secret="](s),H(N,"text=",C=[i]),C[C.length-1]})))}catch(u){if(u===a.t_eval_return)return u.$v;throw u}}),v.$private(),j(v,"$validate",function(){var h=this;return B(/^(repeat|rep|x)\d+/["$match?"](h.trailer))?h.$result_with_text("Repeat\u30b3\u30de\u30f3\u30c9\u306e\u91cd\u8907\u306f\u3067\u304d\u307e\u305b\u3093"):B(U(h.times,1))||B(U(d("REPEAT_LIMIT"),h.times))?h.$result_with_text("\u7e70\u308a\u8fd4\u3057\u56de\u6570\u306f1\u4ee5\u4e0a\u3001"+d("REPEAT_LIMIT")+"\u4ee5\u4e0b\u3068\u3057\u3066\u304f\u3060\u3055\u3044"):M}),j(v,"$result_with_text",function(h){return H(d("Result").$new(),"tap",[],function r(e){var n,t=null==r.$$s?this:r.$$s;return null==t.secret&&(t.secret=M),null==e&&(e=M),e["$secret="](t.secret),H(e,"text=",n=[h]),n[n.length-1]},{$$s:this})})},Opal.modules["bcdice/format"]=function(a){var X,q,M,w,I,U,P=a.module,V=a.eqeqeq,k=a.def,j=a.truthy,B=a.eqeq,E=a.rb_gt,W=[],Y=a.nil;return X=W,q=U=[P(W[0],"BCDice")].concat(X),w=[M=P(U[0],"Format")].concat(q),I=a.$r(w),M.$module_function(),k(M,"$comparison_operator",function(y){var g;return V("==",g=y)?"=":V("!=",g)?"<>":V(I("Symbol"),g)?y.$to_s():Y}),k(M,"$modifier",function(y){return j(y["$nil?"]())?Y:B(y,0)?"":j(E(y,0))?"+"+y:y.$to_s()})},Opal.modules["bcdice/common_command/barabara_dice/result"]=function(a){var K,M,y,b,I,x,P=a.module,V=a.klass,k=a.send2,j=a.find_super,B=a.def,W=[],Y=a.nil,H=a.$$$;return a.top.$require("bcdice/result"),K=W,M=x=[P(W[0],"BCDice")].concat(K),y=I=[P(x[0],"CommonCommand")].concat(M),(b=V([P(I[0],"BarabaraDice")].concat(y)[0],H(H("BCDice"),"Result"),"Result")).$attr_accessor("last_dice_list_list"),b.$attr_accessor("last_dice_list"),b.$attr_accessor("success_num"),B(b,"$initialize",function f(T){var S=this;return f.$$p=null,null==T&&(T=Y),k(S,j(S,"initialize",f,!1,!0),"initialize",[T],null),S.last_dice_list_list=[],S.last_dice_list=[],S.success_num=0},-1)},Opal.modules["bcdice/common_command/barabara_dice/node"]=function(a){var x,I,z,f,G,m,h,$,r,v,_,y,M,P=a.module,V=a.klass,k=a.ensure_kwargs,j=a.get_kwarg,B=a.def,E=a.send,W=a.truthy,Y=a.thrower,H=a.top,X=[],K=a.nil;return H.$require("bcdice/format"),H.$require("bcdice/common_command/barabara_dice/result"),x=X,I=M=[P(X[0],"BCDice")].concat(x),z=y=[P(M[0],"CommonCommand")].concat(I),f=_=[P(y[0],"BarabaraDice")].concat(z),G=v=[P(_[0],"Node")].concat(f),h=[m=V(v[0],null,"Command")].concat(G),$=a.$r(h),(r=m.$$prototype).notations=r.cmp_op=r.target_number=K,B(m,"$initialize",function(n){var t,i,s,c,u=this;return n=k(n),t=j(n,"secret"),i=j(n,"notations"),s=j(n,"cmp_op"),c=j(n,"target_number"),u.secret=t,u.notations=i,u.cmp_op=s,u.target_number=c}),B(m,"$eval",function(n,t){try{Y("eval_return");var s,u,C,ne,ae,$e,c=this,N=K,J=K,se=K,oe=K,re=K,le=K;return u=n.$round_type(),N=E(c.notations,"map",[],function(A){return null==A&&(A=K),A.$to_dice(u)}),C=W(J=c.cmp_op)?J:n.$default_cmp_op(),ne=W(J=(s=c.target_number)===K||null==s?K:s.$eval(u))?J:n.$default_target_number(),se=E(N,"map",[],function(A){return null==A&&(A=K),A.$roll(t)}),W(n["$sort_barabara_dice?"]())&&E(se,"map!",[],"sort".$to_proc()),ae=(oe=se.$flatten()).$count(1),$e=W(C)?E(oe,"count",[],function(A){return null==A&&(A=K),A.$send(C,ne)}):0,W(C)&&(re="\u6210\u529f\u6570"+$e),le=["("+N.$join("+")+$("Format").$comparison_operator(C)+ne+")",oe.$join(","),re,n.$grich_text(ae,oe.$size(),$e)].$compact(),E($("Result").$new(),"tap",[],function ee(A){var L,O=null==ee.$$s?this:ee.$$s;return null==O.secret&&(O.secret=K),null==A&&(A=K),A["$secret="](O.secret),A["$text="](le.$join(" \uff1e ")),A["$last_dice_list_list="](se),A["$last_dice_list="](oe),E(A,"success_num=",L=[$e]),L[L.length-1]},{$$s:c})}catch(ee){if(ee===a.t_eval_return)return ee.$v;throw ee}}),function(S,d,G){var m=V(S,null,"Notation"),h=[m].concat(G),$=a.$r(h),r=m.$$prototype;r.times=r.sides=K,B(m,"$initialize",function(n,t){return this.times=n,this.sides=t}),B(m,"$to_dice",function(n){try{var s,c;return Y("eval_return"),s=this.times.$eval(n),c=this.sides.$eval(n),$("Dice").$new(s,c)}catch(u){if(u===a.t_eval_return)return u.$v;throw u}})}(v[0],0,v),function(S,d){var G=V(S,null,"Dice"),m=G.$$prototype;return m.times=m.sides=K,B(G,"$initialize",function($,r){return this.times=$,this.sides=r}),B(G,"$roll",function($){return $.$roll_barabara(this.times,this.sides)}),B(G,"$to_s",function(){return this.times+"B"+this.sides})}(v[0])},Opal.modules["bcdice/common_command/reroll_dice/parser"]=function(a){var w,g,b,G,r,e,n,t,i,s,c,u,N,ne,m,h,$,T,v,R,D,P=a.module,V=a.klass,k=a.defs,j=a.def,B=a.hash,E=a.const_set,W=a.hash2,Y=a.return_val,H=a.to_ary,X=a.truthy,K=a.top,U=[],x=a.nil,q=a.$$$;return K.$require("racc/parser.rb"),K.$require("bcdice/common_command/lexer"),K.$require("bcdice/common_command/barabara_dice/node"),K.$require("bcdice/arithmetic/node"),w=U,g=D=[P(U[0],"BCDice")].concat(w),b=R=[P(D[0],"CommonCommand")].concat(g),T=[P(R[0],"RerollDice")].concat(b),v=a.$r(T),G=T,h=[m=V(T[0],q(v("Racc"),"Parser"),"Parser")].concat(G),$=a.$r(h),m.$$prototype.lexer=x,k(m,"$parse",function(re){return this.$new().$parse(re)}),j(m,"$parse",function(re){try{return this.lexer=$("Lexer").$new(re),this.$do_parse()}catch(ee){if(!a.rescue(ee,[$("ParseError")]))throw ee;try{return x}finally{a.pop_exception()}}}),m.$private(),j(m,"$next_token",function(){return this.lexer.$next_token()}),r=a.large_array_unpack("9,3,9,9,9,15,20,21,20,21,8,14,8,8,8,9,9,4,13,28,10,39,20,21,9,8,8,31,32,9,20,21,33,16,8,20,21,9,24,8,34,35,9,20,21,31,32,8,20,21,9,13,8,31,32,9,20,21,34,35,8,20,21,9,,8,34,35,9,20,21,31,32,8,20,21,9,,8,,31,32,20,21,31,32,8,40,,,,47,51,49,50,52"),e=a.large_array_unpack("14,0,24,2,15,5,14,14,24,24,14,5,24,2,15,16,8,1,5,14,4,24,8,8,13,16,8,17,17,20,13,13,17,7,13,20,20,21,11,20,18,18,28,21,21,26,26,21,28,28,31,12,28,38,38,32,31,31,42,42,31,32,32,34,,32,43,43,35,34,34,46,46,34,35,35,39,,35,,27,27,39,39,41,41,39,27,,,,41,45,45,45,45"),n=a.large_array_unpack("-6,17,1,,20,-3,,30,14,,,18,30,22,-2,2,13,19,30,,27,35,,,0,,37,72,40,,,48,53,,61,66,,,45,74,,76,48,56,,89,63,,,,,,"),t=a.large_array_unpack("-4,-31,-31,-5,-31,-6,-13,-31,-31,-30,53,-1,-6,-31,-31,-31,-31,-31,-17,-20,-31,-31,-28,-3,-31,-2,-7,-31,-31,-12,-14,-31,-31,-29,-31,-31,-26,-27,-10,-31,-8,-31,-15,-16,-18,-21,-11,-9,-19,-22,-23,-24,-25"),i=[17,7,11,36,37,26,27,1,6,25,42,43,2,5,7,30,38,44,45,12,41,29,23,48,x,x,x,x,x,x,x,46],s=[7,9,4,11,11,7,7,1,8,4,10,10,2,3,9,9,7,11,11,5,7,8,6,12,x,x,x,x,x,x,x,7],c=[x,7,12,11,-3,14,11,-8,6,-1,-21,-17,-22],u=[x,x,x,x,x,x,x,x,x,22,18,19,x],N=a.large_array_unpack("0,0,racc_error,3,23,_reduce_1,4,23,_reduce_2,4,23,_reduce_3,0,24,_reduce_4,1,24,_reduce_5,0,26,_reduce_6,2,26,_reduce_7,3,27,_reduce_8,4,27,_reduce_9,2,28,_reduce_10,3,28,_reduce_11,3,25,_reduce_12,1,25,_reduce_13,3,30,_reduce_14,3,29,_reduce_15,3,29,_reduce_16,1,29,_reduce_none,3,32,_reduce_18,4,32,_reduce_19,1,32,_reduce_none,0,34,_reduce_21,1,34,_reduce_22,1,34,_reduce_23,1,34,_reduce_24,1,34,_reduce_25,2,33,_reduce_26,2,33,_reduce_27,1,33,_reduce_none,3,31,_reduce_29,1,31,_reduce_30"),ne=B(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"S",7,"PLUS",8,"MINUS",9,"ASTERISK",10,"SLASH",11,"PARENL",12,"PARENR",13,"BRACKETL",14,"BRACKETR",15,"LESS",16,"GREATER",17,"EQUAL",18,"NOT",19,"AT",20,"CMP_OP",21),E(h[0],"Racc_arg",[r,e,t,n,i,s,u,c,22,N,ne,53,31,!0]),E(h[0],"Racc_token_to_s_table",a.large_array_unpack("$end,error,NUMBER,R,U,C,F,S,PLUS,MINUS,ASTERISK,SLASH,PARENL,PARENR,BRACKETL,BRACKETR,LESS,GREATER,EQUAL,NOT,AT,CMP_OP,$start,expr,secret,notations,target,bracket,at,add,dice,term,mul,unary,round_type")),E(h[0],"Racc_debug_parser",!1),j(m,"$_reduce_1",function(re,le,ee){return q($("Node"),"Command").$new(W(["secret","notations","cmp_op","target_number","source"],{secret:re["$[]"](0),notations:re["$[]"](1),cmp_op:re["$[]"](2)["$[]"]("cmp_op"),target_number:re["$[]"](2)["$[]"]("target"),source:this.lexer.$source()}))}),j(m,"$_reduce_2",function(re,le,ee){var L=x,O=x;return L=re["$[]"](3),O=re["$[]"](2),q($("Node"),"Command").$new(W(["secret","notations","cmp_op","target_number","reroll_cmp_op","reroll_threshold","source"],{secret:re["$[]"](0),notations:re["$[]"](1),cmp_op:L["$[]"]("cmp_op"),target_number:L["$[]"]("target"),reroll_cmp_op:O["$[]"]("cmp_op"),reroll_threshold:O["$[]"]("threshold"),source:this.lexer.$source()}))}),j(m,"$_reduce_3",function(re,le,ee){var L=x,O=x;return L=re["$[]"](2),O=re["$[]"](3),q($("Node"),"Command").$new(W(["secret","notations","cmp_op","target_number","reroll_cmp_op","reroll_threshold","source"],{secret:re["$[]"](0),notations:re["$[]"](1),cmp_op:L["$[]"]("cmp_op"),target_number:L["$[]"]("target"),reroll_cmp_op:O["$[]"]("cmp_op"),reroll_threshold:O["$[]"]("threshold"),source:this.lexer.$source()}))}),j(m,"$_reduce_4",Y(!1)),j(m,"$_reduce_5",Y(!0)),j(m,"$_reduce_6",function(re,le,ee){return W([],{})}),j(m,"$_reduce_7",function(re,le,ee){var A,o,p;return p=null==(A=H(re))[1]?x:A[1],X(o=null==A[0]?x:A[0])||this.$raise($("ParseError")),W(["cmp_op","target"],{cmp_op:o,target:p})}),j(m,"$_reduce_8",function(re,le,ee){return W(["threshold"],{threshold:re["$[]"](1)})}),j(m,"$_reduce_9",function(re,le,ee){var L,O;return L=re["$[]"](1),O=re["$[]"](2),X(L)||this.$raise($("ParseError")),W(["cmp_op","threshold"],{cmp_op:L,threshold:O})}),j(m,"$_reduce_10",function(re,le,ee){return W(["threshold"],{threshold:re["$[]"](1)})}),j(m,"$_reduce_11",function(re,le,ee){var L,O;return L=re["$[]"](1),O=re["$[]"](2),X(L)||this.$raise($("ParseError")),W(["cmp_op","threshold"],{cmp_op:L,threshold:O})}),j(m,"$_reduce_12",function(re,le,ee){var A=x;return(A=re["$[]"](0)).$push(re["$[]"](2)),A}),j(m,"$_reduce_13",function(re,le,ee){return[re["$[]"](0)]}),j(m,"$_reduce_14",function(re,le,ee){var A,L;return A=re["$[]"](0),L=re["$[]"](2),q($("Node"),"Notation").$new(A,L)}),j(m,"$_reduce_15",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"BinaryOp").$new(re["$[]"](0),"+",re["$[]"](2))}),j(m,"$_reduce_16",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"BinaryOp").$new(re["$[]"](0),"-",re["$[]"](2))}),j(m,"$_reduce_18",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"BinaryOp").$new(re["$[]"](0),"*",re["$[]"](2))}),j(m,"$_reduce_19",function(re,le,ee){return re["$[]"](3).$new(re["$[]"](0),re["$[]"](2))}),j(m,"$_reduce_21",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),j(m,"$_reduce_22",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"DivideWithCeil")}),j(m,"$_reduce_23",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"DivideWithCeil")}),j(m,"$_reduce_24",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"DivideWithRound")}),j(m,"$_reduce_25",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"DivideWithFloor")}),j(m,"$_reduce_26",function(re,le,ee){return re["$[]"](1)}),j(m,"$_reduce_27",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"Negative").$new(re["$[]"](1))}),j(m,"$_reduce_29",function(re,le,ee){return re["$[]"](1)}),j(m,"$_reduce_30",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"Number").$new(re["$[]"](0))}),j(m,"$_reduce_none",function(re,le,ee){return re["$[]"](0)})},Opal.modules["bcdice/common_command/reroll_dice"]=function(a){var H,x,I,g,R,_,D,y,M,K,P=a.module,V=a.const_set,k=a.thrower,j=a.def,B=a.top,E=[],W=a.nil;return B.$require("bcdice/normalize"),B.$require("bcdice/format"),B.$require("bcdice/common_command/reroll_dice/parser"),H=E,x=K=[P(E[0],"BCDice")].concat(H),I=M=[P(K[0],"CommonCommand")].concat(x),V((y=[D=P(M[0],"RerollDice")].concat(I))[0],"PREFIX_PATTERN",/\d+R\d+/.$freeze()),V(y[0],"REROLL_LIMIT",1e4),R=[g=a.get_singleton_class(D)].concat(y),_=a.$r(R),j(g,"$eval",function(f,T,v){try{var d;return k("eval_return"),(d=_("Parser").$parse(f))===W||null==d?W:d.$eval(T,v)}catch(m){if(m===a.t_eval_return)return m.$v;throw m}})},Opal.modules["bcdice/common_command/upper_dice/node"]=function(a){var I,z,f,d,r,e,n,t,i,m,v,_,y,P=a.module,V=a.klass,k=a.ensure_kwargs,j=a.get_kwarg,B=a.def,E=a.send,W=a.truthy,Y=a.rb_le,H=a.thrower,X=a.rb_plus,K=a.eqeq,U=a.hash2,x=a.rb_lt,q=[],M=a.nil;return I=q,z=y=[P(q[0],"BCDice")].concat(I),f=_=[P(y[0],"CommonCommand")].concat(z),d=v=[P(_[0],"UpperDice")].concat(f),r=m=[P(v[0],"Node")].concat(d),n=[e=V(m[0],null,"Command")].concat(r),t=a.$r(n),(i=e.$$prototype).notations=i.reroll_threshold=i.modifier=i.target_number=i.cmp_op=M,B(e,"$initialize",function(c){var u,N,C,J,ne,se,oe=this;return c=k(c),u=j(c,"secret"),N=j(c,"notations"),C=j(c,"modifier"),J=j(c,"cmp_op"),ne=j(c,"target_number"),null==(se=c.$$smap.reroll_threshold)&&(se=M),oe.secret=u,oe.notations=N,oe.modifier=C,oe.cmp_op=J,oe.target_number=ne,oe.reroll_threshold=se}),B(e,"$eval",function(c,u){try{H("eval_return");var C,J,ne,oe,ae,$e,ee,L,le,A,se=this,re=M,O=M,o=M,p=M;return oe=c.$round_type(),ae=E(se.notations,"map",[],function(Z){return null==Z&&(Z=M),Z.$to_dice(oe)}),$e=W(re=W(le=(C=se.reroll_threshold)===M||null==C?M:C.$eval(oe))?le:c.$upper_dice_reroll_threshold())?re:0,ee=W(re=(J=se.modifier)===M||null==J?M:J.$eval(oe))?re:0,A=(ne=se.target_number)===M||null==ne?M:ne.$eval(oe),L=se.$expr(ae,$e,ee,A),W(Y($e,1))?se.$result_with_text("("+L+") \uff1e \u7121\u9650\u30ed\u30fc\u30eb\u306e\u6761\u4ef6\u304c\u307e\u3061\u304c\u3063\u3066\u3044\u307e\u3059"):(O=E(ae,"map",[],function(Z){return null==Z&&(Z=M),Z.$roll(u,$e,c["$sort_barabara_dice?"]())}).$reduce([],"concat"),o=W(se.cmp_op)?se.$result_success_count(O,ee,A):se.$result_max_sum(O,ee),p=["("+L+")",se.$interlim_expr(O,ee),o],se.$result_with_text(p.$join(" \uff1e ")))}catch(F){if(F===a.t_eval_return)return F.$v;throw F}}),e.$private(),B(e,"$result_success_count",function(c,u,N){return"\u6210\u529f\u6570"+E(c,"count",[],function ne(se){var oe=null==ne.$$s?this:ne.$$s;return null==oe.cmp_op&&(oe.cmp_op=M),null==se&&(se=M),X(se["$[]"]("sum"),u).$send(oe.cmp_op,N)},{$$s:this})}),B(e,"$result_max_sum",function(c,u){var C,N=M;return N=E(c,"map",[],function(se){return null==se&&(se=M),se["$[]"]("sum")}),C=X(N.$sum(),u),E(N,"map",[],function(se){return null==se&&(se=M),X(se,u)}).$max()+"/"+C+"(\u6700\u5927/\u5408\u8a08)"}),B(e,"$interlim_expr",function(c,u){var N;return N=E(c,"map",[],function(J){return null==J&&(J=M),K(J["$[]"]("list").$size(),1)?J["$[]"]("sum"):J["$[]"]("sum")+"["+J["$[]"]("list").$join(",")+"]"}).$join(","),X(N,t("Format").$modifier(u))}),B(e,"$expr",function(c,u,N,C){var ne,se;return ne=t("Format").$comparison_operator(this.cmp_op),se=t("Format").$modifier(N),c.$join("+")+"["+u+"]"+se+ne+C}),B(e,"$result_with_text",function(c){return E(t("Result").$new(),"tap",[],function N(C){var J,ne=null==N.$$s?this:N.$$s;return null==ne.secret&&(ne.secret=M),null==C&&(C=M),C["$secret="](ne.secret),E(C,"text=",J=[c]),J[J.length-1]},{$$s:this})}),function(h,$,r){var e=V(h,null,"Notation"),n=[e].concat(r),t=a.$r(n),i=e.$$prototype;i.roll_times=i.sides=M,B(e,"$initialize",function(c,u){return this.roll_times=c,this.sides=u}),B(e,"$to_dice",function(c){try{var C,J;return H("eval_return"),C=this.roll_times.$eval(c),J=this.sides.$eval(c),t("Dice").$new(C,J)}catch(ne){if(ne===a.t_eval_return)return ne.$v;throw ne}})}(m[0],0,m),function(h,$,r){var e=V(h,null,"Dice"),n=[e].concat(r),t=a.$r(n),i=e.$$prototype;return i.roll_times=i.sides=M,B(e,"$initialize",function(c,u){return this.roll_times=c,this.sides=u}),B(e,"$roll",function(c,u,N){var J=M;return J=E(t("Array"),"new",[this.roll_times],function ne(){var oe=M;return oe=(null==ne.$$s?this:ne.$$s).$roll_ones(c,u),U(["sum","list"],{sum:oe.$sum(),list:oe})},{$$s:this}),W(N)&&(J=E(J,"sort_by",[],function(se){return null==se&&(se=M),se["$[]"]("sum")})),J}),B(e,"$to_s",function(){return this.roll_times+"U"+this.sides}),e.$private(),B(e,"$roll_ones",function(c,u){var N=this,C=M;return C=[],function(){try{var J=H("break");E(N,"loop",[],function ne(){var oe,se=null==ne.$$s?this:ne.$$s;if(null==se.sides&&(se.sides=M),oe=c.$roll_once(se.sides),C.$push(oe),!W(x(oe,u)))return M;J.$throw()},{$$s:N})}catch(ne){if(ne===J)return ne.$v;throw ne}}(),C})}(m[0],0,m)},Opal.modules["bcdice/common_command/upper_dice/parser"]=function(a){var w,g,b,G,r,e,n,t,i,s,c,u,N,ne,m,h,$,T,v,R,D,P=a.module,V=a.klass,k=a.defs,j=a.def,B=a.hash,E=a.const_set,W=a.hash2,Y=a.return_val,H=a.to_ary,X=a.truthy,K=a.top,U=[],x=a.nil,q=a.$$$;return K.$require("racc/parser.rb"),K.$require("bcdice/common_command/lexer"),K.$require("bcdice/common_command/upper_dice/node"),K.$require("bcdice/arithmetic/node"),w=U,g=D=[P(U[0],"BCDice")].concat(w),b=R=[P(D[0],"CommonCommand")].concat(g),T=[P(R[0],"UpperDice")].concat(b),v=a.$r(T),G=T,h=[m=V(T[0],q(v("Racc"),"Parser"),"Parser")].concat(G),$=a.$r(h),m.$$prototype.lexer=x,k(m,"$parse",function(re){return this.$new().$parse(re)}),j(m,"$parse",function(re){try{return this.lexer=$("Lexer").$new(re),this.$do_parse()}catch(ee){if(!a.rescue(ee,[$("ParseError")]))throw ee;try{return x}finally{a.pop_exception()}}}),m.$private(),j(m,"$next_token",function(){return this.lexer.$next_token()}),r=a.large_array_unpack("9,9,36,37,3,9,9,21,22,49,8,8,21,22,9,8,8,14,15,9,21,22,4,16,8,21,22,9,10,8,36,37,9,21,22,38,17,8,21,22,9,25,8,27,15,9,21,22,28,29,8,21,22,9,44,8,39,40,9,21,22,39,40,8,21,22,9,25,8,39,40,9,21,22,36,37,8,21,22,9,17,8,39,40,9,21,22,39,40,8,21,22,9,,8,39,40,,21,22,39,40,8,58,56,57,59,36,37"),e=a.large_array_unpack("2,8,34,34,0,17,14,8,8,34,2,8,14,14,15,17,14,5,5,16,15,15,1,5,15,16,16,21,4,16,18,18,22,21,21,18,7,21,22,22,25,11,22,12,12,27,25,25,13,13,25,27,27,28,24,27,19,19,29,28,28,30,30,28,29,29,36,26,29,33,33,37,36,36,45,45,36,37,37,39,32,37,47,47,40,39,39,48,48,39,40,40,44,,40,50,50,,44,44,51,51,44,53,53,53,53,54,54"),n=a.large_array_unpack("-3,22,-2,,28,9,,32,-1,,,20,35,40,4,12,17,3,22,46,,25,30,,34,38,46,43,51,56,51,,76,59,-6,,64,69,,77,82,,,,90,66,,72,77,,85,90,,100,99,,,,,"),t=a.large_array_unpack("-4,-35,-35,-5,-35,-6,-17,-35,-35,-34,60,-12,-6,-7,-35,-35,-35,-35,-35,-21,-24,-35,-35,-32,-1,-35,-12,-35,-35,-35,-8,-16,-32,-9,-35,-18,-35,-35,-33,-35,-35,-30,-31,-3,-35,-13,-2,-10,-11,-14,-19,-20,-22,-25,-15,-23,-26,-27,-28,-29"),i=a.large_array_unpack("18,30,33,41,42,24,6,1,34,2,5,12,11,7,30,47,48,45,31,26,46,52,53,50,51,32,43,55,35,,,,,,,,54"),s=a.large_array_unpack("10,9,9,13,13,5,11,1,10,2,3,6,4,12,9,9,9,10,11,4,5,13,13,9,9,12,7,14,12,,,,,,,,10"),c=[x,7,9,8,7,-6,6,2,x,-13,-8,4,11,-18,-26],u=[x,x,x,x,x,x,x,x,13,19,x,x,23,20,x],N=a.large_array_unpack("0,0,racc_error,4,23,_reduce_1,5,23,_reduce_2,5,23,_reduce_3,0,24,_reduce_4,1,24,_reduce_5,0,26,_reduce_6,1,26,_reduce_7,2,30,_reduce_8,2,30,_reduce_9,3,30,_reduce_10,3,30,_reduce_11,0,27,_reduce_12,2,27,_reduce_13,3,28,_reduce_14,2,29,_reduce_15,3,25,_reduce_16,1,25,_reduce_17,3,33,_reduce_18,3,32,_reduce_19,3,32,_reduce_20,1,32,_reduce_none,3,31,_reduce_22,4,31,_reduce_23,1,31,_reduce_none,0,36,_reduce_25,1,36,_reduce_26,1,36,_reduce_27,1,36,_reduce_28,1,36,_reduce_29,2,35,_reduce_30,2,35,_reduce_31,1,35,_reduce_none,3,34,_reduce_33,1,34,_reduce_34"),ne=B(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"S",7,"PLUS",8,"MINUS",9,"ASTERISK",10,"SLASH",11,"PARENL",12,"PARENR",13,"BRACKETL",14,"BRACKETR",15,"LESS",16,"GREATER",17,"EQUAL",18,"NOT",19,"AT",20,"CMP_OP",21),E(h[0],"Racc_arg",[r,e,t,n,i,s,u,c,22,N,ne,60,35,!0]),E(h[0],"Racc_token_to_s_table",a.large_array_unpack("$end,error,NUMBER,R,U,C,F,S,PLUS,MINUS,ASTERISK,SLASH,PARENL,PARENR,BRACKETL,BRACKETR,LESS,GREATER,EQUAL,NOT,AT,CMP_OP,$start,expr,secret,notations,modifier,target,bracket,at,modifier_expr,mul,add,dice,term,unary,round_type")),E(h[0],"Racc_debug_parser",!1),j(m,"$_reduce_1",function(re,le,ee){return q(q($("UpperDice"),"Node"),"Command").$new(W(["secret","notations","modifier","cmp_op","target_number"],{secret:re["$[]"](0),notations:re["$[]"](1),modifier:re["$[]"](2),cmp_op:re["$[]"](3)["$[]"]("cmp_op"),target_number:re["$[]"](3)["$[]"]("target")}))}),j(m,"$_reduce_2",function(re,le,ee){return q(q($("UpperDice"),"Node"),"Command").$new(W(["secret","notations","modifier","cmp_op","target_number","reroll_threshold"],{secret:re["$[]"](0),notations:re["$[]"](1),modifier:re["$[]"](3),cmp_op:re["$[]"](4)["$[]"]("cmp_op"),target_number:re["$[]"](4)["$[]"]("target"),reroll_threshold:re["$[]"](2)}))}),j(m,"$_reduce_3",function(re,le,ee){return q(q($("UpperDice"),"Node"),"Command").$new(W(["secret","notations","modifier","cmp_op","target_number","reroll_threshold"],{secret:re["$[]"](0),notations:re["$[]"](1),modifier:re["$[]"](2),cmp_op:re["$[]"](3)["$[]"]("cmp_op"),target_number:re["$[]"](3)["$[]"]("target"),reroll_threshold:re["$[]"](4)}))}),j(m,"$_reduce_4",Y(!1)),j(m,"$_reduce_5",Y(!0)),j(m,"$_reduce_6",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"Number").$new(0)}),j(m,"$_reduce_7",function(re,le,ee){return re["$[]"](0)}),j(m,"$_reduce_8",function(re,le,ee){return re["$[]"](1)}),j(m,"$_reduce_9",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"Negative").$new(re["$[]"](1))}),j(m,"$_reduce_10",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"BinaryOp").$new(re["$[]"](0),"+",re["$[]"](2))}),j(m,"$_reduce_11",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"BinaryOp").$new(re["$[]"](0),"-",re["$[]"](2))}),j(m,"$_reduce_12",function(re,le,ee){return W([],{})}),j(m,"$_reduce_13",function(re,le,ee){var A,o,p;return p=null==(A=H(re))[1]?x:A[1],X(o=null==A[0]?x:A[0])||this.$raise($("ParseError")),W(["cmp_op","target"],{cmp_op:o,target:p})}),j(m,"$_reduce_14",function(re,le,ee){return re["$[]"](1)}),j(m,"$_reduce_15",function(re,le,ee){return re["$[]"](1)}),j(m,"$_reduce_16",function(re,le,ee){var A=x;return(A=re["$[]"](0)).$push(re["$[]"](2)),A}),j(m,"$_reduce_17",function(re,le,ee){return[re["$[]"](0)]}),j(m,"$_reduce_18",function(re,le,ee){var A,L;return A=re["$[]"](0),L=re["$[]"](2),q(q($("UpperDice"),"Node"),"Notation").$new(A,L)}),j(m,"$_reduce_19",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"BinaryOp").$new(re["$[]"](0),"+",re["$[]"](2))}),j(m,"$_reduce_20",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"BinaryOp").$new(re["$[]"](0),"-",re["$[]"](2))}),j(m,"$_reduce_22",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"BinaryOp").$new(re["$[]"](0),"*",re["$[]"](2))}),j(m,"$_reduce_23",function(re,le,ee){return re["$[]"](3).$new(re["$[]"](0),re["$[]"](2))}),j(m,"$_reduce_25",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),j(m,"$_reduce_26",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"DivideWithCeil")}),j(m,"$_reduce_27",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"DivideWithCeil")}),j(m,"$_reduce_28",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"DivideWithRound")}),j(m,"$_reduce_29",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"DivideWithFloor")}),j(m,"$_reduce_30",function(re,le,ee){return re["$[]"](1)}),j(m,"$_reduce_31",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"Negative").$new(re["$[]"](1))}),j(m,"$_reduce_33",function(re,le,ee){return re["$[]"](1)}),j(m,"$_reduce_34",function(re,le,ee){return q(q($("Arithmetic"),"Node"),"Number").$new(re["$[]"](0))}),j(m,"$_reduce_none",function(re,le,ee){return re["$[]"](0)})},Opal.modules["bcdice/common_command/upper_dice"]=function(a){var H,x,I,g,R,_,D,y,M,K,P=a.module,V=a.const_set,k=a.thrower,j=a.def,E=[],W=a.nil;return a.top.$require("bcdice/common_command/upper_dice/parser"),H=E,x=K=[P(E[0],"BCDice")].concat(H),I=M=[P(K[0],"CommonCommand")].concat(x),V((y=[D=P(M[0],"UpperDice")].concat(I))[0],"PREFIX_PATTERN",/\d+U\d+/.$freeze()),R=[g=a.get_singleton_class(D)].concat(y),_=a.$r(R),j(g,"$eval",function(f,T,v){try{var d;return k("eval_return"),(d=_("Parser").$parse(f))===W||null==d?W:d.$eval(T,v)}catch(m){if(m===a.t_eval_return)return m.$v;throw m}})},Opal.modules["bcdice/common_command/version"]=function(a){var X,q,D,z,_,b,y,g,w,U,P=a.module,V=a.const_set,k=a.truthy,j=a.send,B=a.def,E=[],W=a.nil,Y=a.$$$;return X=E,q=U=[P(E[0],"BCDice")].concat(X),D=w=[P(U[0],"CommonCommand")].concat(q),V((g=[y=P(w[0],"Version")].concat(D))[0],"PREFIX_PATTERN",/BCDiceVersion/.$freeze()),_=[z=a.get_singleton_class(y)].concat(g),b=a.$r(_),B(z,"$eval",function(T,v,S){return T=T.$split(" ",2).$first(),k(T["$match?"](/^BCDiceVersion$/i))?j(b("Result").$new(),"tap",[],function(G){var m;return null==G&&(G=W),m=["BCDice "+Y(b("BCDice"),"VERSION")],j(G,"text=",m),m[m.length-1]}):W})},Opal.queue(function(a){var W,K,x,q,H,P=a.module,V=a.const_set,k=a.top,j=[];return k.$require("bcdice/common_command/add_dice"),k.$require("bcdice/common_command/barabara_dice"),k.$require("bcdice/common_command/tally_dice"),k.$require("bcdice/common_command/calc"),k.$require("bcdice/common_command/choice"),k.$require("bcdice/common_command/d66_dice"),k.$require("bcdice/common_command/repeat"),k.$require("bcdice/common_command/reroll_dice"),k.$require("bcdice/common_command/upper_dice"),k.$require("bcdice/common_command/version"),W=j,K=H=[P(j[0],"BCDice")].concat(W),x=[P(H[0],"CommonCommand")].concat(K),q=a.$r(x),V(x[0],"COMMANDS",[q("AddDice"),q("BarabaraDice"),q("TallyDice"),q("Calc"),q("Choice"),q("D66Dice"),q("Repeat"),q("RerollDice"),q("UpperDice"),q("Version")].$freeze())})},9993:function(){(function(l){"use strict";var Q;if(typeof globalThis<"u"?l=globalThis:typeof global<"u"?l=global:typeof window<"u"&&(l=window),null==l.console&&(l.console={}),"log"in(Q="object"==typeof l.console?l.console:{})||(Q.log=function(){}),"warn"in Q||(Q.warn=Q.log),typeof l.Opal<"u")return Q.warn("Opal already loaded. Loading twice can cause troubles, please fix your setup."),l.Opal;var te,a,P,V,k,j,B,E=l.Opal={};E.global=l,E.config={missing_require_severity:"error",unsupported_features_severity:"warning",experimental_features_severity:"warning",enable_stack_trace:!0};var W=Function.prototype.call,Y=Function.prototype.bind,H=Object.hasOwn||W.bind(Object.prototype.hasOwnProperty),X=Object.setPrototypeOf,K=W.bind(Array.prototype.slice),U=W.bind(Array.prototype.splice),q=4;function M(){return q+=2}E.uid=M,E.id=function(o){return o.$$is_number?2*o+1:(null==o.$$id&&D(o,"$$id",M()),o.$$id)};var w=E.gvars={};function I(o,p){if(o||(o=E.Exception||Error),!B||!B.$raise)throw o.$new?o.$new(p):new o(p);arguments.length>2?B.$raise(o.$new.apply(o,K(arguments,1))):B.$raise(o,p)}function D(o,p,F){"string"==typeof o?o[p]=F:Object.defineProperty(o,p,{value:F,enumerable:!1,configurable:!0,writable:!0})}E.exit=function(o){w.DEBUG&&Q.log("Exited with status "+o)},E.exceptions=[],E.pop_exception=function(){var o=E.exceptions.pop();o?(w["!"]=o,w["@"]=o.$backtrace()):w["!"]=w["@"]=te},E.prop=D,E.defineProperty=E.prop,E.slice=K;var y=E.truthy=function(o){return!(!1===o||te===o||null==o||o instanceof Boolean&&!0!==o.valueOf())};function g(o){var p,F,Z;for(p=0,F=E.tracers_for_class.length;p<F;p++)(Z=E.tracers_for_class[p]).trace_object=o,Z.block.$call(Z)}function z(o,p){if(o.$$autoload[p].loaded){if(o.$$autoload[p].loaded&&!o.$$autoload[p].required&&o.$$autoload[p].exception)throw o.$$autoload[p].exception}else{o.$$autoload[p].loaded=!0;try{E.Kernel.$require(o.$$autoload[p].path)}catch(F){throw o.$$autoload[p].exception=F,F}if(o.$$autoload[p].required=!0,null!=o.$$const[p])return o.$$autoload[p].success=!0,o.$$const[p]}}function R(o,p){if(o){if(null!=o.$$const[p])return o.$$const[p];if(o.$$autoload&&o.$$autoload[p])return z(o,p)}}function b(o,p){var F,Z,ie;if(null!=o)for(F=0,Z=(ie=C(o)).length;F<Z;F++){if(ie[F].$$const&&H(ie[F].$$const,p))return ie[F].$$const[p];if(ie[F].$$autoload&&ie[F].$$autoload[p])return z(ie[F],p)}}function T(o,p){return(o||P).$const_missing(p)}function v(o,p,F){var Z=!0;return(null==o||"::"===o)&&(o=P),F.$$is_a_module&&((null==F.$$name||F.$$name===te)&&(F.$$name=p),null==F.$$base_module&&(F.$$base_module=o)),o.$$const=o.$$const||Object.create(null),(p in o.$$const||"$$autoload"in o&&p in o.$$autoload)&&(Z=!1),o.$$const[p]=F,o.$$=o.$$const,E.const_cache_version++,o===P&&(E[p]=F),D(o,p,F),Z&&o.$const_added&&!o.$const_added.$$pristine&&o.$const_added(p),F}function S(o,p,F){var Z;if(Z=null!=p&&p.$$bridge?function(){var fe=K(arguments),_e=new(Y.apply(p.$$constructor,[null].concat(fe)));return X(_e,Z.$$prototype),_e}:function(){},o&&o!==te&&D(Z,"displayName","::"+o),D(Z,"$$name",o),D(Z,"$$constructor",Z),D(Z,"$$prototype",Z.prototype),D(Z,"$$const",{}),D(Z,"$$is_class",!0),D(Z,"$$is_a_module",!0),D(Z,"$$super",p),D(Z,"$$cvars",{}),D(Z,"$$own_included_modules",[]),D(Z,"$$own_prepended_modules",[]),D(Z,"$$ancestors",[]),D(Z,"$$ancestors_cache_version",null),D(Z,"$$subclasses",[]),D(Z.$$prototype,"$$class",Z),E.Class&&X(Z,E.Class.prototype),null!=p){if(X(Z.$$prototype,p.$$prototype),!0!==F)if(typeof WeakRef<"u"){var ie,ue,ce=[];for(ie=0;ie<p.$$subclasses.length;ie++)void 0!==(ue=p.$$subclasses[ie]).deref()&&ce.push(ue);ce.push(new WeakRef(Z)),p.$$subclasses=ce}else p.$$subclasses.push(Z);p.$$meta&&E.build_class_singleton_class(Z)}return Z}function m(o){var p=function(){},F=p;return o&&D(p,"displayName",o+".constructor"),D(F,"$$name",o),D(F,"$$prototype",p.prototype),D(F,"$$const",{}),D(F,"$$is_module",!0),D(F,"$$is_a_module",!0),D(F,"$$cvars",{}),D(F,"$$iclasses",[]),D(F,"$$own_included_modules",[]),D(F,"$$own_prepended_modules",[]),D(F,"$$ancestors",[F]),D(F,"$$ancestors_cache_version",null),X(F,E.Module.prototype),F}function $(o,p){o.hasOwnProperty("$$meta")?o.$$meta=p:D(o,"$$meta",p),o.$$frozen?o.$$meta.$freeze():X(o,p.$$prototype)}function r(o){return o.hasOwnProperty("$$iclass")&&o.hasOwnProperty("$$root")}function i(o){var p=s(o);return o.$$is_module&&o.$$iclasses.push(p),p}function s(o){var p={},F=o.$$prototype;F.hasOwnProperty("$$dummy")&&(F=F.$$define_methods_on);var ue,Z=Object.getOwnPropertyNames(F),ie=Z.length;for(ue=0;ue<ie;ue++){var ce=Z[ue];D(p,ce,F[ce])}return D(p,"$$iclass",!0),D(p,"$$module",o),p}function c(o){var p=o.length,F=o[0];if(D(F,"$$root",!0),1===p)return{first:F,last:F};for(var Z=F,ie=1;ie<p;ie++){var ue=o[ie];X(Z,ue),Z=ue}return{first:o[0],last:o[p-1]}}function u(o){if(!o.hasOwnProperty("$$dummy")){if(o.hasOwnProperty("$$iclass"))return o.$$module;if(o.hasOwnProperty("$$class"))return o.$$class}}function C(o){if(!o)return[];if(o.$$ancestors_cache_version===E.const_cache_version)return o.$$ancestors;var F,Z,ie,p=[];for(F=0,Z=function N(o){return o.$$own_prepended_modules.concat([o]).concat(o.$$own_included_modules)}(o),ie=Z.length;F<ie;F++)p.push(Z[F]);if(o.$$super)for(F=0,ie=(Z=C(o.$$super)).length;F<ie;F++)p.push(Z[F]);return o.$$ancestors_cache_version=E.const_cache_version,o.$$ancestors=p,p}function J(o){return o.hasOwnProperty("$$meta")&&null!==o.$$meta?C(o.$$meta):C(o.$$class)}function ne(o,p){"number"==typeof p?o.$$arity=p:"object"==typeof p&&Object.assign(o,p)}E.falsy=function(o){return!y(o)},E.type_error=function(o,p,F,Z){o=o.$$class,I(E.TypeError,Z&&F?"can't convert "+o+" into "+p+" ("+o+"#"+F+" gives "+(Z=Z.$$class)+")":"no implicit conversion of "+o+" into "+p)},E.coerce_to=function(o,p,F,Z){var ie;return"to_int"===F&&p===E.Integer&&o.$$is_number?o<0?Math.ceil(o):Math.floor(o):"to_str"===F&&p===E.String&&o.$$is_string||E.is_a(o,p)?o:o["$respond_to?"].$$pristine&&o.$method_missing.$$pristine?((null==(ie=o[oe(F)])||ie.$$stub)&&E.type_error(o,p),ie.apply(o,Z)):(o["$respond_to?"](F)||E.type_error(o,p),null==Z&&(Z=[]),E.send(o,F,Z))},E.respond_to=function(o,p,F){if(null==o||!o.$$class)return!1;F=!!F;var Z=o[p];return o["$respond_to?"].$$pristine?"function"==typeof Z&&!Z.$$stub||(o["$respond_to_missing?"].$$pristine?void 0:E.send(o,o["$respond_to_missing?"],[p.substr(1),F])):E.send(o,o["$respond_to?"],[p.substr(1),F])},E.trace_class=!1,E.tracers_for_class=[],E.const_get_local=function(o,p,F){var Z;if(null!=o)return"::"===o&&(o=P),!o.$$is_module&&!o.$$is_class&&I(E.TypeError,o.toString()+" is not a class/module"),null!=(Z=R(o,p))||F?Z:T(o,p)},E.const_get_qualified=function(o,p,F){var Z,ie,ue,ce=E.const_cache_version;return null==p?(Z=R(P,o))??E.const_get_qualified(P,o,F):null!=o?("::"===o&&(o=P),!o.$$is_module&&!o.$$is_class&&I(E.TypeError,o.toString()+" is not a class/module"),null==(ie=o.$$const_cache)&&(D(o,"$$const_cache",Object.create(null)),ie=o.$$const_cache),null==(ue=ie[p])||ue[0]!==ce?(null!=(Z=R(o,p))||(Z=b(o,p)),ie[p]=[ce,Z]):Z=ue[1],null!=Z||F?Z:T(o,p)):void 0},E.const_cache_version=1,E.const_get_relative=function(o,p,F){var ie,ce,fe,Z=o[0],ue=E.const_cache_version;return null==(ce=o.$$const_cache)&&(D(o,"$$const_cache",Object.create(null)),ce=o.$$const_cache),null==(fe=ce[p])||fe[0]!==ue?(null!=(ie=R(Z,p))||null!=(ie=function _(o,p){var F,Z,ie;if(0!==o.length)for(F=0,Z=o.length;F<Z;F++){if(null!=(ie=o[F].$$const[p]))return ie;if(o[F].$$autoload&&o[F].$$autoload[p])return z(o[F],p)}}(o,p))||null!=(ie=b(Z,p))||(ie=function f(o,p){if(null==o||o.$$is_module)return b(P,p)}(Z,p)),ce[p]=[ue,ie]):ie=fe[1],null!=ie||F?ie:T(Z,p)},E.const_set=v,E.constants=function(o,p){null==p&&(p=!0);var F,ie,ue,fe,Z=[o],ce={};for(p&&(Z=Z.concat(C(o))),p&&o.$$is_module&&(Z=Z.concat([E.Object]).concat(C(E.Object))),ie=0,ue=Z.length;ie<ue&&(F=Z[ie],o===P||F!=P);ie++){for(fe in F.$$const)ce[fe]=!0;if(F.$$autoload)for(fe in F.$$autoload)ce[fe]=!0}return Object.keys(ce)},E.const_remove=function(o,p){if(E.const_cache_version++,null!=o.$$const[p]){var F=o.$$const[p];return delete o.$$const[p],F}if(o.$$autoload&&o.$$autoload[p])return delete o.$$autoload[p],te;I(E.NameError,"constant "+o+"::"+o.$name()+" not defined")},E.const_get_relative_factory=function(o){return function(p,F){return E.$$(o,p,F)}},E.$$=E.const_get_relative,E.$$$=E.const_get_qualified,E.$r=E.const_get_relative_factory,E.allocate_class=S,E.klass=function(o,p,F){var Z;null==o||"::"==o?o=P:!o.$$is_class&&!o.$$is_module&&(o=o.$$class),null!=p&&(!p.hasOwnProperty||p.hasOwnProperty&&!p.hasOwnProperty("$$is_class"))&&(p.constructor&&"Function"==p.constructor.name?(Z=p,p=P):I(E.TypeError,"superclass must be a Class ("+(p.constructor&&(p.constructor.name||p.constructor.$$name)||typeof p)+" given)"));var ie=function d(o,p){var F=R(o,p);if(F)return F.$$is_class||I(E.TypeError,p+" is not a class"),F}(o,F);return null!=ie?p&&function G(o,p){o.$$super!==p&&I(E.TypeError,"superclass mismatch for class "+o.$$name)}(ie,p):(null==p&&(p=P),v(o,F,ie=S(F,p)),p.$inherited&&p.$inherited(ie),Z&&E.bridge(Z,ie)),E.trace_class&&g(ie),ie},E.allocate_module=m,E.module=function(o,p){var F;return null==o||"::"==o?o=P:!o.$$is_class&&!o.$$is_module&&(o=o.$$class),F=function h(o,p){var F=R(o,p);return null==F&&o===P&&(F=b(P,p)),F&&!F.$$is_module&&F!==P&&I(E.TypeError,p+" is not a module"),F}(o,p),null==F&&v(o,p,F=m(p)),E.trace_class&&g(F),F},E.get_singleton_class=function(o){return o.$$meta?o.$$meta:o.hasOwnProperty("$$is_class")?E.build_class_singleton_class(o):o.hasOwnProperty("$$is_module")?E.build_module_singleton_class(o):E.build_object_singleton_class(o)},E.build_class_singleton_class=function(o){if(o.$$meta)return o.$$meta;var F=S(null,o===a?k:E.get_singleton_class(o.$$super),!0);return D(F,"$$is_singleton",!0),D(F,"$$singleton_of",o),$(o,F),D(o,"$$class",E.Class),F},E.build_module_singleton_class=function(o){if(o.$$meta)return o.$$meta;var p=S(null,E.Module,!0);return D(p,"$$is_singleton",!0),D(p,"$$singleton_of",o),$(o,p),D(o,"$$class",E.Module),p},E.build_object_singleton_class=function(o){var F=S(te,o.$$class,!0);return D(F,"$$is_singleton",!0),D(F,"$$singleton_of",o),delete F.$$prototype.$$class,$(o,F),F},E.is_method=function(o){return"$"===o[0]&&"$"!==o[1]},E.instance_methods=function(o){for(var p=[],F=[],Z=C(o),ie=0,ue=Z.length;ie<ue;ie++){var fe=Z[ie].$$prototype;fe.hasOwnProperty("$$dummy")&&(fe=fe.$$define_methods_on);for(var _e=Object.getOwnPropertyNames(fe),de=0,me=_e.length;de<me;de++){var he=_e[de];if(E.is_method(he)){var ge=he.slice(1),ve=fe[he];ve.$$stub&&-1===p.indexOf(ge)&&p.push(ge),!ve.$$stub&&-1===F.indexOf(ge)&&-1===p.indexOf(ge)&&F.push(ge)}}}return F},E.own_instance_methods=function(o){var p=[],F=o.$$prototype;F.hasOwnProperty("$$dummy")&&(F=F.$$define_methods_on);for(var Z=Object.getOwnPropertyNames(F),ie=0,ue=Z.length;ie<ue;ie++){var ce=Z[ie];if(E.is_method(ce)&&!F[ce].$$stub){var _e=ce.slice(1);p.push(_e)}}return p},E.methods=function(o){return E.instance_methods(o.$$meta||o.$$class)},E.own_methods=function(o){return o.$$meta?E.own_instance_methods(o.$$meta):[]},E.receiver_methods=function(o){var p=E.get_singleton_class(o),F=E.own_instance_methods(p),Z=E.own_instance_methods(p.$$super);return F.concat(Z)},E.class_variables=function(o){var F,p=C(o),ie={};for(F=p.length-1;F>=0;F--){var ue=p[F];for(var ce in ue.$$cvars)ie[ce]=ue.$$cvars[ce]}return ie},E.class_variable_set=function(o,p,F){var ie,Z=C(o);for(ie=Z.length-2;ie>=0;ie--){var ce=Z[ie];if(H(ce.$$cvars,p))return ce.$$cvars[p]=F,F}return o.$$cvars[p]=F,F},E.class_variable_get=function(o,p,F){if(H(o.$$cvars,p))return o.$$cvars[p];var ie,Z=C(o),ue=Z.length;for(ie=0;ie<ue;ie++){var ce=Z[ie];if(H(ce.$$cvars,p))return ce.$$cvars[p]}return F||I(E.NameError,"uninitialized class variable "+p+" in "+o.$name()),te},E.append_features=function(o,p){var F=C(o),Z=[];-1!==F.indexOf(p)&&I(E.ArgumentError,"cyclic include detected");for(var ie=0,ue=F.length;ie<ue;ie++){var fe=i(F[ie]);D(fe,"$$included",!0),Z.push(fe)}var me,he,_e=C(p),de=c(Z);if(-1===_e.indexOf(o))me=p.$$prototype,he=Object.getPrototypeOf(p.$$prototype);else{for(var ge=p.$$prototype,ve=Object.getPrototypeOf(ge);null!=ve&&(ve.$$module!==o||!r(ve));)ge=ve,ve=Object.getPrototypeOf(ve);if(ve){for(var pe=Object.getPrototypeOf(ve);pe.hasOwnProperty("$$iclass")&&!r(pe);)pe=Object.getPrototypeOf(pe);me=ge,he=pe}else me=p.$$prototype,he=Object.getPrototypeOf(p.$$prototype)}X(me,de.first),X(de.last,he),p.$$own_included_modules=function e(o){for(var F,p=[],Z=Object.getPrototypeOf(o.$$prototype);Z&&!Z.hasOwnProperty("$$class");)(F=u(Z))&&p.push(F),Z=Object.getPrototypeOf(Z);return p}(p),E.const_cache_version++},E.prepend_features=function(o,p){var F=C(o),Z=[];-1!==F.indexOf(p)&&I(E.ArgumentError,"cyclic prepend detected");for(var ie=0,ue=F.length;ie<ue;ie++){var fe=i(F[ie]);D(fe,"$$prepended",!0),Z.push(fe)}var he,ge,ve,_e=c(Z),de=p.$$prototype,me=Object.getPrototypeOf(de);if(de.hasOwnProperty("$$dummy")?he=de.$$define_methods_on:(he=s(p),function t(o){for(var p=o.$$prototype,F=Object.getOwnPropertyNames(p),Z=0;Z<F.length;Z++){var ie=F[Z];E.is_method(ie)&&delete p[ie]}}(p),D(de,"$$dummy",!0),D(de,"$$define_methods_on",he),X(de,he),X(he,me)),-1===C(p).indexOf(o))for(ge=de,ve=Object.getPrototypeOf(de);null!=ve&&!ve.hasOwnProperty("$$root")&&ve!==he&&ve.hasOwnProperty("$$iclass");)ve=Object.getPrototypeOf(ve);else I(E.RuntimeError,"Prepending a module multiple times is not supported");X(ge,_e.first),X(_e.last,ve),p.$$own_prepended_modules=function n(o){var F,p=[],Z=Object.getPrototypeOf(o.$$prototype);if(o.$$prototype.hasOwnProperty("$$dummy"))for(;Z&&Z!==o.$$prototype.$$define_methods_on;)(F=u(Z))&&p.push(F),Z=Object.getPrototypeOf(Z);return p}(p),E.const_cache_version++},E.bridge=function(o,p){o.hasOwnProperty("$$bridge")&&I(E.ArgumentError,"already bridged"),D(o,"$$bridge",p),X(o.prototype,(p.$$super||E.Object).$$prototype),D(p,"$$prototype",o.prototype),D(p.$$prototype,"$$class",p),D(p,"$$constructor",o),D(p,"$$bridge",!0)},E.ancestors=C,E.included_modules=function(o){for(var p=[],F=null,Z=Object.getPrototypeOf(o.$$prototype);Z&&Object.getPrototypeOf(Z);Z=Object.getPrototypeOf(Z))(F=u(Z))&&F.$$is_module&&Z.$$iclass&&Z.$$included&&p.push(F);return p},E.add_stubs=function(o){for(var F,Z,p=E.BasicObject.$$prototype,ie=0,ue=(o=o.split(",")).length;ie<ue;ie++)(null==(Z=p[F=oe(o[ie])])||Z.$$stub)&&E.add_stub_for(p,F)},E.add_stub_for=function(o,p){D(o,p,E.stub_for(p))},E.stub_for=function(o){function p(){this.$method_missing.$$p=p.$$p,p.$$p=null;for(var F=new Array(arguments.length),Z=0,ie=F.length;Z<ie;Z++)F[Z]=arguments[Z];return this.$method_missing.apply(this,[o.slice(1)].concat(F))}return p.$$stub=!0,p},E.ac=function(o,p,F,Z){var ie="";ie+=F.$$is_a_module?F.$$name+".":F.$$class.$$name+"#",I(E.ArgumentError,"["+(ie+=Z)+"] wrong number of arguments (given "+o+", expected "+p+")")},E.block_ac=function(o,p,F){I(E.ArgumentError,"`block in "+F+"': wrong number of arguments (given "+o+", expected "+p+")")},E.find_super=function(o,p,F,Z,ie){for(var ce,fe,ue=oe(p),de=(ce=J(o)).indexOf(F.$$owner)+1;de<ce.length;de++){var he=ce[de].$$prototype;if(he.hasOwnProperty("$$dummy")&&(he=he.$$define_methods_on),he.hasOwnProperty(ue)){fe=he[ue];break}}return!Z&&fe&&fe.$$stub&&o.$method_missing.$$pristine&&I(E.NoMethodError,"super: no superclass method `"+p+"' for "+o,p),fe.$$stub&&!ie?null:fe},E.find_block_super=function(o,p,F,Z,ie){var ue=p;return F||I(E.RuntimeError,"super called outside of method"),ie&&F.$$define_meth&&I(E.RuntimeError,"implicit argument passing of super from method defined by define_method() is not supported. Specify all arguments explicitly"),F.$$def&&(ue=F.$$jsid),E.find_super(o,ue,F,Z)},E.find_super_dispatcher=E.find_super,E.find_iter_super_dispatcher=E.find_block_super,E.yield1=function(o,p){"function"!=typeof o&&I(E.LocalJumpError,"no block given");var Z=o.$$has_trailing_comma_in_args;return(o.length>1||(o.$$has_top_level_mlhs_arg||Z)&&1===o.length)&&(p=E.to_ary(p)),(o.length>1||Z&&1===o.length)&&p.$$is_array?o.apply(null,p):o(p)},E.yieldX=function(o,p){if("function"!=typeof o&&I(E.LocalJumpError,"no block given"),o.length>1&&1===p.length&&p[0].$$is_array)return o.apply(null,p[0]);if(!p.$$is_array){for(var F=new Array(p.length),Z=0,ie=F.length;Z<ie;Z++)F[Z]=p[Z];return o.apply(null,F)}return o.apply(null,p)},E.rescue=function(o,p){for(var F=0;F<p.length;F++){var Z=p[F];if(Z.$$is_array){var ie=E.rescue(o,Z);if(ie)return ie}else if(Z===E.JS.Error||Z["$==="](o))return Z}return null},E.is_a=function(o,p){return null!=p&&o.$$meta===p||o.$$class===p||(o.$$is_number&&p.$$is_number_class?!p.$$is_integer_class||o%1==0:-1!==C(o.$$is_class?E.get_singleton_class(o):o.$$meta||o.$$class).indexOf(p))},E.to_hash=function(o){if(o.$$is_hash)return o;if(o["$respond_to?"]("to_hash",!0)){var p=o.$to_hash();if(p.$$is_hash)return p;I(E.TypeError,"Can't convert "+o.$$class+" to Hash ("+o.$$class+"#to_hash gives "+p.$$class+")")}else I(E.TypeError,"no implicit conversion of "+o.$$class+" into Hash")},E.to_ary=function(o){if(o.$$is_array)return o;if(!o["$respond_to?"]("to_ary",!0))return[o];var p=o.$to_ary();return p===te?[o]:p.$$is_array?p:void I(E.TypeError,"Can't convert "+o.$$class+" to Array ("+o.$$class+"#to_ary gives "+p.$$class+")")},E.to_a=function(o){if(o.$$is_array)return o.slice();if(!o["$respond_to?"]("to_a",!0))return[o];var p=o.$to_a();return p===te?[o]:p.$$is_array?p:void I(E.TypeError,"Can't convert "+o.$$class+" to Array ("+o.$$class+"#to_a gives "+p.$$class+")")},E.extract_kwargs=function(o){var p=o[o.length-1];if(null!=p&&E.respond_to(p,"$to_hash",!0))return U(o,o.length-1),p},E.kwrestargs=function(o,p){var ie,F=[],Z={},ue=o.$$smap;for(ie in ue)p[ie]||(F.push(ie),Z[ie]=ue[ie]);return E.hash2(F,Z)};var se={};function oe(o){return se[o]||(se[o]="$"+o)}function ae(o){return"function"==typeof o&&!o.$$stub}E.jsid=oe,E.send=function(o,p,F,Z,ie){var ue;return"function"==typeof p?(ue=p,p=null):"string"==typeof p?ue=o[oe(p)]:I(E.NameError,"Passed method should be a string or a function"),E.send2(o,ue,p,F,Z,ie)},E.send2=function(o,p,F,Z,ie,ue){return null==p&&null!=F&&o.$method_missing&&(p=o.$method_missing,Z=[F].concat(Z)),ne(ie,ue),"function"==typeof ie&&(p.$$p=ie),p.apply(o,Z)},E.refined_send=function(o,p,F,Z,ie,ue){var ce,fe,_e,de,me,he,ge,ve,pe,be;for(de=J(p),ce=0;ce<de.length;ce++)for(me=E.id(de[ce]),fe=0;fe<o.length;fe++)for(_e=(he=o[fe]).length-1;_e>=0;_e--)if(!(typeof(ge=he[_e]).$$refine_modules>"u")&&!(typeof(ve=ge.$$refine_modules)[me]>"u")&&typeof(pe=ve[me]).$$prototype[oe(F)]<"u")return be=pe.$$prototype[oe(F)],E.send2(p,be,F,Z,ie,ue);return E.send(p,F,Z,ie,ue)},E.lambda=function(o,p){return o.$$is_lambda=!0,ne(o,p),o},E.def=function(o,p,F,Z){return ne(F,Z),o===E.top?E.defn(E.Object,p,F):!o.$$eval&&o.$$is_a_module?E.defn(o,p,F):E.defs(o,p,F)},E.defn=function(o,p,F){re(o),F.displayName=p,F.$$owner=o;var Z=p.substr(1),ie=o.$$prototype;if(ie.hasOwnProperty("$$dummy")&&(ie=ie.$$define_methods_on),D(ie,p,F),o.$$is_module){o.$$module_function&&E.defs(o,p,F);for(var ue=0,ce=o.$$iclasses,fe=ce.length;ue<fe;ue++)D(ce[ue],p,F)}var de=o.$$singleton_of;return!o.$method_added||o.$method_added.$$stub||de?de&&de.$singleton_method_added&&!de.$singleton_method_added.$$stub&&de.$singleton_method_added(Z):o.$method_added(Z),Z},E.defs=function(o,p,F,Z){return ne(F,Z),(o.$$is_string||o.$$is_number)&&I(E.TypeError,"can't define singleton"),E.defn(E.get_singleton_class(o),p,F)},E.rdef=function(o,p){H(o.$$prototype,p)||I(E.NameError,"method '"+p.substr(1)+"' not defined in "+o.$name()),delete o.$$prototype[p],o.$$is_singleton?o.$$prototype.$singleton_method_removed&&!o.$$prototype.$singleton_method_removed.$$stub&&o.$$prototype.$singleton_method_removed(p.substr(1)):o.$method_removed&&!o.$method_removed.$$stub&&o.$method_removed(p.substr(1))},E.udef=function(o,p){(!o.$$prototype[p]||o.$$prototype[p].$$stub)&&I(E.NameError,"method '"+p.substr(1)+"' not defined in "+o.$name()),E.add_stub_for(o.$$prototype,p),o.$$is_singleton?o.$$prototype.$singleton_method_undefined&&!o.$$prototype.$singleton_method_undefined.$$stub&&o.$$prototype.$singleton_method_undefined(p.substr(1)):o.$method_undefined&&!o.$method_undefined.$$stub&&o.$method_undefined(p.substr(1))},E.alias=function(o,p,F){var ue,ce,Z=oe(p),ie=oe(F);if(typeof o.$$prototype>"u"&&(o=E.Object),ue=o.$$prototype[ie],o.$$eval)return E.alias(E.get_singleton_class(o),p,F);if(!ae(ue)){for(var fe=o.$$super;"function"!=typeof ue&&fe;)ue=fe[ie],fe=fe.$$super;!ae(ue)&&o.$$is_module&&(ue=E.Object.$$prototype[ie]),ae(ue)||I(E.NameError,"undefined method `"+F+"' for class `"+o.$name()+"'")}ue.$$alias_of&&(ue=ue.$$alias_of),ce=function(){var de,me,he,_e=ce.$$p;for(de=new Array(arguments.length),me=0,he=arguments.length;me<he;me++)de[me]=arguments[me];return ce.$$p=null,E.send(this,ue,de,_e)};try{Object.defineProperty(ce,"length",{value:ue.length})}catch{}return ce.displayName=p,ce.$$arity=null==ue.$$arity?ue.length:ue.$$arity,ce.$$parameters=ue.$$parameters,ce.$$source_location=ue.$$source_location,ce.$$alias_of=ue,ce.$$alias_name=p,E.defn(o,Z,ce),o},E.alias_gvar=function(o,p){return Object.defineProperty(w,o,{configurable:!0,enumerable:!0,get:function(){return w[p]},set:function(F){w[p]=F}}),te},E.alias_native=function(o,p,F){var Z=oe(p),ie=o.$$prototype[F];return("function"!=typeof ie||ie.$$stub)&&I(E.NameError,"undefined native method `"+F+"' for class `"+o.$name()+"'"),E.defn(o,Z,ie),o},E.hash_init=function(o){o.$$smap=Object.create(null),o.$$map=Object.create(null),o.$$keys=[]},E.hash_clone=function(o,p){p.$$none=o.$$none,p.$$proc=o.$$proc;for(var ce,fe,F=0,Z=o.$$keys,ie=o.$$smap,ue=Z.length;F<ue;F++)(ce=Z[F]).$$is_string?fe=ie[ce]:(fe=ce.value,ce=ce.key),E.hash_put(p,ce,fe)},E.hash_put=function(o,p,F){if(p.$$is_string)return H(o.$$smap,p)||o.$$keys.push(p),void(o.$$smap[p]=F);var Z,ie,ue;if(Z=o.$$by_identity?E.id(p):p.$hash(),!H(o.$$map,Z))return o.$$keys.push(ie={key:p,key_hash:Z,value:F}),void(o.$$map[Z]=ie);for(ie=o.$$map[Z];ie;){if(p===ie.key||p["$eql?"](ie.key)){ue=void 0,ie.value=F;break}ue=ie,ie=ie.next}ue&&(o.$$keys.push(ie={key:p,key_hash:Z,value:F}),ue.next=ie)},E.hash_get=function(o,p){if(p.$$is_string)return H(o.$$smap,p)?o.$$smap[p]:void 0;var F,Z;if(F=o.$$by_identity?E.id(p):p.$hash(),H(o.$$map,F))for(Z=o.$$map[F];Z;){if(p===Z.key||p["$eql?"](Z.key))return Z.value;Z=Z.next}},E.hash_delete=function(o,p){var F,ue,ce,Z=o.$$keys,ie=Z.length;if(p.$$is_string){if("string"!=typeof p&&(p=p.valueOf()),!H(o.$$smap,p))return;for(F=0;F<ie;F++)if((ce=Z[F]).$$is_string&&"string"!=typeof ce&&(ce=ce.valueOf()),ce===p){Z.splice(F,1);break}return ue=o.$$smap[p],delete o.$$smap[p],ue}var fe=p.$hash();if(H(o.$$map,fe))for(var de,_e=o.$$map[fe];_e;){if(p===_e.key||p["$eql?"](_e.key)){for(ue=_e.value,F=0;F<ie;F++)if(Z[F]===_e){Z.splice(F,1);break}return de&&_e.next?de.next=_e.next:de?delete de.next:_e.next?o.$$map[fe]=_e.next:delete o.$$map[fe],ue}de=_e,_e=_e.next}},E.hash_rehash=function(o){for(var Z,ie,ue,p=0,F=o.$$keys.length;p<F;p++)if(!o.$$keys[p].$$is_string&&(Z=o.$$keys[p].key.$hash())!==o.$$keys[p].key_hash){for(ie=o.$$map[o.$$keys[p].key_hash],ue=void 0;ie;){if(ie===o.$$keys[p]){ue&&ie.next?ue.next=ie.next:ue?delete ue.next:ie.next?o.$$map[o.$$keys[p].key_hash]=ie.next:delete o.$$map[o.$$keys[p].key_hash];break}ue=ie,ie=ie.next}if(o.$$keys[p].key_hash=Z,!H(o.$$map,Z)){o.$$map[Z]=o.$$keys[p];continue}for(ie=o.$$map[Z],ue=void 0;ie;){if(ie===o.$$keys[p]){ue=void 0;break}ue=ie,ie=ie.next}ue&&(ue.next=o.$$keys[p])}},E.hash=function(){var p,F,Z,ie,ue,o=arguments.length;if(1===o&&arguments[0].$$is_hash)return arguments[0];if(F=new E.Hash,E.hash_init(F),1===o){if(p=arguments[0],arguments[0].$$is_array){for(ie=p.length,Z=0;Z<ie;Z++)2!==p[Z].length&&I(E.ArgumentError,"value not of length 2: "+p[Z].$inspect()),E.hash_put(F,ue=p[Z][0],p[Z][1]);return F}for(ue in p=arguments[0])H(p,ue)&&E.hash_put(F,ue,p[ue]);return F}for(o%2!=0&&I(E.ArgumentError,"odd number of arguments for Hash"),Z=0;Z<o;Z+=2)E.hash_put(F,ue=arguments[Z],arguments[Z+1]);return F},E.hash2=function(o,p){var F=new E.Hash;return F.$$smap=p,F.$$map=Object.create(null),F.$$keys=o,F},E.range=function(o,p,F){var Z=new E.Range;return Z.begin=o,Z.end=p,Z.excl=F,Z};var $e=["constructor","displayName","__count__","__noSuchMethod__","__parent__","__proto__","hasOwnProperty","valueOf"];function re(o){o.$$frozen&&I(E.FrozenError,"can't modify frozen "+o.$class()+": "+o,E.hash2(["receiver"],{receiver:o}))}function le(o,p){return"number"==typeof o&&"number"==typeof p}function ee(o,p){return"number"==typeof o&&"number"==typeof p||"string"==typeof o&&"string"==typeof p}function L(o){return function(){return o}}E.ivar=function(o){return-1!==$e.indexOf(o)&&(o+="$"),o},E.deny_frozen_access=re,E.freeze=function(o){return D(o,"$$frozen",!0),o.hasOwnProperty("$$id")||D(o,"$$id",M()),o.hasOwnProperty("$$meta")?o.$$meta.$freeze():D(o,"$$meta",null),o.hasOwnProperty("$$comparable")||D(o,"$$comparable",null),Object.seal(o),o},E.freeze_props=function(o){var p,F,Z;for(p in o)("string"!=(F=typeof p)&&"object"!==F||"$"!==p[0])&&(Z=Object.getOwnPropertyDescriptor(o,p))&&Z.enumerable&&Z.writable&&function(){var ie=o[p];Object.defineProperty(o,p,{get:function(){return ie},set:function(ue){re(o)},enumerable:!0})}()},E.escape_regexp=function(o){return o.replace(/([-[\]\/{}()*+?.^$\\| ])/g,"\\$1").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\f]/g,"\\f").replace(/[\t]/g,"\\t")},E.global_regexp=function(o){return o.global?o:(null==o.$$g?o.$$g=new RegExp(o.source,(o.multiline?"gm":"g")+(o.ignoreCase?"i":"")):o.$$g.lastIndex=null,o.$$g)},E.global_multiline_regexp=function(o){var p,F;return o.global&&o.multiline?o:(F="gm"+(o.ignoreCase?"i":""),o.multiline?(null==o.$$g&&(o.$$g=new RegExp(o.source,F)),p=o.$$g):(null==o.$$gm&&(o.$$gm=new RegExp(o.source,F)),p=o.$$gm),p.lastIndex=null,p)},E.regexp=function(o,p){for(var F,Z=typeof p<"u"&&p&&p.indexOf("i")>=0,ie=0,ue=o.length;ie<ue;ie++)(F=o[ie])instanceof RegExp&&(F.ignoreCase!==Z&&E.Kernel.$warn("ignore case doesn't match for "+F.source.$inspect(),E.hash({uplevel:1})),F=F.source),""===F&&(F="(?:"+F+")"),o[ie]=F;return p?new RegExp(o.join(""),p):new RegExp(o.join(""))},E.modules={},E.loaded_features=["corelib/runtime"],E.current_dir=".",E.require_table={"corelib/runtime":!0},E.normalize=function(o){var p,F,Z=[];"."!==E.current_dir&&(o=E.current_dir.replace(/\/*$/,"/")+o);for(var ue=0,ce=(p=(o=(o=o.replace(/^\.\//,"")).replace(/\.(rb|opal|js)$/,"")).split("/")).length;ue<ce;ue++)""!==(F=p[ue])&&(".."===F?Z.pop():Z.push(F));return Z.join("/")},E.loaded=function(o){var p,F,Z;for(p=0,F=o.length;p<F;p++)Z=E.normalize(o[p]),!E.require_table[Z]&&(E.loaded_features.push(Z),E.require_table[Z]=!0)},E.load_normalized=function(o){E.loaded([o]);var p=E.modules[o];if(p){var F=p(E);if(typeof Promise<"u"&&F instanceof Promise)return F.then(L(!0))}else{var Z=E.config.missing_require_severity,ie="cannot load such file -- "+o;"error"===Z?I(E.LoadError,ie):"warning"===Z&&Q.warn("WARNING: LoadError: "+ie)}return!0},E.load=function(o){return o=E.normalize(o),E.load_normalized(o)},E.require=function(o){return o=E.normalize(o),!E.require_table[o]&&E.load_normalized(o)},E.encodings=Object.create(null),E.set_encoding=function(o,p,F){typeof F>"u"&&(F="encoding"),("string"==typeof o||!0===o.$$frozen)&&I(E.FrozenError,"can't modify frozen String");var Z=E.find_encoding(p);return Z===o[F]||(o[F]=Z),o},E.find_encoding=function(o){var p=E.encodings,F=p[o]||p[o.toUpperCase()];return F||I(E.ArgumentError,"unknown encoding name - "+o),F},E.enc=function(o,p){var F=new String(o);return(F=E.set_encoding(F,p)).internal_encoding=F.encoding,F},E.binary=function(o){var p=new String(o);return E.set_encoding(p,"binary","internal_encoding")},E.last_promise=null,E.promise_unhandled_exception=!1,E.queue=function(o){if(E.last_promise)return E.last_promise=E.last_promise.then(function(){if(!E.promise_unhandled_exception)return o(E)}).catch(function(F){E.respond_to(F,"$full_message")&&(F=F.$full_message()),Q.error(F),E.promise_unhandled_exception=!0,E.exit(1)}),E.last_promise;var p=o(E);return"function"==typeof Promise&&"object"==typeof p&&p instanceof Promise&&(E.last_promise=p),p},E.rb_plus=function(o,p){return le(o,p)?o+p:o["$+"](p)},E.rb_minus=function(o,p){return le(o,p)?o-p:o["$-"](p)},E.rb_times=function(o,p){return le(o,p)?o*p:o["$*"](p)},E.rb_divide=function(o,p){return le(o,p)?o/p:o["$/"](p)},E.rb_lt=function(o,p){return le(o,p)?o<p:o["$<"](p)},E.rb_gt=function(o,p){return le(o,p)?o>p:o["$>"](p)},E.rb_le=function(o,p){return le(o,p)?o<=p:o["$<="](p)},E.rb_ge=function(o,p){return le(o,p)?o>=p:o["$>="](p)},E.eqeq=function A(o,p){return ee(o,p)?o===p:y(o["$=="](p))},E.eqeqeq=function(o,p){return ee(o,p)?o===p:y(o["$==="](p))},E.neqeq=function(o,p){return ee(o,p)?o!==p:y(o["$!="](p))},E.not=function(o){return null==o||!1===o||te===o||!0!==o&&!o["$!"].$$pristine&&y(o["$!"]())},E.return_val=L,E.return_self=function(){return this},E.return_ivar=function(o){return function(){return null==this[o]?te:this[o]}},E.assign_ivar=function(o){return function(p){return re(this),this[o]=p}},E.assign_ivar_val=function(o,p){return function(){return re(this),this[o]=p}},E.ensure_kwargs=function(o){return null==o?E.hash2([],{}):o.$$is_hash?o:void I(E.ArgumentError,"expected kwargs")},E.get_kwarg=function(o,p){return H(o.$$smap,p)||I(E.ArgumentError,"missing keyword: "+p),o.$$smap[p]},E.large_array_unpack=function(o){var Z,p=o.split(","),F=p.length;for(Z=0;Z<F;Z++)switch(p[Z][0]){case void 0:p[Z]=te;break;case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":p[Z]=+p[Z]}return p},E.BasicObject=a=S("BasicObject",null),E.Object=P=S("Object",E.BasicObject),E.Module=V=S("Module",E.Object),E.Class=k=S("Class",E.Module),E.Opal=j=m("Opal"),E.Kernel=B=m("Kernel"),X(E.BasicObject,E.Class.$$prototype),X(E.Object,E.Class.$$prototype),X(E.Module,E.Class.$$prototype),X(E.Class,E.Class.$$prototype),a.$$const.BasicObject=a,v(P,"BasicObject",a),v(P,"Object",P),v(P,"Module",V),v(P,"Class",k),v(P,"Opal",j),v(P,"Kernel",B),a.$$class=k,P.$$class=k,V.$$class=k,k.$$class=k,j.$$class=V,B.$$class=V,D(P.$$prototype,"toString",function(){var o=this.$to_s();return o.$$is_string&&"object"==typeof o?o.valueOf():o}),D(P.$$prototype,"$require",E.require),E.top=new P,E.top.$to_s=E.top.$inspect=L("main"),E.top.$define_method=function O(){var o=K(arguments),p=O.$$p;return O.$$p=null,E.send(P,"define_method",o,p)},E.NilClass=S("NilClass",E.Object),v(P,"NilClass",E.NilClass),(te=E.nil=new E.NilClass).$$id=4,te.call=te.apply=function(){I(E.LocalJumpError,"no block given")},te.$$frozen=!0,te.$$comparable=!1,Object.seal(te),E.thrower=function(o){var p=new Error("unexpected "+o);return p.$thrower_type=o,p.$throw=function(F){throw null==F&&(F=te),p.$v=F,p},p},E.t_eval_return=E.thrower("return"),TypeError.$$super=Error,E.file_sources={}}).call(this),Opal.loaded(["corelib/runtime.js"]),Opal.modules["corelib/helpers"]=function(l){var Q=l.type_error,te=l.coerce_to,a=l.module,P=l.defs,V=l.slice,k=l.eqeqeq,j=l.Kernel,B=l.truthy,E=l.Opal,W=l.nil,Y=l.$$$;return function(H){var X=a("::","Opal");P(X,"$bridge",function(x,q){return l.bridge(x,q)}),P(X,"$coerce_to!",function(x,q,M,w){var I,y;return I=V(arguments,3),y=te(x,q,M,I),k(q,y)||j.$raise(Q(x,q,M,y)),y},-4),P(X,"$coerce_to?",function(x,q,M,w){var D,y=W;return D=V(arguments,3),!B(x["$respond_to?"](M))||(y=te(x,q,M,D),B(y["$nil?"]()))?W:(k(q,y)||j.$raise(Q(x,q,M,y)),y)},-4),P(X,"$try_convert",function(x,q,M){return k(q,x)?x:B(x["$respond_to?"](M))?x.$__send__(M):W}),P(X,"$compare",function(x,q){var M;return M=x["$<=>"](q),B(M===W)&&j.$raise(Y("ArgumentError"),"comparison of "+x.$class()+" with "+q.$class()+" failed"),M}),P(X,"$destructure",function(x){if(1==x.length)return x[0];if(x.$$is_array)return x;for(var q=new Array(x.length),M=0,w=q.length;M<w;M++)q[M]=x[M];return q}),P(X,"$respond_to?",function(x,q,M){return null==M&&(M=!1),!(null==x||!x.$$class)&&x["$respond_to?"](q,M)},-3),P(X,"$instance_variable_name!",function(x){return x=E["$coerce_to!"](x,Y("String"),"to_str"),B(/^@[a-zA-Z_][a-zA-Z0-9_]*?$/.test(x))||j.$raise(Y("NameError").$new("'"+x+"' is not allowed as an instance variable name",x)),x}),P(X,"$class_variable_name!",function(x){return x=E["$coerce_to!"](x,Y("String"),"to_str"),B(x.length<3||"@@"!==x.slice(0,2))&&j.$raise(Y("NameError").$new("`"+x+"' is not allowed as a class variable name",x)),x}),P(X,"$const_name?",function(x){return"string"!=typeof x&&(x=E["$coerce_to!"](x,Y("String"),"to_str")),x[0]===x[0].toUpperCase()}),P(X,"$const_name!",function(x){return B(Y("::","String","skip_raise")?"constant":W)&&(x=E["$coerce_to!"](x,Y("String"),"to_str")),(!x||x[0]!=x[0].toUpperCase())&&this.$raise(Y("NameError"),"wrong constant name "+x),x}),P(X,"$pristine",function(x,q){for(var w,D,y=(w=V(arguments,1)).length-1;y>=0;y--)(D=x.$$prototype[l.jsid(w[y])])&&!D.$$stub&&(D.$$pristine=!0);return W},-2);var K=[];return P(X,"$inspect",function(x){var M=!1;return function(){try{try{return null===x?"null":void 0===x?"undefined":typeof x.$$class>"u"?Object.prototype.toString.apply(x):"function"!=typeof x.$inspect||x.$inspect.$$stub||-1!==K.indexOf(x.$__id__())?"#<"+x.$$class+":0x"+x.$__id__().$to_s(16)+">":(K.push(x.$__id__()),M=!0,x.$inspect())}catch(w){if(!l.rescue(w,[Y("Exception")]))throw w;try{return"#<"+x.$$class+":0x"+x.$__id__().$to_s(16)+">"}finally{l.pop_exception()}}}finally{M&&K.pop()}}()},-1)}()},Opal.modules["corelib/module"]=function(l){var r,e,n,t,Q=l.truthy,te=l.coerce_to,a=l.const_set,P=l.Object,V=l.return_ivar,k=l.assign_ivar,j=l.ivar,B=l.deny_frozen_access,E=l.freeze,W=l.prop,Y=l.jsid,H=l.klass,X=l.defs,K=l.send,U=l.def,x=l.eqeqeq,q=l.Module,M=l.Kernel,w=l.rb_lt,I=l.rb_gt,D=l.slice,y=l.to_a,g=l.hash2,z=l.Opal,R=l.return_val,_=l.eqeq,b=l.lambda,f=l.range,T=l.send2,v=l.find_super,S=l.alias,G=l.nil,m=l.$$$;return r=[],e=H("::",null,"Module"),n=[e].concat(r),t=l.$r(n),X(e,"$allocate",function(){var c=l.allocate_module(G,function(){});return this!==l.Module&&Object.setPrototypeOf(c,this.$$prototype),c}),U(e,"$initialize",function i(){var s=i.$$p||G;return i.$$p=null,s!==G?K(this,"module_eval",[],s.$to_proc()):G}),U(e,"$===",function(s){return!Q(null==s)&&l.is_a(s,this)}),U(e,"$<",function(s){var N,C,J,c=this;if(x(q,s)||M.$raise(m("TypeError"),"compared with non class/module"),c===s)return!1;for(C=0,J=(N=l.ancestors(c)).length;C<J;C++)if(N[C]===s)return!0;for(C=0,J=(N=l.ancestors(s)).length;C<J;C++)if(N[C]===c)return!1;return G}),U(e,"$<=",function(s){var u;return Q(u=this["$equal?"](s))?u:w(this,s)}),U(e,"$>",function(s){return x(q,s)||M.$raise(m("TypeError"),"compared with non class/module"),w(s,this)}),U(e,"$>=",function(s){var u;return Q(u=this["$equal?"](s))?u:I(this,s)}),U(e,"$<=>",function(s){var u=G;return this===s?0:!x(q,s)||(u=w(this,s),Q(u["$nil?"]()))?G:Q(u)?-1:1}),U(e,"$alias_method",function(s,c){var u=this;return B(u),s=te(s,m("String"),"to_str"),c=te(c,m("String"),"to_str"),l.alias(u,s,c),u}),U(e,"$alias_native",function(s,c){var u=this;return null==c&&(c=s),B(u),l.alias_native(u,s,c),u},-2),U(e,"$ancestors",function(){return l.ancestors(this)}),U(e,"$append_features",function(s){return B(s),l.append_features(this,s),this}),U(e,"$attr_accessor",function(s){var c,u;return c=D(arguments),K(this,"attr_reader",y(u=c)),K(this,"attr_writer",y(u))},-1),U(e,"$attr",function(s){var u,N=this;return 2!=(u=D(arguments)).length||!0!==u[1]&&!1!==u[1]?K(N,"attr_reader",y(u)):(N.$warn("optional boolean argument is obsoleted",g(["uplevel"],{uplevel:1})),u[1]?N.$attr_accessor(u[0]):N.$attr_reader(u[0]),G)},-1),U(e,"$attr_reader",function(s){var u,N=this;u=D(arguments),B(N);for(var C=N.$$prototype,J=u.length-1;J>=0;J--){var ne=u[J],se=Y(ne),oe=j(ne),ae=V(oe);l.prop(C,oe,G),ae.$$parameters=[],ae.$$arity=0,l.defn(N,se,ae)}return G},-1),U(e,"$attr_writer",function(s){var u,N=this;u=D(arguments),B(N);for(var C=N.$$prototype,J=u.length-1;J>=0;J--){var ne=u[J],se=Y(ne+"="),oe=j(ne),ae=k(oe);ae.$$parameters=[["req"]],ae.$$arity=1,l.prop(C,oe,G),l.defn(N,se,ae)}return G},-1),U(e,"$autoload",function(s,c){var u=this;return B(u),t("Opal")["$const_name?"](s)||M.$raise(m("NameError"),"autoload must be constant name: "+s),""==c&&M.$raise(m("ArgumentError"),"empty file name"),u.$$const.hasOwnProperty(s)||(u.$$autoload||(u.$$autoload={}),l.const_cache_version++,u.$$autoload[s]={path:c,loaded:!1,required:!1,success:!1,exception:!1},u.$const_added&&!u.$const_added.$$pristine&&u.$const_added(s)),G}),U(e,"$autoload?",function(s){var c=this;if(c.$$autoload&&c.$$autoload[s]&&!c.$$autoload[s].required&&!c.$$autoload[s].success)return c.$$autoload[s].path;for(var u=c.$ancestors(),N=0,C=u.length;N<C;N++)if(u[N].$$autoload&&u[N].$$autoload[s]&&!u[N].$$autoload[s].required&&!u[N].$$autoload[s].success)return u[N].$$autoload[s].path;return G}),U(e,"$class_variables",function(){return Object.keys(l.class_variables(this))}),U(e,"$class_variable_get",function(s){return s=z["$class_variable_name!"](s),l.class_variable_get(this,s,!1)}),U(e,"$class_variable_set",function(s,c){return B(this),s=z["$class_variable_name!"](s),l.class_variable_set(this,s,c)}),U(e,"$class_variable_defined?",function(s){return s=z["$class_variable_name!"](s),l.class_variables(this).hasOwnProperty(s)}),U(e,"$const_added",R(G)),z.$pristine(e,"const_added"),U(e,"$remove_class_variable",function(s){var c=this;if(B(c),s=z["$class_variable_name!"](s),l.hasOwnProperty.call(c.$$cvars,s)){var u=c.$$cvars[s];return delete c.$$cvars[s],u}M.$raise(m("NameError"),"cannot remove "+s+" for "+c)}),U(e,"$constants",function(s){return null==s&&(s=!0),l.constants(this,s)},-1),X(e,"$constants",function(s){if(null==s){var N,J,ne,u=(this.$$nesting||[]).concat(P),C={};for(J=0,ne=u.length;J<ne;J++)for(N in u[J].$$const)C[N]=!0;return Object.keys(C)}return l.constants(this,s)},-1),X(e,"$nesting",function(){return this.$$nesting||[]}),U(e,"$const_defined?",function(s,c){var u=this;null==c&&(c=!0),s=t("Opal")["$const_name!"](s),Q(s["$=~"](m(z,"CONST_NAME_REGEXP")))||M.$raise(m("NameError").$new("wrong constant name "+s,s));var N,ne,se,C=[u];for(c&&(C=C.concat(l.ancestors(u)),u.$$is_module&&(C=C.concat([P]).concat(l.ancestors(P)))),ne=0,se=C.length;ne<se;ne++)if(null!=(N=C[ne]).$$const[s]||N.$$autoload&&N.$$autoload[s]&&!N.$$autoload[s].required&&!N.$$autoload[s].success)return!0;return!1},-2),U(e,"$const_get",function(s,c){var u=this;return null==c&&(c=!0),0===(s=t("Opal")["$const_name!"](s)).indexOf("::")&&"::"!==s&&(s=s.slice(2)),Q(-1!=s.indexOf("::")&&"::"!=s)?K(s.$split("::"),"inject",[u],function(C,J){return null==C&&(C=G),null==J&&(J=G),C.$const_get(J)}):(Q(s["$=~"](m(z,"CONST_NAME_REGEXP")))||M.$raise(m("NameError").$new("wrong constant name "+s,s)),c?l.$$([u],s):l.const_get_local(u,s))},-2),U(e,"$const_missing",function(s){var u;return u=_(this,P)?s:this+"::"+s,M.$raise(m("NameError").$new("uninitialized constant "+u,s))}),U(e,"$const_set",function(s,c){return B(this),s=z["$const_name!"](s),(Q(s["$!~"](m(z,"CONST_NAME_REGEXP")))||Q(s["$start_with?"]("::")))&&M.$raise(m("NameError").$new("wrong constant name "+s,s)),a(this,s,c),c}),U(e,"$public_constant",R(G)),U(e,"$define_method",function i(s,c){var C,u=i.$$p||G,N=this,J=G;return i.$$p=null,B(N),void 0===c&&u===G&&M.$raise(m("ArgumentError"),"tried to create a Proc object without a block"),u=Q(C=u)?C:x(m("Proc"),J=c)?c:x(m("Method"),J)?c.$to_proc().$$unbound:x(m("UnboundMethod"),J)?b(function se(oe){var $e,le,re=null==se.$$s?this:se.$$s;return $e=D(arguments),le=c.$bind(re),K(le,"call",y($e))},{$$arity:-1,$$s:N}):M.$raise(m("TypeError"),"wrong argument type "+u.$class()+" (expected Proc/Method)"),typeof Proxy<"u"&&(u.$$proxy_target=u,u=new Proxy(u,{apply:function(se,oe,ae){var $e=se.$$jsid;se.$$jsid=s;try{return se.apply(oe,ae)}catch(re){if(re===se.$$brk||re===se.$$ret)return re.$v;throw re}finally{se.$$jsid=$e}}})),u.$$jsid=s,u.$$s=null,u.$$def=u,u.$$define_meth=!0,l.defn(N,Y(s),u)},-2),U(e,"$freeze",function(){var s=this;return Q(s["$frozen?"]())?s:(s.hasOwnProperty("$$base_module")||W(s,"$$base_module",null),E(s))}),U(e,"$remove_method",function(s){var u,N=this;u=D(arguments);for(var C=0;C<u.length;C++){var J=u[C];"string"==typeof J||J.$$is_string||N.$raise(m("TypeError"),N.$name()+" is not a symbol nor a string"),B(N),l.rdef(N,"$"+J)}return N},-1),U(e,"$singleton_class?",function(){return!!this.$$is_singleton}),U(e,"$include",function(s){for(var u,N=this,C=(u=D(arguments)).length-1;C>=0;C--){var J=u[C];J.$$is_module||M.$raise(m("TypeError"),"wrong argument type "+J.$class()+" (expected Module)"),J.$append_features(N),J.$included(N)}return N},-1),U(e,"$included_modules",function(){return l.included_modules(this)}),U(e,"$include?",function(s){s.$$is_module||M.$raise(m("TypeError"),"wrong argument type "+s.$class()+" (expected Module)");var u,N,C,J=l.ancestors(this);for(u=0,N=J.length;u<N;u++)if((C=J[u])===s&&C!==this)return!0;return!1}),U(e,"$instance_method",function(s){var c=this,u=c.$$prototype[Y(s)];return(!u||u.$$stub)&&M.$raise(m("NameError").$new("undefined method `"+s+"' for class `"+c.$name()+"'",s)),m("UnboundMethod").$new(c,u.$$owner||c,u,s)}),U(e,"$instance_methods",function(s){return null==s&&(s=!0),Q(s)?l.instance_methods(this):l.own_instance_methods(this)},-1),U(e,"$included",R(G)),U(e,"$extended",R(G)),U(e,"$extend_object",function(s){return B(s),G}),U(e,"$method_added",function(s){return D(arguments),G},-1),U(e,"$method_removed",function(s){return D(arguments),G},-1),U(e,"$method_undefined",function(s){return D(arguments),G},-1),U(e,"$module_eval",function i(s){var N,C,c=i.$$p||G,J=this,ne=G,ae=G,$e=G,re=G,le=G;i.$$p=null,N=D(arguments),Q(c["$nil?"]())&&Q(!!l.compile)?(Q(f(1,3,!1)["$cover?"](N.$size()))||M.$raise(m("ArgumentError"),"wrong number of arguments (0 for 1..3)"),ne=null==(C=[].concat(y(N)))[0]?G:C[0],ae=g(["file","eval"],{file:Q($e=null==C[1]?G:C[1])?$e:"(eval)",eval:!0}),re=l.hash({arity_check:!1}).$merge(ae),le=z.$compile(ne,re),c=K(M,"proc",[],function L(){var O=null==L.$$s?this:L.$$s;return new Function("Opal,self","return "+le)(l,O)},{$$s:J})):Q(N["$any?"]())&&M.$raise(m("ArgumentError"),"wrong number of arguments ("+N.$size()+" for 0)\n\n  NOTE:If you want to enable passing a String argument please add \"require 'opal-parser'\" to your script\n");var A,ee=c.$$s;return c.$$s=null,A=c.apply(J,[J]),c.$$s=ee,A},-1),U(e,"$module_exec",function i(s){var N,c=i.$$p||G;i.$$p=null,N=D(arguments),c===G&&M.$raise(m("LocalJumpError"),"no block given");var ne,J=c.$$s;return c.$$s=null,ne=c.apply(this,N),c.$$s=J,ne},-1),U(e,"$method_defined?",function(s){var u=this.$$prototype[Y(s)];return!!u&&!u.$$stub}),U(e,"$module_function",function(s){var u,N=this;if(u=D(arguments),B(N),0===u.length)return N.$$module_function=!0,G;for(var C=0,J=u.length;C<J;C++){var se=Y(u[C]);l.defs(N,se,N.$$prototype[se])}return 1===u.length?u[0]:u},-1),U(e,"$name",function(){var s=this;if(s.$$full_name)return s.$$full_name;for(var c=[],u=s;u;){if(u.$$name===G||null==u.$$name)return G;if(c.unshift(u.$$name),(u=u.$$base_module)===P)break}return 0===c.length?G:s.$$full_name=c.join("::")}),U(e,"$prepend",function(s){var u,N=this;0===(u=D(arguments)).length&&M.$raise(m("ArgumentError"),"wrong number of arguments (given 0, expected 1+)");for(var C=u.length-1;C>=0;C--){var J=u[C];J.$$is_module||M.$raise(m("TypeError"),"wrong argument type "+J.$class()+" (expected Module)"),J.$prepend_features(N),J.$prepended(N)}return N},-1),U(e,"$prepend_features",function(s){var c=this;return B(s),c.$$is_module||M.$raise(m("TypeError"),"wrong argument type "+c.$class()+" (expected Module)"),l.prepend_features(c,s),c}),U(e,"$prepended",R(G)),U(e,"$remove_const",function(s){return B(this),l.const_remove(this,s)}),U(e,"$to_s",function(){var c,s=this;return Q(c=l.Module.$name.call(s))?c:"#<"+(s.$$is_module?"Module":"Class")+":0x"+s.$__id__().$to_s(16)+">"}),U(e,"$undef_method",function(s){var u,N=this;u=D(arguments);for(var C=0;C<u.length;C++){var J=u[C];"string"==typeof J||J.$$is_string||N.$raise(m("TypeError"),N.$name()+" is not a symbol nor a string"),B(N),l.udef(N,"$"+u[C])}return N},-1),U(e,"$instance_variables",function(){var s=this,c=G;l.Module.$$nesting=n,c=s.$constants();var u=[];for(var N in s)s.hasOwnProperty(N)&&"$"!==N.charAt(0)&&"constructor"!==N&&!c["$include?"](N)&&u.push("@"+N);return u}),U(e,"$dup",function i(){var s=i.$$p||G,c=this,u=G;return i.$$p=null,(u=T(c,v(c,"dup",i,!1,!0),"dup",[],s)).$copy_class_variables(c),u.$copy_constants(c),u}),U(e,"$copy_class_variables",function(s){for(var u in s.$$cvars)this.$$cvars[u]=s.$$cvars[u]}),U(e,"$copy_constants",function(s){var u,N=s.$$const;for(u in N)a(this,u,N[u])}),U(e,"$refine",function i(s){var u,C,ne,c=i.$$p||G,N=this,J=G;return i.$$p=null,C=(u=[N,G,G])[0],J=u[1],ne=l.id(s),typeof N.$$refine_modules>"u"&&(N.$$refine_modules=Object.create(null)),(J=typeof N.$$refine_modules[ne]>"u"?N.$$refine_modules[ne]=m("Refinement").$new():N.$$refine_modules[ne]).refinement_module=C,J.refined_class=s,K(J,"class_exec",[],c.$to_proc()),J}),U(e,"$refinements",function(){var c=this.$$refine_modules,u=g([],{});if(typeof c>"u")return u;for(var N in c)u["$[]="](c[N].refined_class,c[N]);return u}),U(e,"$using",function(s){return M.$raise("Module#using is not permitted in methods")}),S(e,"class_eval","module_eval"),S(e,"class_exec","module_exec"),S(e,"inspect","to_s"),function(h,$){var r=H("::",$,"Refinement"),e=r.$$prototype;return e.refinement_module=e.refined_class=G,r.$attr_reader("refined_class"),U(r,"$inspect",function n(){var t=n.$$p||G,i=this;return n.$$p=null,Q(i.refinement_module)?"#<refinement:"+i.refined_class.$inspect()+"@"+i.refinement_module.$inspect()+">":T(i,v(i,"inspect",n,!1,!0),"inspect",[],t)})}(0,q)},Opal.modules["corelib/class"]=function(l){var M,w,I,D,Q=l.klass,te=l.send,a=l.defs,P=l.def,V=l.rb_plus,k=l.return_val,j=l.slice,B=l.send2,E=l.find_super,W=l.Kernel,Y=l.alias,K=l.nil,U=l.$$$;return l.top.$require("corelib/module"),M=[],I=[w=Q("::",null,"Class")].concat(M),D=l.$r(I),a(w,"$new",function y(g){var z=y.$$p||K;if(y.$$p=null,null==g&&(g=D("Object")),!g.$$is_class)throw l.TypeError.$new("superclass must be a Class");var R=l.allocate_class(K,g);return g.$inherited(R),z!==K&&te(R,"class_eval",[],z.$to_proc()),R},-1),P(w,"$allocate",function(){var z=new this.$$constructor;return z.$$id=l.uid(),z}),P(w,"$descendants",function(){return V(this.$subclasses(),te(this.$subclasses(),"map",[],"descendants".$to_proc()).$flatten())}),P(w,"$inherited",k(K)),P(w,"$initialize_dup",function(g){var z=this;z.$initialize_copy(g),z.$$name=null,z.$$full_name=null}),P(w,"$new",function y(g){var _,z=y.$$p||K;y.$$p=null,_=j(arguments);var f=this.$allocate();return l.send(f,f.$initialize,_,z),f},-1),P(w,"$subclasses",function(){var g=this;if(typeof WeakRef<"u"){var z,R,_=[];for(z=0;z<g.$$subclasses.length;z++)void 0!==(R=g.$$subclasses[z].deref())&&_.push(R);return _}return g.$$subclasses}),P(w,"$superclass",function(){return this.$$super||K}),P(w,"$to_s",function y(){var z=this;y.$$p=null;var R=z.$$singleton_of;return R&&R.$$is_a_module?"#<Class:"+R.$name()+">":R?"#<Class:#<"+R.$$class.$name()+":0x"+l.id(R).$to_s(16)+">>":B(z,E(z,"to_s",y,!1,!0),"to_s",[],null)}),P(w,"$attached_object",function(){var g=this;if(null!=g.$$singleton_of)return g.$$singleton_of;W.$raise(U("TypeError"),"`"+g+"' is not a singleton class")}),Y(w,"inspect","to_s")},Opal.modules["corelib/basic_object"]=function(l){"use strict";var w,te=l.slice,a=l.def,P=l.alias,V=l.return_val,k=l.Opal,j=l.truthy,B=l.range,E=l.Kernel,W=l.to_a,Y=l.hash2,H=l.send,X=l.eqeq,K=l.rb_ge,U=l.nil,x=l.$$$;return a(w=(0,l.klass)("::",null,"BasicObject"),"$initialize",function(D){return te(arguments),U},-1),a(w,"$==",function(D){return this===D}),a(w,"$eql?",function(D){return this["$=="](D)}),P(w,"equal?","=="),a(w,"$__id__",function(){var D=this;return null!=D.$$id||l.prop(D,"$$id",l.uid()),D.$$id}),a(w,"$__send__",function I(D,y){var R,g=I.$$p||U,_=this;I.$$p=null,R=te(arguments,1),D.$$is_string||_.$raise(x("TypeError"),_.$inspect()+" is not a symbol nor a string");var b=_[l.jsid(D)];return b?(g!==U&&(b.$$p=g),b.apply(_,R)):(g!==U&&(_.$method_missing.$$p=g),_.$method_missing.apply(_,[D].concat(R)))},-2),a(w,"$!",V(!1)),k.$pristine("!"),a(w,"$!=",function(D){return this["$=="](D)["$!"]()}),a(w,"$instance_eval",function I(D){var z,R,y=I.$$p||U,_=this,b=U,v=U,S=U,d=U,G=U;if(I.$$p=null,z=te(arguments),j(y["$nil?"]())&&j(!!l.compile))j(B(1,3,!1)["$cover?"](z.$size()))||E.$raise(x("ArgumentError"),"wrong number of arguments (0 for 1..3)"),b=null==(R=[].concat(W(z)))[0]?U:R[0],v=Y(["file","eval"],{file:j(S=null==R[1]?U:R[1])?S:"(eval)",eval:!0}),d=l.hash({arity_check:!1}).$merge(v),G=k.$compile(b,d),y=H(E,"proc",[],function $(){var r=null==$.$$s?this:$.$$s;return new Function("Opal,self","return "+G)(l,r)},{$$s:_});else{if(j(y["$nil?"]())&&j(K(z.$length(),1))&&X(z.$first()["$[]"](0),"@"))return _.$instance_variable_get(z.$first());j(z["$any?"]())&&E.$raise(x("ArgumentError"),"wrong number of arguments ("+z.$size()+" for 0)")}var h,m=y.$$s;if(y.$$s=null,_.$$is_a_module){_.$$eval=!0;try{h=y.call(_,_)}finally{_.$$eval=!1}}else h=y.call(_,_);return y.$$s=m,h},-1),a(w,"$instance_exec",function I(D){var z,y=I.$$p||U,R=this;I.$$p=null,z=te(arguments),j(y)||E.$raise(x("ArgumentError"),"no block given");var b,_=y.$$s;if(y.$$s=null,R.$$is_a_module){R.$$eval=!0;try{b=y.apply(R,z)}finally{R.$$eval=!1}}else b=y.apply(R,z);return y.$$s=_,b},-1),a(w,"$singleton_method_added",function(D){return te(arguments),U},-1),a(w,"$singleton_method_removed",function(D){return te(arguments),U},-1),a(w,"$singleton_method_undefined",function(D){return te(arguments),U},-1),a(w,"$method_missing",function I(D,y){var R,b;return I.$$p=null,R=te(arguments,1),b=k.$inspect(this),E.$raise(x("NoMethodError").$new("undefined method `"+D+"' for "+b,D,R),U,E.$caller(1))},-2),k.$pristine(w,"method_missing"),a(w,"$respond_to_missing?",function(D,y){return null==y&&(y=!1),!1},-2)},Opal.modules["corelib/kernel"]=function(l){"use strict";var m,Q=l.truthy,te=l.coerce_to,a=l.respond_to,P=l.Opal,V=l.deny_frozen_access,k=l.freeze,j=l.freeze_props,B=l.jsid,E=l.module,W=l.return_val,Y=l.def,H=l.Kernel,X=l.gvars,K=l.slice,U=l.send,x=l.to_a,q=l.ensure_kwargs,M=l.eqeq,w=l.hash2,I=l.rb_plus,D=l.eqeqeq,y=l.return_self,g=l.rb_le,z=l.extract_kwargs,R=l.rb_lt,_=l.Object,b=l.alias,f=l.klass,v=l.nil,S=l.$$$;return function(d,G){var m=E("::","Kernel"),h=[m].concat([]),$=l.$r(h);Y(m,"$=~",W(!1)),Y(m,"$!~",function(n){return this["$=~"](n)["$!"]()}),Y(m,"$===",function(n){var i;return Q(i=this.$object_id()["$=="](n.$object_id()))?i:this["$=="](n)}),Y(m,"$<=>",function(n){this.$$comparable=!0;var i=this["$=="](n);return i&&i!==v?0:v}),Y(m,"$method",function(n){var t=this,i=t[B(n)];return(!i||i.$$stub)&&H.$raise(S("NameError").$new("undefined method `"+n+"' for class `"+t.$class()+"'",n)),S("Method").$new(t,i.$$owner||t.$class(),i,n)}),Y(m,"$methods",function(n){return null==n&&(n=!0),Q(n)?l.methods(this):l.own_methods(this)},-1),Y(m,"$public_methods",function(n){return null==n&&(n=!0),Q(n)?l.methods(this):l.receiver_methods(this)},-1),Y(m,"$Array",function(n){var t;return n===v?[]:n.$$is_array?n:(t=P["$coerce_to?"](n,S("Array"),"to_ary"))!==v||(t=P["$coerce_to?"](n,S("Array"),"to_a"))!==v?t:[n]}),Y(m,"$at_exit",function e(){var t,n=e.$$p||v;return null==X.__at_exit__&&(X.__at_exit__=v),e.$$p=null,X.__at_exit__=Q(t=X.__at_exit__)?t:[],X.__at_exit__["$<<"](n),n}),Y(m,"$caller",function(n,t){var i,s;null==n&&(n=1),null==t&&(t=v),s=[];for(var c=n+1,u=(i=(new Error).$backtrace()).length;c<u;c++)i[c].match(/runtime\.js/)||s.push(i[c]);return t!=v&&(s=s.slice(0,t)),s},-1),Y(m,"$caller_locations",function(n){var t;return t=K(arguments),U(U(this,"caller",x(t)),"map",[],function(u){return null==u&&(u=v),S(S(S("Thread"),"Backtrace"),"Location").$new(u)})},-1),Y(m,"$class",function(){return this.$$class}),Y(m,"$copy_instance_variables",function(n){var s,c,u,i=Object.keys(n);for(s=0,c=i.length;s<c;s++)"$"!==(u=i[s]).charAt(0)&&n.hasOwnProperty(u)&&(this[u]=n[u])}),Y(m,"$copy_singleton_methods",function(n){var i,s,c,u;if(n.hasOwnProperty("$$meta")&&null!==n.$$meta){var N=l.get_singleton_class(n),C=l.get_singleton_class(this);for(i=0,u=(c=Object.getOwnPropertyNames(N.$$prototype)).length;i<u;i++)l.is_method(s=c[i])&&(C.$$prototype[s]=N.$$prototype[s]);C.$$const=Object.assign({},N.$$const),Object.setPrototypeOf(C.$$prototype,Object.getPrototypeOf(N.$$prototype))}for(i=0,u=(c=Object.getOwnPropertyNames(n)).length;i<u;i++)"$"===(s=c[i]).charAt(0)&&"$"!==s.charAt(1)&&n.hasOwnProperty(s)&&(this[s]=n[s])}),Y(m,"$clone",function(n){var t,i=this,s=v;return null==(t=(n=q(n)).$$smap.freeze)&&(t=v),Q(t["$nil?"]())||M(t,!0)||M(t,!1)||i.$raise($("ArgumentError"),"unexpected value for freeze: "+t.$class()),(s=i.$class().$allocate()).$copy_instance_variables(i),s.$copy_singleton_methods(i),s.$initialize_clone(i,w(["freeze"],{freeze:t})),(M(t,!0)||Q(t["$nil?"]())&&Q(i["$frozen?"]()))&&s.$freeze(),s},-1),Y(m,"$initialize_clone",function(n,t){return t=q(t),this.$initialize_copy(n),this},-2),Y(m,"$define_singleton_method",function e(n,t){var i=e.$$p||v;return e.$$p=null,U(this.$singleton_class(),"define_method",[n,t],i.$to_proc())},-2),Y(m,"$dup",function(){var n=this,t=v;return(t=n.$class().$allocate()).$copy_instance_variables(n),t.$initialize_dup(n),t}),Y(m,"$initialize_dup",function(n){return this.$initialize_copy(n)}),Y(m,"$enum_for",function e(n,t){var s,c,u,i=e.$$p||v,N=this;return e.$$p=null,(s=K(arguments)).length>0&&(c=s.shift()),null==c&&(c="each"),u=s,U(S("Enumerator"),"for",[N,c].concat(x(u)),i.$to_proc())},-1),Y(m,"$equal?",function(n){return this===n}),Y(m,"$exit",function(n){var t;for(null==X.__at_exit__&&(X.__at_exit__=v),null==n&&(n=!0),X.__at_exit__=Q(t=X.__at_exit__)?t:[];!Q(X.__at_exit__["$empty?"]());)X.__at_exit__.$pop().$call();return n=n.$$is_boolean?n?0:1:te(n,S("Integer"),"to_int"),l.exit(n),v},-1),Y(m,"$extend",function(n){var i,s=this;0==(i=K(arguments)).length&&s.$raise(S("ArgumentError"),"wrong number of arguments (given 0, expected 1+)"),V(s);for(var c=s.$singleton_class(),u=i.length-1;u>=0;u--){var N=i[u];N.$$is_module||H.$raise(S("TypeError"),"wrong argument type "+N.$class()+" (expected Module)"),N.$append_features(c),N.$extend_object(s),N.$extended(s)}return s},-1),Y(m,"$freeze",function(){var n=this;return Q(n["$frozen?"]())?n:"object"==typeof n?(j(n),k(n)):n}),Y(m,"$frozen?",function(){switch(typeof this){case"string":case"symbol":case"number":case"boolean":return!0;case"object":return this.$$frozen||!1;default:return!1}}),Y(m,"$gets",function(n){var t;return null==X.stdin&&(X.stdin=v),t=K(arguments),U(X.stdin,"gets",x(t))},-1),Y(m,"$hash",function(){return this.$__id__()}),Y(m,"$initialize_copy",W(v));var r=[];Y(m,"$inspect",function(){var n=this,t=v,i=v,s=v;return function(){try{try{return t="",i=n.$__id__(),Q(r["$include?"](i))?t=" ...":(r["$<<"](i),s=!0,U(n.$instance_variables(),"each",[],function u(N){var J,ne;return null==N&&(N=v),J=(null==u.$$s?this:u.$$s).$instance_variable_get(N),ne=$("Opal").$inspect(J),t=I(t," "+N+"="+ne)},{$$s:n})),"#<"+n.$class()+":0x"+i.$to_s(16)+t+">"}catch(u){if(!l.rescue(u,[$("StandardError")]))throw u;try{return"#<"+n.$class()+":0x"+i.$to_s(16)+">"}finally{l.pop_exception()}}}finally{Q(s)&&r.$pop()}}()}),Y(m,"$instance_of?",function(n){return!n.$$is_class&&!n.$$is_module&&H.$raise(S("TypeError"),"class or module required"),this.$$class===n}),Y(m,"$instance_variable_defined?",function(n){return n=P["$instance_variable_name!"](n),l.hasOwnProperty.call(this,n.substr(1))}),Y(m,"$instance_variable_get",function(n){return n=P["$instance_variable_name!"](n),this[l.ivar(n.substr(1))]??v}),Y(m,"$instance_variable_set",function(n,t){return V(this),n=P["$instance_variable_name!"](n),this[l.ivar(n.substr(1))]=t}),Y(m,"$remove_instance_variable",function(n){var t=this;n=P["$instance_variable_name!"](n);var s,i=l.ivar(n.substr(1));return t.hasOwnProperty(i)?(s=t[i],delete t[i],s):H.$raise(S("NameError"),"instance variable "+n+" not defined")}),Y(m,"$instance_variables",function(){var i,t=[];for(var s in this)this.hasOwnProperty(s)&&"$"!==s.charAt(0)&&(i="$"===s.substr(-1)?s.slice(0,s.length-1):s,t.push("@"+i));return t}),Y(m,"$Integer",function(n,t){var i,s,c;return n.$$is_string?"0"===n?0:(void 0===t?t=0:(1===(t=te(t,S("Integer"),"to_int"))||t<0||t>36)&&H.$raise(S("ArgumentError"),"invalid radix "+t),s=(s=(s=n.toLowerCase()).replace(/(\d)_(?=\d)/g,"$1")).replace(/^(\s*[+-]?)(0[bodx]?)/,function(u,N,C){switch(C){case"0b":if(0===t||2===t)return t=2,N;case"0":case"0o":if(0===t||8===t)return t=8,N;case"0d":if(0===t||10===t)return t=10,N;case"0x":if(0===t||16===t)return t=16,N}H.$raise(S("ArgumentError"),'invalid value for Integer(): "'+n+'"')}),c="0-"+((t=0===t?10:t)<=10?t-1:"9a-"+String.fromCharCode(t-11+97)),new RegExp("^\\s*[+-]?["+c+"]+\\s*$").test(s)||H.$raise(S("ArgumentError"),'invalid value for Integer(): "'+n+'"'),i=parseInt(s,t),isNaN(i)&&H.$raise(S("ArgumentError"),'invalid value for Integer(): "'+n+'"'),i):(void 0!==t&&H.$raise(S("ArgumentError"),"base specified for non string value"),n===v&&H.$raise(S("TypeError"),"can't convert nil into Integer"),n.$$is_number?((n===1/0||n===-1/0||isNaN(n))&&H.$raise(S("FloatDomainError"),n),Math.floor(n)):n["$respond_to?"]("to_int")&&(i=n.$to_int())!==v?i:P["$coerce_to!"](n,S("Integer"),"to_i"))},-2),Y(m,"$Float",function(n){var t;return n===v&&H.$raise(S("TypeError"),"can't convert nil into Float"),n.$$is_string?(t=(t=n.toString()).replace(/(\d)_(?=\d)/g,"$1"),/^\s*[-+]?0[xX][0-9a-fA-F]+\s*$/.test(t)?H.$Integer(t):(/^\s*[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?\s*$/.test(t)||H.$raise(S("ArgumentError"),'invalid value for Float(): "'+n+'"'),parseFloat(t))):P["$coerce_to!"](n,S("Float"),"to_f")}),Y(m,"$Hash",function(n){return Q(n["$nil?"]())||M(n,[])?w([],{}):D(S("Hash"),n)?n:P["$coerce_to!"](n,S("Hash"),"to_hash")}),Y(m,"$is_a?",function(n){return!n.$$is_class&&!n.$$is_module&&H.$raise(S("TypeError"),"class or module required"),l.is_a(this,n)}),Y(m,"$itself",y),Y(m,"$lambda",function e(){var n=e.$$p||v;return e.$$p=null,l.lambda(n)}),Y(m,"$load",function(n){return n=P["$coerce_to!"](n,S("String"),"to_str"),l.load(n)}),Y(m,"$loop",function e(){var n=e.$$p||v,i=v;if(e.$$p=null,n===v)return U(this,"enum_for",["loop"],function(){return S(S("Float"),"INFINITY")});for(;Q(!0);)try{l.yieldX(n,[])}catch(s){if(!l.rescue(s,[S("StopIteration")]))throw s;i=s;try{return i.$result()}finally{l.pop_exception()}}return this}),Y(m,"$nil?",W(!1)),Y(m,"$printf",function(n){var t,i;return t=K(arguments),Q((i=t)["$any?"]())&&this.$print(U(this,"format",x(i))),v},-1),Y(m,"$proc",function e(){var n=e.$$p||v;return e.$$p=null,Q(n)||H.$raise(S("ArgumentError"),"tried to create Proc object without a block"),n.$$is_lambda=!1,n}),Y(m,"$puts",function(n){var t;return null==X.stdout&&(X.stdout=v),t=K(arguments),U(X.stdout,"puts",x(t))},-1),Y(m,"$p",function(n){var t,i;return t=K(arguments),U(i=t,"each",[],function(c){return null==X.stdout&&(X.stdout=v),null==c&&(c=v),X.stdout.$puts(c.$inspect())}),Q(g(i.$length(),1))?i["$[]"](0):i},-1),Y(m,"$print",function(n){var t;return null==X.stdout&&(X.stdout=v),t=K(arguments),U(X.stdout,"print",x(t))},-1),Y(m,"$readline",function(n){var t;return null==X.stdin&&(X.stdin=v),t=K(arguments),U(X.stdin,"readline",x(t))},-1),Y(m,"$warn",function(n,t){var i,s,c,u,N,C,ne=v;return null==X.VERBOSE&&(X.VERBOSE=v),null==X.stderr&&(X.stderr=v),i=K(arguments),s=z(i),c=i,null==(u=(s=q(s)).$$smap.uplevel)&&(u=v),Q(u)&&(u=P["$coerce_to!"](u,S("Integer"),"to_str"),Q(R(u,0))&&H.$raise(S("ArgumentError"),"negative level ("+u+")"),N=(C=this.$caller(I(u,1),1).$first())===v||null==C?v:C.$split(":in `"),ne=N===v||null==N?v:N.$first(),Q(ne)&&(ne+=": "),c=U(c,"map",[],function(oe){return null==oe&&(oe=v),ne+"warning: "+oe})),Q(X.VERBOSE["$nil?"]())||Q(c["$empty?"]())?v:U(X.stderr,"puts",x(c))},-1),Y(m,"$raise",function(n,t,i){throw null==X["!"]&&(X["!"]=v),null==X["@"]&&(X["@"]=v),null==t&&(t=v),null==i&&(i=v),null==n&&X["!"]!==v?X["!"]:(null==n?n=S("RuntimeError").$new(""):a(n,"$to_str")?n=S("RuntimeError").$new(n.$to_str()):n.$$is_class&&a(n,"$exception")?n=n.$exception(t):n.$$is_exception||(n=S("TypeError").$new("exception class/object expected")),i!==v&&n.$set_backtrace(i),X["!"]!==v&&l.exceptions.push(X["!"]),X["!"]=n,X["@"]=n.$backtrace(),n)},-1),Y(m,"$rand",function(n){return void 0===n?S(S("Random"),"DEFAULT").$rand():(n.$$is_number&&(n<0&&(n=Math.abs(n)),n%1!=0&&(n=n.$to_i()),0===n&&(n=void 0)),S(S("Random"),"DEFAULT").$rand(n))},-1),Y(m,"$respond_to?",function(n,t){var i=this;null==t&&(t=!1);var s=i[B(n)];return"function"==typeof s&&!s.$$stub||!0!==i["$respond_to_missing?"].$$pristine&&i["$respond_to_missing?"](n,t)},-2),Y(m,"$respond_to_missing?",function(n,t){return null==t&&(t=!1),!1},-2),P.$pristine(m,"respond_to?","respond_to_missing?"),Y(m,"$require",function(n){return"string"!=typeof n&&l.String&&l.Array&&(n=P["$coerce_to!"](n,S("String"),"to_str")),l.require(n)}),Y(m,"$require_relative",function(n){return P["$try_convert!"](n,S("String"),"to_str"),n=S("File").$expand_path(S("File").$join(l.current_file,"..",n)),l.require(n)}),Y(m,"$require_tree",function(n,t){var i;null==(i=(t=q(t)).$$smap.autoload)&&(i=!1);var s=[];for(var c in n=S("File").$expand_path(n),"."===(n=l.normalize(n))&&(n=""),l.modules)c["$start_with?"](n)&&s.push(i?[c,!0]:[c,l.require(c)]);return s},-2),Y(m,"$singleton_class",function(){return l.get_singleton_class(this)}),Y(m,"$sleep",function(n){null==n&&(n=v),n===v&&H.$raise(S("TypeError"),"can't convert NilClass into time interval"),n.$$is_number||H.$raise(S("TypeError"),"can't convert "+n.$class()+" into time interval"),n<0&&H.$raise(S("ArgumentError"),"time interval must be positive");for(var t=l.global.performance?function(){return performance.now()}:function(){return new Date},i=t();t()-i<=1e3*n;);return Math.round(n)},-1),Y(m,"$srand",function(n){return null==n&&(n=$("Random").$new_seed()),S("Random").$srand(n)},-1),Y(m,"$String",function(n){var t;return Q(t=P["$coerce_to?"](n,S("String"),"to_str"))?t:P["$coerce_to!"](n,S("String"),"to_s")}),Y(m,"$tap",function e(){var n=e.$$p||v;return e.$$p=null,l.yield1(n,this),this}),Y(m,"$to_proc",y),Y(m,"$to_s",function(){return"#<"+this.$class()+":0x"+this.$__id__().$to_s(16)+">"}),Y(m,"$catch",function e(n){var t=e.$$p||v,i=v,s=v;e.$$p=null,null==n&&(n=v);try{return n=Q(i=n)?i:_.$new(),l.yield1(t,n)}catch(c){if(!l.rescue(c,[S("UncaughtThrowError")]))throw c;s=c;try{return M(s.$tag(),n)?s.$value():H.$raise()}finally{l.pop_exception()}}},-1),Y(m,"$throw",function(n,t){return null==t&&(t=v),H.$raise(S("UncaughtThrowError").$new(n,t))},-2),Y(m,"$open",function e(n){var s,t=e.$$p||v;return e.$$p=null,s=K(arguments),U(S("File"),"open",x(s),t.$to_proc())},-1),Y(m,"$yield_self",function e(){var n=e.$$p||v;return e.$$p=null,n===v?U(this,"enum_for",["yield_self"],W(1)):l.yield1(n,this)}),b(m,"fail","raise"),b(m,"kind_of?","is_a?"),b(m,"object_id","__id__"),b(m,"public_send","__send__"),b(m,"send","__send__"),b(m,"then","yield_self"),b(m,"to_enum","enum_for")}(),m=f("::",null,"Object"),delete _.$$prototype.$require,m.$include(H)},Opal.modules["corelib/main"]=function(l){var E,Q=l.return_val,te=l.def,a=l.Object,P=l.slice,V=l.Kernel;return te(E=l.get_singleton_class(l.top),"$to_s",Q("main")),te(E,"$include",function(H){return a.$include(H)}),te(E,"$autoload",function(H){var X;return X=P(arguments),l.Object.$autoload.apply(l.Object,X)},-1),te(E,"$using",function(H){return V.$raise("main.using is permitted only at toplevel")})},Opal.modules["corelib/error/errno"]=function(l){var H,X,K,Q=l.module,te=l.truthy,a=l.rb_plus,P=l.send2,V=l.find_super,k=l.def,j=l.klass,B=[],E=l.nil,W=l.$$$;return function(Y,H){var U,q,X=Q("::","Errno"),x=([X].concat(H),E);for(U=[["EINVAL","Invalid argument",22],["EEXIST","File exists",17],["EISDIR","Is a directory",21],["EMFILE","Too many open files",24],["ESPIPE","Illegal seek",29],["EACCES","Permission denied",13],["EPERM","Operation not permitted",1],["ENOENT","No such file or directory",2],["ENAMETOOLONG","File name too long",36]],x=E,q=0;q<U.length;q++)!function(){var D,w=U[q][1],I=U[q][2];(x=l.klass(X,l.SystemCallError,U[q][0])).errno=I,D=l.get_singleton_class(x),k(D,"$new",function g(z){var b=E;return g.$$p=null,null==z&&(z=E),b=w,te(z)&&(b=a(b," - "+z)),P(this,V(this,"new",g,!1,!0),"new",[b],null)},-1)}()}(0,B),H=W("StandardError"),X=B,[K=j("::",H,"SystemCallError")].concat(X),k(K,"$errno",function(){return this.$class().$errno()}),l.get_singleton_class(K).$attr_reader("errno")},Opal.modules["corelib/error"]=function(l){var g,z,Q=l.klass,te=l.slice,a=l.gvars,P=l.defs,V=l.send,k=l.to_a,j=l.def,B=l.truthy,E=l.hash2,W=l.Kernel,Y=l.not,H=l.rb_plus,X=l.eqeq,K=l.Object,U=l.ensure_kwargs,x=l.send2,q=l.find_super,M=l.module,w=[],I=l.nil,D=l.$$$;return function(y,g,z){var T,R=Q("::",g,"Exception"),_=[R].concat(z),b=l.$r(_);function v(S){for(var G,d=[],m=0;m<S.length;m++){var h=S[m];!h||!h.$$is_string||((G=h.match(/^    at (.*?) \((.*?)\)$/))?d.push(G[2]+":in `"+G[1]+"'"):(G=h.match(/^    at (.*?)$/))?d.push(G[1]+":in `undefined'"):(G=h.match(/^  from (.*?)$/))?d.push(G[1]):(G=h.match(/^(.*?)@(.*?)$/))&&d.push(G[2]+":in `"+G[1]+"'"))}return d}R.$$prototype.message=I,l.prop(R.$$prototype,"$$is_exception",!0),Error.stackTraceLimit=100,P(R,"$new",function(d){var m;null==a["!"]&&(a["!"]=I);var $=(m=te(arguments)).length>0?m[0]:I,r=new this.$$constructor($);return r.name=this.$$name,r.message=$,r.cause=a["!"],l.send(r,r.$initialize,m),l.config.enable_stack_trace&&Error.captureStackTrace&&Error.captureStackTrace(r,T),r},-1),T=R.$new,P(R,"$exception",function(d){var G;return G=te(arguments),V(this,"new",k(G))},-1),j(R,"$initialize",function(d){var G,m;return G=te(arguments),this.message=(m=G).length>0?m[0]:I},-1),j(R,"$backtrace",function(){var d=this;if(d.backtrace)return d.backtrace;var G=d.stack;return typeof G<"u"&&G.$$is_string?d.backtrace=v(G.split("\n")):G?d.backtrace=v(G):[]}),j(R,"$backtrace_locations",function(){var d,G=this;return G.backtrace_locations||(G.backtrace_locations=(d=G.$backtrace())===I||null==d?I:V(d,"map",[],function(h){return null==h&&(h=I),D(D(D("Thread"),"Backtrace"),"Location").$new(h)})),G.backtrace_locations}),j(R,"$cause",function(){return this.cause||I}),j(R,"$exception",function(d){var G=this;if(null==d&&(d=I),d===I||G===d)return G;var m=G.$clone();return m.message=d,G.backtrace&&(m.backtrace=G.backtrace.$dup()),m.stack=G.stack,m.cause=G.cause,m},-1),j(R,"$message",function(){return this.$to_s()}),j(R,"$full_message",function(d){var m,h=this,$=I,r=I,e=I,n=I,t=I,i=I,s=I,c=I,u=I;return null==a.stderr&&(a.stderr=I),null==d&&(d=I),B(b("Hash","skip_raise")?"constant":I)?(e=(m=[(d=E(["highlight","order"],{highlight:a.stderr["$tty?"](),order:"top"}).$merge(B($=d)?$:E([],{})))["$[]"]("highlight"),d["$[]"]("order")])[1],B([!0,!1]["$include?"](r=m[0]))||W.$raise(D("ArgumentError"),"expected true or false as highlight: "+r),B(["top","bottom"]["$include?"](e))||W.$raise(D("ArgumentError"),"expected :top or :bottom as order: "+e),B(r)?(n="\x1b[1;4m",t="\x1b[1m",i="\x1b[m"):n=t=i="",s=h.$backtrace().$dup(),(Y(s)||B(s["$empty?"]()))&&(s=h.$caller()),c=s.$shift(),u=H(u=c+": ",""+t+h.$to_s()+" ("+n+h.$class()+i+t+")"+i+"\n"),u=H(u,V(s,"map",[],function(C){return null==C&&(C=I),"\tfrom "+C+"\n"}).$join()),B(h.$cause())&&(u=H(u,h.$cause().$full_message(E(["highlight"],{highlight:r})))),X(e,"bottom")&&(u=u.$split("\n").$reverse().$join("\n"),u=H(t+"Traceback"+i+" (most recent call last):\n",u)),u):h.message+"\n"+h.stack},-1),j(R,"$inspect",function(){var d=this,G=I;return G=d.$to_s(),B(G["$empty?"]())?d.$class().$to_s():"#<"+d.$class().$to_s()+": "+d.$to_s()+">"}),j(R,"$set_backtrace",function(d){var h,$,G=this,m=!0;if(d===I)G.backtrace=I,G.stack="";else if(d.$$is_string)G.backtrace=[d],G.stack="  from "+d;else{if(d.$$is_array){for(h=0,$=d.length;h<$;h++)if(!d[h].$$is_string){m=!1;break}}else m=!1;!1===m&&W.$raise(D("TypeError"),"backtrace must be Array of String"),G.backtrace=d,G.stack=V(d,"map",[],function(e){return null==e&&(e=I),H("  from ",e)}).join("\n")}return d}),j(R,"$to_s",function(){var G,m,d=this;return B(G=B(m=d.message)?d.message.$to_s():m)?G:d.$class().$to_s()})}(0,Error,w),Q("::",D("Exception"),"ScriptError"),Q("::",D("ScriptError"),"SyntaxError"),Q("::",D("ScriptError"),"LoadError"),Q("::",D("ScriptError"),"NotImplementedError"),Q("::",D("Exception"),"SystemExit"),Q("::",D("Exception"),"NoMemoryError"),Q("::",D("Exception"),"SignalException"),Q("::",D("SignalException"),"Interrupt"),Q("::",D("Exception"),"SecurityError"),Q("::",D("Exception"),"SystemStackError"),Q("::",D("Exception"),"StandardError"),Q("::",D("StandardError"),"EncodingError"),Q("::",D("StandardError"),"ZeroDivisionError"),Q("::",D("StandardError"),"NameError"),Q("::",D("NameError"),"NoMethodError"),Q("::",D("StandardError"),"RuntimeError"),Q("::",D("RuntimeError"),"FrozenError"),Q("::",D("StandardError"),"LocalJumpError"),Q("::",D("StandardError"),"TypeError"),Q("::",D("StandardError"),"ArgumentError"),Q("::",D("ArgumentError"),"UncaughtThrowError"),Q("::",D("StandardError"),"IndexError"),Q("::",D("IndexError"),"StopIteration"),Q("::",D("StopIteration"),"ClosedQueueError"),Q("::",D("IndexError"),"KeyError"),Q("::",D("StandardError"),"RangeError"),Q("::",D("RangeError"),"FloatDomainError"),Q("::",D("StandardError"),"IOError"),Q("::",D("IOError"),"EOFError"),Q("::",D("StandardError"),"SystemCallError"),Q("::",D("StandardError"),"RegexpError"),Q("::",D("StandardError"),"ThreadError"),Q("::",D("StandardError"),"FiberError"),K.$autoload("Errno","corelib/error/errno"),g=D("RuntimeError"),(z=Q("::",g,"FrozenError")).$attr_reader("receiver"),j(z,"$initialize",function R(_,b){var f,v=this;return R.$$p=null,null==(f=(b=U(b)).$$smap.receiver)&&(f=I),x(v,q(v,"initialize",R,!1,!0),"initialize",[_],null),v.receiver=f},-2),function(y,g){var z=Q("::",g,"UncaughtThrowError");z.$$prototype.tag=I,z.$attr_reader("tag","value"),j(z,"$initialize",function _(b,f){var v=this;return _.$$p=null,null==f&&(f=I),v.tag=b,v.value=f,x(v,q(v,"initialize",_,!1,!0),"initialize",["uncaught throw "+v.tag.$inspect()],null)},-2)}(0,D("ArgumentError")),function(y,g){var z=Q("::",null,"NameError");z.$attr_reader("name"),j(z,"$initialize",function R(_,b){var T=this;return R.$$p=null,null==b&&(b=I),x(T,q(T,"initialize",R,!1,!0),"initialize",[_],null),T.name=b},-2)}(),function(y,g){var z=Q("::",null,"NoMethodError");z.$attr_reader("args"),j(z,"$initialize",function R(_,b,f){var v=this;return R.$$p=null,null==b&&(b=I),null==f&&(f=[]),x(v,q(v,"initialize",R,!1,!0),"initialize",[_,b],null),v.args=f},-2)}(),Q("::",null,"StopIteration").$attr_reader("result"),function(y,g){var z=Q("::",null,"KeyError"),R=z.$$prototype;R.receiver=R.key=I,j(z,"$initialize",function _(b,f){var T,v,d=this;return _.$$p=null,null==(T=(f=U(f)).$$smap.receiver)&&(T=I),null==(v=f.$$smap.key)&&(v=I),x(d,q(d,"initialize",_,!1,!0),"initialize",[b],null),d.receiver=T,d.key=v},-2),j(z,"$receiver",function(){var f;return B(f=this.receiver)?f:W.$raise(D("ArgumentError"),"no receiver is available")}),j(z,"$key",function(){var f;return B(f=this.key)?f:W.$raise(D("ArgumentError"),"no key is available")})}(),function(y,g){var R=[M("::","JS")].concat(g);return Q(R[0],null,"Error"),I}(0,w)},Opal.modules["corelib/constants"]=function(l){var Q=l.const_set,a=l.$$$;return Q("::","RUBY_PLATFORM","opal"),Q("::","RUBY_ENGINE","opal"),Q("::","RUBY_VERSION","3.2.0"),Q("::","RUBY_ENGINE_VERSION","1.7.1"),Q("::","RUBY_RELEASE_DATE","2023-01-06"),Q("::","RUBY_PATCHLEVEL",0),Q("::","RUBY_REVISION","0"),Q("::","RUBY_COPYRIGHT","opal - Copyright (C) 2013-2022 Adam Beynon and the Opal contributors"),Q("::","RUBY_DESCRIPTION","opal "+a("RUBY_ENGINE_VERSION")+" ("+a("RUBY_RELEASE_DATE")+" revision "+a("RUBY_REVISION")+")")},Opal.modules["opal/base"]=function(l){var Q=l.Object;return Q.$require("corelib/runtime"),Q.$require("corelib/helpers"),Q.$require("corelib/module"),Q.$require("corelib/class"),Q.$require("corelib/basic_object"),Q.$require("corelib/kernel"),Q.$require("corelib/main"),Q.$require("corelib/error"),Q.$require("corelib/constants")},Opal.modules["corelib/nil"]=function(l){var w,q,te=l.Kernel,a=l.def,P=l.return_val,V=l.ensure_kwargs,k=l.NilClass,j=l.slice,B=l.truthy,E=l.rb_gt,W=l.alias,H=l.nil,X=l.$$$;return[q=(0,l.klass)("::",null,"NilClass")].concat([]),q.$$prototype.$$meta=q,w=l.get_singleton_class(q),a(w,"$allocate",function(){return te.$raise(X("TypeError"),"allocator undefined for "+this.$name())}),l.udef(w,"$new"),a(q,"$!",P(!0)),a(q,"$&",P(!1)),a(q,"$|",function(I){return!1!==I&&I!==H}),a(q,"$^",function(I){return!1!==I&&I!==H}),a(q,"$==",function(I){return I===H}),a(q,"$dup",P(H)),a(q,"$clone",function(I){return I=V(I),H},-1),a(q,"$inspect",P("nil")),a(q,"$nil?",P(!0)),a(q,"$singleton_class",function(){return k}),a(q,"$to_a",function(){return[]}),a(q,"$to_h",function(){return l.hash()}),a(q,"$to_i",P(0)),a(q,"$to_s",P("")),a(q,"$to_c",function(){return X("Complex").$new(0,0)}),a(q,"$rationalize",function(I){var D;return D=j(arguments),B(E(D.$length(),1))&&te.$raise(X("ArgumentError")),te.$Rational(0,1)},-1),a(q,"$to_r",function(){return te.$Rational(0,1)}),a(q,"$instance_variables",function(){return[]}),W(q,"to_f","to_i")},Opal.modules["corelib/boolean"]=function(l){"use strict";var Q=l.klass,te=l.Kernel,a=l.def,P=l.return_self,V=l.ensure_kwargs,k=l.slice,j=l.truthy,B=l.send2,E=l.find_super,W=l.to_a,Y=l.alias,X=l.nil,K=l.$$$;return function(U,x,q){var y,M=Q("::",x,"Boolean");[M].concat([]),l.prop(M.$$prototype,"$$is_boolean",!0);for(var I=["$$class","$$meta"],D=0;D<I.length;D++)Object.defineProperty(M.$$prototype,I[D],{configurable:!0,enumerable:!1,get:function(){return 1==this?l.TrueClass:0==this?l.FalseClass:l.Boolean}});Object.defineProperty(M.$$prototype,"$$id",{configurable:!0,enumerable:!1,get:function(){return 1==this?2:0==this?0:X}}),y=l.get_singleton_class(M),a(y,"$allocate",function(){return te.$raise(K("TypeError"),"allocator undefined for "+this.$name())}),l.udef(y,"$new"),a(M,"$__id__",function(){return this.valueOf()?2:0}),a(M,"$!",function(){return 1!=this}),a(M,"$&",function(g){return 1==this&&!1!==g&&g!==X}),a(M,"$|",function(g){return 1==this||!1!==g&&g!==X}),a(M,"$^",function(g){return 1==this?!1===g||g===X:!1!==g&&g!==X}),a(M,"$==",function(g){return 1==this===g.valueOf()}),a(M,"$singleton_class",function(){return this.$$meta}),a(M,"$to_s",function(){return 1==this?"true":"false"}),a(M,"$dup",P),a(M,"$clone",function(g){return g=V(g),this},-1),a(M,"$method_missing",function y(g,z){var b,R=y.$$p||X,f=this;y.$$p=null,b=k(arguments,1);var T=f.$$class.$$prototype[l.jsid(g)];return j(typeof T<"u"&&!T.$$stub)||B(f,E(f,"method_missing",y,!1,!0),"method_missing",[g].concat(W(b)),R),l.send(f,T,b,R)},-2),a(M,"$respond_to_missing?",function(g,z){null==z&&(z=!1);var _=this.$$class.$$prototype[l.jsid(g)];return typeof _<"u"&&!_.$$stub},-2),Y(M,"eql?","=="),Y(M,"equal?","=="),Y(M,"inspect","to_s"),Y(M,"object_id","__id__")}(0,Boolean),Q("::",K("Boolean"),"TrueClass"),Q("::",K("Boolean"),"FalseClass"),X},Opal.modules["corelib/comparable"]=function(l){var Q=l.truthy,te=l.module,a=l.rb_gt,P=l.rb_lt,V=l.eqeqeq,k=l.Kernel,j=l.def,B=l.nil,E=l.$$$;return function(W){var Y=te("::","Comparable"),H=B;function X(x){return l.is_a(x,l.Integer)?x:a(x,0)?1:P(x,0)?-1:0}function U(x,q){var M=x["$<=>"](q);return Q(M)||function K(x,q){var M;M=V(B,H=q)||V(!0,H)||V(!1,H)||V(E("Integer"),H)||V(E("Float"),H)?q.$inspect():q.$$class,k.$raise(E("ArgumentError"),"comparison of "+x.$class()+" with "+M+" failed")}(x,q),X(M)}return j(Y,"$==",function(q){var M=this,w=B;return!!Q(M["$equal?"](q))||M["$<=>"]!=l.Kernel["$<=>"]&&(M.$$comparable?(M.$$comparable=!1,!1):!!Q(w=M["$<=>"](q))&&0==X(w))}),j(Y,"$>",function(q){return U(this,q)>0}),j(Y,"$>=",function(q){return U(this,q)>=0}),j(Y,"$<",function(q){return U(this,q)<0}),j(Y,"$<=",function(q){return U(this,q)<=0}),j(Y,"$between?",function(q,M){return!(P(this,q)||a(this,M))}),j(Y,"$clamp",function(q,M){var I,D,w=this;if(null==M&&(M=B),M===B&&(l.is_a(q,l.Range)||k.$raise(E("TypeError"),"wrong argument type "+q.$class()+" (expected Range)"),D=q.excl,M=q.end,q=q.begin,M!==B&&D&&k.$raise(E("ArgumentError"),"cannot clamp with an exclusive range")),q!==B&&M!==B&&U(q,M)>0&&k.$raise(E("ArgumentError"),"min argument must be smaller than max argument"),q!==B){if(0==(I=U(w,q)))return w;if(I<0)return q}return M!==B&&(I=U(w,M))>0?M:w},-2)}()},Opal.modules["corelib/regexp"]=function(l){var f,T,G,h,$,v,S,d,Q=l.coerce_to,te=l.prop,a=l.freeze,P=l.klass,V=l.const_set,k=l.send2,j=l.find_super,B=l.def,E=l.truthy,W=l.gvars,Y=l.slice,H=l.Kernel,X=l.Opal,K=l.alias,U=l.send,x=l.hash2,q=l.rb_plus,M=l.ensure_kwargs,w=l.rb_ge,I=l.to_a,D=l.eqeqeq,y=l.rb_minus,g=l.return_ivar,z=[],R=l.nil,_=l.$$$;return P("::",_("StandardError"),"RegexpError"),f=RegExp,T=z,S=[v=P("::",f,"Regexp")].concat(T),d=l.$r(S),V(v,"IGNORECASE",1),V(v,"EXTENDED",2),V(v,"MULTILINE",4),l.prop(v.$$prototype,"$$is_regexp",!0),h=[G=l.get_singleton_class(v)].concat(S),$=l.$r(h),B(G,"$allocate",function r(){var e=r.$$p||R,t=R;return r.$$p=null,(t=k(this,j(this,"allocate",r,!1,!0),"allocate",[],e)).uninitialized=!0,t}),B(G,"$escape",function(e){return l.escape_regexp(e)}),B(G,"$last_match",function(e){return null==W["~"]&&(W["~"]=R),null==e&&(e=R),E(e["$nil?"]())?W["~"]:E(W["~"])?W["~"]["$[]"](e):R},-1),B(G,"$union",function(e){var t,s,c,u,N,C,i=this;if(0==(t=Y(arguments)).length)return/(?!)/;if(1==t.length&&t[0].$$is_regexp)return t[0];s=t[0].$$is_array,t.length>1&&s&&H.$raise(_("TypeError"),"no implicit conversion of Array into String"),s&&(t=t[0]),N=void 0,c=[];for(var J=0;J<t.length;J++)(u=t[J]).$$is_string?c.push(i.$escape(u)):u.$$is_regexp?(C=u.$options(),null!=N&&N!=C&&H.$raise(_("TypeError"),"All expressions must use the same options"),N=C,c.push("("+u.source+")")):c.push(i.$escape(u.$to_str()));return i.$new(c.$join("|"),N)},-1),B(G,"$new",function(e,n){if(e.$$is_regexp)return new RegExp(e);if("\\"===(e=X["$coerce_to!"](e,_("String"),"to_str")).charAt(e.length-1)&&"\\"!==e.charAt(e.length-2)&&H.$raise(_("RegexpError"),"too short escape sequence: /"+e+"/"),e=e.replace("\\A","^").replace("\\z","$"),void 0===n||n["$!"]())return new RegExp(e);if(n.$$is_number){var t="";$("IGNORECASE")&n&&(t+="i"),$("MULTILINE")&n&&(t+="m"),n=t}else n="i";return new RegExp(e,n)},-2),K(G,"compile","new"),K(G,"quote","escape"),B(v,"$==",function(m){return m instanceof RegExp&&this.toString()===m.toString()}),B(v,"$===",function(m){return this.$match(X["$coerce_to?"](m,_("String"),"to_str"))!==R}),B(v,"$=~",function(m){var $;return null==W["~"]&&(W["~"]=R),E($=this.$match(m))?W["~"].$begin(0):$}),B(v,"$freeze",function(){var m=this;return E(m["$frozen?"]())?m:(m.hasOwnProperty("$$g")||te(m,"$$g",null),m.hasOwnProperty("$$gm")||te(m,"$$gm",null),a(m))}),B(v,"$inspect",function(){var $=this.toString(),r=/^\/(.*)\/([^\/]*)$/.exec($);if(r){for(var n=r[2],t=r[1].split(""),i=t.length,s=!1,c="",u=0;u<i;u++){var N=t[u];!s&&"/"==N&&(c=c.concat("\\")),c=c.concat(N),s="\\"==N&&!s}return"/"+c+"/"+n}return $}),B(v,"$match",function G(m,h){var $=G.$$p||R,r=this;if(null==W["~"]&&(W["~"]=R),G.$$p=null,r.uninitialized&&H.$raise(_("TypeError"),"uninitialized Regexp"),void 0===h){if(m===R)return W["~"]=R;var e=r.exec(Q(m,_("String"),"to_str"));return e?(W["~"]=_("MatchData").$new(r,e),$===R?W["~"]:l.yield1($,W["~"])):W["~"]=R}if(h=Q(h,_("Integer"),"to_int"),m===R||(m=Q(m,_("String"),"to_str"),h<0&&(h+=m.length)<0))return W["~"]=R;for(var n,t=l.global_regexp(r);;){if(null===(n=t.exec(m)))return W["~"]=R;if(n.index>=h)return W["~"]=_("MatchData").$new(t,n),$===R?W["~"]:l.yield1($,W["~"]);t.lastIndex=n.index+1}},-2),B(v,"$match?",function(m,h){var r,$=this;return $.uninitialized&&H.$raise(_("TypeError"),"uninitialized Regexp"),void 0===h?m!==R&&$.test(Q(m,_("String"),"to_str")):(h=Q(h,_("Integer"),"to_int"),!(m===R||(m=Q(m,_("String"),"to_str"),h<0&&(h+=m.length)<0)||null===(r=l.global_regexp($).exec(m))||r.index<h))},-2),B(v,"$names",function(){return U(this.$source().$scan(/\(?<(\w+)>/,x(["no_matchdata"],{no_matchdata:!0})),"map",[],"first".$to_proc()).$uniq()}),B(v,"$named_captures",function(){return U(U(U(this.$source().$scan(/\(?<(\w+)>/,x(["no_matchdata"],{no_matchdata:!0})),"map",[],"first".$to_proc()).$each_with_index(),"group_by",[],"first".$to_proc()),"transform_values",[],function($){return null==$&&($=R),U($,"map",[],function(e){return null==e&&(e=R),q(e.$last(),1)})})}),B(v,"$~",function(){return null==W._&&(W._=R),this["$=~"](W._)}),B(v,"$source",function(){return this.source}),B(v,"$options",function(){var m=this;m.uninitialized&&H.$raise(_("TypeError"),"uninitialized Regexp");var h=0;return m.multiline&&(h|=d("MULTILINE")),m.ignoreCase&&(h|=d("IGNORECASE")),h}),B(v,"$casefold?",function(){return this.ignoreCase}),K(v,"eql?","=="),K(v,"to_s","source"),function(b,f,T){var v=P(b,null,"MatchData"),S=[v].concat(T),d=l.$r(S);return v.$$prototype.matches=R,v.$attr_reader("post_match","pre_match","regexp","string"),B(v,"$initialize",function(h,$,r){var e,n=this;null==(e=(r=M(r)).$$smap.no_matchdata)&&(e=!1),E(e)||(W["~"]=n),n.regexp=h,n.begin=$.index,n.string=$.input,n.pre_match=$.input.slice(0,$.index),n.post_match=$.input.slice($.index+$[0].length),n.matches=[];for(var t=0,i=$.length;t<i;t++){var s=$[t];n.matches.push(null==s?R:s)}},-3),B(v,"$match",function(h){var r;return E(r=this["$[]"](h))?r:E(h["$is_a?"](d("Integer")))&&E(w(h,this.$length()))?H.$raise(_("IndexError"),"index "+h+" out of matches"):R}),B(v,"$match_length",function(h){var $;return($=this.$match(h))===R||null==$?R:$.$length()}),B(v,"$[]",function(h){var r,e=this;return(r=Y(arguments))[0].$$is_string?(e.$regexp().$names()["$include?"](r["$[]"](0))["$!"]()&&H.$raise(_("IndexError"),"undefined group name reference: "+r["$[]"](0)),e.$named_captures()["$[]"](r["$[]"](0))):U(e.matches,"[]",I(r))},-1),B(v,"$offset",function(h){var $=this;return 0!==h&&H.$raise(_("ArgumentError"),"MatchData#offset only supports 0th element"),[$.begin,$.begin+$.matches[h].length]}),B(v,"$==",function(h){var $=this,r=R,e=R,n=R,t=R;return!!D(_("MatchData"),h)&&(E(r=E(e=E(n=E(t=$.string==h.string)?$.regexp.toString()==h.regexp.toString():t)?$.pre_match==h.pre_match:n)?$.post_match==h.post_match:e)?$.begin==h.begin:r)}),B(v,"$begin",function(h){return 0!==h&&H.$raise(_("ArgumentError"),"MatchData#begin only supports 0th element"),this.begin}),B(v,"$end",function(h){return 0!==h&&H.$raise(_("ArgumentError"),"MatchData#end only supports 0th element"),this.begin+this.matches[h].length}),B(v,"$captures",function(){return this.matches.slice(1)}),B(v,"$named_captures",function(){var $=R;return $=this.$captures(),U(this.$regexp().$named_captures(),"transform_values",[],function(e){return null==e&&(e=R),$["$[]"](y(e.$last(),1))})}),B(v,"$names",function(){return this.$regexp().$names()}),B(v,"$inspect",function(){var h=this,$="#<MatchData "+h.matches[0].$inspect();if(h.$regexp().$names()["$empty?"]())for(var r=1,e=h.matches.length;r<e;r++)$+=" "+r+":"+h.matches[r].$inspect();else U(h.$named_captures(),"each",[],function(t,i){return null==t&&(t=R),null==i&&(i=R),$+=" "+t+":"+i.$inspect()});return $+">"}),B(v,"$length",function(){return this.matches.length}),B(v,"$to_a",g("matches")),B(v,"$to_s",function(){return this.matches[0]}),B(v,"$values_at",function(h){var r;r=Y(arguments);var n,t,i,s=[];for(n=0;n<r.length;n++)r[n].$$is_range&&((t=r[n].$to_a()).unshift(n,1),Array.prototype.splice.apply(r,t)),(i=X["$coerce_to!"](r[n],_("Integer"),"to_int"))<0&&(i+=this.matches.length)<0?s.push(R):s.push(this.matches[i]);return s},-1),K(v,"eql?","=="),K(v,"size","length")}(z[0],0,z)},Opal.modules["corelib/string"]=function(l){var Q=l.coerce_to,te=l.respond_to,a=l.global_multiline_regexp,P=l.prop,V=l.klass,k=l.def,j=l.Opal,B=l.defs,E=l.slice,W=l.send,Y=l.to_a,H=l.extract_kwargs,X=l.ensure_kwargs,K=l.eqeqeq,U=l.Kernel,x=l.truthy,q=l.gvars,M=l.rb_divide,w=l.rb_plus,I=l.eqeq,D=l.hash2,y=l.alias,g=l.const_set,z=l.top,R=[],_=l.$r(R),b=l.nil,f=l.$$$;return z.$require("corelib/comparable"),z.$require("corelib/regexp"),function(T,v,S){var d=V("::",String,"String"),G=[d].concat(S),m=l.$r(G);function h($){function r(J){var se,ae,$e,re,le,ee,ne="",oe=J.length;for(se=0;se<oe;se++)if("-"===(ae=J.charAt(se))&&se>0&&se<oe-1&&!$e){for((re=J.charCodeAt(se-1))>(le=J.charCodeAt(se+1))&&U.$raise(f("ArgumentError"),'invalid range "'+re+"-"+le+'" in string transliteration'),ee=re+1;ee<le+1;ee++)ne+=String.fromCharCode(ee);$e=!0,se++}else $e="\\"===ae,ne+=ae;return ne}function e(J,ne){if(0===J.length)return ne;var oe,$e,se="",ae=J.length;for(oe=0;oe<ae;oe++)$e=J.charAt(oe),-1!==ne.indexOf($e)&&(se+=$e);return se}var n,t,i,s,c,u,N="",C="";for(n=0,t=$.length;n<t;n++)s="^"===(i=Q($[n],f("String"),"to_str")).charAt(0)&&i.length>1,i=r(s?i.slice(1):i),s?C=e(C,i):N=e(N,i);if(N.length>0&&C.length>0){for(u="",n=0,t=N.length;n<t;n++)c=N.charAt(n),-1===C.indexOf(c)&&(u+=c);N=u,C=""}return N.length>0?"["+f("Regexp").$escape(N)+"]":C.length>0?"[^"+f("Regexp").$escape(C)+"]":null}d.$include(f("Comparable")),l.prop(d.$$prototype,"$$is_string",!0),k(d,"$__id__",function(){return this.toString()}),B(d,"$try_convert",function(r){return j["$coerce_to?"](r,f("String"),"to_str")}),B(d,"$new",function(r){var n,i=(n=E(arguments))[0]||"",s=n[n.length-1];return i=Q(i,f("String"),"to_str"),s&&s.$$is_hash&&s.$$smap.encoding&&(i=i.$force_encoding(s.$$smap.encoding)),(i=new this.$$constructor(i)).$initialize.$$pristine||W(i,"initialize",Y(n)),i},-1),k(d,"$initialize",function(r,e){var n,t;return n=E(arguments),t=H(n),t=X(t),n.length>0&&n.shift(),b},-1),k(d,"$%",function(r){var e=this;return K(f("Array"),r)?W(e,"format",[e].concat(Y(r))):e.$format(e,r)}),k(d,"$*",function(r){if((r=Q(r,f("Integer"),"to_int"))<0&&U.$raise(f("ArgumentError"),"negative argument"),0===r)return"";var n="",t=this.toString();for(t.length*r>=1<<28&&U.$raise(f("RangeError"),"multiply count must not overflow maximum string size");1==(1&r)&&(n+=t),0!=(r>>>=1);)t+=t;return n}),k(d,"$+",function(r){var e=this;if(""==(r=Q(r,f("String"),"to_str"))&&e.$$class===l.String)return e;if(""==e&&r.$$class===l.String)return r;var n=e+r;return e.encoding===n.encoding&&r.encoding===n.encoding||"UTF-8"===e.encoding.name||"UTF-8"===r.encoding.name?n:l.enc(n,e.encoding)}),k(d,"$<=>",function(r){var e=this;if(x(r["$respond_to?"]("to_str")))return e>(r=r.$to_str().$to_s())?1:e<r?-1:0;var n=r["$<=>"](e);return n===b?b:n>0?-1:n<0?1:0}),k(d,"$==",function(r){return r.$$is_string?this.toString()===r.toString():!!te(r,"$to_str")&&r["$=="](this)}),k(d,"$=~",function(r){return r.$$is_string&&U.$raise(f("TypeError"),"type mismatch: String given"),r["$=~"](this)}),k(d,"$[]",function(r,e){var i,s,n=this,t=n.length;if(r.$$is_range)return i=r.excl,s=r,e=r.end===b?-1:Q(r.end,f("Integer"),"to_int"),r=r.begin===b?0:Q(r.begin,f("Integer"),"to_int"),Math.abs(r)>t?b:(r<0&&(r+=t),e<0&&(e+=t),(!i||s.end===b)&&(e+=1),(e-=r)<0&&(e=0),n.substr(r,e));if(r.$$is_string)return null!=e&&U.$raise(f("TypeError")),-1!==n.indexOf(r)?r:b;if(r.$$is_regexp){var c=n.match(r);return null===c?(q["~"]=b,b):(q["~"]=f("MatchData").$new(r,c),null==e?c[0]:(e=Q(e,f("Integer"),"to_int"))<0&&-e<c.length?c[e+=c.length]:e>=0&&e<c.length?c[e]:b)}return(r=Q(r,f("Integer"),"to_int"))<0&&(r+=t),null==e?r>=t||r<0?b:n.substr(r,1):(e=Q(e,f("Integer"),"to_int"))<0||r>t||r<0?b:n.substr(r,e)},-2),k(d,"$b",function(){return new String(this).$force_encoding("binary")}),k(d,"$capitalize",function(){return this.charAt(0).toUpperCase()+this.substr(1).toLowerCase()}),k(d,"$casecmp",function(r){var e=this;if(!x(r["$respond_to?"]("to_str")))return b;r=Q(r,f("String"),"to_str").$to_s();var n=/^[\x00-\x7F]*$/;return n.test(e)&&n.test(r)&&(e=e.toLowerCase(),r=r.toLowerCase()),e["$<=>"](r)}),k(d,"$casecmp?",function(r){var n=this.$casecmp(r);return n===b?b:0===n}),k(d,"$center",function(r,e){var n=this;if(null==e&&(e=" "),r=Q(r,f("Integer"),"to_int"),e=Q(e,f("String"),"to_str").$to_s(),x(e["$empty?"]())&&U.$raise(f("ArgumentError"),"zero width padding"),x(r<=n.length))return n;var t=n.$ljust(M(w(r,n.length),2).$ceil(),e);return n.$rjust(M(w(r,n.length),2).$floor(),e)+t.slice(n.length)},-2),k(d,"$chomp",function(r){var n,e=this;return null==q["/"]&&(q["/"]=b),null==r&&(r=q["/"]),x(r===b||0===e.length)?e:("\n"===(r=j["$coerce_to!"](r,f("String"),"to_str").$to_s())?n=e.replace(/\r?\n?$/,""):""===r?n=e.replace(/(\r?\n)+$/,""):e.length>=r.length&&e.substr(e.length-r.length,r.length)===r&&(n=e.substr(0,e.length-r.length)),n??e)},-1),k(d,"$chop",function(){var r=this,e=r.length;return e<=1?"":"\n"===r.charAt(e-1)&&"\r"===r.charAt(e-2)?r.substr(0,e-2):r.substr(0,e-1)}),k(d,"$chr",function(){return this.charAt(0)}),k(d,"$clone",function(r){var e,n=this,t=b;return null==(e=(r=X(r)).$$smap.freeze)&&(e=b),x(e["$nil?"]())||I(e,!0)||I(e,!1)||n.$raise(m("ArgumentError"),"unexpected value for freeze: "+e.$class()),(t=new String(n)).$copy_singleton_methods(n),t.$initialize_clone(n,D(["freeze"],{freeze:e})),I(e,!0)?t.$$frozen||(t.$$frozen=!0):x(e["$nil?"]())&&n.$$frozen&&(t.$$frozen=!0),t},-1),k(d,"$dup",function(){var e=b;return(e=new String(this)).$initialize_dup(this),e}),k(d,"$count",function(r){var n;0===(n=E(arguments)).length&&U.$raise(f("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var i=h(n);return null===i?0:this.length-this.replace(new RegExp(i,"g"),"").length},-1),k(d,"$delete",function(r){var n;0===(n=E(arguments)).length&&U.$raise(f("ArgumentError"),"ArgumentError: wrong number of arguments (0 for 1+)");var i=h(n);return null===i?this:this.replace(new RegExp(i,"g"),"")},-1),k(d,"$delete_prefix",function(r){var e=this;return r.$$is_string||(r=Q(r,f("String"),"to_str")),e.slice(0,r.length)===r?e.slice(r.length):e}),k(d,"$delete_suffix",function(r){var e=this;return r.$$is_string||(r=Q(r,f("String"),"to_str")),e.slice(e.length-r.length)===r?e.slice(0,e.length-r.length):e}),k(d,"$downcase",function(){return this.toLowerCase()}),k(d,"$each_line",function $(r,e){var t,i,s,c,N,C,J,ne,se,oe,ae,$e,n=$.$$p||b,u=this;if(null==q["/"]&&(q["/"]=b),$.$$p=null,t=E(arguments),i=H(t),i=X(i),t.length>0&&(s=t.shift()),null==s&&(s=q["/"]),null==(c=i.$$smap.chomp)&&(c=!1),n===b)return u.$enum_for("each_line",s,D(["chomp"],{chomp:c}));if(s===b)return l.yield1(n,u),u;if(0===(s=Q(s,f("String"),"to_str")).length){for(C=0,J=(N=u.split(/((?:\r?\n){2})(?:(?:\r?\n)*)/)).length;C<J;C+=2)(N[C]||N[C+1])&&($e=(N[C]||"")+(N[C+1]||""),c&&($e=$e.$chomp("\n")),l.yield1(n,$e));return u}for(se=u.$chomp(s),oe=u.length!=se.length,C=0,ne=(ae=se.split(s)).length;C<ne;C++)$e=ae[C],(C<ne-1||oe)&&($e+=s),c&&($e=$e.$chomp(s)),l.yield1(n,$e);return u},-1),k(d,"$empty?",function(){return 0===this.length}),k(d,"$end_with?",function(r){for(var n,t=this,i=0,s=(n=E(arguments)).length;i<s;i++){var c=Q(n[i],f("String"),"to_str").$to_s();if(t.length>=c.length&&t.substr(t.length-c.length,c.length)==c)return!0}return!1},-1),k(d,"$gsub",function $(r,e){var n=$.$$p||b,t=this;if($.$$p=null,void 0===e&&n===b)return t.$enum_for("gsub",r);var u,N,C,i="",s=b,c=0;for(r.$$is_regexp?r=a(r):(r=Q(r,f("String"),"to_str"),r=new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));;){if(null===(u=r.exec(t))){q["~"]=b,i+=t.slice(c);break}s=f("MatchData").$new(r,u),void 0===e?(C=r.lastIndex,N=n(u[0]),r.lastIndex=C):e.$$is_hash?N=e["$[]"](u[0]).$to_s():(e.$$is_string||(e=Q(e,f("String"),"to_str")),N=e.replace(/([\\]+)([0-9+&`'])/g,function(J,ne,se){if(ne.length%2==0)return J;switch(se){case"+":for(var oe=u.length-1;oe>0;oe--)if(void 0!==u[oe])return ne.slice(1)+u[oe];return"";case"&":return ne.slice(1)+u[0];case"`":return ne.slice(1)+t.slice(0,u.index);case"'":return ne.slice(1)+t.slice(u.index+u[0].length);default:return ne.slice(1)+(u[se]||"")}}).replace(/\\\\/g,"\\")),r.lastIndex===u.index?(i+=t.slice(c,u.index)+N+(t[u.index]||""),r.lastIndex+=1):i+=t.slice(c,u.index)+N,c=r.lastIndex}return q["~"]=s,i},-2),k(d,"$hash",function(){return this.toString()}),k(d,"$hex",function(){return this.$to_i(16)}),k(d,"$include?",function(r){return r.$$is_string||(r=Q(r,f("String"),"to_str")),-1!==this.indexOf(r)}),k(d,"$index",function(r,e){var t,i,s,n=this;if(void 0===e)e=0;else if((e=Q(e,f("Integer"),"to_int"))<0&&(e+=n.length)<0)return b;if(r.$$is_regexp)for(s=a(r);;){if(null===(i=s.exec(n))){q["~"]=b,t=-1;break}if(i.index>=e){q["~"]=f("MatchData").$new(s,i),t=i.index;break}s.lastIndex=i.index+1}else t=0===(r=Q(r,f("String"),"to_str")).length&&e>n.length?-1:n.indexOf(r,e);return-1===t?b:t},-2),k(d,"$inspect",function(){var r=this,n={"\x07":"\\a","\x1b":"\\e","\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\v":"\\v",'"':'\\"',"\\":"\\\\"};return'"'+r.replace(/[\\\"\x00-\x1f\u007F-\u009F\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,function(i){return n[i]?n[i]:(i=i.charCodeAt(0))<=255&&(r.encoding["$binary?"]()||r.internal_encoding["$binary?"]())?"\\x"+("00"+i.toString(16).toUpperCase()).slice(-2):"\\u"+("0000"+i.toString(16).toUpperCase()).slice(-4)}).replace(/\#[\$\@\{]/g,"\\$&")+'"'}),k(d,"$intern",function(){return this.toString()}),k(d,"$length",function(){return this.length}),y(d,"size","length"),k(d,"$lines",function $(r,e){var t,i,s,c,n=$.$$p||b,N=b;return null==q["/"]&&(q["/"]=b),$.$$p=null,t=E(arguments),i=H(t),i=X(i),t.length>0&&(s=t.shift()),null==s&&(s=q["/"]),null==(c=i.$$smap.chomp)&&(c=!1),N=W(this,"each_line",[s,D(["chomp"],{chomp:c})],n.$to_proc()),x(n)?this:N.$to_a()},-1),k(d,"$ljust",function(r,e){var n=this;if(null==e&&(e=" "),r=Q(r,f("Integer"),"to_int"),e=Q(e,f("String"),"to_str").$to_s(),x(e["$empty?"]())&&U.$raise(f("ArgumentError"),"zero width padding"),x(r<=n.length))return n;var t=-1,i="";for(r-=n.length;++t<r;)i+=e;return n+i.slice(0,r)},-2),k(d,"$lstrip",function(){return this.replace(/^[\u0000\s]*/,"")}),k(d,"$ascii_only?",function(){return!!this.encoding.ascii&&/^[\x00-\x7F]*$/.test(this)}),k(d,"$match",function $(r,e){var n=$.$$p||b;return $.$$p=null,(K(m("String"),r)||x(r["$respond_to?"]("to_str")))&&(r=f("Regexp").$new(r.$to_str())),K(f("Regexp"),r)||U.$raise(f("TypeError"),"wrong argument type "+r.$class()+" (expected Regexp)"),W(r,"match",[this,e],n.$to_proc())},-2),k(d,"$match?",function(r,e){return(K(m("String"),r)||x(r["$respond_to?"]("to_str")))&&(r=f("Regexp").$new(r.$to_str())),K(f("Regexp"),r)||U.$raise(f("TypeError"),"wrong argument type "+r.$class()+" (expected Regexp)"),r["$match?"](this,e)},-2),k(d,"$next",function(){var r=this,e=r.length;if(0===e)return"";for(var s,n=r,t=r.search(/[a-zA-Z0-9]/),i=!1;e--;){if((s=r.charCodeAt(e))>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122)switch(s){case 57:i=!0,s=48;break;case 90:i=!0,s=65;break;case 122:i=!0,s=97;break;default:i=!1,s+=1}else-1===t?255===s?(i=!0,s=0):(i=!1,s+=1):i=!0;if(n=n.slice(0,e)+String.fromCharCode(s)+n.slice(e+1),i&&(0===e||e===t)){switch(s){case 65:case 97:break;default:s+=1}n=0===e?String.fromCharCode(s)+n:n.slice(0,e)+String.fromCharCode(s)+n.slice(e),i=!1}if(!i)break}return n}),k(d,"$oct",function(){var e,n=this,t=8;return/^\s*_/.test(n)?0:(n=n.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/i,function(i,s,c,u){switch(u.charAt(0)){case"+":case"-":return i;case"0":if("x"===u.charAt(1)&&"0x"===c)return i}switch(c){case"0b":t=2;break;case"0":case"0o":t=8;break;case"0d":t=10;break;case"0x":t=16}return s+u}),e=parseInt(n.replace(/_(?!_)/g,""),t),isNaN(e)?0:e)}),k(d,"$ord",function(){var r=this;return"function"==typeof r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}),k(d,"$partition",function(r){var n,t,e=this;return r.$$is_regexp?null===(t=r.exec(e))?n=-1:(f("MatchData").$new(r,t),r=t[0],n=t.index):(r=Q(r,f("String"),"to_str"),n=e.indexOf(r)),-1===n?[e,"",""]:[e.slice(0,n),e.slice(n,n+r.length),e.slice(n+r.length)]}),k(d,"$reverse",function(){return this.split("").reverse().join("")}),k(d,"$rindex",function(r,e){var t,i,s,c,n=this;if(void 0===e)e=n.length;else if((e=Q(e,f("Integer"),"to_int"))<0&&(e+=n.length)<0)return b;if(r.$$is_regexp){for(i=null,s=a(r);!(null===(c=s.exec(n))||c.index>e);)s.lastIndex=(i=c).index+1;null===i?(q["~"]=b,t=-1):(f("MatchData").$new(s,i),t=i.index)}else r=Q(r,f("String"),"to_str"),t=n.lastIndexOf(r,e);return-1===t?b:t},-2),k(d,"$rjust",function(r,e){var n=this;if(null==e&&(e=" "),r=Q(r,f("Integer"),"to_int"),e=Q(e,f("String"),"to_str").$to_s(),x(e["$empty?"]())&&U.$raise(f("ArgumentError"),"zero width padding"),x(r<=n.length))return n;var t=Math.floor(r-n.length),i=Math.floor(t/e.length),s=Array(i+1).join(e);return s+e.slice(0,t-s.length)+n},-2),k(d,"$rpartition",function(r){var n,t,i,s,e=this;if(r.$$is_regexp){for(t=null,i=a(r);null!==(s=i.exec(e));)i.lastIndex=(t=s).index+1;null===t?n=-1:(f("MatchData").$new(i,t),r=t[0],n=t.index)}else r=Q(r,f("String"),"to_str"),n=e.lastIndexOf(r);return-1===n?["","",e]:[e.slice(0,n),e.slice(n,n+r.length),e.slice(n+r.length)]}),k(d,"$rstrip",function(){return this.replace(/[\s\u0000]*$/,"")}),k(d,"$scan",function $(r,e){var t,n=$.$$p||b;$.$$p=null,null==(t=(e=X(e)).$$smap.no_matchdata)&&(t=!1);var u,s=[],c=b;for(r.$$is_regexp?r=a(r):(r=Q(r,f("String"),"to_str"),r=new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"));null!=(u=r.exec(this));)c=f("MatchData").$new(r,u,D(["no_matchdata"],{no_matchdata:t})),n===b?s.push(1==u.length?u[0]:c.$captures()):l.yield1(n,1==u.length?u[0]:c.$captures()),r.lastIndex===u.index&&(r.lastIndex+=1);return t||(q["~"]=c),n!==b?this:s},-2),k(d,"$singleton_class",function(){return l.get_singleton_class(this)}),k(d,"$split",function(r,e){var n=this,t=b;if(null==q[";"]&&(q[";"]=b),0===n.length)return[];if(void 0===e)e=0;else if(1===(e=j["$coerce_to!"](e,f("Integer"),"to_int")))return[n];(void 0===r||r===b)&&(r=x(t=q[";"])?t:" ");var u,N,C,i=[],s=n.toString(),c=0;if(r.$$is_regexp?r=a(r):" "===(r=Q(r,f("String"),"to_str").$to_s())?(r=/\s+/gm,s=s.replace(/^\s+/,"")):r=new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gm"),1===(i=s.split(r)).length&&i[0]===s)return[i[0]];for(;-1!==(N=i.indexOf(void 0));)i.splice(N,1);if(0===e){for(;""===i[i.length-1];)i.length-=1;return i}if(u=r.exec(s),e<0){if(null!==u&&""===u[0]&&-1===r.source.indexOf("(?="))for(N=0,C=u.length;N<C;N++)i.push("");return i}if(null!==u&&""===u[0])return i.splice(e-1,i.length-1,i.slice(e-1).join("")),i;if(e>=i.length)return i;for(N=0;null!==u&&(N++,c=r.lastIndex,N+1!==e);)u=r.exec(s);return i.splice(e-1,i.length-1,s.slice(c)),i},-1),k(d,"$squeeze",function(r){var n,t=this;if(0===(n=E(arguments)).length)return t.replace(/(.)\1+/g,"$1");var i=h(n);return null===i?t:t.replace(new RegExp("("+i+")\\1+","g"),"$1")},-1),k(d,"$start_with?",function(r){for(var n,i=0,s=(n=E(arguments)).length;i<s;i++)if(n[i].$$is_regexp){var c=n[i],u=c.exec(this);if(null!=u&&0===u.index)return q["~"]=f("MatchData").$new(c,u),!0;q["~"]=b}else{var N=Q(n[i],f("String"),"to_str").$to_s();if(0===this.indexOf(N))return!0}return!1},-1),k(d,"$strip",function(){return this.replace(/^[\s\u0000]*|[\s\u0000]*$/g,"")}),k(d,"$sub",function $(r,e){var n=$.$$p||b,t=this;$.$$p=null,r.$$is_regexp||(r=Q(r,f("String"),"to_str"),r=new RegExp(r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")));var i,s=r.exec(t);return null===s?(q["~"]=b,i=t.toString()):(f("MatchData").$new(r,s),void 0===e?(n===b&&U.$raise(f("ArgumentError"),"wrong number of arguments (1 for 2)"),i=t.slice(0,s.index)+n(s[0])+t.slice(s.index+s[0].length)):e.$$is_hash?i=t.slice(0,s.index)+e["$[]"](s[0]).$to_s()+t.slice(s.index+s[0].length):(e=(e=Q(e,f("String"),"to_str")).replace(/([\\]+)([0-9+&`'])/g,function(c,u,N){if(u.length%2==0)return c;switch(N){case"+":for(var C=s.length-1;C>0;C--)if(void 0!==s[C])return u.slice(1)+s[C];return"";case"&":return u.slice(1)+s[0];case"`":return u.slice(1)+t.slice(0,s.index);case"'":return u.slice(1)+t.slice(s.index+s[0].length);default:return u.slice(1)+(s[N]||"")}}).replace(/\\\\/g,"\\"),i=t.slice(0,s.index)+e+t.slice(s.index+s[0].length))),i},-2),k(d,"$sum",function(r){null==r&&(r=16),r=Q(r,f("Integer"),"to_int");for(var n=0,t=this.length,i=0;i<t;i++)n+=this.charCodeAt(i);return r<=0?n:n&Math.pow(2,r)-1},-1),k(d,"$swapcase",function(){return this.replace(/([a-z]+)|([A-Z]+)/g,function(n,t,i){return t?n.toUpperCase():n.toLowerCase()})}),k(d,"$to_f",function(){if("_"===this.charAt(0))return 0;var e=parseFloat(this.replace(/_/g,""));return isNaN(e)||e==1/0||e==-1/0?0:e}),k(d,"$to_i",function(r){null==r&&(r=10);var n,t=this.toLowerCase(),i=Q(r,f("Integer"),"to_int");return(1===i||i<0||i>36)&&U.$raise(f("ArgumentError"),"invalid radix "+i),/^\s*_/.test(t)?0:(t=t.replace(/^(\s*[+-]?)(0[bodx]?)(.+)$/,function(s,c,u,N){switch(N.charAt(0)){case"+":case"-":return s;case"0":if("x"===N.charAt(1)&&"0x"===u&&(0===i||16===i))return s}switch(u){case"0b":if(0===i||2===i)return i=2,c+N;break;case"0":case"0o":if(0===i||8===i)return i=8,c+N;break;case"0d":if(0===i||10===i)return i=10,c+N;break;case"0x":if(0===i||16===i)return i=16,c+N}return s}),n=parseInt(t.replace(/_(?!_)/g,""),i),isNaN(n)?0:n)},-1),k(d,"$to_proc",function $(){var n=b,t=b,i=b;return $.$$p=null,n=this.valueOf(),t=l.jsid(n),i=W(U,"proc",[],function s(c){var C,u=s.$$p||b;s.$$p=null,0===(C=E(arguments)).length&&U.$raise(f("ArgumentError"),"no receiver given");var J=C[0];null==J&&(J=b);var ne=J[t];return ne?C=C.slice(1):(ne=J.$method_missing,C[0]=n),"function"==typeof u&&(ne.$$p=u),0===C.length?ne.call(J):ne.apply(J,C)},-1),i.$$source_location=b,i}),k(d,"$to_s",function(){return this.toString()}),k(d,"$tr",function(r,e){var n=this;if(r=Q(r,f("String"),"to_str").$to_s(),e=Q(e,f("String"),"to_str").$to_s(),0==r.length||r===e)return n;var t,i,s,c,u,N,C,J={},ne=r.split(""),se=ne.length,oe=e.split(""),ae=oe.length,$e=!1,re=null;"^"===ne[0]&&ne.length>1&&($e=!0,ne.shift(),re=oe[ae-1],se-=1);var le=[],ee=null;for(i=!1,t=0;t<se;t++)if(c=ne[t],null==ee)ee=c,le.push(c);else if("-"===c)"-"===ee?(le.push("-"),le.push("-")):t==se-1?le.push("-"):i=!0;else if(i){for((u=ee.charCodeAt(0))>(N=c.charCodeAt(0))&&U.$raise(f("ArgumentError"),'invalid range "'+String.fromCharCode(u)+"-"+String.fromCharCode(N)+'" in string transliteration'),s=u+1;s<N;s++)le.push(String.fromCharCode(s));le.push(c),i=null,ee=null}else le.push(c);if(se=(ne=le).length,$e)for(t=0;t<se;t++)J[ne[t]]=!0;else{if(ae>0){var A=[],L=null;for(i=!1,t=0;t<ae;t++)if(c=oe[t],null==L)L=c,A.push(c);else if("-"===c)"-"===L?(A.push("-"),A.push("-")):t==ae-1?A.push("-"):i=!0;else if(i){for((u=L.charCodeAt(0))>(N=c.charCodeAt(0))&&U.$raise(f("ArgumentError"),'invalid range "'+String.fromCharCode(u)+"-"+String.fromCharCode(N)+'" in string transliteration'),s=u+1;s<N;s++)A.push(String.fromCharCode(s));A.push(c),i=null,L=null}else A.push(c);ae=(oe=A).length}var O=se-ae;if(O>0){var o=ae>0?oe[ae-1]:"";for(t=0;t<O;t++)oe.push(o)}for(t=0;t<se;t++)J[ne[t]]=oe[t]}var p="";for(t=0,C=n.length;t<C;t++){var F=J[c=n.charAt(t)];p+=$e?null==F?re:c:F??c}return p}),k(d,"$tr_s",function(r,e){var n=this;if(r=Q(r,f("String"),"to_str").$to_s(),e=Q(e,f("String"),"to_str").$to_s(),0==r.length)return n;var t,i,s,c,u,N,C,J={},ne=r.split(""),se=ne.length,oe=e.split(""),ae=oe.length,$e=!1,re=null;"^"===ne[0]&&ne.length>1&&($e=!0,ne.shift(),re=oe[ae-1],se-=1);var le=[],ee=null;for(i=!1,t=0;t<se;t++)if(c=ne[t],null==ee)ee=c,le.push(c);else if("-"===c)"-"===ee?(le.push("-"),le.push("-")):t==se-1?le.push("-"):i=!0;else if(i){for((u=ee.charCodeAt(0))>(N=c.charCodeAt(0))&&U.$raise(f("ArgumentError"),'invalid range "'+String.fromCharCode(u)+"-"+String.fromCharCode(N)+'" in string transliteration'),s=u+1;s<N;s++)le.push(String.fromCharCode(s));le.push(c),i=null,ee=null}else le.push(c);if(se=(ne=le).length,$e)for(t=0;t<se;t++)J[ne[t]]=!0;else{if(ae>0){var A=[];for(i=!1,t=0;t<ae;t++)if(c=oe[t],null==ee)ee=c,A.push(c);else if("-"===c)t==ae-1?A.push("-"):i=!0;else if(i){for((u=ee.charCodeAt(0))>(N=c.charCodeAt(0))&&U.$raise(f("ArgumentError"),'invalid range "'+String.fromCharCode(u)+"-"+String.fromCharCode(N)+'" in string transliteration'),s=u+1;s<N;s++)A.push(String.fromCharCode(s));A.push(c),i=null,ee=null}else A.push(c);ae=(oe=A).length}var O=se-ae;if(O>0){var o=ae>0?oe[ae-1]:"";for(t=0;t<O;t++)oe.push(o)}for(t=0;t<se;t++)J[ne[t]]=oe[t]}var p="",F=null;for(t=0,C=n.length;t<C;t++){var Z=J[c=n.charAt(t)];$e?null==Z?null==F&&(p+=re,F=!0):(p+=c,F=null):null!=Z?(null==F||F!==Z)&&(p+=Z,F=Z):(p+=c,F=null)}return p}),k(d,"$upcase",function(){return this.toUpperCase()}),k(d,"$upto",function $(r,e){var n=$.$$p||b,t=this;if($.$$p=null,null==e&&(e=!1),n===b)return t.$enum_for("upto",r,e);var i,s,c=t.toString();if(r=Q(r,f("String"),"to_str"),1===c.length&&1===r.length)for(i=c.charCodeAt(0),s=r.charCodeAt(0);i<=s&&(!e||i!==s);)n(String.fromCharCode(i)),i+=1;else if(parseInt(c,10).toString()===c&&parseInt(r,10).toString()===r)for(i=parseInt(c,10),s=parseInt(r,10);i<=s&&(!e||i!==s);)n(i.toString()),i+=1;else for(;c.length<=r.length&&c<=r&&(!e||c!==r);)n(c),c=c.$succ();return t},-2),k(d,"$instance_variables",function(){return[]}),B(d,"$_load",function(r){var e;return e=E(arguments),W(this,"new",Y(e))},-1),k(d,"$unicode_normalize",function(r){return null==r&&(r="nfc"),x(["nfc","nfd","nfkc","nfkd"]["$include?"](r))||U.$raise(f("ArgumentError"),"Invalid normalization form "+r),this.normalize(r.$upcase())},-1),k(d,"$unicode_normalized?",function(r){return null==r&&(r="nfc"),this.$unicode_normalize(r)["$=="](this)},-1),k(d,"$unpack",function(r){return U.$raise("To use String#unpack, you must first require 'corelib/string/unpack'.")}),k(d,"$unpack1",function(r){return U.$raise("To use String#unpack1, you must first require 'corelib/string/unpack'.")}),k(d,"$freeze",function(){var r=this;return"string"==typeof r||P(r,"$$frozen",!0),r}),k(d,"$-@",function(){var r=this;return"string"==typeof r||r.$$frozen?r:"UTF-8"==r.encoding.name&&"UTF-8"==r.internal_encoding.name?r.toString():r.$dup().$freeze()}),k(d,"$frozen?",function(){return"string"==typeof this||!0===this.$$frozen}),y(d,"+@","dup"),y(d,"===","=="),y(d,"byteslice","[]"),y(d,"eql?","=="),y(d,"equal?","==="),y(d,"object_id","__id__"),y(d,"slice","[]"),y(d,"succ","next"),y(d,"to_str","to_s"),y(d,"to_sym","intern"),j.$pristine(d,"initialize")}(0,0,R),g(R[0],"Symbol",_("String"))},Opal.modules["corelib/enumerable"]=function(l){var Q=l.truthy,te=l.coerce_to,a=l.yield1,P=l.yieldX,V=l.deny_frozen_access,k=l.module,j=l.send,B=l.slice,E=l.to_a,W=l.Opal,Y=l.thrower,H=l.def,X=l.Kernel,K=l.return_val,U=l.rb_gt,x=l.rb_times,q=l.rb_lt,M=l.eqeq,w=l.rb_plus,I=l.rb_minus,D=l.rb_divide,y=l.rb_le,g=l.hash2,z=l.lambda,R=l.not,_=l.alias,f=l.nil,T=l.$$$;return function(v,S){var d=k("::","Enumerable"),G=[d].concat([]),m=l.$r(G);function h($){return 0===$.length&&($=[f]),$.length>1&&($=[$]),$}return H(d,"$all?",function $(r){try{var e=Y("return"),n=$.$$p||f;return $.$$p=null,Q(void 0!==r)?j(this,"each",[],function(s){var N;if(N=h(B(arguments)),Q(j(r,"public_send",["==="].concat(E(N)))))return f;e.$throw(!1)},{$$arity:-1,$$ret:e}):j(this,"each",[],n!==f?function(s){var c;if(c=B(arguments),Q(l.yieldX(n,E(c))))return f;e.$throw(!1)}:function(s){var c;if(c=B(arguments),Q(W.$destructure(c)))return f;e.$throw(!1)},{$$arity:-1,$$ret:e}),!0}catch(i){if(i===e)return i.$v;throw i}},-1),H(d,"$any?",function $(r){try{var e=Y("return"),n=$.$$p||f;return $.$$p=null,Q(void 0!==r)?j(this,"each",[],function(s){var N;if(N=h(B(arguments)),!Q(j(r,"public_send",["==="].concat(E(N)))))return f;e.$throw(!0)},{$$arity:-1,$$ret:e}):j(this,"each",[],n!==f?function(s){var c;if(c=B(arguments),!Q(l.yieldX(n,E(c))))return f;e.$throw(!0)}:function(s){var c;if(c=B(arguments),!Q(W.$destructure(c)))return f;e.$throw(!0)},{$$arity:-1,$$ret:e}),!1}catch(i){if(i===e)return i.$v;throw i}},-1),H(d,"$chunk",function $(){var r=$.$$p||f,e=this;return $.$$p=null,r===f?j(e,"to_enum",["chunk"],function n(){return(null==n.$$s?this:n.$$s).$enumerator_size()},{$$s:e}):j(T("Enumerator"),"new",[],function n(t){var i=null==n.$$s?this:n.$$s;null==t&&(t=f);var s=f,c=[];function u(){c.length>0&&t.$yield(s,c)}i.$each.$$p=function(N){var C=a(r,N);C===f?(u(),c=[],s=f):(s===f||s===C?c.push(N):(u(),c=[N]),s=C)},i.$each(),u()},{$$s:e})}),H(d,"$chunk_while",function $(){var r=$.$$p||f;return $.$$p=null,r===f&&X.$raise(T("ArgumentError"),"no block given"),j(this,"slice_when",[],function(t,i){return null==t&&(t=f),null==i&&(i=f),l.yieldX(r,[t,i])["$!"]()})}),H(d,"$collect",function $(){var r=$.$$p||f,e=this;if($.$$p=null,r===f)return j(e,"enum_for",["collect"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:e});var n=[];return e.$each.$$p=function(){var t=P(r,arguments);n.push(t)},e.$each(),n}),H(d,"$collect_concat",function $(){var r=$.$$p||f,e=this;return $.$$p=null,r===f?j(e,"enum_for",["collect_concat"],function n(){return(null==n.$$s?this:n.$$s).$enumerator_size()},{$$s:e}):j(e,"map",[],r.$to_proc()).$flatten(1)}),H(d,"$compact",function(){return this.$to_a().$compact()}),H(d,"$count",function $(r){var e=$.$$p||f,t=f;return $.$$p=null,t=0,null!=r&&e!==f&&this.$warn("warning: given block not used"),Q(null!=r)?e=j(X,"proc",[],function(s){var c;return c=B(arguments),W.$destructure(c)["$=="](r)},-1):Q(e["$nil?"]())&&(e=j(X,"proc",[],K(!0))),j(this,"each",[],function(s){var c;return c=B(arguments),Q(P(e,c))?t++:f},-1),t},-1),H(d,"$cycle",function $(r){var e=$.$$p||f,n=this;if($.$$p=null,null==r&&(r=f),e===f)return j(n,"enum_for",["cycle",r],function u(){var N=null==u.$$s?this:u.$$s;return Q(r["$nil?"]())?Q(N["$respond_to?"]("size"))?T(T("Float"),"INFINITY"):f:(r=W["$coerce_to!"](r,T("Integer"),"to_int"),Q(U(r,0))?x(N.$enumerator_size(),r):0)},{$$s:n});if(!Q(r["$nil?"]())&&(r=W["$coerce_to!"](r,T("Integer"),"to_int"),Q(r<=0)))return f;var i,s,t=[];if(n.$each.$$p=function(){var u=W.$destructure(arguments);a(e,u),t.push(u)},n.$each(),0===t.length)return f;if(r===f)for(;;)for(i=0,s=t.length;i<s;i++)a(e,t[i]);else for(;r>1;){for(i=0,s=t.length;i<s;i++)a(e,t[i]);r--}},-1),H(d,"$detect",function $(r){try{var e=Y("return"),n=$.$$p||f;return $.$$p=null,n===f?this.$enum_for("detect",r):(j(this,"each",[],function(s){var c,N;if(c=B(arguments),N=W.$destructure(c),!Q(l.yield1(n,N)))return f;e.$throw(N)},{$$arity:-1,$$ret:e}),void 0!==r?"function"==typeof r?r():r:f)}catch(i){if(i===e)return i.$v;throw i}},-1),H(d,"$drop",function(r){r=te(r,T("Integer"),"to_int"),Q(r<0)&&X.$raise(T("ArgumentError"),"attempt to drop negative size");var n=[],t=0;return this.$each.$$p=function(){r<=t&&n.push(W.$destructure(arguments)),t++},this.$each(),n}),H(d,"$drop_while",function $(){var r=$.$$p||f,e=this;if($.$$p=null,r===f)return e.$enum_for("drop_while");var n=[],t=!0;return e.$each.$$p=function(){var i=W.$destructure(arguments);if(t){var s=a(r,i);Q(s)||(t=!1,n.push(i))}else n.push(i)},e.$each(),n}),H(d,"$each_cons",function $(r){var e=$.$$p||f,n=this;if($.$$p=null,Q(1!=arguments.length)&&X.$raise(T("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 1)"),r=W.$try_convert(r,T("Integer"),"to_int"),Q(r<=0)&&X.$raise(T("ArgumentError"),"invalid size"),e===f)return j(n,"enum_for",["each_cons",r],function i(){var c=f;return c=(null==i.$$s?this:i.$$s).$enumerator_size(),Q(c["$nil?"]())?f:M(c,0)||Q(q(c,r))?0:w(I(c,r),1)},{$$s:n});var t=[];return n.$each.$$p=function(){var i=W.$destructure(arguments);t.push(i),t.length>r&&t.shift(),t.length==r&&a(e,t.slice(0,r))},n.$each(),n}),H(d,"$each_entry",function $(r){var t,e=$.$$p||f,i=this;return $.$$p=null,t=B(arguments),e===f?j(i,"to_enum",["each_entry"].concat(E(t)),function s(){return(null==s.$$s?this:s.$$s).$enumerator_size()},{$$s:i}):(i.$each.$$p=function(){var s=W.$destructure(arguments);a(e,s)},i.$each.apply(i,t),i)},-1),H(d,"$each_slice",function $(r){var e=$.$$p||f,n=this;if($.$$p=null,r=te(r,T("Integer"),"to_int"),Q(r<=0)&&X.$raise(T("ArgumentError"),"invalid slice size"),e===f)return j(n,"enum_for",["each_slice",r],function i(){var s=null==i.$$s?this:i.$$s;return Q(s["$respond_to?"]("size"))?D(s.$size(),r).$ceil():f},{$$s:n});var t=[];return n.$each.$$p=function(){var i=W.$destructure(arguments);t.push(i),t.length===r&&(a(e,t),t=[])},n.$each(),t.length>0&&a(e,t),n}),H(d,"$each_with_index",function $(r){var t,e=$.$$p||f,i=this;if($.$$p=null,t=B(arguments),e===f)return j(i,"enum_for",["each_with_index"].concat(E(t)),function c(){return(null==c.$$s?this:c.$$s).$enumerator_size()},{$$s:i});var s=0;return i.$each.$$p=function(){var c=W.$destructure(arguments);e(c,s),s++},i.$each.apply(i,t),i},-1),H(d,"$each_with_object",function $(r){var e=$.$$p||f,n=this;return $.$$p=null,e===f?j(n,"enum_for",["each_with_object",r],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:n}):(n.$each.$$p=function(){var t=W.$destructure(arguments);e(t,r)},n.$each(),r)}),H(d,"$entries",function(r){var n,t=this;n=B(arguments);var i=[];return t.$each.$$p=function(){i.push(W.$destructure(arguments))},t.$each.apply(t,n),i},-1),H(d,"$filter_map",function $(){var r=$.$$p||f,e=this;return $.$$p=null,r===f?j(e,"enum_for",["filter_map"],function n(){return(null==n.$$s?this:n.$$s).$enumerator_size()},{$$s:e}):j(j(e,"map",[],r.$to_proc()),"select",[],"itself".$to_proc())}),H(d,"$find_all",function $(){var r=$.$$p||f,e=this;if($.$$p=null,r===f)return j(e,"enum_for",["find_all"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:e});var n=[];return e.$each.$$p=function(){var t=W.$destructure(arguments),i=a(r,t);Q(i)&&n.push(t)},e.$each(),n}),H(d,"$find_index",function $(r){try{var e=Y("return"),n=$.$$p||f,t=this,i=f;return $.$$p=null,Q(void 0===r&&n===f)?t.$enum_for("find_index"):(null!=r&&n!==f&&t.$warn("warning: given block not used"),i=0,Q(null!=r)?j(t,"each",[],function(c){var u;return u=B(arguments),M(W.$destructure(u),r)&&e.$throw(i),i+=1},{$$arity:-1,$$ret:e}):j(t,"each",[],function(c){var u;return u=B(arguments),Q(l.yieldX(n,E(u)))&&e.$throw(i),i+=1},{$$arity:-1,$$ret:e}),f)}catch(s){if(s===e)return s.$v;throw s}},-1),H(d,"$first",function(r){try{var e=Y("return"),t=f,i=f;return Q(void 0===r)?j(this,"each",[],function(c){null==c&&(c=f),e.$throw(c)},{$$ret:e}):(t=[],r=te(r,T("Integer"),"to_int"),Q(r<0)&&X.$raise(T("ArgumentError"),"attempt to take negative size"),Q(0==r)?[]:(i=0,j(this,"each",[],function(c){var u;if(u=B(arguments),t.push(W.$destructure(u)),!Q(r<=++i))return f;e.$throw(t)},{$$arity:-1,$$ret:e}),t))}catch(s){if(s===e)return s.$v;throw s}},-1),H(d,"$grep",function $(r){var e=$.$$p||f,t=f;return $.$$p=null,t=[],j(this,"each",[],function(s){var u,N;return N=h(u=B(arguments)),Q(j(r,"__send__",["==="].concat(E(N))))?(e!==f?(Q(U(u.$length(),1))&&(u=[u]),u=l.yieldX(e,E(u))):Q(y(u.$length(),1))&&(u=u["$[]"](0)),t.$push(u)):f},-1),t}),H(d,"$grep_v",function $(r){var e=$.$$p||f,t=f;return $.$$p=null,t=[],j(this,"each",[],function(s){var u,N;return N=h(u=B(arguments)),Q(j(r,"__send__",["==="].concat(E(N))))?f:(e!==f?(Q(U(u.$length(),1))&&(u=[u]),u=l.yieldX(e,E(u))):Q(y(u.$length(),1))&&(u=u["$[]"](0)),t.$push(u))},-1),t}),H(d,"$group_by",function $(){var e,r=$.$$p||f,n=this,t=f,i=f;return $.$$p=null,r===f?j(n,"enum_for",["group_by"],function c(){return(null==c.$$s?this:c.$$s).$enumerator_size()},{$$s:n}):(t=g([],{}),n.$each.$$p=function(){var c=W.$destructure(arguments),u=a(r,c);(Q(i=t["$[]"](u))?i:(e=[u,[]],j(t,"[]=",e),e[e.length-1]))["$<<"](c)},n.$each(),t)}),H(d,"$include?",function(r){try{var e=Y("return");return j(this,"each",[],function(i){var s;if(s=B(arguments),!M(W.$destructure(s),r))return f;e.$throw(!0)},{$$arity:-1,$$ret:e}),!1}catch(t){if(t===e)return t.$v;throw t}}),H(d,"$inject",function $(r,e){var n=$.$$p||f,t=this;$.$$p=null;var i=r;return n!==f&&void 0===e?t.$each.$$p=function(){var s=W.$destructure(arguments);void 0!==i?(s=P(n,[i,s]),i=s):i=s}:(void 0===e&&(T("Symbol")["$==="](r)||X.$raise(T("TypeError"),r.$inspect()+" is not a Symbol"),e=r,i=void 0),t.$each.$$p=function(){var s=W.$destructure(arguments);i=void 0!==i?i.$__send__(e,s):s}),t.$each(),i??f},-1),H(d,"$lazy",function(){return j(T(T("Enumerator"),"Lazy"),"new",[this,this.$enumerator_size()],function(n,t){var i;return null==n&&(n=f),i=B(arguments,1),j(n,"yield",E(i))},-2)}),H(d,"$enumerator_size",function(){return Q(this["$respond_to?"]("size"))?this.$size():f}),H(d,"$max",function $(r){var t,i,e=$.$$p||f,n=this;return $.$$p=null,void 0===r||r===f?(n.$each.$$p=function(){var s=W.$destructure(arguments);void 0!==t?((i=e!==f?P(e,[s,t]):s["$<=>"](t))===f&&X.$raise(T("ArgumentError"),"comparison failed"),i>0&&(t=s)):t=s},n.$each(),void 0===t?f:t):(r=te(r,T("Integer"),"to_int"),j(n,"sort",[],e.$to_proc()).$reverse().$first(r))},-1),H(d,"$max_by",function $(r){var t,i,e=$.$$p||f,n=this;return $.$$p=null,null==r&&(r=f),Q(e)?Q(r["$nil?"]())?(n.$each.$$p=function(){var s=W.$destructure(arguments),c=a(e,s);if(void 0===t)return t=s,void(i=c);c["$<=>"](i)>0&&(t=s,i=c)},n.$each(),void 0===t?f:t):j(n,"sort_by",[],e.$to_proc()).$reverse().$take(r):j(n,"enum_for",["max_by",r],function s(){return(null==s.$$s?this:s.$$s).$enumerator_size()},{$$s:n})},-1),H(d,"$min",function $(r){var t,e=$.$$p||f,n=this;return $.$$p=null,null==r&&(r=f),Q(r["$nil?"]())?(n.$each.$$p=e!==f?function(){var i=W.$destructure(arguments);if(void 0!==t){var s=e(i,t);s===f&&X.$raise(T("ArgumentError"),"comparison failed"),s<0&&(t=i)}else t=i}:function(){var i=W.$destructure(arguments);void 0!==t?W.$compare(i,t)<0&&(t=i):t=i},n.$each(),void 0===t?f:t):e!==f?j(n,"sort",[],function(s,c){return null==s&&(s=f),null==c&&(c=f),l.yieldX(e,[s,c])}).$take(r):n.$sort().$take(r)},-1),H(d,"$min_by",function $(r){var t,i,e=$.$$p||f,n=this;return $.$$p=null,null==r&&(r=f),Q(e)?Q(r["$nil?"]())?(n.$each.$$p=function(){var s=W.$destructure(arguments),c=a(e,s);if(void 0===t)return t=s,void(i=c);c["$<=>"](i)<0&&(t=s,i=c)},n.$each(),void 0===t?f:t):j(n,"sort_by",[],e.$to_proc()).$take(r):j(n,"enum_for",["min_by",r],function s(){return(null==s.$$s?this:s.$$s).$enumerator_size()},{$$s:n})},-1),H(d,"$minmax",function $(){var n,r=$.$$p||f;$.$$p=null,r=Q(n=r)?n:j(X,"proc",[],function(u,N){return null==u&&(u=f),null==N&&(N=f),u["$<=>"](N)});var t=f,i=f,s=!0;return this.$each.$$p=function(){var c=W.$destructure(arguments);if(s)t=i=c,s=!1;else{var u=r.$call(t,c);u===f?X.$raise(T("ArgumentError"),"comparison failed"):u>0&&(t=c);var N=r.$call(i,c);N===f?X.$raise(T("ArgumentError"),"comparison failed"):N<0&&(i=c)}},this.$each(),[t,i]}),H(d,"$minmax_by",function $(){var r=$.$$p||f,e=this;if($.$$p=null,!Q(r))return j(e,"enum_for",["minmax_by"],function c(){return(null==c.$$s?this:c.$$s).$enumerator_size()},{$$s:e});var i,s,n=f,t=f;return e.$each.$$p=function(){var c=W.$destructure(arguments),u=a(r,c);(void 0===i||u["$<=>"](i)<0)&&(n=c,i=u),(void 0===s||u["$<=>"](s)>0)&&(t=c,s=u)},e.$each(),[n,t]}),H(d,"$none?",function $(r){try{var e=Y("return"),n=$.$$p||f;return $.$$p=null,Q(void 0!==r)?j(this,"each",[],function(s){var N;if(N=h(B(arguments)),!Q(j(r,"public_send",["==="].concat(E(N)))))return f;e.$throw(!1)},{$$arity:-1,$$ret:e}):j(this,"each",[],n!==f?function(s){var c;if(c=B(arguments),!Q(l.yieldX(n,E(c))))return f;e.$throw(!1)}:function(s){var c,N;if(c=B(arguments),N=W.$destructure(c),!Q(N))return f;e.$throw(!1)},{$$arity:-1,$$ret:e}),!0}catch(i){if(i===e)return i.$v;throw i}},-1),H(d,"$one?",function $(r){try{var e=Y("return"),n=$.$$p||f,i=f;return $.$$p=null,i=0,Q(void 0!==r)?j(this,"each",[],function(c){var C;return C=h(B(arguments)),Q(j(r,"public_send",["==="].concat(E(C))))?(i=w(i,1),Q(U(i,1))?void e.$throw(!1):f):f},{$$arity:-1,$$ret:e}):j(this,"each",[],n!==f?function(c){var u;return u=B(arguments),Q(l.yieldX(n,E(u)))?(i=w(i,1),Q(U(i,1))?void e.$throw(!1):f):f}:function(c){var u;return u=B(arguments),Q(W.$destructure(u))?(i=w(i,1),Q(U(i,1))?void e.$throw(!1):f):f},{$$arity:-1,$$ret:e}),i["$=="](1)}catch(s){if(s===e)return s.$v;throw s}},-1),H(d,"$partition",function $(){var r=$.$$p||f,e=this;if($.$$p=null,r===f)return j(e,"enum_for",["partition"],function s(){return(null==s.$$s?this:s.$$s).$enumerator_size()},{$$s:e});var n=[],t=[];return e.$each.$$p=function(){var s=W.$destructure(arguments),c=a(r,s);Q(c)?n.push(s):t.push(s)},e.$each(),[n,t]}),H(d,"$reject",function $(){var r=$.$$p||f,e=this;if($.$$p=null,r===f)return j(e,"enum_for",["reject"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:e});var n=[];return e.$each.$$p=function(){var t=W.$destructure(arguments),i=a(r,t);Q(i)||n.push(t)},e.$each(),n}),H(d,"$reverse_each",function $(){var r=$.$$p||f,e=this;if($.$$p=null,r===f)return j(e,"enum_for",["reverse_each"],function i(){return(null==i.$$s?this:i.$$s).$enumerator_size()},{$$s:e});var n=[];e.$each.$$p=function(){n.push(arguments)},e.$each();for(var t=n.length-1;t>=0;t--)P(r,n[t]);return n}),H(d,"$slice_before",function $(r){var e=$.$$p||f;return $.$$p=null,Q(void 0===r&&e===f)&&X.$raise(T("ArgumentError"),"both pattern and block are given"),Q(void 0!==r&&e!==f||arguments.length>1)&&X.$raise(T("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),j(T("Enumerator"),"new",[],function t(i){var s=null==t.$$s?this:t.$$s;null==i&&(i=f);var c=[];s.$each.$$p=e!==f?void 0===r?function(){var u=W.$destructure(arguments),N=a(e,u);Q(N)&&c.length>0&&(i["$<<"](c),c=[]),c.push(u)}:function(){var u=W.$destructure(arguments),N=e(u,r.$dup());Q(N)&&c.length>0&&(i["$<<"](c),c=[]),c.push(u)}:function(){var u=W.$destructure(arguments),N=r["$==="](u);Q(N)&&c.length>0&&(i["$<<"](c),c=[]),c.push(u)},s.$each(),c.length>0&&i["$<<"](c)},{$$s:this})},-1),H(d,"$slice_after",function $(r){var e=$.$$p||f;return $.$$p=null,Q(void 0===r&&e===f)&&X.$raise(T("ArgumentError"),"both pattern and block are given"),Q(void 0!==r&&e!==f||arguments.length>1)&&X.$raise(T("ArgumentError"),"wrong number of arguments ("+arguments.length+" expected 1)"),Q(void 0!==r)&&(e=j(X,"proc",[],function(i){return null==i&&(i=f),r["$==="](i)})),j(T("Enumerator"),"new",[],function t(i){var c,s=null==t.$$s?this:t.$$s;null==i&&(i=f),s.$each.$$p=function(){var u=W.$destructure(arguments),N=a(e,u);null==c&&(c=[]),Q(N)?(c.push(u),i.$yield(c),c=null):c.push(u)},s.$each(),null!=c&&i.$yield(c)},{$$s:this})},-1),H(d,"$slice_when",function $(){var r=$.$$p||f;return $.$$p=null,r===f&&X.$raise(T("ArgumentError"),"wrong number of arguments (0 for 1)"),j(T("Enumerator"),"new",[],function n(t){var i=null==n.$$s?this:n.$$s;null==t&&(t=f);var s=f,c=f;i.$each_cons.$$p=function(){var u=W.$destructure(arguments),N=u[0],C=u[1],J=P(r,[N,C]);c=C,s===f&&(s=[]),Q(J)?(s.push(N),t.$yield(s),s=[]):s.push(N)},i.$each_cons(2),s!==f&&(s.push(c),t.$yield(s))},{$$s:this})}),H(d,"$sort",function $(){var n,r=$.$$p||f;return $.$$p=null,n=this.$to_a(),r===f&&(r=z(function(i,s){return null==i&&(i=f),null==s&&(s=f),i["$<=>"](s)})),j(n,"sort",[],r.$to_proc())}),H(d,"$sort_by",function $(){var r=$.$$p||f,e=this,n=f;return $.$$p=null,r===f?j(e,"enum_for",["sort_by"],function t(){return(null==t.$$s?this:t.$$s).$enumerator_size()},{$$s:e}):(n=j(e,"map",[],function(){var i;return i=W.$destructure(arguments),[l.yield1(r,i),i]}),j(n,"sort!",[],function(i,s){return null==i&&(i=f),null==s&&(s=f),i[0]["$<=>"](s[0])}),j(n,"map!",[],function(i){return null==i&&(i=f),i[1]}))}),H(d,"$sum",function $(r){var e=$.$$p||f,t=f,i=f;return $.$$p=null,null==r&&(r=0),t=r,i=0,j(this,"each",[],function(c){var N,C=f,J=f,ne=f;return N=B(arguments),C=e!==f?l.yieldX(e,E(N)):W.$destructure(N),R([T(T("Float"),"INFINITY"),T(T("Float"),"INFINITY")["$-@"]()]["$include?"](C))&&Q(C["$respond_to?"]("-"))?(J=I(C,i),ne=w(t,J),i=I(I(ne,t),J),t=ne):t=w(t,C)},-1),t},-1),H(d,"$take",function(r){return this.$first(r)}),H(d,"$take_while",function $(){try{var r=Y("return"),e=$.$$p||f,t=f;return $.$$p=null,Q(e)?(t=[],j(this,"each",[],function(s){var c,N;return c=B(arguments),N=W.$destructure(c),Q(l.yield1(e,N))||r.$throw(t),t.push(N)},{$$arity:-1,$$ret:r})):this.$enum_for("take_while")}catch(i){if(i===r)return i.$v;throw i}}),H(d,"$uniq",function $(){var r=$.$$p||f,n=f;return $.$$p=null,n=g([],{}),j(this,"each",[],function(i){var s,u,N,C;return s=B(arguments),N=W.$destructure(s),C=r!==f?l.yield1(r,N):N,Q(n["$key?"](C))?f:(j(n,"[]=",u=[C,N]),u[u.length-1])},-1),n.$values()}),H(d,"$tally",function(r){var n;return r&&r!==f&&V(r),n=j(j(this,"group_by",[],"itself".$to_proc()),"transform_values",[],"count".$to_proc()),Q(r)?(j(n,"each",[],function(i,s){var c;return null==i&&(i=f),null==s&&(s=f),c=[i,w(r.$fetch(i,0),s)],j(r,"[]=",c),c[c.length-1]}),r):n},-1),H(d,"$to_h",function $(r){var t,e=$.$$p||f,i=this;if($.$$p=null,t=B(arguments),e!==f)return j(j(i,"map",[],e.$to_proc()),"to_h",E(t));var s=g([],{});return i.$each.$$p=function(){var c=W.$destructure(arguments),u=W["$coerce_to?"](c,T("Array"),"to_ary");u.$$is_array||X.$raise(T("TypeError"),"wrong element type "+u.$class()+" (expected array)"),2!==u.length&&X.$raise(T("ArgumentError"),"wrong array length (expected 2, was "+u.$length()+")"),l.hash_put(s,u[0],u[1])},i.$each.apply(i,t),s},-1),H(d,"$to_set",function $(r,e){var t,i,n=$.$$p||f,c=this;return $.$$p=null,(t=B(arguments)).length>0&&(i=t.shift()),null==i&&(i=m("Set")),j(i,"new",[c].concat(E(t)),n.$to_proc())},-1),H(d,"$zip",function $(r){var t;return $.$$p=null,t=B(arguments),j(this.$to_a(),"zip",E(t))},-1),_(d,"find","detect"),_(d,"filter","find_all"),_(d,"flat_map","collect_concat"),_(d,"map","collect"),_(d,"member?","include?"),_(d,"reduce","inject"),_(d,"select","find_all"),_(d,"to_a","entries")}()},Opal.modules["corelib/enumerator/arithmetic_sequence"]=function(l){var g,z,R,Q=l.klass,te=l.truthy,a=l.to_a,P=l.eqeq,V=l.Kernel,k=l.def,j=l.rb_gt,B=l.rb_lt,E=l.rb_le,W=l.rb_ge,Y=l.rb_plus,H=l.rb_minus,X=l.eqeqeq,K=l.not,U=l.rb_times,x=l.rb_divide,q=l.alias,w=l.nil,I=l.$$$;return g=[],R=[z=Q("::",null,"Enumerator")].concat(g),function(_,b,f){var T=Q(_,b,"ArithmeticSequence"),v=[T].concat(f),S=l.$r(v),d=T.$$prototype;d.step_arg2=d.receiver_num=d.step_arg1=d.step=d.range=d.topfx=d.bypfx=d.creation_method=d.skipped_arg=w,l.prop(T.$$prototype,"$$is_arithmetic_seq",!0);var G=1/0;return k(T,"$initialize",function(h,$,r){var e,n=this,t=w;return null==r&&(r="step"),n.creation_method=r,te(h["$is_a?"](I("Array")))?(e=[].concat(a(h)),n.step_arg1=null==e[0]?w:e[0],n.step_arg2=null==e[1]?w:e[1],n.topfx=null==e[2]?w:e[2],n.bypfx=null==e[3]?w:e[3],n.receiver_num=$,n.step=1,n.range=te(n.step_arg2)?(n.step=n.step_arg2,l.Range.$new(n.receiver_num,n.step_arg1,!1)):te(n.step_arg1)?l.Range.$new(n.receiver_num,n.step_arg1,!1):l.Range.$new(n.receiver_num,w,!1)):(te($)||(n.skipped_arg=!0),e=[h,te(t=$)?t:1],n.range=e[0],n.step=e[1]),n.object=n,P(n.step,0)&&V.$raise(S("ArgumentError"),"step can't be 0"),te(n.step["$respond_to?"]("to_int"))?w:V.$raise(S("ArgumentError"),"no implicit conversion of "+n.step.$class()+" into Integer")},-2),T.$attr_reader("step"),k(T,"$begin",function(){return this.range.$begin()}),k(T,"$end",function(){return this.range.$end()}),k(T,"$exclude_end?",function(){return this.range["$exclude_end?"]()}),k(T,"$_lesser_than_end?",function(h){var r,e,$=this;return r=te(e=$.$end())?e:G,te(j($.$step(),0))?te($["$exclude_end?"]())?B(h,r):E(h,r):te($["$exclude_end?"]())?j(h,r):W(h,r)}),k(T,"$_greater_than_begin?",function(h){var r,e;return r=te(e=this.$begin())?e:G["$-@"](),te(j(this.$step(),0))?j(h,r):B(h,r)}),k(T,"$first",function(h){var $=this,r=w,e=w,n=w;if(r=te(e=$.$begin())?e:G["$-@"](),!te(h))return te($["$_lesser_than_end?"](r))?r:w;for(n=[];te(te(e=$["$_lesser_than_end?"](r))?j(h,0):e);)n["$<<"](r),r=Y(r,$.$step()),h=H(h,1);return n},-1),k(T,"$each",function m(){var r,h=m.$$p||w,$=this,e=w;if(m.$$p=null,h===w)return $;for(X(w,$.$begin())&&V.$raise(S("TypeError"),"nil can't be coerced into Integer"),e=te(r=$.$begin())?r:G["$-@"]();te($["$_lesser_than_end?"](e));)l.yield1(h,e),e=Y(e,$.$step());return $}),k(T,"$last",function(h){var $=this,r=w,e=w,n=w;if(X(G,r=$.$end())||X(G["$-@"](),r)?V.$raise(I("FloatDomainError"),$.$end()):X(w,r)&&V.$raise(I("RangeError"),"cannot get the last element of endless arithmetic sequence"),e=H($.$end(),H($.$end(),$.$begin())["$%"]($.$step())),te($["$_lesser_than_end?"](e))||(e=H(e,$.$step())),!te(h))return te($["$_greater_than_begin?"](e))?e:w;for(n=[];te(te(r=$["$_greater_than_begin?"](e))?j(h,0):r);)n["$<<"](e),e=H(e,$.$step()),h=H(h,1);return n.$reverse()},-1),k(T,"$size",function(){var $,h=this,r=w;return $=te(j(h.$step(),0))?1:-1,K(h["$_lesser_than_end?"](h.$begin()))?0:te([G["$-@"](),G]["$include?"](h.$step()))?1:te([U(G["$-@"](),$),w]["$include?"](h.$begin()))||te([U(G,$),w]["$include?"](h.$end()))?G:(r=H(h.$end(),H(h.$end(),h.$begin())["$%"](h.$step())),te(h["$_lesser_than_end?"](r))||(r=H(r,h.$step())),Y(x(H(r,h.$begin()),h.$step()).$abs().$to_i(),1))}),k(T,"$==",function(h){var r,e,n,t,$=this;return te(r=te(e=te(n=te(t=$.$class()["$=="](h.$class()))?$.$begin()["$=="](h.$begin()):t)?$.$end()["$=="](h.$end()):n)?$.$step()["$=="](h.$step()):e)?$["$exclude_end?"]()["$=="](h["$exclude_end?"]()):r}),k(T,"$hash",function(){var h=this;return[h.$begin(),h.$end(),h.$step(),h["$exclude_end?"]()].$hash()}),k(T,"$inspect",function(){var h=this,$=w;return te(h.receiver_num)?($=te(h.step_arg2)?"("+h.topfx+h.step_arg1.$inspect()+", "+h.bypfx+h.step_arg2.$inspect()+")":te(h.step_arg1)?"("+h.topfx+h.step_arg1.$inspect()+")":w,"("+h.receiver_num.$inspect()+"."+h.creation_method+$+")"):($=te(h.skipped_arg)?w:"("+h.step+")","(("+h.range.$inspect()+")."+h.creation_method+$+")")}),q(T,"===","=="),q(T,"eql?","==")}(z,z,R)},Opal.modules["corelib/enumerator/chain"]=function(l){var q,M,K,Q=l.deny_frozen_access,te=l.klass,a=l.slice,P=l.def,V=l.send,k=l.to_a,j=l.truthy,B=l.rb_plus,E=l.thrower,W=l.nil,Y=l.$$$;return K=te("::",null,"Enumerator"),(M=(q=te(K,K,"Chain")).$$prototype).enums=M.iterated=W,P(q,"$initialize",function(I){var y,g=this;return y=a(arguments),Q(g),g.enums=y,g.iterated=[],g.object=g},-1),P(q,"$each",function w(I){var y,g,D=w.$$p||W,z=this;return w.$$p=null,y=a(arguments),g=y,D===W?V(z,"to_enum",["each"].concat(k(g)),function R(){return(null==R.$$s?this:R.$$s).$size()},{$$s:z}):(V(z.enums,"each",[],function R(_){var b=null==R.$$s?this:R.$$s;return null==b.iterated&&(b.iterated=W),null==_&&(_=W),b.iterated["$<<"](_),V(_,"each",k(g),D.$to_proc())},{$$s:z}),z)},-1),P(q,"$size",function(I){try{var y,g,D=E("return"),R=W;return y=a(arguments),g=y,R=0,V(this.enums,"each",[],function(b){var f;return null==b&&(b=W),f=V(b,"size",k(g)),j([W,Y(Y("Float"),"INFINITY")]["$include?"](f))&&D.$throw(f),R=B(R,f)},{$$ret:D}),R}catch(_){if(_===D)return _.$v;throw _}},-1),P(q,"$rewind",function(){var I=this;return V(I.iterated,"reverse_each",[],function(y){return null==y&&(y=W),j(y["$respond_to?"]("rewind"))?y.$rewind():W}),I.iterated=[],I}),P(q,"$inspect",function(){return"#<Enumerator::Chain: "+this.enums.$inspect()+">"})},Opal.modules["corelib/enumerator/generator"]=function(l){var X,M,w,I,D,U,Q=l.deny_frozen_access,te=l.klass,a=l.truthy,P=l.Kernel,V=l.def,k=l.slice,j=l.send,B=[],E=l.nil,W=l.$$$;return X=B,M=U=[te(B[0],null,"Enumerator")].concat(X),I=[w=te(U[0],null,"Generator")].concat(M),D=l.$r(I),w.$$prototype.block=E,w.$include(W("Enumerable")),V(w,"$initialize",function g(){var z=g.$$p||E;return g.$$p=null,Q(this),a(z)||P.$raise(W("LocalJumpError"),"no block given"),this.block=z}),V(w,"$each",function g(z){var b,T,R=g.$$p||E;g.$$p=null,b=k(arguments),T=j(D("Yielder"),"new",[],R.$to_proc());try{b.unshift(T),l.yieldX(this.block,b)}catch(v){if(v&&"breaker"==v.$thrower_type)return v.$v;throw v}return this},-1)},Opal.modules["corelib/enumerator/lazy"]=function(l){var _,S,d,G,m,b,Q=l.truthy,te=l.coerce_to,a=l.yield1,P=l.yieldX,V=l.deny_frozen_access,k=l.klass,j=l.slice,B=l.send2,E=l.find_super,W=l.to_a,Y=l.defs,H=l.Kernel,X=l.send,K=l.def,U=l.return_self,x=l.Opal,q=l.rb_lt,M=l.eqeqeq,w=l.rb_plus,I=l.alias,y=l.nil,g=l.$$$;return _=[],S=[b=k("::",null,"Enumerator")].concat(_),G=[d=k(b,b,"Lazy")].concat(S),m=l.$r(G),d.$$prototype.enumerator=y,k(d,g("Exception"),"StopLazyError"),Y(d,"$for",function $(r,e){var t,i=$.$$p||y,c=y;return $.$$p=null,t=j(arguments,1),(c=B(this,E(this,"for",$,!1,!0),"for",[r].concat(W(t)),i)).enumerator=r,c},-2),K(d,"$initialize",function $(r,e){var n=$.$$p||y,t=this;return $.$$p=null,null==e&&(e=y),V(t),n===y&&H.$raise(g("ArgumentError"),"tried to call lazy new without a block"),t.enumerator=r,B(t,E(t,"initialize",$,!1,!0),"initialize",[e],function(s,c){var N;null==s&&(s=y),N=j(arguments,1);try{return X(r,"each",W(N),function(J){var se;(se=j(arguments)).unshift(s),P(n,se)},-1)}catch(C){if(!l.rescue(C,[m("StopLazyError")]))throw C;try{return y}finally{l.pop_exception()}}},-2)},-2),K(d,"$lazy",U),K(d,"$collect",function $(){var r=$.$$p||y;return $.$$p=null,Q(r)||H.$raise(g("ArgumentError"),"tried to call lazy map without a block"),X(m("Lazy"),"new",[this,this.$enumerator_size()],function(t,i){var s;null==t&&(t=y),s=j(arguments,1);var u=P(r,s);t.$yield(u)},-2)}),K(d,"$collect_concat",function $(){var r=$.$$p||y;return $.$$p=null,Q(r)||H.$raise(g("ArgumentError"),"tried to call lazy map without a block"),X(m("Lazy"),"new",[this,y],function(t,i){var s;null==t&&(t=y),s=j(arguments,1);var u=P(r,s);u["$respond_to?"]("force")&&u["$respond_to?"]("each")?X(u,"each",[],function(J){return null==J&&(J=y),t.$yield(J)}):x.$try_convert(u,g("Array"),"to_ary")===y?t.$yield(u):X(u,"each",[],function(J){return null==J&&(J=y),t.$yield(J)})},-2)}),K(d,"$drop",function(r){var n,t,i=y;return r=te(r,g("Integer"),"to_int"),Q(q(r,0))&&H.$raise(g("ArgumentError"),"attempt to drop negative size"),n=this.$enumerator_size(),t=M(g("Integer"),n)&&Q(q(r,n))?r:n,i=0,X(m("Lazy"),"new",[this,t],function(c,u){var C;return null==c&&(c=y),C=j(arguments,1),Q(q(i,r))?i=w(i,1):X(c,"yield",W(C))},-2)}),K(d,"$drop_while",function $(){var r=$.$$p||y,n=y;return $.$$p=null,Q(r)||H.$raise(g("ArgumentError"),"tried to call lazy drop_while without a block"),n=!0,X(m("Lazy"),"new",[this,y],function(i,s){var u;if(null==i&&(i=y),u=j(arguments,1),!Q(n))return X(i,"yield",W(u));var N=P(r,u);Q(N)||(n=!1,X(i,"yield",W(u)))},-2)}),K(d,"$enum_for",function $(r,e){var t,i,s,n=$.$$p||y,c=this;return $.$$p=null,(t=j(arguments)).length>0&&(i=t.shift()),null==i&&(i="each"),s=t,X(c.$class(),"for",[c,i].concat(W(s)),n.$to_proc())},-1),K(d,"$find_all",function $(){var r=$.$$p||y;return $.$$p=null,Q(r)||H.$raise(g("ArgumentError"),"tried to call lazy select without a block"),X(m("Lazy"),"new",[this,y],function(t,i){var s,c;null==t&&(t=y),s=j(arguments,1);var u=P(r,c=s);Q(u)&&X(t,"yield",W(c))},-2)}),K(d,"$grep",function $(r){var e=$.$$p||y;return $.$$p=null,Q(e)?X(m("Lazy"),"new",[this,y],function(i,s){var c;null==i&&(i=y),c=j(arguments,1);var N=x.$destructure(c),C=r["$==="](N);Q(C)&&(C=a(e,N),i.$yield(a(e,N)))},-2):X(m("Lazy"),"new",[this,y],function(i,s){var c;null==i&&(i=y),c=j(arguments,1);var N=x.$destructure(c),C=r["$==="](N);Q(C)&&i.$yield(N)},-2)}),K(d,"$reject",function $(){var r=$.$$p||y;return $.$$p=null,Q(r)||H.$raise(g("ArgumentError"),"tried to call lazy reject without a block"),X(m("Lazy"),"new",[this,y],function(t,i){var s,c;null==t&&(t=y),s=j(arguments,1);var u=P(r,c=s);Q(u)||X(t,"yield",W(c))},-2)}),K(d,"$take",function(r){var n,t,i=y;return r=te(r,g("Integer"),"to_int"),Q(q(r,0))&&H.$raise(g("ArgumentError"),"attempt to take negative size"),n=this.$enumerator_size(),t=M(g("Integer"),n)&&Q(q(r,n))?r:n,i=0,X(m("Lazy"),"new",[this,t],function(c,u){var C;return null==c&&(c=y),C=j(arguments,1),Q(q(i,r))?(X(c,"yield",W(C)),i=w(i,1)):H.$raise(m("StopLazyError"))},-2)}),K(d,"$take_while",function $(){var r=$.$$p||y;return $.$$p=null,Q(r)||H.$raise(g("ArgumentError"),"tried to call lazy take_while without a block"),X(m("Lazy"),"new",[this,y],function(t,i){var s,c;null==t&&(t=y),s=j(arguments,1);var u=P(r,c=s);Q(u)?X(t,"yield",W(c)):H.$raise(m("StopLazyError"))},-2)}),K(d,"$inspect",function(){return"#<"+this.$class()+": "+this.enumerator.$inspect()+">"}),I(d,"force","to_a"),I(d,"filter","find_all"),I(d,"flat_map","collect_concat"),I(d,"map","collect"),I(d,"select","find_all"),I(d,"to_enum","enum_for")},Opal.modules["corelib/enumerator/yielder"]=function(l){var W,U,H,Q=l.klass,te=l.def,a=l.slice,P=l.send,V=l.to_a,k=[],j=l.nil;return W=k,H=[Q(k[0],null,"Enumerator")].concat(W),(U=Q(H[0],null,"Yielder")).$$prototype.block=j,te(U,"$initialize",function q(){var M=q.$$p||j;return q.$$p=null,this.block=M,this}),te(U,"$yield",function(M){var w;w=a(arguments);var y=l.yieldX(this.block,w);if(y&&"break"==y.$thrower_type)throw y;return y},-1),te(U,"$<<",function(M){return this.$yield(M),this}),te(U,"$to_proc",function(){return P(this,"proc",[],function w(I){var D,g=null==w.$$s?this:w.$$s;return D=a(arguments),P(g,"yield",V(D))},{$$arity:-1,$$s:this})})},Opal.modules["corelib/enumerator"]=function(l){var R,_,b,f,T,Q=l.slice,te=l.coerce_to,a=l.deny_frozen_access,P=l.klass,V=l.defs,k=l.truthy,j=l.send,B=l.not,E=l.def,W=l.rb_plus,Y=l.to_a,H=l.Opal,X=l.send2,K=l.find_super,U=l.rb_ge,x=l.Kernel,q=l.rb_le,M=l.alias,D=l.nil,y=l.$$$;return l.top.$require("corelib/enumerable"),R=[],b=[_=P("::",null,"Enumerator")].concat(R),f=l.$r(b),(T=_.$$prototype).size=T.args=T.object=T.method=T.values=T.cursor=D,_.$include(y("Enumerable")),_.$$prototype.$$is_enumerator=!0,V(_,"$for",function v(S,d,G){var h,$,r,m=v.$$p||D;v.$$p=null,(h=Q(arguments,1)).length>0&&($=h.shift()),null==$&&($="each"),r=h;var n=this.$allocate();return n.object=S,n.size=m,n.method=$,n.args=r,n.cursor=0,n},-2),E(_,"$initialize",function v(S){var d=v.$$p||D,h=this;return v.$$p=null,Q(arguments),a(h),h.cursor=0,k(d)?(h.object=j(f("Generator"),"new",[],d.$to_proc()),h.method="each",h.args=[],h.size=arguments[0]||D,k(h.size)&&B(h.size["$respond_to?"]("call"))?h.size=te(h.size,y("Integer"),"to_int"):D):(h.object=arguments[0],h.method=arguments[1]||"each",h.args=Q(arguments,2),h.size=D)},-1),E(_,"$each",function v(S){var m,d=v.$$p||D,h=this;return v.$$p=null,m=Q(arguments),k(d["$nil?"]())&&k(m["$empty?"]())?h:(m=W(h.args,m),k(d["$nil?"]())?j(h.$class(),"new",[h.object,h.method].concat(Y(m))):j(h.object,"__send__",[h.method].concat(Y(m)),d.$to_proc()))},-1),E(_,"$size",function(){var S=this;return k(S.size["$respond_to?"]("call"))?j(S.size,"call",Y(S.args)):S.size}),E(_,"$with_index",function v(S){var d=v.$$p||D,G=this;if(v.$$p=null,null==S&&(S=0),S=k(S)?te(S,y("Integer"),"to_int"):0,!k(d))return j(G,"enum_for",["with_index",S],function $(){return(null==$.$$s?this:$.$$s).$size()},{$$s:G});var h=S;return G.$each.$$p=function(){var $=H.$destructure(arguments),r=d($,h);return h++,r},G.$each()},-1),E(_,"$each_with_index",function v(){var S=v.$$p||D,d=this;return v.$$p=null,S===D?j(d,"enum_for",["each_with_index"],function G(){return(null==G.$$s?this:G.$$s).$size()},{$$s:d}):(X(d,K(d,"each_with_index",v,!1,!0),"each_with_index",[],S),d.object)}),E(_,"$rewind",function(){return this.cursor=0,this}),E(_,"$peek_values",function(){var d,S=this;return S.values=k(d=S.values)?d:j(S,"map",[],function(m){return Q(arguments)},-1),k(U(S.cursor,S.values.$length()))&&x.$raise(y("StopIteration"),"iteration reached an end"),S.values["$[]"](S.cursor)}),E(_,"$peek",function(){var d=D;return d=this.$peek_values(),k(q(d.$length(),1))?d["$[]"](0):d}),E(_,"$next_values",function(){var d,S=this;return d=S.$peek_values(),S.cursor=W(S.cursor,1),d}),E(_,"$next",function(){var d=D;return d=this.$next_values(),k(q(d.$length(),1))?d["$[]"](0):d}),E(_,"$feed",function(S){return this.$raise(f("NotImplementedError"),"Opal doesn't support Enumerator#feed")}),E(_,"$+",function(S){return y(y("Enumerator"),"Chain").$new(this,S)}),E(_,"$inspect",function(){var S=this,d=D;return d="#<"+S.$class()+": "+S.object.$inspect()+":"+S.method,k(S.args["$any?"]())&&(d=W(d,"("+S.args.$inspect()["$[]"](y("Range").$new(1,-2))+")")),W(d,">")}),M(_,"with_object","each_with_object"),_.$autoload("ArithmeticSequence","corelib/enumerator/arithmetic_sequence"),_.$autoload("Chain","corelib/enumerator/chain"),_.$autoload("Generator","corelib/enumerator/generator"),_.$autoload("Lazy","corelib/enumerator/lazy"),_.$autoload("Yielder","corelib/enumerator/yielder")},Opal.modules["corelib/numeric"]=function(l){var T,Q=l.klass,te=l.truthy,a=l.Kernel,P=l.def,V=l.to_ary,k=l.return_self,j=l.rb_minus,B=l.rb_times,E=l.rb_lt,W=l.eqeq,Y=l.rb_divide,H=l.return_val,X=l.Opal,K=l.slice,U=l.extract_kwargs,x=l.ensure_kwargs,q=l.not,M=l.send,w=l.rb_ge,I=l.rb_le,D=l.rb_plus,y=l.rb_gt,g=l.alias,R=l.nil,_=l.$$$;return l.top.$require("corelib/comparable"),(T=Q("::",null,"Numeric")).$include(_("Comparable")),P(T,"$coerce",function(S){var d=this;return te(S["$instance_of?"](d.$class()))?[S,d]:[a.$Float(S),a.$Float(d)]}),P(T,"$__coerced__",function(S,d){var G,m;if(te(d["$respond_to?"]("coerce")))return m=d.$coerce(this),(null==(G=V(m))[0]?R:G[0]).$__send__(S,null==G[1]?R:G[1]);switch(S){case"+":case"-":case"*":case"/":case"%":case"&":case"|":case"^":case"**":return a.$raise(_("TypeError"),d.$class()+" can't be coerced into Numeric");case">":case">=":case"<":case"<=":case"<=>":return a.$raise(_("ArgumentError"),"comparison of "+this.$class()+" with "+d.$class()+" failed");default:return R}}),P(T,"$<=>",function(S){return te(this["$equal?"](S))?0:R}),P(T,"$+@",k),P(T,"$-@",function(){return j(0,this)}),P(T,"$%",function(S){return j(this,B(S,this.$div(S)))}),P(T,"$abs",function(){var S=this;return E(S,0)?S["$-@"]():S}),P(T,"$abs2",function(){return B(this,this)}),P(T,"$angle",function(){return E(this,0)?_(_("Math"),"PI"):0}),P(T,"$ceil",function(S){return null==S&&(S=0),this.$to_f().$ceil(S)},-1),P(T,"$conj",k),P(T,"$denominator",function(){return this.$to_r().$denominator()}),P(T,"$div",function(S){return W(S,0)&&a.$raise(_("ZeroDivisionError"),"divided by o"),Y(this,S).$floor()}),P(T,"$divmod",function(S){return[this.$div(S),this["$%"](S)]}),P(T,"$fdiv",function(S){return Y(this.$to_f(),S)}),P(T,"$floor",function(S){return null==S&&(S=0),this.$to_f().$floor(S)},-1),P(T,"$i",function(){return a.$Complex(0,this)}),P(T,"$imag",H(0)),P(T,"$integer?",H(!1)),P(T,"$nonzero?",function(){return te(this["$zero?"]())?R:this}),P(T,"$numerator",function(){return this.$to_r().$numerator()}),P(T,"$polar",function(){return[this.$abs(),this.$arg()]}),P(T,"$quo",function(S){return Y(X["$coerce_to!"](this,_("Rational"),"to_r"),S)}),P(T,"$real",k),P(T,"$real?",H(!0)),P(T,"$rect",function(){return[this,0]}),P(T,"$round",function(S){return this.$to_f().$round(S)},-1),P(T,"$step",function v(S,d,G){var h,$,r,e,n,t,m=v.$$p||R,i=this,s=R;function c(){e===R&&a.$raise(_("TypeError"),"step must be numeric"),null!=e&&e["$=="](0)&&a.$raise(_("ArgumentError"),"step can't be 0"),(e===R||null==e)&&(e=1);var re=e["$<=>"](0);re===R&&a.$raise(_("ArgumentError"),"0 can't be coerced into "+e.$class()),(r===R||null==r)&&(r=re>0?_(_("Float"),"INFINITY"):_(_("Float"),"INFINITY")["$-@"]()),X.$compare(i,r)}function u(){if(e>0&&i>r||e<0&&i<r)return 0;if(e===1/0||e===-1/0)return 1;var re=Math.abs,le=Math.floor,ee=(re(i)+re(r)+re(r-i))/re(e)*_(_("Float"),"EPSILON");return ee===1/0||ee===-1/0?0:(ee>.5&&(ee=.5),le((r-i)/e+ee)+1)}if(v.$$p=null,h=K(arguments),$=U(h),$=x($),h.length>0&&(r=h.shift()),h.length>0&&(e=h.shift()),n=$.$$smap.to,t=$.$$smap.by,void 0!==r&&void 0!==n&&a.$raise(_("ArgumentError"),"to is given twice"),void 0!==e&&void 0!==t&&a.$raise(_("ArgumentError"),"step is given twice"),void 0!==n&&(r=n),void 0!==t&&(e=t),void 0===r&&(r=R),m===R)return(q(r)||te(r["$is_a?"](_("Numeric"))))&&(q(e)||te(e["$is_a?"](_("Numeric"))))?_(_("Enumerator"),"ArithmeticSequence").$new([r,e,te(n)?"to: ":R,te(t)?"by: ":R],i):M(i,"enum_for",["step",r,e],function N(){if(c(),0===e)return 1/0;if(e%1!=0)return u();if(e>0&&i>r||e<0&&i<r)return 0;var re=Math.ceil,le=Math.abs;return re((le(i-r)+1)/le(e))}.$to_proc());c();var C=e["$negative?"](),J=e["$=="](0)||r===1/0&&!C||r===-1/0&&C;if(i.$$is_number&&e.$$is_number&&r.$$is_number){if(i%1!=0||!J&&r%1!=0||e%1!=0){var se=i.$to_f().valueOf();e=e.$to_f().valueOf(),r=r.$to_f().valueOf();var oe=u();if(isFinite(e))if(0===e)for(;;)m(se);else for(var ae=0;ae<oe;ae++){var $e=ae*e+i;(e>=0?r<$e:r>$e)&&($e=r),m($e)}else 0!==oe&&m(se);return i}var ne=i;if(J)for(;;ne+=e)m(ne);else if(C)for(;ne>=r;ne+=e)m(ne);else for(;ne<=r;ne+=e)m(ne);return i}for(s=i;te(C?w(s,r):I(s,r));)l.yield1(m,s),s=D(s,e)},-1),P(T,"$to_c",function(){return a.$Complex(this,0)}),P(T,"$to_int",function(){return this.$to_i()}),P(T,"$truncate",function(S){return null==S&&(S=0),this.$to_f().$truncate(S)},-1),P(T,"$zero?",function(){return this["$=="](0)}),P(T,"$positive?",function(){return y(this,0)}),P(T,"$negative?",function(){return E(this,0)}),P(T,"$dup",k),P(T,"$clone",function(S){return S=x(S),this},-1),P(T,"$finite?",H(!0)),P(T,"$infinite?",H(R)),g(T,"arg","angle"),g(T,"conjugate","conj"),g(T,"imaginary","imag"),g(T,"magnitude","abs"),g(T,"modulo","%"),g(T,"phase","arg"),g(T,"rectangular","rect")},Opal.modules["corelib/array"]=function(l){var Q=l.truthy,te=l.falsy,a=l.hash_ids,P=l.yield1,V=l.hash_get,k=l.hash_put,j=l.hash_delete,B=l.coerce_to,E=l.respond_to,W=l.deny_frozen_access,Y=l.freeze,H=l.klass,X=l.slice,K=l.defs,U=l.Kernel,x=l.def,q=l.Opal,M=l.eqeqeq,w=l.hash2,I=l.send2,D=l.find_super,y=l.send,g=l.rb_gt,z=l.rb_times,R=l.eqeq,_=l.rb_minus,b=l.to_a,f=l.to_ary,T=l.gvars,v=l.rb_ge,S=l.assign_ivar,d=l.rb_lt,G=l.return_self,m=l.neqeq,h=l.alias,$=l.top,e=l.nil,n=l.$$$;return $.$require("corelib/enumerable"),$.$require("corelib/numeric"),function(t,i,s){var c=H("::",Array,"Array"),u=[c].concat([]),N=l.$r(u);function ne(ee,A,L){for(var O,o=null,p=new Array(ee.length),F=0,Z=0,ie=ee.length;F<ie;F++){if(!o)try{O=P(L,ee[F])}catch(ue){o=ue}(o||A(O))&&(p[Z]=ee[F],Z+=1)}if(Z!==F&&(ee.splice.apply(ee,[0,p.length].concat(p)),ee.splice(Z,p.length)),o)throw o}function se(ee,A){var O,o,p,L=ee.length;return O=A.excl,o=A.begin===e?0:B(A.begin,l.Integer,"to_int"),p=A.end===e?-1:B(A.end,l.Integer,"to_int"),o<0&&(o+=L)<0||(A.excl_rev&&A.begin!==e&&(o+=1),o>L)?e:p<0&&(p+=L)<0?[]:((!O||A.end===e)&&(p+=1),ee.slice(o,p))}function $e(ee,A){return ee===A||0===A?1:A>0&&ee>A?$e(ee-1,A-1)+$e(ee-1,A):0}c.$include(n("Enumerable")),l.prop(c.$$prototype,"$$is_array",!0),K(c,"$[]",function(A){return function J(ee,A){return A.$$name===l.Array?ee:A.$allocate().$replace(ee.$to_a())}(X(arguments),this)},-1),x(c,"$initialize",function ee(A,L){var p,F,O=ee.$$p||e,o=this;if(ee.$$p=null,null==A&&(A=e),null==L&&(L=e),W(o),L!==e&&O!==e&&U.$warn("warning: block supersedes default value argument"),A>n(n("Integer"),"MAX")&&U.$raise(n("ArgumentError"),"array size too big"),arguments.length>2&&U.$raise(n("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..2)"),0===arguments.length)return o.splice(0,o.length),o;if(1===arguments.length){if(A.$$is_array)return o.$replace(A.$to_a()),o;if(A["$respond_to?"]("to_ary"))return o.$replace(A.$to_ary()),o}if((A=B(A,n("Integer"),"to_int"))<0&&U.$raise(n("ArgumentError"),"negative array size"),o.splice(0,o.length),O===e)for(p=0;p<A;p++)o.push(L);else for(p=0;p<A;p++)F=O(p),o[p]=F;return o},-1),K(c,"$try_convert",function(A){return q["$coerce_to?"](A,n("Array"),"to_ary")}),x(c,"$&",function(A){A=M(n("Array"),A)?A.$to_a():B(A,n("Array"),"to_ary").$to_a();var p,F,Z,O=[],o=w([],{});for(p=0,F=A.length;p<F;p++)k(o,A[p],!0);for(p=0,F=this.length;p<F;p++)void 0!==j(o,Z=this[p])&&O.push(Z);return O}),x(c,"$|",function(A){A=M(n("Array"),A)?A.$to_a():B(A,n("Array"),"to_ary").$to_a();var o,p,O=w([],{});for(o=0,p=this.length;o<p;o++)k(O,this[o],!0);for(o=0,p=A.length;o<p;o++)k(O,A[o],!0);return O.$keys()}),x(c,"$*",function(A){if(Q(A["$respond_to?"]("to_str")))return this.$join(A.$to_str());A=B(A,n("Integer"),"to_int"),Q(A<0)&&U.$raise(n("ArgumentError"),"negative argument");for(var O=[],o=this.$to_a(),p=0;p<A;p++)O=O.concat(o);return O}),x(c,"$+",function(A){return A=M(n("Array"),A)?A.$to_a():B(A,n("Array"),"to_ary").$to_a(),this.concat(A)}),x(c,"$-",function(A){var L=this;if(A=M(n("Array"),A)?A.$to_a():B(A,n("Array"),"to_ary").$to_a(),Q(0===L.length))return[];if(Q(0===A.length))return L.slice();var p,F,Z,O=[],o=w([],{});for(p=0,F=A.length;p<F;p++)k(o,A[p],!0);for(p=0,F=L.length;p<F;p++)void 0===V(o,Z=L[p])&&O.push(Z);return O}),x(c,"$<<",function(A){var L=this;return W(L),L.push(A),L}),x(c,"$<=>",function(A){var L=this;if(M(n("Array"),A))A=A.$to_a();else{if(!Q(A["$respond_to?"]("to_ary")))return e;A=A.$to_ary().$to_a()}if(L.$hash()===A.$hash())return 0;for(var O=Math.min(L.length,A.length),o=0;o<O;o++){var p=L[o]["$<=>"](A[o]);if(0!==p)return p}return L.length["$<=>"](A.length)}),x(c,"$==",function(A){var O={};return function o(p,F){var Z,ie,ue,ce;if(p===F)return!0;if(!F.$$is_array)return!!E(F,"$to_ary")&&F["$=="](p);if(p.$$constructor!==Array&&(p=p.$to_a()),F.$$constructor!==Array&&(F=F.$to_a()),p.length!==F.length)return!1;for(O[p.$object_id()]=!0,Z=0,ie=p.length;Z<ie;Z++)if(ce=F[Z],(ue=p[Z]).$$is_array){if(ce.$$is_array&&ce.length!==ue.length||!O.hasOwnProperty(ue.$object_id())&&!o(ue,ce))return!1}else if(!ue["$=="](ce))return!1;return!0}(this,A)}),x(c,"$[]",function(A,L){var O=this;return A.$$is_range?se(O,A):A.$$is_arithmetic_seq?function oe(ee,A){var L,O=[],o=0;for(L=A.step<0?se(ee,{begin:A.range.end,end:A.range.begin,excl:!1,excl_rev:A.range.excl}).$reverse():se(ee,A.range);o<L.length;)O.push(L[o]),o+=Math.abs(A.step);return O}(O,A):function ae(ee,A,L){var O=ee.length;return(A=B(A,l.Integer,"to_int"))<0&&(A+=O)<0?e:void 0===L?A>=O||A<0?e:ee[A]:(L=B(L,l.Integer,"to_int"))<0||A>O||A<0?e:ee.slice(A,A+L)}(O,A,L)},-2),x(c,"$[]=",function(A,L,O){var o=this,p=e,F=e;W(o),p=e;var Z,_e,ie=o.length;if(A.$$is_range){p=L.$$is_array?L.$to_a():L["$respond_to?"]("to_ary")?L.$to_ary().$to_a():[L];var ue=A.excl,ce=A.begin===e?0:B(A.begin,l.Integer,"to_int"),fe=A.end===e?-1:B(A.end,l.Integer,"to_int");if(ce<0&&(ce+=ie)<0&&U.$raise(n("RangeError"),A.$inspect()+" out of range"),fe<0&&(fe+=ie),(!ue||A.end===e)&&(fe+=1),ce>ie)for(Z=ie;Z<ce;Z++)o[Z]=e;return o.splice.apply(o,fe<0?[ce,0].concat(p):[ce,fe-ce].concat(p)),L}if(void 0===O?F=1:(F=L,p=(L=O).$$is_array?L.$to_a():L["$respond_to?"]("to_ary")?L.$to_ary().$to_a():[L]),A=B(A,n("Integer"),"to_int"),F=B(F,n("Integer"),"to_int"),A<0&&(_e=A,(A+=ie)<0&&U.$raise(n("IndexError"),"index "+_e+" too small for array; minimum "+-o.length)),F<0&&U.$raise(n("IndexError"),"negative length ("+F+")"),A>ie)for(Z=ie;Z<A;Z++)o[Z]=e;return void 0===O?o[A]=L:o.splice.apply(o,[A,F].concat(p)),L},-3),x(c,"$any?",function ee(A){var L=ee.$$p||e,O=this;return ee.$$p=null,0!==O.length&&I(O,D(O,"any?",ee,!1,!0),"any?",[A],L)},-1),x(c,"$assoc",function(A){for(var p,O=0,o=this.length;O<o;O++)if((p=this[O]).length&&p[0]["$=="](A))return p;return e}),x(c,"$at",function(A){var L=this;return(A=B(A,n("Integer"),"to_int"))<0&&(A+=L.length),A<0||A>=L.length?e:L[A]}),x(c,"$bsearch_index",function ee(){var A=ee.$$p||e,L=this;if(ee.$$p=null,A===e)return L.$enum_for("bsearch_index");for(var p,Z,O=0,o=L.length,ie=!1,ue=e;O<o;){if(p=O+Math.floor((o-O)/2),!0===(Z=P(A,L[p])))ue=p,ie=!0;else if(!1===Z||Z===e)ie=!1;else if(Z.$$is_number){if(0===Z)return p;ie=Z<0}else U.$raise(n("TypeError"),"wrong argument type "+Z.$class()+" (must be numeric, true, false or nil)");ie?o=p:O=p+1}return ue}),x(c,"$bsearch",function ee(){var A=ee.$$p||e,L=this,O=e;return ee.$$p=null,A===e?L.$enum_for("bsearch"):null!=(O=y(L,"bsearch_index",[],A.$to_proc()))&&O.$$is_number?L[O]:O}),x(c,"$cycle",function ee(A){var o,p,L=ee.$$p||e,O=this;if(ee.$$p=null,null==A&&(A=e),L===e)return y(O,"enum_for",["cycle",A],function Z(){var ie=null==Z.$$s?this:Z.$$s;return Q(A["$nil?"]())?n(n("Float"),"INFINITY"):(A=q["$coerce_to!"](A,n("Integer"),"to_int"),Q(g(A,0))?z(ie.$enumerator_size(),A):0)},{$$s:O});if(Q(O["$empty?"]())||R(A,0))return e;if(A===e)for(;;)for(o=0,p=O.length;o<p;o++)P(L,O[o]);else{if((A=q["$coerce_to!"](A,n("Integer"),"to_int"))<=0)return O;for(;A>0;){for(o=0,p=O.length;o<p;o++)P(L,O[o]);A--}}return O},-1),x(c,"$clear",function(){var A=this;return W(A),A.splice(0,A.length),A}),x(c,"$count",function ee(A){var L=ee.$$p||e,O=this;return ee.$$p=null,Q(void 0!==A)||Q(L)?I(O,D(O,"count",ee,!1,!0),"count",[A],L):O.$size()},-1),x(c,"$initialize_copy",function(A){return this.$replace(A)}),x(c,"$collect",function ee(){var A=ee.$$p||e,L=this;if(ee.$$p=null,A===e)return y(L,"enum_for",["collect"],function Z(){return(null==Z.$$s?this:Z.$$s).$size()},{$$s:L});for(var O=[],o=0,p=L.length;o<p;o++){var F=P(A,L[o]);O.push(F)}return O}),x(c,"$collect!",function ee(){var A=ee.$$p||e,L=this;if(ee.$$p=null,A===e)return y(L,"enum_for",["collect!"],function F(){return(null==F.$$s?this:F.$$s).$size()},{$$s:L});W(L);for(var O=0,o=L.length;O<o;O++){var p=P(A,L[O]);L[O]=p}return L}),x(c,"$combination",function ee(A){var o,p,F,Z,ie,ue,ce,fe,L=ee.$$p||e,O=this;if(ee.$$p=null,o=q["$coerce_to!"](A,n("Integer"),"to_int"),L===e)return y(O,"enum_for",["combination",o],function _e(){return $e((null==_e.$$s?this:_e.$$s).length,o)},{$$s:O});if(0===o)l.yield1(L,[]);else if(1===o)for(p=0,F=O.length;p<F;p++)l.yield1(L,[O[p]]);else if(o===O.length)l.yield1(L,O.slice());else if(o>=0&&o<O.length){for(Z=[],p=0;p<=o+1;p++)Z.push(0);for(ie=[],ue=0,ce=!1,Z[0]=-1;!ce;){for(ie[ue]=O[Z[ue+1]];ue<o-1;)fe=Z[1+ ++ue]=Z[ue]+1,ie[ue]=O[fe];l.yield1(L,ie.slice()),ue++;do{ce=0===ue,Z[ue]++,ue--}while(Z[ue+1]+o===O.length+ue+1)}}return O}),x(c,"$repeated_combination",function ee(A){var o,L=ee.$$p||e,O=this;return ee.$$p=null,o=q["$coerce_to!"](A,n("Integer"),"to_int"),L===e?y(O,"enum_for",["repeated_combination",o],function F(){return $e((null==F.$$s?this:F.$$s).length+o-1,o)},{$$s:O}):(o>=0&&function p(F,Z,ie,ue){if(ie.length!=F)for(var fe=Z;fe<ue.length;fe++)ie.push(ue[fe]),p(F,fe,ie,ue),ie.pop();else{var ce=ie.slice();l.yield1(L,ce)}}(o,0,[],O),O)}),x(c,"$compact",function(){for(var p,L=[],O=0,o=this.length;O<o;O++)(p=this[O])!==e&&L.push(p);return L}),x(c,"$compact!",function(){var A=this;W(A);for(var L=A.length,O=0,o=A.length;O<o;O++)A[O]===e&&(A.splice(O,1),o--,O--);return A.length===L?e:A}),x(c,"$concat",function(A){var O,o=this;return O=X(arguments),W(o),O=y(O,"map",[],function p(F){var Z=null==p.$$s?this:p.$$s;return null==F&&(F=e),F=M(n("Array"),F)?F.$to_a():B(F,n("Array"),"to_ary").$to_a(),Q(F["$equal?"](Z))&&(F=F.$dup()),F},{$$s:o}),y(O,"each",[],function p(F){var Z=null==p.$$s?this:p.$$s;null==F&&(F=e);for(var ie=0,ue=F.length;ie<ue;ie++)Z.push(F[ie])},{$$s:o}),o},-1),x(c,"$delete",function ee(A){var L=ee.$$p||e,O=this;ee.$$p=null;for(var o=O.length,p=0,F=o;p<F;p++)O[p]["$=="](A)&&(W(O),O.splice(p,1),F--,p--);return O.length===o?L!==e?l.yieldX(L,[]):e:A}),x(c,"$delete_at",function(A){var L=this;if(W(L),(A=B(A,n("Integer"),"to_int"))<0&&(A+=L.length),A<0||A>=L.length)return e;var O=L[A];return L.splice(A,1),O}),x(c,"$delete_if",function ee(){var A=ee.$$p||e,L=this;return ee.$$p=null,A===e?y(L,"enum_for",["delete_if"],function O(){return(null==O.$$s?this:O.$$s).$size()},{$$s:L}):(W(L),ne(L,te,A),L)}),x(c,"$difference",function(A){var L;return L=X(arguments),y(L,"reduce",[this.$to_a().$dup()],function(F,Z){return null==F&&(F=e),null==Z&&(Z=e),_(F,Z)})},-1),x(c,"$dig",function(A,L){var o,F=e;return o=X(arguments,1),(F=this["$[]"](A))===e||0===o.length?F:(Q(F["$respond_to?"]("dig"))||U.$raise(n("TypeError"),F.$class()+" does not have #dig method"),y(F,"dig",b(o)))},-2),x(c,"$drop",function(A){return(A=B(A,n("Integer"),"to_int"))<0&&U.$raise(n("ArgumentError")),this.slice(A)}),x(c,"$dup",function ee(){var A=ee.$$p||e,L=this;return ee.$$p=null,L.$$class===l.Array&&L.$$class.$allocate.$$pristine&&L.$copy_instance_variables.$$pristine&&L.$initialize_dup.$$pristine?L.slice(0):I(L,D(L,"dup",ee,!1,!0),"dup",[],A)}),x(c,"$each",function ee(){var A=ee.$$p||e,L=this;if(ee.$$p=null,A===e)return y(L,"enum_for",["each"],function F(){return(null==F.$$s?this:F.$$s).$size()},{$$s:L});for(var O=0,o=L.length;O<o;O++)P(A,L[O]);return L}),x(c,"$each_index",function ee(){var A=ee.$$p||e,L=this;if(ee.$$p=null,A===e)return y(L,"enum_for",["each_index"],function F(){return(null==F.$$s?this:F.$$s).$size()},{$$s:L});for(var O=0,o=L.length;O<o;O++)P(A,O);return L}),x(c,"$empty?",function(){return 0===this.length}),x(c,"$eql?",function(A){var O={};return function o(p,F){var Z,ie,ue,ce;if(!F.$$is_array||(F=F.$to_a(),p.length!==F.length))return!1;for(O[p.$object_id()]=!0,Z=0,ie=p.length;Z<ie;Z++)if(ce=F[Z],(ue=p[Z]).$$is_array){if(ce.$$is_array&&ce.length!==ue.length||!O.hasOwnProperty(ue.$object_id())&&!o(ue,ce))return!1}else if(!ue["$eql?"](ce))return!1;return!0}(this,A)}),x(c,"$fetch",function ee(A,L){var O=ee.$$p||e,o=this;ee.$$p=null;var p=A;return(A=B(A,n("Integer"),"to_int"))<0&&(A+=o.length),A>=0&&A<o.length?o[A]:(O!==e&&null!=L&&o.$warn("warning: block supersedes default value argument"),O!==e?O(p):null!=L?L:void U.$raise(n("IndexError"),0===o.length?"index "+p+" outside of array bounds: 0...0":"index "+p+" outside of array bounds: -"+o.length+"..."+o.length))},-2),x(c,"$fill",function ee(A){var o,p,de,he,L=ee.$$p||e,Z=this,ie=e,ue=e,ce=e,fe=e,_e=e;if(ee.$$p=null,o=X(arguments),W(Z),Q(L)?(Q(o.length>2)&&U.$raise(n("ArgumentError"),"wrong number of arguments ("+o.$length()+" for 0..2)"),ie=null==(p=f(o))[0]?e:p[0],ue=null==p[1]?e:p[1]):(Q(0==o.length)?U.$raise(n("ArgumentError"),"wrong number of arguments (0 for 1..3)"):Q(o.length>3)&&U.$raise(n("ArgumentError"),"wrong number of arguments ("+o.$length()+" for 1..3)"),ce=null==(p=f(o))[0]?e:p[0],ie=null==p[1]?e:p[1],ue=null==p[2]?e:p[2]),M(n("Range"),ie)){if(Q(ue)&&U.$raise(n("TypeError"),"length invalid with range"),fe=ie.begin===e?0:B(ie.begin,n("Integer"),"to_int"),Q(fe<0)&&(fe+=this.length),Q(fe<0)&&U.$raise(n("RangeError"),ie.$inspect()+" out of range"),_e=ie.end===e?-1:B(ie.end,n("Integer"),"to_int"),Q(_e<0)&&(_e+=this.length),Q(ie["$exclude_end?"]())||(_e+=1),Q(_e<=fe))return Z}else if(Q(ie))if(fe=B(ie,n("Integer"),"to_int"),Q(fe<0)&&(fe+=this.length),Q(fe<0)&&(fe=0),Q(ue)){if(_e=B(ue,n("Integer"),"to_int"),Q(0==_e))return Z;_e+=fe}else _e=this.length;else fe=0,_e=this.length;if(Q(fe>this.length))for(de=this.length;de<_e;de++)Z[de]=e;if(Q(_e>this.length)&&(this.length=_e),Q(L))for(;fe<_e;fe++)he=L(fe),Z[fe]=he;else for(;fe<_e;fe++)Z[fe]=ce;return Z},-1),x(c,"$first",function(A){var L=this;return null==A?0===L.length?e:L[0]:((A=B(A,n("Integer"),"to_int"))<0&&U.$raise(n("ArgumentError"),"negative array size"),L.slice(0,A))},-1),x(c,"$flatten",function(A){var L=this;return void 0!==A&&(A=B(A,n("Integer"),"to_int")),function O(o,p){var Z,ie,ue,ce,F=[];for(Z=0,ie=(o=o.$to_a()).length;Z<ie;Z++)if(E(ue=o[Z],"$to_ary",!0))if((ce=ue.$to_ary())!==e)switch(ce.$$is_array||U.$raise(n("TypeError")),ce===L&&U.$raise(n("ArgumentError")),p){case void 0:F=F.concat(O(ce));break;case 0:F.push(ce);break;default:F.push.apply(F,O(ce,p-1))}else F.push(ue);else F.push(ue);return F}(L,A)},-1),x(c,"$flatten!",function(A){var L=this;W(L);var O=L.$flatten(A);if(L.length==O.length){for(var o=0,p=L.length;o<p&&L[o]===O[o];o++);if(o==p)return e}return L.$replace(O),L},-1),x(c,"$freeze",function(){var A=this;return Q(A["$frozen?"]())?A:Y(A)}),x(c,"$hash",function(){var F,Z,A=this,L=void 0===a,O=["A"],o=A.$object_id();try{if(L&&(a=Object.create(null)),a[o])return"self";for(Z in a)if(A["$eql?"](a[Z]))return"self";for(a[o]=A,F=0;F<A.length;F++)O.push(A[F].$hash());return O.join(",")}finally{L&&(a=void 0)}}),x(c,"$include?",function(A){for(var O=0,o=this.length;O<o;O++)if(this[O]["$=="](A))return!0;return!1}),x(c,"$index",function ee(A){var o,p,F,L=ee.$$p||e,O=this;if(ee.$$p=null,null!=A&&L!==e&&O.$warn("warning: given block not used"),null!=A){for(o=0,p=O.length;o<p;o++)if(O[o]["$=="](A))return o}else{if(L===e)return O.$enum_for("index");for(o=0,p=O.length;o<p;o++)if(!1!==(F=L(O[o]))&&F!==e)return o}return e},-1),x(c,"$insert",function(A,L){var o,p=this;if(o=X(arguments,1),W(p),A=B(A,n("Integer"),"to_int"),o.length>0){if(A<0&&(A+=p.length+1)<0&&U.$raise(n("IndexError"),A+" is out of bounds"),A>p.length)for(var F=p.length;F<A;F++)p.push(e);p.splice.apply(p,[A,0].concat(o))}return p},-2);var L,re=[];return x(c,"$inspect",function(){var A=this,L=[],O=A.$__id__(),o=!0;return function(){try{if(-1!==re.indexOf(O))return o=!1,"[...]";re.push(O);for(var p=0,F=A.length;p<F;p++){var Z=A["$[]"](p);L.push(N("Opal").$inspect(Z))}return"["+L.join(", ")+"]"}finally{o&&re.pop()}}()}),x(c,"$intersection",function(A){var L;return L=X(arguments),y(L,"reduce",[this.$to_a().$dup()],function(F,Z){return null==F&&(F=e),null==Z&&(Z=e),F["$&"](Z)})},-1),x(c,"$intersect?",function(A){return this.$intersection(A)["$empty?"]()["$!"]()}),x(c,"$join",function(A){var L=this;if(null==T[","]&&(T[","]=e),null==A&&(A=e),Q(0===L.length))return"";Q(A===e)&&(A=T[","]);var o,p,F,Z,O=[];for(o=0,p=L.length;o<p;o++)E(F=L[o],"$to_str")&&(Z=F.$to_str())!==e?O.push(Z.$to_s()):E(F,"$to_ary")&&((Z=F.$to_ary())===L&&U.$raise(n("ArgumentError")),Z!==e)?O.push(Z.$join(A)):E(F,"$to_s")&&(Z=F.$to_s())!==e?O.push(Z):U.$raise(n("NoMethodError").$new(N("Opal").$inspect(L.$item())+" doesn't respond to #to_str, #to_ary or #to_s","to_str"));return O.join(A===e?"":q["$coerce_to!"](A,n("String"),"to_str").$to_s())},-1),x(c,"$keep_if",function ee(){var A=ee.$$p||e,L=this;return ee.$$p=null,A===e?y(L,"enum_for",["keep_if"],function O(){return(null==O.$$s?this:O.$$s).$size()},{$$s:L}):(W(L),ne(L,Q,A),L)}),x(c,"$last",function(A){var L=this;return null==A?0===L.length?e:L[L.length-1]:((A=B(A,n("Integer"),"to_int"))<0&&U.$raise(n("ArgumentError"),"negative array size"),A>L.length&&(A=L.length),L.slice(L.length-A,L.length))},-1),x(c,"$length",function(){return this.length}),x(c,"$max",function ee(A){var L=ee.$$p||e;return ee.$$p=null,y(this.$each(),"max",[A],L.$to_proc())},-1),x(c,"$min",function ee(){var A=ee.$$p||e;return ee.$$p=null,y(this.$each(),"min",[],A.$to_proc())}),x(c,"$permutation",function ee(A){var F,Z,ie,L=ee.$$p||e,O=this,o=e,p=e;if(ee.$$p=null,L===e)return y(O,"enum_for",["permutation",A],function ce(){var fe=null==ce.$$s?this:ce.$$s;return function le(ee,A){for(var L=A>=0?1:0;A;)L*=ee,ee--,A--;return L}(fe.length,void 0===A?fe.length:A)},{$$s:O});if(!((A=void 0===A?O.length:B(A,n("Integer"),"to_int"))<0||O.length<A))if(0===A)l.yield1(L,[]);else if(1===A)for(var ue=0;ue<O.length;ue++)l.yield1(L,[O[ue]]);else o=N("Array").$new(A),p=N("Array").$new(O.length,!1),F=function(ce,fe,_e,de,me){O=this;for(var he=0;he<O.length;he++)if(de["$[]"](he)["$!"]())if(fe[_e]=he,_e<ce-1)de[he]=!0,F.call(O,ce,fe,_e+1,de,me),de[he]=!1;else{ie=[];for(var ge=0;ge<fe.length;ge++)ie.push(O[fe[ge]]);P(me,ie)}},L!==e?(Z=O.slice(),F.call(Z,A,o,0,p,L)):F.call(O,A,o,0,p,L);return O},-1),x(c,"$repeated_permutation",function ee(A){var o,L=ee.$$p||e,O=this;return ee.$$p=null,o=q["$coerce_to!"](A,n("Integer"),"to_int"),L===e?y(O,"enum_for",["repeated_permutation",o],function F(){var Z=null==F.$$s?this:F.$$s;return Q(v(o,0))?Z.$size()["$**"](o):0},{$$s:O}):(function p(F,Z,ie){if(Z.length!=F)for(var ce=0;ce<ie.length;ce++)Z.push(ie[ce]),p(F,Z,ie),Z.pop();else{var ue=Z.slice();l.yield1(L,ue)}}(o,[],O.slice()),O)}),x(c,"$pop",function(A){var L=this;return W(L),Q(void 0===A)?Q(0===L.length)?e:L.pop():(A=B(A,n("Integer"),"to_int"),Q(A<0)&&U.$raise(n("ArgumentError"),"negative array size"),Q(0===L.length)?[]:Q(1===A)?[L.pop()]:Q(A>L.length)?L.splice(0,L.length):L.splice(L.length-A,L.length))},-1),x(c,"$product",function ee(A){var O,o,L=ee.$$p||e,p=this;ee.$$p=null,O=X(arguments);var fe,_e,de,me,F=L!==e?null:[],Z=(o=O).length+1,ie=new Array(Z),ue=new Array(Z),ce=new Array(Z),he=1;for(ce[0]=p,fe=1;fe<Z;fe++)ce[fe]=B(o[fe-1],n("Array"),"to_ary");for(fe=0;fe<Z;fe++){if(0===(me=ce[fe].length))return F||p;(he*=me)>2147483647&&U.$raise(n("RangeError"),"too big to product"),ue[fe]=me,ie[fe]=0}e:for(;;){for(de=[],fe=0;fe<Z;fe++)de.push(ce[fe][ie[fe]]);for(F?F.push(de):l.yield1(L,de),ie[_e=Z-1]++;ie[_e]===ue[_e];){if(ie[_e]=0,--_e<0)break e;ie[_e]++}}return F||p},-1),x(c,"$push",function(A){var O,o=this;O=X(arguments),W(o);for(var p=0,F=O.length;p<F;p++)o.push(O[p]);return o},-1),x(c,"$rassoc",function(A){for(var p,O=0,o=this.length;O<o;O++)if((p=this[O]).length&&void 0!==p[1]&&p[1]["$=="](A))return p;return e}),x(c,"$reject",function ee(){var A=ee.$$p||e,L=this;if(ee.$$p=null,A===e)return y(L,"enum_for",["reject"],function Z(){return(null==Z.$$s?this:Z.$$s).$size()},{$$s:L});for(var F,O=[],o=0,p=L.length;o<p;o++)(!1===(F=A(L[o]))||F===e)&&O.push(L[o]);return O}),x(c,"$reject!",function ee(){var A=ee.$$p||e,L=this,O=e;return ee.$$p=null,A===e?y(L,"enum_for",["reject!"],function o(){return(null==o.$$s?this:o.$$s).$size()},{$$s:L}):(W(L),O=L.$length(),y(L,"delete_if",[],A.$to_proc()),R(L.$length(),O)?e:L)}),x(c,"$replace",function(A){var L=this;return W(L),A=M(n("Array"),A)?A.$to_a():B(A,n("Array"),"to_ary").$to_a(),L.splice(0,L.length),L.push.apply(L,A),L}),x(c,"$reverse",function(){return this.slice(0).reverse()}),x(c,"$reverse!",function(){return W(this),this.reverse()}),x(c,"$reverse_each",function ee(){var A=ee.$$p||e,L=this;return ee.$$p=null,A===e?y(L,"enum_for",["reverse_each"],function O(){return(null==O.$$s?this:O.$$s).$size()},{$$s:L}):(y(L.$reverse(),"each",[],A.$to_proc()),L)}),x(c,"$rindex",function ee(A){var o,p,L=ee.$$p||e,O=this;if(ee.$$p=null,null!=A&&L!==e&&O.$warn("warning: given block not used"),null!=A){for(o=O.length-1;o>=0&&!(o>=O.length);o--)if(O[o]["$=="](A))return o}else if(L!==e){for(o=O.length-1;o>=0&&!(o>=O.length);o--)if(!1!==(p=L(O[o]))&&p!==e)return o}else if(null==A)return O.$enum_for("rindex");return e},-1),x(c,"$rotate",function(A){var O,o,p,F,L=this;return null==A&&(A=1),A=B(A,n("Integer"),"to_int"),1===L.length?L.slice():0===L.length?[]:(p=(O=L.slice()).slice(o=A%O.length),F=O.slice(0,o),p.concat(F))},-1),x(c,"$rotate!",function(A){var L=this,O=e;return null==A&&(A=1),W(L),0===L.length||1===L.length?L:(A=B(A,n("Integer"),"to_int"),O=L.$rotate(A),L.$replace(O))},-1),(L=H(c,null,"SampleRandom")).$$prototype.rng=e,x(L,"$initialize",S("rng")),x(L,"$rand",function(p){var Z;return Z=B(this.rng.$rand(p),n("Integer"),"to_int"),Q(Z<0)&&U.$raise(n("RangeError"),"random value must be >= 0"),Q(Z<p)||U.$raise(n("RangeError"),"random value must be less than Array size"),Z}),x(c,"$sample",function(A,L){var F,Z,ie,ue,ce,fe,_e,de,O=this,o=e,p=e;if(Q(void 0===A))return O.$at(U.$rand(O.length));if(Q(void 0===L)?Q(o=q["$coerce_to?"](A,n("Hash"),"to_hash"))?(L=o,A=e):(L=e,A=B(A,n("Integer"),"to_int")):(A=B(A,n("Integer"),"to_int"),L=B(L,n("Hash"),"to_hash")),Q(A)&&Q(A<0)&&U.$raise(n("ArgumentError"),"count must be greater than 0"),Q(L)&&(p=L["$[]"]("random")),p=Q(p)&&Q(p["$respond_to?"]("rand"))?N("SampleRandom").$new(p):U,!Q(A))return O[p.$rand(O.length)];switch(A>O.length&&(A=O.length),A){case 0:return[];case 1:return[O[p.$rand(O.length)]];case 2:return(ue=p.$rand(O.length))===(ce=p.$rand(O.length))&&(ce=0===ue?ue+1:ue-1),[O[ue],O[ce]];default:if(O.length/A>3){for(F=!1,Z=0,ue=1,(ie=N("Array").$new(A))[0]=p.$rand(O.length);ue<A;){for(fe=p.$rand(O.length),ce=0;ce<ue;){for(;fe===ie[ce];){if(++Z>100){F=!0;break}fe=p.$rand(O.length)}if(F)break;ce++}if(F)break;ie[ue]=fe,ue++}if(!F){for(ue=0;ue<A;)ie[ue]=O[ie[ue]],ue++;return ie}}ie=O.slice();for(var me=0;me<A;me++)_e=p.$rand(O.length),de=ie[me],ie[me]=ie[_e],ie[_e]=de;return A===O.length?ie:ie["$[]"](0,A)}},-1),x(c,"$select",function ee(){var A=ee.$$p||e,L=this;if(ee.$$p=null,A===e)return y(L,"enum_for",["select"],function ie(){return(null==ie.$$s?this:ie.$$s).$size()},{$$s:L});for(var F,Z,O=[],o=0,p=L.length;o<p;o++)Z=P(A,F=L[o]),Q(Z)&&O.push(F);return O}),x(c,"$select!",function ee(){var A=ee.$$p||e,L=this;if(ee.$$p=null,A===e)return y(L,"enum_for",["select!"],function o(){return(null==o.$$s?this:o.$$s).$size()},{$$s:L});W(L);var O=L.length;return y(L,"keep_if",[],A.$to_proc()),L.length===O?e:L}),x(c,"$shift",function(A){var L=this;return W(L),Q(void 0===A)?Q(0===L.length)?e:function C(ee){for(var A=ee[0],L=1,O=ee.length;L<O;L++)ee[L-1]=ee[L];return ee.pop(),A}(L):(A=B(A,n("Integer"),"to_int"),Q(A<0)&&U.$raise(n("ArgumentError"),"negative array size"),Q(0===L.length)?[]:L.splice(0,A))},-1),x(c,"$shuffle",function(A){return this.$dup().$to_a()["$shuffle!"](A)},-1),x(c,"$shuffle!",function(A){var L=this;W(L);var O,p,F,o=L.length;for(void 0!==A&&(A=q["$coerce_to?"](A,n("Hash"),"to_hash"))!==e&&(A=A["$[]"]("random"))!==e&&A["$respond_to?"]("rand")&&(O=A);o;)O?((p=O.$rand(o).$to_int())<0&&U.$raise(n("RangeError"),"random number too small "+p),p>=o&&U.$raise(n("RangeError"),"random number too big "+p)):p=L.$rand(o),F=L[--o],L[o]=L[p],L[p]=F;return L},-1),x(c,"$slice!",function(A,L){var O=this,o=e,p=e,F=e,Z=e,ie=e;if(W(O),o=e,Q(void 0===L))if(M(n("Range"),A)){o=O["$[]"](p=A),F=p.begin===e?0:B(p.begin,n("Integer"),"to_int"),Z=p.end===e?-1:B(p.end,n("Integer"),"to_int"),F<0&&(F+=O.length),Z<0?Z+=O.length:Z>=O.length&&(Z=O.length-1,p.excl&&(Z+=1));var ue=Z-F;p.excl&&p.end!==e?Z-=1:ue+=1,F<O.length&&F>=0&&Z<O.length&&Z>=0&&ue>0&&O.splice(F,ue)}else{if((ie=B(A,n("Integer"),"to_int"))<0&&(ie+=O.length),ie<0||ie>=O.length)return e;o=O[ie],0===ie?O.shift():O.splice(ie,1)}else{if(ie=B(A,n("Integer"),"to_int"),(L=B(L,n("Integer"),"to_int"))<0)return e;o=O["$[]"](ie,L),ie<0&&(ie+=O.length),ie+L>O.length&&(L=O.length-ie),ie<O.length&&ie>=0&&O.splice(ie,L)}return o},-2),x(c,"$sort",function ee(){var A=ee.$$p||e,L=this;return ee.$$p=null,Q(L.length>1)?(A===e&&(A=function(O,o){return O["$<=>"](o)}),L.slice().sort(function(O,o){var p=A(O,o);return p===e&&U.$raise(n("ArgumentError"),"comparison of "+O.$inspect()+" with "+o.$inspect()+" failed"),g(p,0)?1:d(p,0)?-1:0})):L}),x(c,"$sort!",function ee(){var O,A=ee.$$p||e,L=this;ee.$$p=null,W(L),O=A!==e?y(L.slice(),"sort",[],A.$to_proc()):L.slice().$sort(),L.length=0;for(var o=0,p=O.length;o<p;o++)L.push(O[o]);return L}),x(c,"$sort_by!",function ee(){var A=ee.$$p||e,L=this;return ee.$$p=null,A===e?y(L,"enum_for",["sort_by!"],function O(){return(null==O.$$s?this:O.$$s).$size()},{$$s:L}):(W(L),L.$replace(y(L,"sort_by",[],A.$to_proc())))}),x(c,"$take",function(A){return A<0&&U.$raise(n("ArgumentError")),this.slice(0,A)}),x(c,"$take_while",function ee(){var A=ee.$$p||e;ee.$$p=null;for(var F,Z,O=[],o=0,p=this.length;o<p;o++){if(!1===(Z=A(F=this[o]))||Z===e)return O;O.push(F)}return O}),x(c,"$to_a",function(){var A=this;return A.$$class===l.Array?A:l.Array.$new(A)}),x(c,"$to_ary",G),x(c,"$to_h",function ee(){var A=ee.$$p||e,O=e;ee.$$p=null,O=this,A!==e&&(O=y(O,"map",[],A.$to_proc()));var o,F,p=O.length,ue=w([],{});for(o=0;o<p;o++)(F=q["$coerce_to?"](O[o],n("Array"),"to_ary")).$$is_array||U.$raise(n("TypeError"),"wrong element type "+F.$class()+" at "+o+" (expected array)"),2!==F.length&&U.$raise(n("ArgumentError"),"wrong array length at "+o+" (expected 2, was "+F.$length()+")"),k(ue,F[0],F[1]);return ue}),x(c,"$transpose",function(){var L=e,O=e;return Q(this["$empty?"]())?[]:(L=[],O=e,y(this,"each",[],function(p){var F=e;return null==p&&(p=e),p=M(n("Array"),p)?p.$to_a():B(p,n("Array"),"to_ary").$to_a(),O=Q(F=O)?F:p.length,m(p.length,O)&&U.$raise(n("IndexError"),"element size differs ("+p.length+" should be "+O+")"),y(p.length,"times",[],function(ie){var ue;return null==ie&&(ie=e),(Q(F=L["$[]"](ie))?F:(y(L,"[]=",ue=[ie,[]]),ue[ue.length-1]))["$<<"](p.$at(ie))})}),L)}),x(c,"$union",function(A){var L;return L=X(arguments),y(L,"reduce",[this.$uniq()],function(F,Z){return null==F&&(F=e),null==Z&&(Z=e),F["$|"](Z)})},-1),x(c,"$uniq",function ee(){var A=ee.$$p||e,L=this;ee.$$p=null;var o,p,F,Z,O=w([],{});if(A===e)for(o=0,p=L.length;o<p;o++)void 0===V(O,F=L[o])&&k(O,F,F);else for(o=0,p=L.length;o<p;o++)Z=P(A,F=L[o]),void 0===V(O,Z)&&k(O,Z,F);return O.$values()}),x(c,"$uniq!",function ee(){var A=ee.$$p||e,L=this;ee.$$p=null,W(L);var p,F,Z,ie,O=L.length,o=w([],{});for(p=0,F=O;p<F;p++)Z=L[p],ie=A===e?Z:P(A,Z),void 0!==V(o,ie)?(L.splice(p,1),F--,p--):k(o,ie,Z);return L.length===O?e:L}),x(c,"$unshift",function(A){var O,o=this;O=X(arguments),W(o);var p=o.length,F=O.length;if(0==F)return o;for(var Z=p-F,ie=0;ie<F;ie++)o.push(o[Z+ie]);for(var ue=p-1;ue-F>=0;)o[ue]=o[ue-F],ue--;for(var ce=0;ce<F;ce++)o[ce]=O[ce];return o},-1),x(c,"$values_at",function(A){var L,p=e;return L=X(arguments),p=[],y(L,"each",[],function F(Z){var ie=null==F.$$s?this:F.$$s,ue=e,ce=e,fe=e;return null==Z&&(Z=e),Q(Z["$is_a?"](n("Range")))?(ue=Z.$end()===e?-1:B(Z.$end(),n("Integer"),"to_int"),(ce=Z.$begin()===e?0:B(Z.$begin(),n("Integer"),"to_int"))<0?(ce+=ie.length,e):(ue<0&&(ue+=ie.length),Z["$exclude_end?"]()&&Z.$end()!==e&&ue--,ue<ce?e:y(ce,"upto",[ue],function _e(de){return null==de&&(de=e),p["$<<"]((null==_e.$$s?this:_e.$$s).$at(de))},{$$s:ie}))):(fe=B(Z,n("Integer"),"to_int"),p["$<<"](ie.$at(fe)))},{$$s:this}),p},-1),x(c,"$zip",function ee(A){var O,o,L=ee.$$p||e,F=e;ee.$$p=null,O=X(arguments);var ue,ce,fe,_e,de,Z=[],ie=this.length;for(_e=0,de=(o=O).length;_e<de;_e++)if(!(ce=o[_e]).$$is_array){if(ce.$$is_range||ce.$$is_enumerator){o[_e]=ce.$take(ie);continue}o[_e]=(Q(F=q["$coerce_to?"](ce,n("Array"),"to_ary"))?F:q["$coerce_to!"](ce,n("Enumerator"),"to_enum","each")).$to_a()}for(fe=0;fe<ie;fe++){for(ue=[this[fe]],_e=0,de=o.length;_e<de;_e++)null==(ce=o[_e][fe])&&(ce=e),ue[_e+1]=ce;Z[fe]=ue}if(L!==e){for(fe=0;fe<ie;fe++)l.yield1(L,Z[fe]);return e}return Z},-1),K(c,"$inherited",function(A){A.$$prototype.$to_a=function(){return this.slice(0,this.length)}}),x(c,"$instance_variables",function ee(){var A=ee.$$p||e;return ee.$$p=null,y(I(this,D(this,"instance_variables",ee,!1,!0),"instance_variables",[],A),"reject",[],function(o){var p;return null==o&&(o=e),Q(p=/^@\d+$/.test(o))?p:o["$=="]("@length")})}),x(c,"$pack",function(A){return X(arguments),U.$raise("To use Array#pack, you must first require 'corelib/array/pack'.")},-1),h(c,"append","push"),h(c,"filter","select"),h(c,"filter!","select!"),h(c,"map","collect"),h(c,"map!","collect!"),h(c,"prepend","unshift"),h(c,"size","length"),h(c,"slice","[]"),h(c,"to_s","inspect"),q.$pristine(c.$singleton_class(),"allocate"),q.$pristine(c,"copy_instance_variables","initialize_dup")}()},Opal.modules["corelib/hash"]=function(l){var T,G,v,S,d,Q=l.yield1,te=l.hash,a=l.hash_init,P=l.hash_get,V=l.hash_put,k=l.hash_delete,j=l.deny_frozen_access,B=l.freeze,E=l.klass,W=l.slice,Y=l.Opal,H=l.Kernel,X=l.defs,K=l.def,U=l.send,x=l.rb_ge,q=l.rb_gt,M=l.hash2,w=l.truthy,I=l.to_a,D=l.return_self,y=l.alias,R=l.nil,_=l.$$$;return l.top.$require("corelib/enumerable"),T=[],S=[v=E("::",null,"Hash")].concat(T),d=l.$r(S),v.$include(_("Enumerable")),v.$$prototype.$$is_hash=!0,X(v,"$[]",function(h){var r,n,i,e=this,t=(r=W(arguments)).length;if(1===t){if((n=Y["$coerce_to?"](r["$[]"](0),_("Hash"),"to_hash"))!==R)return e.$allocate()["$merge!"](n);for((r=Y["$coerce_to?"](r["$[]"](0),_("Array"),"to_ary"))===R&&H.$raise(_("ArgumentError"),"odd number of arguments for Hash"),t=r.length,n=e.$allocate(),i=0;i<t;i++)if(r[i].$$is_array)switch(r[i].length){case 1:n.$store(r[i][0],R);break;case 2:n.$store(r[i][0],r[i][1]);break;default:H.$raise(_("ArgumentError"),"invalid number of elements ("+r[i].length+" for 1..2)")}return n}for(t%2!=0&&H.$raise(_("ArgumentError"),"odd number of arguments for Hash"),n=e.$allocate(),i=0;i<t;i+=2)n.$store(r[i],r[i+1]);return n},-1),X(v,"$allocate",function(){var $=new this.$$constructor;return a($),$.$$none=R,$.$$proc=R,$}),X(v,"$try_convert",function(h){return Y["$coerce_to?"](h,_("Hash"),"to_hash")}),K(v,"$initialize",function m(h){var $=m.$$p||R,r=this;return m.$$p=null,j(r),void 0!==h&&$!==R&&H.$raise(_("ArgumentError"),"wrong number of arguments (1 for 0)"),r.$$none=void 0===h?R:h,r.$$proc=$,r},-1),K(v,"$==",function(h){var $=this;if($===h)return!0;if(!h.$$is_hash||$.$$keys.length!==h.$$keys.length)return!1;for(var t,i,s,r=0,e=$.$$keys,n=e.length;r<n;r++)if((t=e[r]).$$is_string?(i=$.$$smap[t],s=h.$$smap[t]):(i=t.value,s=P(h,t.key)),void 0===s||!i["$eql?"](s))return!1;return!0}),K(v,"$>=",function(h){var r=R;return h=Y["$coerce_to!"](h,_("Hash"),"to_hash"),!(this.$$keys.length<h.$$keys.length)&&(r=!0,U(h,"each",[],function e(n,t){var s;null==n&&(n=R),null==t&&(t=R),null!=(s=(null==e.$$s?this:e.$$s).$fetch(n,null))&&s===t||(r=!1)},{$$s:this}),r)}),K(v,"$>",function(h){return h=Y["$coerce_to!"](h,_("Hash"),"to_hash"),!(this.$$keys.length<=h.$$keys.length)&&x(this,h)}),K(v,"$<",function(h){return h=Y["$coerce_to!"](h,_("Hash"),"to_hash"),q(h,this)}),K(v,"$<=",function(h){return h=Y["$coerce_to!"](h,_("Hash"),"to_hash"),x(h,this)}),K(v,"$[]",function(h){var r=P(this,h);return void 0!==r?r:this.$default(h)}),K(v,"$[]=",function(h,$){return j(this),V(this,h,$),$}),K(v,"$assoc",function(h){for(var t,r=0,e=this.$$keys,n=e.length;r<n;r++)if((t=e[r]).$$is_string){if(t["$=="](h))return[t,this.$$smap[t]]}else if(t.key["$=="](h))return[t.key,t.value];return R}),K(v,"$clear",function(){var h=this;return j(h),a(h),h}),K(v,"$clone",function(){var $=new this.$$class;return a($),l.hash_clone(this,$),$}),K(v,"$compact",function(){for(var t,i,$=te(),r=0,e=this.$$keys,n=e.length;r<n;r++)(t=e[r]).$$is_string?i=this.$$smap[t]:(i=t.value,t=t.key),i!==R&&V($,t,i);return $}),K(v,"$compact!",function(){var h=this;j(h);for(var t,i,$=!1,r=0,e=h.$$keys,n=e.length;r<n;r++)(t=e[r]).$$is_string?i=h.$$smap[t]:(i=t.value,t=t.key),i===R&&void 0!==k(h,t)&&($=!0,n--,r--);return $?h:R}),K(v,"$compare_by_identity",function(){var h=this;j(h);var $,r,e,t,n=h.$$keys;if(h.$$by_identity)return h;if(0===h.$$keys.length)return h.$$by_identity=!0,h;for(t=M([],{}).$compare_by_identity(),$=0,r=n.length;$<r;$++)(e=n[$]).$$is_string||(e=e.key),V(t,e,P(h,e));return h.$$by_identity=!0,h.$$map=t.$$map,h.$$smap=t.$$smap,h}),K(v,"$compare_by_identity?",function(){return!0===this.$$by_identity}),K(v,"$default",function(h){var $=this;return void 0!==h&&$.$$proc!==R&&void 0!==$.$$proc?$.$$proc.$call($,h):void 0===$.$$none?R:$.$$none},-1),K(v,"$default=",function(h){var $=this;return j($),$.$$proc=R,$.$$none=h,h}),K(v,"$default_proc",function(){return void 0!==this.$$proc?this.$$proc:R}),K(v,"$default_proc=",function(h){var $=this;j($);var r=h;return r!==R&&(r=Y["$coerce_to!"](r,_("Proc"),"to_proc"))["$lambda?"]()&&2!==r.$arity().$abs()&&H.$raise(_("TypeError"),"default_proc takes two arguments"),$.$$none=R,$.$$proc=r,h}),K(v,"$delete",function m(h){var $=m.$$p||R;m.$$p=null,j(this);var e=k(this,h);return void 0!==e?e:$!==R?l.yield1($,h):R}),K(v,"$delete_if",function m(){var h=m.$$p||R,$=this;if(m.$$p=null,!w(h))return U($,"enum_for",["delete_if"],function c(){return(null==c.$$s?this:c.$$s).$size()},{$$s:$});j($);for(var t,i,s,r=0,e=$.$$keys,n=e.length;r<n;r++)(t=e[r]).$$is_string?i=$.$$smap[t]:(i=t.value,t=t.key),!1!==(s=h(t,i))&&s!==R&&void 0!==k($,t)&&(n--,r--);return $}),K(v,"$dig",function(h,$){var e,t=R;return e=W(arguments,1),(t=this["$[]"](h))===R||0===e.length?t:(w(t["$respond_to?"]("dig"))||H.$raise(_("TypeError"),t.$class()+" does not have #dig method"),U(t,"dig",I(e)))},-2),K(v,"$each",function m(){var h=m.$$p||R,$=this;if(m.$$p=null,!w(h))return U($,"enum_for",["each"],function s(){return(null==s.$$s?this:s.$$s).$size()},{$$s:$});for(var t,i,r=0,e=$.$$keys.slice(),n=e.length;r<n;r++)(t=e[r]).$$is_string?i=$.$$smap[t]:(i=t.value,t=t.key),Q(h,[t,i]);return $}),K(v,"$each_key",function m(){var h=m.$$p||R,$=this;if(m.$$p=null,!w(h))return U($,"enum_for",["each_key"],function i(){return(null==i.$$s?this:i.$$s).$size()},{$$s:$});for(var t,r=0,e=$.$$keys.slice(),n=e.length;r<n;r++)h((t=e[r]).$$is_string?t:t.key);return $}),K(v,"$each_value",function m(){var h=m.$$p||R,$=this;if(m.$$p=null,!w(h))return U($,"enum_for",["each_value"],function i(){return(null==i.$$s?this:i.$$s).$size()},{$$s:$});for(var t,r=0,e=$.$$keys.slice(),n=e.length;r<n;r++)h((t=e[r]).$$is_string?$.$$smap[t]:t.value);return $}),K(v,"$empty?",function(){return 0===this.$$keys.length}),K(v,"$except",function(h){var r;return r=W(arguments),U(this.$dup(),"except!",I(r))},-1),K(v,"$except!",function(h){var $;return $=W(arguments),U($,"each",[],function n(t){return null==t&&(t=R),(null==n.$$s?this:n.$$s).$delete(t)},{$$s:this}),this},-1),K(v,"$fetch",function m(h,$){var r=m.$$p||R;m.$$p=null;var n=P(this,h);return void 0!==n?n:r!==R?r(h):void 0!==$?$:H.$raise(_("KeyError").$new("key not found: "+h.$inspect(),M(["key","receiver"],{key:h,receiver:this})))},-2),K(v,"$fetch_values",function m(h){var r,$=m.$$p||R;return m.$$p=null,r=W(arguments),U(r,"map",[],function t(i){return null==i&&(i=R),U(null==t.$$s?this:t.$$s,"fetch",[i],$.$to_proc())},{$$s:this})},-1),K(v,"$flatten",function(h){null==h&&(h=1),h=Y["$coerce_to!"](h,_("Integer"),"to_int");for(var i,s,r=[],e=0,n=this.$$keys,t=n.length;e<t;e++)if((i=n[e]).$$is_string?s=this.$$smap[i]:(s=i.value,i=i.key),r.push(i),s.$$is_array){if(1===h){r.push(s);continue}r=r.concat(s.$flatten(h-2))}else r.push(s);return r},-1),K(v,"$freeze",function(){var h=this;return w(h["$frozen?"]())?h:B(h)}),K(v,"$has_key?",function(h){return void 0!==P(this,h)}),K(v,"$has_value?",function(h){for(var t,r=0,e=this.$$keys,n=e.length;r<n;r++)if(((t=e[r]).$$is_string?this.$$smap[t]:t.value)["$=="](h))return!0;return!1}),K(v,"$hash",function(){var n,h=this,$=void 0===l.hash_ids,r=h.$object_id(),e=["Hash"];try{if($&&(l.hash_ids=Object.create(null)),l[r])return"self";for(n in l.hash_ids)if(h["$eql?"](l.hash_ids[n]))return"self";l.hash_ids[r]=h;for(var i=0,s=h.$$keys,c=s.length;i<c;i++)e.push((n=s[i]).$$is_string?[n,h.$$smap[n].$hash()]:[n.key_hash,n.value.$hash()]);return e.sort().join()}finally{$&&(l.hash_ids=void 0)}}),K(v,"$index",function(h){for(var t,i,r=0,e=this.$$keys,n=e.length;r<n;r++)if((t=e[r]).$$is_string?i=this.$$smap[t]:(i=t.value,t=t.key),i["$=="](h))return t;return R}),K(v,"$indexes",function(h){for(var r,c,n=[],t=0,i=(r=W(arguments)).length;t<i;t++)void 0!==(c=P(this,r[t]))?n.push(c):n.push(this.$default());return n},-1),K(v,"$inspect",function(){var h=this,$=void 0===G,r=h.$object_id(),e=[];return function(){try{if($&&(G={}),G.hasOwnProperty(r))return"{...}";G[r]=!0;for(var s,c,n=0,t=h.$$keys,i=t.length;n<i;n++)(s=t[n]).$$is_string?c=h.$$smap[s]:(c=s.value,s=s.key),s=d("Opal").$inspect(s),c=d("Opal").$inspect(c),e.push(s+"=>"+c);return"{"+e.join(", ")+"}"}finally{$&&(G=void 0)}}()}),K(v,"$invert",function(){for(var t,i,$=te(),r=0,e=this.$$keys,n=e.length;r<n;r++)(t=e[r]).$$is_string?i=this.$$smap[t]:(i=t.value,t=t.key),V($,i,t);return $}),K(v,"$keep_if",function m(){var h=m.$$p||R,$=this;if(m.$$p=null,!w(h))return U($,"enum_for",["keep_if"],function c(){return(null==c.$$s?this:c.$$s).$size()},{$$s:$});j($);for(var t,i,s,r=0,e=$.$$keys,n=e.length;r<n;r++)(t=e[r]).$$is_string?i=$.$$smap[t]:(i=t.value,t=t.key),(!1===(s=h(t,i))||s===R)&&void 0!==k($,t)&&(n--,r--);return $}),K(v,"$keys",function(){for(var t,$=[],r=0,e=this.$$keys,n=e.length;r<n;r++)$.push((t=e[r]).$$is_string?t:t.key);return $}),K(v,"$length",function(){return this.$$keys.length}),K(v,"$merge",function m(h){var e,$=m.$$p||R;return m.$$p=null,e=W(arguments),U(this.$dup(),"merge!",I(e),$.$to_proc())},-1),K(v,"$merge!",function m(h){var e,t,i,s,c,u,N,C,J,$=m.$$p||R,n=this;for(m.$$p=null,e=W(arguments),j(n),t=0;t<e.length;++t)if(u=(c=(s=Y["$coerce_to!"](e[t],_("Hash"),"to_hash")).$$keys).length,$===R)for(i=0;i<u;i++)(N=c[i]).$$is_string?J=s.$$smap[N]:(J=N.value,N=N.key),V(n,N,J);else for(i=0;i<u;i++)(N=c[i]).$$is_string?J=s.$$smap[N]:(J=N.value,N=N.key),void 0!==(C=P(n,N))?V(n,N,$(N,C,J)):V(n,N,J);return n},-1),K(v,"$rassoc",function(h){for(var t,i,r=0,e=this.$$keys,n=e.length;r<n;r++)if((t=e[r]).$$is_string?i=this.$$smap[t]:(i=t.value,t=t.key),i["$=="](h))return[t,i];return R}),K(v,"$rehash",function(){var h=this;return j(h),l.hash_rehash(h),h}),K(v,"$reject",function m(){var h=m.$$p||R,$=this;if(m.$$p=null,!w(h))return U($,"enum_for",["reject"],function u(){return(null==u.$$s?this:u.$$s).$size()},{$$s:$});for(var i,s,c,r=te(),e=0,n=$.$$keys,t=n.length;e<t;e++)(i=n[e]).$$is_string?s=$.$$smap[i]:(s=i.value,i=i.key),(!1===(c=h(i,s))||c===R)&&V(r,i,s);return r}),K(v,"$reject!",function m(){var h=m.$$p||R,$=this;if(m.$$p=null,!w(h))return U($,"enum_for",["reject!"],function u(){return(null==u.$$s?this:u.$$s).$size()},{$$s:$});j($);for(var i,s,c,r=!1,e=0,n=$.$$keys,t=n.length;e<t;e++)(i=n[e]).$$is_string?s=$.$$smap[i]:(s=i.value,i=i.key),!1!==(c=h(i,s))&&c!==R&&void 0!==k($,i)&&(r=!0,t--,e--);return r?$:R}),K(v,"$replace",function(h){var $=this;j($),h=Y["$coerce_to!"](h,_("Hash"),"to_hash"),a($);for(var t,s,r=0,e=h.$$keys,n=e.length;r<n;r++)(t=e[r]).$$is_string?s=h.$$smap[t]:(s=t.value,t=t.key),V($,t,s);return w(h.$default_proc())?$["$default_proc="](h.$default_proc()):$["$default="](h.$default()),$}),K(v,"$select",function m(){var h=m.$$p||R,$=this;if(m.$$p=null,!w(h))return U($,"enum_for",["select"],function u(){return(null==u.$$s?this:u.$$s).$size()},{$$s:$});for(var i,s,c,r=te(),e=0,n=$.$$keys,t=n.length;e<t;e++)(i=n[e]).$$is_string?s=$.$$smap[i]:(s=i.value,i=i.key),!1!==(c=h(i,s))&&c!==R&&V(r,i,s);return r}),K(v,"$select!",function m(){var h=m.$$p||R,$=this;if(m.$$p=null,!w(h))return U($,"enum_for",["select!"],function u(){return(null==u.$$s?this:u.$$s).$size()},{$$s:$});j($);for(var i,s,c,r=R,e=0,n=$.$$keys,t=n.length;e<t;e++)(i=n[e]).$$is_string?s=$.$$smap[i]:(s=i.value,i=i.key),(!1===(c=h(i,s))||c===R)&&(void 0!==k($,i)&&(t--,e--),r=$);return r}),K(v,"$shift",function(){var h=this;j(h);var r,$=h.$$keys;return $.length>0?[r=(r=$[0]).$$is_string?r:r.key,k(h,r)]:R}),K(v,"$slice",function(h){var r;r=W(arguments);for(var n=te(),t=0,i=r.length;t<i;t++){var s=r[t],c=P(this,s);void 0!==c&&V(n,s,c)}return n},-1),K(v,"$to_a",function(){for(var t,i,$=[],r=0,e=this.$$keys,n=e.length;r<n;r++)(t=e[r]).$$is_string?i=this.$$smap[t]:(i=t.value,t=t.key),$.push([t,i]);return $}),K(v,"$to_h",function m(){var h=m.$$p||R,$=this;if(m.$$p=null,h!==R)return U($,"map",[],h.$to_proc()).$to_h();if($.$$class===l.Hash)return $;var r=new l.Hash;return a(r),l.hash_clone($,r),r}),K(v,"$to_hash",D),K(v,"$to_proc",function(){return U(this,"proc",[],function $(r){var e=null==$.$$s?this:$.$$s;return null==r&&H.$raise(_("ArgumentError"),"no key given"),e["$[]"](r)},{$$arity:-1,$$s:this})}),K(v,"$transform_keys",function m(){var h=m.$$p||R,$=this;if(m.$$p=null,!w(h))return U($,"enum_for",["transform_keys"],function c(){return(null==c.$$s?this:c.$$s).$size()},{$$s:$});for(var i,s,r=te(),e=0,n=$.$$keys,t=n.length;e<t;e++)(i=n[e]).$$is_string?s=$.$$smap[i]:(s=i.value,i=i.key),i=Q(h,i),V(r,i,s);return r}),K(v,"$transform_keys!",function m(){var h=m.$$p||R,$=this;if(m.$$p=null,!w(h))return U($,"enum_for",["transform_keys!"],function c(){return(null==c.$$s?this:c.$$s).$size()},{$$s:$});j($);var e,t,i,s,r=l.slice($.$$keys),n=r.length;for(e=0;e<n;e++)(t=r[e]).$$is_string?i=$.$$smap[t]:(i=t.value,t=t.key),s=Q(h,t),k($,t),V($,s,i);return $}),K(v,"$transform_values",function m(){var h=m.$$p||R,$=this;if(m.$$p=null,!w(h))return U($,"enum_for",["transform_values"],function c(){return(null==c.$$s?this:c.$$s).$size()},{$$s:$});for(var i,s,r=te(),e=0,n=$.$$keys,t=n.length;e<t;e++)(i=n[e]).$$is_string?s=$.$$smap[i]:(s=i.value,i=i.key),s=Q(h,s),V(r,i,s);return r}),K(v,"$transform_values!",function m(){var h=m.$$p||R,$=this;if(m.$$p=null,!w(h))return U($,"enum_for",["transform_values!"],function s(){return(null==s.$$s?this:s.$$s).$size()},{$$s:$});j($);for(var t,i,r=0,e=$.$$keys,n=e.length;r<n;r++)(t=e[r]).$$is_string?i=$.$$smap[t]:(i=t.value,t=t.key),i=Q(h,i),V($,t,i);return $}),K(v,"$values",function(){for(var t,$=[],r=0,e=this.$$keys,n=e.length;r<n;r++)$.push((t=e[r]).$$is_string?this.$$smap[t]:t.value);return $}),y(v,"dup","clone"),y(v,"each_pair","each"),y(v,"eql?","=="),y(v,"filter","select"),y(v,"filter!","select!"),y(v,"include?","has_key?"),y(v,"indices","indexes"),y(v,"key","index"),y(v,"key?","has_key?"),y(v,"member?","has_key?"),y(v,"size","length"),y(v,"store","[]="),y(v,"to_s","inspect"),y(v,"update","merge!"),y(v,"value?","has_value?"),y(v,"values_at","indexes")},Opal.modules["corelib/number"]=function(l){var v,S,m,$,r,d,G,Q=l.klass,te=l.Opal,a=l.Kernel,P=l.def,V=l.eqeqeq,k=l.truthy,j=l.rb_gt,B=l.not,E=l.rb_lt,W=l.alias,Y=l.send2,H=l.find_super,X=l.send,K=l.rb_plus,U=l.rb_minus,x=l.eqeq,q=l.return_self,M=l.rb_divide,w=l.to_ary,I=l.rb_times,D=l.rb_le,y=l.rb_ge,g=l.return_val,z=l.const_set,_=[],b=l.nil,f=l.$$$;return l.top.$require("corelib/numeric"),function(T,v,S){var n,d=Q("::",v,"Number");function h(n){var t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,n,!0),t}function $(n){return new DataView(n.buffer).getFloat64(0,!0)}function r(n){for(var t=h(n),i=0;i<t.length;i++){if(255!==t[i]){t[i]++;break}t[i]=0}return $(t)}function e(n){for(var t=h(n),i=0;i<t.length;i++){if(0!==t[i]){t[i]--;break}t[i]=255}return $(t)}[d].concat(S),te.$bridge(Number,d),l.prop(d.$$prototype,"$$is_number",!0),d.$$is_number_class=!0,n=l.get_singleton_class(d),P(n,"$allocate",function(){return a.$raise(f("TypeError"),"allocator undefined for "+this.$name())}),l.udef(n,"$new"),P(d,"$coerce",function(t){var i=this;if(t===b)a.$raise(f("TypeError"),"can't convert "+t.$class()+" into Float");else{if(t.$$is_string)return[a.$Float(t),i];if(t["$respond_to?"]("to_f"))return[te["$coerce_to!"](t,f("Float"),"to_f"),i];if(t.$$is_number)return[t,i];a.$raise(f("TypeError"),"can't convert "+t.$class()+" into Float")}}),P(d,"$__id__",function(){return 2*this+1}),P(d,"$+",function(t){return t.$$is_number?this+t:this.$__coerced__("+",t)}),P(d,"$-",function(t){return t.$$is_number?this-t:this.$__coerced__("-",t)}),P(d,"$*",function(t){return t.$$is_number?this*t:this.$__coerced__("*",t)}),P(d,"$/",function(t){return t.$$is_number?this/t:this.$__coerced__("/",t)}),P(d,"$%",function(t){var i=this;return t.$$is_number?t==-1/0?t:0!=t?t<0||i<0?(i%t+t)%t:i%t:void a.$raise(f("ZeroDivisionError"),"divided by 0"):i.$__coerced__("%",t)}),P(d,"$&",function(t){return t.$$is_number?this&t:this.$__coerced__("&",t)}),P(d,"$|",function(t){return t.$$is_number?this|t:this.$__coerced__("|",t)}),P(d,"$^",function(t){return t.$$is_number?this^t:this.$__coerced__("^",t)}),P(d,"$<",function(t){return t.$$is_number?this<t:this.$__coerced__("<",t)}),P(d,"$<=",function(t){return t.$$is_number?this<=t:this.$__coerced__("<=",t)}),P(d,"$>",function(t){return t.$$is_number?this>t:this.$__coerced__(">",t)}),P(d,"$>=",function(t){return t.$$is_number?this>=t:this.$__coerced__(">=",t)}),P(d,"$<=>",function(t){try{return function(n,t){return t.$$is_number?isNaN(n)||isNaN(t)?b:n>t?1:n<t?-1:0:n.$__coerced__("<=>",t)}(this,t)}catch(s){if(!l.rescue(s,[f("ArgumentError")]))throw s;try{return b}finally{l.pop_exception()}}}),P(d,"$<<",function(t){return(t=te["$coerce_to!"](t,f("Integer"),"to_int"))>0?this<<t:this>>-t}),P(d,"$>>",function(t){return(t=te["$coerce_to!"](t,f("Integer"),"to_int"))>0?this>>t:this<<-t}),P(d,"$[]",function(t){return(t=te["$coerce_to!"](t,f("Integer"),"to_int"))<0?0:t>=32?this<0?1:0:this>>t&1}),P(d,"$+@",function(){return+this}),P(d,"$-@",function(){return-this}),P(d,"$~",function(){return~this}),P(d,"$**",function(t){var i=this;return V(f("Integer"),t)?B(f("Integer")["$==="](i))||k(j(t,0))?Math.pow(i,t):f("Rational").$new(i,1)["$**"](t):E(i,0)&&(V(f("Float"),t)||V(f("Rational"),t))?f("Complex").$new(i,0)["$**"](t.$to_f()):k(null!=t.$$is_number)?Math.pow(i,t):i.$__coerced__("**",t)}),P(d,"$==",function(t){return t.$$is_number?this.valueOf()===t.valueOf():!!t["$respond_to?"]("==")&&t["$=="](this)}),W(d,"===","=="),P(d,"$abs",function(){return Math.abs(this)}),P(d,"$abs2",function(){return Math.abs(this*this)}),P(d,"$allbits?",function(t){return(this&(t=te["$coerce_to!"](t,f("Integer"),"to_int")))==t}),P(d,"$anybits?",function(t){return 0!=(this&te["$coerce_to!"](t,f("Integer"),"to_int"))}),P(d,"$angle",function(){var t=this;return k(t["$nan?"]())?t:0==t?1/t>0?0:Math.PI:t<0?Math.PI:0}),P(d,"$bit_length",function(){var t=this;if(V(f("Integer"),t)||a.$raise(f("NoMethodError").$new("undefined method `bit_length` for "+t+":Float","bit_length")),0===t||-1===t)return 0;for(var i=0,s=t<0?~t:t;0!=s;)i+=1,s>>>=1;return i}),P(d,"$ceil",function(t){null==t&&(t=0);var s=this.$to_f();if(s%1==0&&t>=0)return s;var c=Math.pow(10,t),u=Math.ceil(s*c)/c;return s%1==0&&(u=Math.round(u)),u},-1),P(d,"$chr",function(t){return l.enc(String.fromCharCode(this),t||"BINARY")},-1),P(d,"$denominator",function n(){var t=n.$$p||b,i=this;return n.$$p=null,k(i["$nan?"]())||k(i["$infinite?"]())?1:Y(i,H(i,"denominator",n,!1,!0),"denominator",[],t)}),P(d,"$downto",function n(t){var i=n.$$p||b,s=this;if(n.$$p=null,i===b)return X(s,"enum_for",["downto",t],function u(){var N=null==u.$$s?this:u.$$s;return V(f("Numeric"),t)||a.$raise(f("ArgumentError"),"comparison of "+N.$class()+" with "+t.$class()+" failed"),k(j(t,N))?0:K(U(N,t),1)},{$$s:s});t.$$is_number||a.$raise(f("ArgumentError"),"comparison of "+s.$class()+" with "+t.$class()+" failed");for(var c=s;c>=t;c--)i(c);return s}),P(d,"$equal?",function(t){var s;return k(s=this["$=="](t))?s:isNaN(this)&&isNaN(t)}),P(d,"$even?",function(){return this%2==0}),P(d,"$floor",function(t){null==t&&(t=0);var s=this.$to_f();if(s%1==0&&t>=0)return s;var c=Math.pow(10,t),u=Math.floor(s*c)/c;return s%1==0&&(u=Math.round(u)),u},-1),P(d,"$gcd",function(t){V(f("Integer"),t)||a.$raise(f("TypeError"),"not an integer");for(var s=Math.abs(this),c=Math.abs(t);s>0;){var u=s;s=c%s,c=u}return c}),P(d,"$gcdlcm",function(t){return[this.$gcd(t),this.$lcm(t)]}),P(d,"$integer?",function(){return this%1==0}),P(d,"$is_a?",function n(t){var i=n.$$p||b,s=this;return n.$$p=null,!!(x(t,f("Integer"))&&V(f("Integer"),s)||x(t,f("Integer"))&&V(f("Integer"),s)||x(t,f("Float"))&&V(f("Float"),s))||Y(s,H(s,"is_a?",n,!1,!0),"is_a?",[t],i)}),P(d,"$instance_of?",function n(t){var i=n.$$p||b,s=this;return n.$$p=null,!!(x(t,f("Integer"))&&V(f("Integer"),s)||x(t,f("Integer"))&&V(f("Integer"),s)||x(t,f("Float"))&&V(f("Float"),s))||Y(s,H(s,"instance_of?",n,!1,!0),"instance_of?",[t],i)}),P(d,"$lcm",function(t){var i=this;return V(f("Integer"),t)||a.$raise(f("TypeError"),"not an integer"),0==i||0==t?0:Math.abs(i*t/i.$gcd(t))}),P(d,"$next",function(){return this+1}),P(d,"$nobits?",function(t){return 0==(this&te["$coerce_to!"](t,f("Integer"),"to_int"))}),P(d,"$nonzero?",function(){return 0==this?b:this}),P(d,"$numerator",function n(){var t=n.$$p||b,i=this;return n.$$p=null,k(i["$nan?"]())||k(i["$infinite?"]())?i:Y(i,H(i,"numerator",n,!1,!0),"numerator",[],t)}),P(d,"$odd?",function(){return this%2!=0}),P(d,"$ord",q),P(d,"$pow",function(t,i){var s=this;return 0==s&&a.$raise(f("ZeroDivisionError"),"divided by 0"),void 0===i?s["$**"](t):(f("Integer")["$==="](t)||a.$raise(f("TypeError"),"Integer#pow() 2nd argument not allowed unless a 1st argument is integer"),t<0&&a.$raise(f("TypeError"),"Integer#pow() 1st argument cannot be negative when 2nd argument specified"),f("Integer")["$==="](i)||a.$raise(f("TypeError"),"Integer#pow() 2nd argument not allowed unless all arguments are integers"),0===i&&a.$raise(f("ZeroDivisionError"),"divided by 0"),s["$**"](t)["$%"](i))},-2),P(d,"$pred",function(){return this-1}),P(d,"$quo",function n(t){var i=n.$$p||b,s=this;return n.$$p=null,V(f("Integer"),s)?Y(s,H(s,"quo",n,!1,!0),"quo",[t],i):M(s,t)}),P(d,"$rationalize",function(t){var i,s,c=this,u=b,N=b;return arguments.length>1&&a.$raise(f("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),V(f("Integer"),c)?f("Rational").$new(c,1):k(c["$infinite?"]())?a.$raise(f("FloatDomainError"),"Infinity"):k(c["$nan?"]())?a.$raise(f("FloatDomainError"),"NaN"):k(null==t)?(s=f("Math").$frexp(c),u=null==(i=w(s))[0]?b:i[0],N=null==i[1]?b:i[1],u=f("Math").$ldexp(u,f(f("Float"),"MANT_DIG")).$to_i(),N=U(N,f(f("Float"),"MANT_DIG")),f("Rational").$new(I(2,u),1["$<<"](U(1,N))).$rationalize(f("Rational").$new(1,1["$<<"](U(1,N))))):c.$to_r().$rationalize(t)},-1),P(d,"$remainder",function(t){return U(this,I(t,M(this,t).$truncate()))}),P(d,"$round",function(t){var i,s,N,c=this;if(V(f("Integer"),c)){if(k(null==t)||(V(f("Float"),t)&&k(t["$infinite?"]())&&a.$raise(f("RangeError"),"Infinity"),t=te["$coerce_to!"](t,f("Integer"),"to_int"),k(E(t,f(f("Integer"),"MIN")))&&a.$raise(f("RangeError"),"out of bounds"),k(t>=0)))return c;if(.415241*(t=t["$-@"]())-.125>c.$size())return 0;var C=Math.pow(10,t),J=Math.floor((Math.abs(c)+C/2)/C)*C;return c<0?-J:J}if(k(c["$nan?"]())&&k(null==t)&&a.$raise(f("FloatDomainError"),"NaN"),t=te["$coerce_to!"](t||0,f("Integer"),"to_int"),k(D(t,0)))k(c["$nan?"]())?a.$raise(f("RangeError"),"NaN"):k(c["$infinite?"]())&&a.$raise(f("FloatDomainError"),"Infinity");else{if(x(t,0))return Math.round(c);if(k(c["$nan?"]())||k(c["$infinite?"]()))return c}return s=f("Math").$frexp(c),N=null==(i=w(s))[1]?b:i[1],k(y(t,U(K(f(f("Float"),"DIG"),2),k(j(N,0))?M(N,4):U(M(N,3),1))))?c:k(E(t,(k(j(N,0))?K(M(N,3),1):M(N,4))["$-@"]()))?0:Math.round(c*Math.pow(10,t))/Math.pow(10,t)},-1),P(d,"$times",function n(){var t=n.$$p||b,i=this;if(n.$$p=null,!k(t))return X(i,"enum_for",["times"],function c(){return null==c.$$s?this:c.$$s},{$$s:i});for(var s=0;s<i;s++)t(s);return i}),P(d,"$to_f",q),P(d,"$to_i",function(){var t=this;return t<0?Math.ceil(t):Math.floor(t)}),P(d,"$to_r",function(){var t,i,s=this,c=b,u=b;return V(f("Integer"),s)?f("Rational").$new(s,1):(i=f("Math").$frexp(s),c=null==(t=w(i))[0]?b:t[0],u=null==t[1]?b:t[1],c=f("Math").$ldexp(c,f(f("Float"),"MANT_DIG")).$to_i(),u=U(u,f(f("Float"),"MANT_DIG")),I(c,f(f("Float"),"RADIX")["$**"](u)).$to_r())}),P(d,"$to_s",function(t){var i=this;return null==t&&(t=10),t=te["$coerce_to!"](t,f("Integer"),"to_int"),(k(E(t,2))||k(j(t,36)))&&a.$raise(f("ArgumentError"),"invalid radix "+t),x(i,0)&&k(1/i==-1/0)?"-0.0":i.toString(t)},-1),P(d,"$truncate",function(t){null==t&&(t=0);var s=this.$to_f();if(s%1==0&&t>=0)return s;var c=Math.pow(10,t),u=parseInt(s*c,10)/c;return s%1==0&&(u=Math.round(u)),u},-1),P(d,"$digits",function(t){var i=this;null==t&&(t=10),E(i,0)&&a.$raise(f(f("Math"),"DomainError"),"out of domain"),t=te["$coerce_to!"](t,f("Integer"),"to_int"),k(E(t,2))&&a.$raise(f("ArgumentError"),"invalid radix "+t),i!=parseInt(i)&&a.$raise(f("NoMethodError"),"undefined method `digits' for "+i.$inspect());var s=i,c=[];if(0==i)return[0];for(;0!=s;)c.push(s%t),s=parseInt(s/t,10);return c},-1),P(d,"$divmod",function n(t){var i=n.$$p||b,s=this;return n.$$p=null,k(s["$nan?"]())||k(t["$nan?"]())?a.$raise(f("FloatDomainError"),"NaN"):k(s["$infinite?"]())?a.$raise(f("FloatDomainError"),"Infinity"):Y(s,H(s,"divmod",n,!1,!0),"divmod",[t],i)}),P(d,"$upto",function n(t){var i=n.$$p||b,s=this;if(n.$$p=null,i===b)return X(s,"enum_for",["upto",t],function u(){var N=null==u.$$s?this:u.$$s;return V(f("Numeric"),t)||a.$raise(f("ArgumentError"),"comparison of "+N.$class()+" with "+t.$class()+" failed"),k(E(t,N))?0:K(U(t,N),1)},{$$s:s});t.$$is_number||a.$raise(f("ArgumentError"),"comparison of "+s.$class()+" with "+t.$class()+" failed");for(var c=s;c<=t;c++)i(c);return s}),P(d,"$zero?",function(){return 0==this}),P(d,"$size",g(4)),P(d,"$nan?",function(){return isNaN(this)}),P(d,"$finite?",function(){var t=this;return t!=1/0&&t!=-1/0&&!isNaN(t)}),P(d,"$infinite?",function(){return this==1/0?1:this==-1/0?-1:b}),P(d,"$positive?",function(){var t=this;return 0!=t&&(t==1/0||1/t>0)}),P(d,"$negative?",function(){return this==-1/0||1/this<0}),P(d,"$next_float",function(){var t=this;return x(t,f(f("Float"),"INFINITY"))?f(f("Float"),"INFINITY"):k(t["$nan?"]())?f(f("Float"),"NAN"):y(t,0)?r(Math.abs(t)):e(t)}),P(d,"$prev_float",function(){var t=this;return x(t,f(f("Float"),"INFINITY")["$-@"]())?f(f("Float"),"INFINITY")["$-@"]():k(t["$nan?"]())?f(f("Float"),"NAN"):j(t,0)?e(t):-r(Math.abs(t))}),W(d,"arg","angle"),W(d,"eql?","=="),W(d,"fdiv","/"),W(d,"inspect","to_s"),W(d,"kind_of?","is_a?"),W(d,"magnitude","abs"),W(d,"modulo","%"),W(d,"object_id","__id__"),W(d,"phase","angle"),W(d,"succ","next"),W(d,"to_int","to_i")}(0,f("Numeric"),_),z("::","Fixnum",f("Number")),v=f("Numeric"),S=_,G=[d=Q("::",v,"Integer")].concat(S),d.$$is_number_class=!0,d.$$is_integer_class=!0,$=[m=l.get_singleton_class(d)].concat(G),r=l.$r($),P(m,"$allocate",function(){return a.$raise(f("TypeError"),"allocator undefined for "+this.$name())}),l.udef(m,"$new"),P(m,"$sqrt",function(n){return(n=te["$coerce_to!"](n,f("Integer"),"to_int"))<0&&a.$raise(f(f("Math"),"DomainError"),'Numerical argument is out of domain - "isqrt"'),parseInt(Math.sqrt(n),10)}),P(m,"$try_convert",function(n){return r("Opal")["$coerce_to?"](n,this,"to_int")}),z(d,"MAX",Math.pow(2,30)-1),z(d,"MIN",-Math.pow(2,30)),function(T,v,S){var d=Q("::",v,"Float");return[d].concat(S),d.$$is_number_class=!0,function(m,h){P(m,"$allocate",function(){return a.$raise(f("TypeError"),"allocator undefined for "+this.$name())}),l.udef(m,"$new"),P(m,"$===",function(r){return!!r.$$is_number})}(l.get_singleton_class(d)),z(d,"INFINITY",1/0),z(d,"MAX",Number.MAX_VALUE),z(d,"MIN",Number.MIN_VALUE),z(d,"NAN",NaN),z(d,"DIG",15),z(d,"MANT_DIG",53),z(d,"RADIX",2),z(d,"EPSILON",Number.EPSILON||2220446049250313e-31)}(0,f("Numeric"),_)},Opal.modules["corelib/range"]=function(l){var Q=l.klass,te=l.truthy,a=l.Kernel,P=l.def,V=l.not,k=l.send2,j=l.find_super,B=l.rb_lt,E=l.rb_le,W=l.send,Y=l.eqeq,H=l.eqeqeq,X=l.return_ivar,K=l.rb_gt,U=l.rb_minus,x=l.Opal,q=l.rb_divide,M=l.rb_plus,w=l.rb_times,I=l.rb_ge,D=l.thrower,y=l.alias,R=l.nil,_=l.$$$;return l.top.$require("corelib/enumerable"),function(b,f,T){var v=Q("::",null,"Range"),S=[v].concat([]),d=l.$r(S),G=v.$$prototype;function m(h){return h.begin===R||h.end===R||h.begin===-1/0||h.end===1/0||h.begin===1/0||h.end===-1/0}return G.begin=G.end=G.excl=R,v.$include(_("Enumerable")),v.$$prototype.$$is_range=!0,v.$attr_reader("begin","end"),P(v,"$initialize",function($,r,e){var n=this;return null==e&&(e=!1),te(n.begin)&&a.$raise(_("NameError"),"'initialize' called twice"),te($["$<=>"](r))||te($["$nil?"]())||te(r["$nil?"]())||a.$raise(_("ArgumentError"),"bad value for range"),n.begin=$,n.end=r,n.excl=e},-3),P(v,"$===",function($){return this["$include?"]($)}),P(v,"$count",function h(){var $=h.$$p||R,r=this;return h.$$p=null,V($!==R)&&te(m(r))?_(_("Float"),"INFINITY"):k(r,j(r,"count",h,!1,!0),"count",[],$)}),P(v,"$to_a",function h(){var $=h.$$p||R,r=this;return h.$$p=null,te(m(r))&&a.$raise(_("TypeError"),"cannot convert endless range to an array"),k(r,j(r,"to_a",h,!1,!0),"to_a",[],$)}),P(v,"$cover?",function($){var e,s,r=this,n=R,t=R,i=R;return e=te(n=te(t=te(i=r.begin["$nil?"]())?-1:i)?t:r.begin["$<=>"]($))&&n,s=te(n=te(t=te(i=r.end["$nil?"]())?-1:i)?t:$["$<=>"](r.end))&&n,te(n=te(t=te(r.excl)?te(i=s)?B(s,0):i:te(i=s)?E(s,0):i)?e:t)?E(e,0):n}),P(v,"$each",function h(){var n,i,s,$=h.$$p||R,r=this,e=R,t=R;if(h.$$p=null,$===R)return W(r,"enum_for",["each"],function c(){return(null==c.$$s?this:c.$$s).$size()},{$$s:r});if(r.begin.$$is_number&&r.end.$$is_number){for((r.begin%1!=0||r.end%1!=0)&&a.$raise(_("TypeError"),"can't iterate from Float"),i=r.begin,s=r.end+(te(r.excl)?0:1);i<s;i++)$(i);return r}if(r.begin.$$is_string&&r.end.$$is_string)return W(r.begin,"upto",[r.end,r.excl],$.$to_proc()),r;for(n=r.end,te((e=r.begin)["$respond_to?"]("succ"))||a.$raise(_("TypeError"),"can't iterate from "+e.$class());te(te(t=r.end["$nil?"]())?t:B(e["$<=>"](n),0));)l.yield1($,e),e=e.$succ();return V(r.excl)&&Y(e,n)&&l.yield1($,e),r}),P(v,"$eql?",function($){var r=this,e=R,n=R;return!!H(_("Range"),$)&&(te(e=te(n=r.excl["$==="]($["$exclude_end?"]()))?r.begin["$eql?"]($.$begin()):n)?r.end["$eql?"]($.$end()):e)}),P(v,"$exclude_end?",X("excl")),P(v,"$first",function h($){var r=h.$$p||R,e=this;return h.$$p=null,te(e.begin["$nil?"]())&&a.$raise(_("RangeError"),"cannot get the minimum of beginless range"),te(null==$)?e.begin:k(e,j(e,"first",h,!1,!0),"first",[$],r)},-1),P(v,"$last",function($){var r=this;return te(r.end["$nil?"]())&&a.$raise(_("RangeError"),"cannot get the maximum of endless range"),te(null==$)?r.end:r.$to_a().$last($)},-1),P(v,"$max",function h(){var $=h.$$p||R,r=this;return h.$$p=null,te(r.end["$nil?"]())?a.$raise(_("RangeError"),"cannot get the maximum of endless range"):$!==R?k(r,j(r,"max",h,!1,!0),"max",[],$):V(r.begin["$nil?"]())&&(te(K(r.begin,r.end))||te(r.excl)&&Y(r.begin,r.end))?R:r.excl?r.end-1:r.end}),P(v,"$min",function h(){var $=h.$$p||R,r=this;return h.$$p=null,te(r.begin["$nil?"]())?a.$raise(_("RangeError"),"cannot get the minimum of beginless range"):$!==R?k(r,j(r,"min",h,!1,!0),"min",[],$):V(r.end["$nil?"]())&&(te(K(r.begin,r.end))||te(r.excl)&&Y(r.begin,r.end))?R:r.begin}),P(v,"$size",function(){var $=this,r=R,e=R,n=R;return r=_(_("Float"),"INFINITY"),Y($.begin,r)&&V($.end["$nil?"]())||Y($.end,r["$-@"]())&&V($.begin["$nil?"]())?0:te(m($))?r:H(_("Numeric"),$.begin)&&H(_("Numeric"),$.end)?(e=$.begin,n=$.end,te($.excl)&&(n=U(n,1)),te(B(n,e))?0:(Math.abs(n-e)+1).$to_i()):R}),P(v,"$step",function h($){var r=h.$$p||R,e=this,n=R,t=R;function i(){null==$?$=1:$.$$is_number||($=x["$coerce_to!"]($,_("Integer"),"to_int")),$<0?a.$raise(_("ArgumentError"),"step can't be negative"):0===$&&a.$raise(_("ArgumentError"),"step can't be 0")}return h.$$p=null,r===R?(te(e.begin["$is_a?"](d("Numeric")))||te(e.begin["$nil?"]()))&&(te(e.end["$is_a?"](d("Numeric")))||te(e.end["$nil?"]()))&&V(te(n=e.begin["$nil?"]())?e.end["$nil?"]():n)?_(_("Enumerator"),"ArithmeticSequence").$new(e,$,"step"):W(e,"enum_for",["step",$],function(){return i(),function s(){if(!e.begin["$respond_to?"]("succ")||e.begin.$$is_string&&e.end.$$is_string)return R;if($%1==0)return q(e.$size(),$).$ceil();var ne,c=e.begin,u=e.end,N=Math.abs,C=Math.floor,J=(N(c)+N(u)+N(u-c))/N($)*_(_("Float"),"EPSILON");return J>.5&&(J=.5),e.excl?(ne=C((u-c)/$-J))*$+c<u&&ne++:ne=C((u-c)/$+J)+1,ne}()}):(i(),te(e.begin.$$is_number&&e.end.$$is_number)?(t=0,function(){try{var c=D("break");W(e,"loop",[],function u(){var C,N=null==u.$$s?this:u.$$s;return null==N.begin&&(N.begin=R),null==N.excl&&(N.excl=R),null==N.end&&(N.end=R),C=M(N.begin,w(t,$)),te(N.excl)?te(I(C,N.end))&&c.$throw():te(K(C,N.end))&&c.$throw(),l.yield1(r,C),t=M(t,1)},{$$s:e})}catch(u){if(u===c)return u.$v;throw u}}()):(e.begin.$$is_string&&e.end.$$is_string&&$%1!=0&&a.$raise(_("TypeError"),"no implicit conversion to float from string"),W(e,"each_with_index",[],function(u,N){return null==u&&(u=R),null==N&&(N=R),Y(N["$%"]($),0)?l.yield1(r,u):R})),e)},-1),P(v,"$%",function($){var r=this;return te(r.begin["$is_a?"](d("Numeric")))&&te(r.end["$is_a?"](d("Numeric")))?_(_("Enumerator"),"ArithmeticSequence").$new(r,$,"%"):r.$step($)}),P(v,"$bsearch",function h(){var $=h.$$p||R,r=this;return h.$$p=null,$===R?r.$enum_for("bsearch"):(te(m(r)&&(r.begin.$$is_number||r.end.$$is_number))&&a.$raise(_("NotImplementedError"),"Can't #bsearch an infinite range"),te(r.begin.$$is_number&&r.end.$$is_number)||a.$raise(_("TypeError"),"can't do binary search for "+r.begin.$class()),W(r.$to_a(),"bsearch",[],$.$to_proc()))}),P(v,"$to_s",function(){var $=this,r=R;return(te(r=$.begin)?r:"")+(te($.excl)?"...":"..")+(te(r=$.end)?r:"")}),P(v,"$inspect",function(){var $=this,r=R;return(te(r=$.begin)?$.begin.$inspect():r)+(te($.excl)?"...":"..")+(te(r=$.end)?$.end.$inspect():r)}),P(v,"$marshal_load",function($){var r=this;return r.begin=$["$[]"]("begin"),r.end=$["$[]"]("end"),r.excl=$["$[]"]("excl")}),P(v,"$hash",function(){var $=this;return[$.begin,$.end,$.excl].$hash()}),y(v,"==","eql?"),y(v,"include?","cover?"),y(v,"member?","cover?")}()},Opal.modules["corelib/proc"]=function(l){var q,Q=l.slice,a=l.truthy,P=l.Kernel,V=l.defs,k=l.def,j=l.send,B=l.to_a,E=l.return_self,W=l.ensure_kwargs,Y=l.Opal,H=l.alias,X=l.nil,K=l.$$$;return q=(0,l.klass)("::",Function,"Proc"),l.prop(q.$$prototype,"$$is_proc",!0),l.prop(q.$$prototype,"$$is_lambda",!1),V(q,"$new",function M(){var w=M.$$p||X;return M.$$p=null,a(w)||P.$raise(K("ArgumentError"),"tried to create a Proc object without a block"),w}),k(q,"$call",function M(w){var y,I=M.$$p||X,g=this;M.$$p=null,y=Q(arguments),I!==X&&(g.$$p=I);var z,R=g.$$brk,_=g.$$ret;if(R||_&&g.$$is_lambda)try{z=g.$$is_lambda?g.apply(null,y):l.yieldX(g,y)}catch(b){if(b===R)return b.$v;if(g.$$is_lambda&&b===_)return b.$v;throw b}else z=g.$$is_lambda?g.apply(null,y):l.yieldX(g,y);return z},-1),k(q,"$>>",function M(w){return M.$$p=null,j(P,"proc",[],function y(g){var R,f,z=y.$$p||X,b=null==y.$$s?this:y.$$s;return y.$$p=null,R=Q(arguments),f=j(b,"call",B(R),z.$to_proc()),w.$call(f)},{$$arity:-1,$$s:this})}),k(q,"$<<",function M(w){return M.$$p=null,j(P,"proc",[],function y(g){var R,f,z=y.$$p||X,b=null==y.$$s?this:y.$$s;return y.$$p=null,R=Q(arguments),f=j(w,"call",B(R),z.$to_proc()),b.$call(f)},{$$arity:-1,$$s:this})}),k(q,"$to_proc",E),k(q,"$lambda?",function(){return!!this.$$is_lambda}),k(q,"$arity",function(){var w=this;return w.$$is_curried?-1:null!=w.$$arity?w.$$arity:w.length}),k(q,"$source_location",function(){var I=X;return this.$$is_curried?X:a(I=this.$$source_location)?I:X}),k(q,"$binding",function(){var I=this;return I.$$is_curried&&P.$raise(K("ArgumentError"),"Can't create Binding"),a(K("::","Binding","skip_raise")?"constant":X)?K("Binding").$new(X,[],I.$$s,I.$source_location()):X}),k(q,"$parameters",function(w){var D=this;if(w=W(w),D.$$is_curried)return[["rest"]];if(D.$$parameters){if(w.$$smap.lambda??D.$$is_lambda)return D.$$parameters;var g,z,y=[];for(g=0,z=D.$$parameters.length;g<z;g++){var R=D.$$parameters[g];"req"===R[0]&&(R=["opt",R[1]]),y.push(R)}return y}return[]},-1),k(q,"$curry",function(w){var I=this;function D(){var z,y=Q(arguments),g=y.length;return g>w&&I.$$is_lambda&&!I.$$is_curried&&P.$raise(K("ArgumentError"),"wrong number of arguments ("+g+" for "+w+")"),g>=w?I.$call.apply(I,y):(z=function(){return D.apply(null,y.concat(Q(arguments)))},z.$$is_lambda=I.$$is_lambda,z.$$is_curried=!0,z)}return void 0===w?w=I.length:(w=Y["$coerce_to!"](w,K("Integer"),"to_int"),I.$$is_lambda&&w!==I.length&&P.$raise(K("ArgumentError"),"wrong number of arguments ("+w+" for "+I.length+")")),D.$$is_lambda=I.$$is_lambda,D.$$is_curried=!0,D},-1),k(q,"$dup",function(){var w=this,I=w.$$original_proc||w,D=function(){return I.apply(this,arguments)};for(var y in w)w.hasOwnProperty(y)&&(D[y]=w[y]);return D}),H(q,"===","call"),H(q,"clone","dup"),H(q,"yield","call"),H(q,"[]","call")},Opal.modules["corelib/method"]=function(l){var X,K,Q=l.klass,te=l.def,a=l.truthy,P=l.slice,V=l.alias,k=l.Kernel,j=l.send,B=l.to_a,E=l.nil,W=l.$$$;return(K=(X=Q("::",null,"Method")).$$prototype).method=K.receiver=K.owner=K.name=E,X.$attr_reader("owner","receiver","name"),te(X,"$initialize",function(x,q,M,w){var I=this;return I.receiver=x,I.owner=q,I.name=w,I.method=M}),te(X,"$arity",function(){return this.method.$arity()}),te(X,"$parameters",function(){return this.method.$$parameters}),te(X,"$source_location",function(){var q;return a(q=this.method.$$source_location)?q:["(eval)",0]}),te(X,"$comments",function(){var q;return a(q=this.method.$$comments)?q:[]}),te(X,"$call",function U(x){var w,q=U.$$p||E,I=this;return U.$$p=null,w=P(arguments),I.method.$$p=q,I.method.apply(I.receiver,w)},-1),te(X,"$curry",function(x){return this.method.$curry(x)},-1),te(X,"$>>",function(x){return this.method["$>>"](x)}),te(X,"$<<",function(x){return this.method["$<<"](x)}),te(X,"$unbind",function(){var x=this;return W("UnboundMethod").$new(x.receiver.$class(),x.owner,x.method,x.name)}),te(X,"$to_proc",function(){var x=this,q=x.$call.bind(x);return q.$$unbound=x.method,q.$$is_lambda=!0,q.$$arity=null==x.method.$$arity?x.method.length:x.method.$$arity,q.$$parameters=x.method.$$parameters,q}),te(X,"$inspect",function(){var x=this;return"#<"+x.$class()+": "+x.receiver.$class()+"#"+x.name+" (defined in "+x.owner+" in "+x.$source_location().$join(":")+")>"}),V(X,"[]","call"),V(X,"===","call"),function(Y,H){var X=Q("::",null,"UnboundMethod"),K=X.$$prototype;return K.method=K.owner=K.name=K.source=E,X.$attr_reader("source","owner","name"),te(X,"$initialize",function(x,q,M,w){var I=this;return I.source=x,I.owner=q,I.method=M,I.name=w}),te(X,"$arity",function(){return this.method.$arity()}),te(X,"$parameters",function(){return this.method.$$parameters}),te(X,"$source_location",function(){var q;return a(q=this.method.$$source_location)?q:["(eval)",0]}),te(X,"$comments",function(){var q;return a(q=this.method.$$comments)?q:[]}),te(X,"$bind",function(x){var q=this;if(q.owner.$$is_module||l.is_a(x,q.owner))return W("Method").$new(x,q.owner,q.method,q.name);k.$raise(W("TypeError"),"can't bind singleton method to a different class (expected "+x+".kind_of?("+q.owner+" to be true)")}),te(X,"$bind_call",function U(x,q){var I,M=U.$$p||E;return U.$$p=null,I=P(arguments,1),j(this.$bind(x),"call",B(I),M.$to_proc())},-2),te(X,"$inspect",function(){var x=this;return"#<"+x.$class()+": "+x.source+"#"+x.name+" (defined in "+x.owner+" in "+x.$source_location().$join(":")+")>"})}()},Opal.modules["corelib/variables"]=function(l){var Q=l.gvars,te=l.const_set,a=l.Object,P=l.hash2,V=l.nil;return Q["&"]=Q["~"]=Q["`"]=Q["'"]=V,Q.LOADED_FEATURES=Q['"']=l.loaded_features,Q.LOAD_PATH=Q[":"]=[],Q["/"]="\n",Q[","]=V,te("::","ARGV",[]),te("::","ARGF",a.$new()),te("::","ENV",P([],{})),Q.VERBOSE=!1,Q.DEBUG=!1,Q.SAFE=0},Opal.modules["corelib/io"]=function(l){var y,f,T,te=l.const_set,a=l.not,P=l.truthy,V=l.def,k=l.return_ivar,j=l.return_val,B=l.slice,E=l.Kernel,W=l.gvars,Y=l.send,H=l.to_a,X=l.rb_plus,K=l.neqeq,U=l.range,x=l.hash2,q=l.eqeq,M=l.to_ary,w=l.rb_gt,I=l.assign_ivar_val,D=l.alias,g=l.nil,z=l.$$$;(T=(f=(0,l.klass)("::",null,"IO")).$$prototype).read_buffer=T.closed=g,te(f,"SEEK_SET",0),te(f,"SEEK_CUR",1),te(f,"SEEK_END",2),te(f,"SEEK_DATA",3),te(f,"SEEK_HOLE",4),te(f,"READABLE",1),te(f,"WRITABLE",4),f.$attr_reader("eof"),f.$attr_accessor("read_proc","sync","tty","write_proc"),V(f,"$initialize",function(S,d){var G=this;return null==d&&(d="r"),G.fd=S,G.flags=d,G.eof=!1,P(d["$include?"]("r"))&&a(d["$match?"](/[wa+]/))?G.closed="write":P(d["$match?"](/[wa]/))&&a(d["$match?"](/[r+]/))?G.closed="read":g},-2),V(f,"$fileno",k("fd")),V(f,"$tty?",function(){return 1==this.tty}),V(f,"$write",function(S){return this.write_proc(S),S.$size()}),V(f,"$flush",j(g)),V(f,"$<<",function(S){return this.$write(S),this}),V(f,"$print",function(S){var G;null==W[","]&&(W[","]=g);for(var h=0,$=(G=B(arguments)).length;h<$;h++)G[h]=E.$String(G[h]);return this.$write(G.join(W[","])),g},-1),V(f,"$puts",function(S){var G,h,m=this;if(0===(G=B(arguments)).length)return m.$write("\n"),g;for(var $=0,r=G.length;$<r;$++)if(G[$].$$is_array){var e=G[$].$flatten();e.length>0&&Y(m,"puts",H(e))}else(h=G[$].$$is_string?G[$].valueOf():E.$String(G[$])).endsWith("\n")||(h+="\n"),m.$write(h);return g},-1),V(f,"$getc",function(){var d,S=this,G=g,m=g;S.read_buffer=P(d=S.read_buffer)?d:"",G="";do{if(S.read_buffer=X(S.read_buffer,G),K(S.read_buffer,""))return m=S.read_buffer["$[]"](0),S.read_buffer=S.read_buffer["$[]"](U(1,-1,!1)),m}while(P(G=S.$sysread_noraise(1)));return g}),V(f,"$getbyte",function(){var S;return(S=this.$getc())===g||null==S?g:S.$ord()}),V(f,"$readbyte",function(){return this.$readchar().$ord()}),V(f,"$readchar",function(){var d;return P(d=this.$getc())?d:E.$raise(z("EOFError"),"end of file reached")}),V(f,"$readline",function(S){var d,h;return d=B(arguments),P(h=Y(this,"gets",H(d)))?h:E.$raise(z("EOFError"),"end of file reached")},-1),V(f,"$gets",function(S,d,G){var m,h,r,n,$=this,e=g,t=g,i=g,s=g;null==W["/"]&&(W["/"]=g),null==S&&(S=!1),null==d&&(d=g),null==G&&(G=x([],{})),P(S.$$is_number)&&a(d)&&(S=(m=[!1,S,d])[0],d=m[1],G=m[2]),P(S.$$is_hash)&&a(d)&&q(G,x([],{}))?(S=(m=[!1,g,S])[0],d=m[1],G=m[2]):P(d.$$is_hash)&&q(G,x([],{}))&&(S=(m=[S,g,d])[0],d=m[1],G=m[2]),r=S,q(S,!1)&&(S=W["/"]),q(S,"")&&(S=/\r?\n\r?\n/),S=P(e=S)?e:"",q(r,"")||(S=S.$to_str()),n=q(r,"")?2:S.$length(),q(S," ")&&(S=/ /),$.read_buffer=P(e=$.read_buffer)?e:"",t="",i=g;do{if($.read_buffer=X($.read_buffer,t),K(S,"")&&P(P(S.$$is_regexp)?$.read_buffer["$match?"](S):$.read_buffer["$include?"](S))){s=$.read_buffer,h=$.read_buffer.$split(S,2),i=null==(m=M(h))[0]?g:m[0],$.read_buffer=null==m[1]?g:m[1],K(i,s)&&(i=X(i,s["$[]"](i.$length(),n)));break}}while(P(t=$.$sysread_noraise(q(S,"")?65536:1)));return P(i)||(i=(m=[P(e=$.read_buffer)?e:"",""])[0],$.read_buffer=m[1],q(i,"")&&(i=g)),P(i)&&(P(d)&&(i=i["$[]"](l.Range.$new(0,d,!0)),$.read_buffer=X(i["$[]"](l.Range.$new(d,-1,!1)),$.read_buffer)),P(G["$[]"]("chomp"))&&(i=i.$sub(/\r?\n$/,"")),q(r,"")&&(i=i.$sub(/^[\r\n]+/,""))),q(r,!1)&&(W._=i),i},-1),V(f,"$sysread",function(S){var G;return P(G=this.read_proc(S))?G:(this.eof=!0,E.$raise(z("EOFError"),"end of file reached"))}),V(f,"$sysread_noraise",function(S){try{return this.$sysread(S)}catch(G){if(!l.rescue(G,[z("EOFError")]))throw G;try{return g}finally{l.pop_exception()}}}),V(f,"$readpartial",function(S){var d,h,G=this,m=g,$=g;return G.read_buffer=P(m=G.read_buffer)?m:"",h=G.$sysread(S),$=(d=[X(G.read_buffer,P(m=h)?m:""),""])[0],G.read_buffer=d[1],q($,"")&&($=g),$}),V(f,"$read",function(S){var d,G=this,m=g,h=g,$=g;null==S&&(S=g),G.read_buffer=P(m=G.read_buffer)?m:"",h="",$=g;do{if(G.read_buffer=X(G.read_buffer,h),P(S)&&P(w(G.read_buffer.$length(),S)))return $=(d=[G.read_buffer["$[]"](l.Range.$new(0,S,!0)),G.read_buffer["$[]"](l.Range.$new(S,-1,!1))])[0],G.read_buffer=d[1],$}while(P(h=G.$sysread_noraise(P(m=S)?m:65536)));return $=(d=[G.read_buffer,""])[0],G.read_buffer=d[1],$},-1),V(f,"$readlines",function(S){return null==W["/"]&&(W["/"]=g),null==S&&(S=W["/"]),this.$each_line(S).$to_a()},-1),V(f,"$each",function v(S,d){var m,h,$,G=v.$$p||g,r=this,e=g;if(null==W["/"]&&(W["/"]=g),v.$$p=null,(m=B(arguments)).length>0&&(h=m.shift()),null==h&&(h=W["/"]),$=m,G===g)return Y(r,"enum_for",["each",h].concat(H($)));for(;P(e=Y(r,"gets",[h].concat(H($))));)l.yield1(G,e);return r},-1),V(f,"$each_byte",function v(){var S=v.$$p||g,d=this,G=g;if(v.$$p=null,S===g)return d.$enum_for("each_byte");for(;P(G=d.$getbyte());)l.yield1(S,G);return d}),V(f,"$each_char",function v(){var S=v.$$p||g,d=this,G=g;if(v.$$p=null,S===g)return d.$enum_for("each_char");for(;P(G=d.$getc());)l.yield1(S,G);return d}),V(f,"$close",I("closed","both")),V(f,"$close_read",function(){return this.closed=q(this.closed,"write")?"both":"read"}),V(f,"$close_write",function(){return this.closed=q(this.closed,"read")?"both":"write"}),V(f,"$closed?",function(){return this.closed["$=="]("both")}),V(f,"$closed_read?",function(){var d;return P(d=this.closed["$=="]("read"))?d:this.closed["$=="]("both")}),V(f,"$closed_write?",function(){var d;return P(d=this.closed["$=="]("write"))?d:this.closed["$=="]("both")}),V(f,"$check_writable",function(){return P(this["$closed_write?"]())?E.$raise(z("IOError"),"not opened for writing"):g}),V(f,"$check_readable",function(){return P(this["$closed_read?"]())?E.$raise(z("IOError"),"not opened for reading"):g}),D(f,"each_line","each"),D(f,"eof?","eof"),te("::","STDIN",W.stdin=z("IO").$new(0,"r")),te("::","STDOUT",W.stdout=z("IO").$new(1,"w")),te("::","STDERR",W.stderr=z("IO").$new(2,"w"));var R=l.global.console;return z("STDOUT")["$write_proc="]("object"==typeof process&&"object"==typeof process.stdout?function(_){process.stdout.write(_)}:function(_){R.log(_)}),z("STDERR")["$write_proc="]("object"==typeof process&&"object"==typeof process.stderr?function(_){process.stderr.write(_)}:function(_){R.warn(_)}),y=[function(_){var b=prompt();return null!==b?b+"\n":g}],Y(z("STDIN"),"read_proc=",y),y[y.length-1]},Opal.modules["opal/regexp_anchors"]=function(l){var j,B,E,W,te=l.const_set,a=[],V=l.$$$;return j=a,E=[B=(0,l.module)(a[0],"Opal")].concat(j),W=l.$r(E),te(B,"REGEXP_START","^"),te(B,"REGEXP_END","$"),te(B,"FORBIDDEN_STARTING_IDENTIFIER_CHARS","\\u0001-\\u002F\\u003A-\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),te(B,"FORBIDDEN_ENDING_IDENTIFIER_CHARS","\\u0001-\\u0020\\u0022-\\u002F\\u003A-\\u003E\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),te(B,"INLINE_IDENTIFIER_REGEXP",W("Regexp").$new("[^"+V(B,"FORBIDDEN_STARTING_IDENTIFIER_CHARS")+"]*[^"+V(B,"FORBIDDEN_ENDING_IDENTIFIER_CHARS")+"]")),te(B,"FORBIDDEN_CONST_NAME_CHARS","\\u0001-\\u0020\\u0021-\\u002F\\u003B-\\u003F\\u0040\\u005B-\\u005E\\u0060\\u007B-\\u007F"),te(B,"CONST_NAME_REGEXP",W("Regexp").$new(V(B,"REGEXP_START")+"(::)?[A-Z][^"+V(B,"FORBIDDEN_CONST_NAME_CHARS")+"]*"+V(B,"REGEXP_END")))},Opal.modules["opal/mini"]=function(l){var Q=l.Object;return Q.$require("opal/base"),Q.$require("corelib/nil"),Q.$require("corelib/boolean"),Q.$require("corelib/string"),Q.$require("corelib/comparable"),Q.$require("corelib/enumerable"),Q.$require("corelib/enumerator"),Q.$require("corelib/array"),Q.$require("corelib/hash"),Q.$require("corelib/number"),Q.$require("corelib/range"),Q.$require("corelib/proc"),Q.$require("corelib/method"),Q.$require("corelib/regexp"),Q.$require("corelib/variables"),Q.$require("corelib/io"),Q.$require("opal/regexp_anchors")},Opal.modules["corelib/kernel/format"]=function(l){var K,Q=l.coerce_to,a=l.slice,P=l.truthy,V=l.eqeq,k=l.Opal,j=l.Kernel,B=l.gvars,W=l.alias,Y=l.nil,H=l.$$$;return(0,l.def)(K=(0,l.module)("::","Kernel"),"$format",function(x,q){var M,w,I=Y;null==B.DEBUG&&(B.DEBUG=Y),M=a(arguments,1),V((w=M).$length(),1)&&P(w["$[]"](0)["$respond_to?"]("to_ary"))&&(I=k["$coerce_to?"](w["$[]"](0),H("Array"),"to_ary"),P(I["$nil?"]())||(w=I.$to_a()));var g,z,_,b,f,T,v,S,d,G,m,h,$,r,e,i,D="",y=0,R=x.length,n=1,t=0,J=16,ne=32,oe=128;function ae(){i&ne&&j.$raise(H("ArgumentError"),"flag after width"),i&oe&&j.$raise(H("ArgumentError"),"flag after precision")}function $e(){i&ne&&j.$raise(H("ArgumentError"),"width given twice"),i&oe&&j.$raise(H("ArgumentError"),"width after precision")}function re(o){return o>=w.length&&j.$raise(H("ArgumentError"),"too few arguments"),w[o]}function le(){switch(t){case-1:j.$raise(H("ArgumentError"),"unnumbered("+n+") mixed with numbered");case-2:j.$raise(H("ArgumentError"),"unnumbered("+n+") mixed with named")}return re((t=n++)-1)}function ee(o){return t>0&&j.$raise(H("ArgumentError"),"numbered("+o+") after unnumbered("+t+")"),-2===t&&j.$raise(H("ArgumentError"),"numbered("+o+") after named"),o<1&&j.$raise(H("ArgumentError"),"invalid index - "+o+"$"),t=-1,re(o-1)}function A(){return void 0===e?le():e}function L(o){for(var p,F="";;z++){if(z===R&&j.$raise(H("ArgumentError"),"malformed format string - %*[0-9]"),x.charCodeAt(z)<48||x.charCodeAt(z)>57)return z--,(p=parseInt(F,10)||0)>2147483647&&j.$raise(H("ArgumentError"),o+" too big"),p;F+=x.charAt(z)}}function O(o){var p,F=L(o);return"$"===x.charAt(z+1)?(z++,p=ee(F)):p=le(),p.$to_int()}for(z=x.indexOf("%");-1!==z;z=x.indexOf("%",z)){switch(b=void 0,i=0,T=-1,v=-1,e=void 0,g=z,z++,x.charAt(z)){case"%":y=z;case"":case"\n":case"\0":z++;continue}e:for(;z<R;z++)switch(x.charAt(z)){case" ":ae(),i|=J;continue e;case"#":ae(),i|=1;continue e;case"+":ae(),i|=4;continue e;case"-":ae(),i|=2;continue e;case"0":ae(),i|=8;continue e;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":if(S=L("width"),"$"===x.charAt(z+1)){if(z+2===R){b="%",z++;break e}void 0!==e&&j.$raise(H("ArgumentError"),"value given twice - %"+S+"$"),e=ee(S),z++}else $e(),i|=ne,T=S;continue e;case"<":case"{":for(G="<"===x.charAt(z)?">":"}",d="",z++;;z++){if(z===R&&j.$raise(H("ArgumentError"),"malformed name - unmatched parenthesis"),x.charAt(z)===G){if(t>0&&j.$raise(H("ArgumentError"),"named "+d+" after unnumbered("+t+")"),-1===t&&j.$raise(H("ArgumentError"),"named "+d+" after numbered"),t=-2,(void 0===w[0]||!w[0].$$is_hash)&&j.$raise(H("ArgumentError"),"one hash required"),e=w[0].$fetch(d),">"===G)continue e;if(b=e.toString(),-1!==v&&(b=b.slice(0,v)),2&i)for(;b.length<T;)b+=" ";else for(;b.length<T;)b=" "+b;break e}d+=x.charAt(z)}case"*":z++,$e(),i|=ne,(T=O("width"))<0&&(i|=2,T=-T);continue e;case".":if(i&oe&&j.$raise(H("ArgumentError"),"precision given twice"),i|=64|oe,v=0,z++,"*"===x.charAt(z)){z++,(v=O("precision"))<0&&(i&=-65);continue e}v=L("precision");continue e;case"d":case"i":case"u":if((_=j.$Integer(A()))>=0){for(b=_.toString();b.length<v;)b="0"+b;if(2&i)for((4&i||i&J)&&(b=(4&i?"+":" ")+b);b.length<T;)b+=" ";else if(8&i&&-1===v){for(;b.length<T-(4&i||i&J?1:0);)b="0"+b;(4&i||i&J)&&(b=(4&i?"+":" ")+b)}else for((4&i||i&J)&&(b=(4&i?"+":" ")+b);b.length<T;)b=" "+b}else{for(b=(-_).toString();b.length<v;)b="0"+b;if(2&i)for(b="-"+b;b.length<T;)b+=" ";else if(8&i&&-1===v){for(;b.length<T-1;)b="0"+b;b="-"+b}else for(b="-"+b;b.length<T;)b=" "+b}break e;case"b":case"B":case"o":case"x":case"X":switch(x.charAt(z)){case"b":case"B":m=2,h="0b",$=/^1+/,r="1";break;case"o":m=8,h="0",$=/^3?7+/,r="7";break;case"x":case"X":m=16,h="0x",$=/^f+/,r="f"}if((_=j.$Integer(A()))>=0){for(b=_.toString(m);b.length<v;)b="0"+b;if(2&i)for((4&i||i&J)&&(b=(4&i?"+":" ")+b),1&i&&0!==_&&(b=h+b);b.length<T;)b+=" ";else if(8&i&&-1===v){for(;b.length<T-(4&i||i&J?1:0)-(1&i&&0!==_?h.length:0);)b="0"+b;1&i&&0!==_&&(b=h+b),(4&i||i&J)&&(b=(4&i?"+":" ")+b)}else for(1&i&&0!==_&&(b=h+b),(4&i||i&J)&&(b=(4&i?"+":" ")+b);b.length<T;)b=" "+b}else if(4&i||i&J){for(b=(-_).toString(m);b.length<v;)b="0"+b;if(2&i)for(1&i&&(b=h+b),b="-"+b;b.length<T;)b+=" ";else if(8&i&&-1===v){for(;b.length<T-1-(1&i?2:0);)b="0"+b;1&i&&(b=h+b),b="-"+b}else for(1&i&&(b=h+b),b="-"+b;b.length<T;)b=" "+b}else{for(b=(_>>>0).toString(m).replace($,r);b.length<v-2;)b=r+b;if(2&i)for(b=".."+b,1&i&&(b=h+b);b.length<T;)b+=" ";else if(8&i&&-1===v){for(;b.length<T-2-(1&i?h.length:0);)b=r+b;b=".."+b,1&i&&(b=h+b)}else for(b=".."+b,1&i&&(b=h+b);b.length<T;)b=" "+b}x.charAt(z)===x.charAt(z).toUpperCase()&&(b=b.toUpperCase());break e;case"f":case"e":case"E":case"g":case"G":if((_=j.$Float(A()))>=0||isNaN(_)){if(_===1/0)b="Inf";else switch(x.charAt(z)){case"f":b=_.toFixed(-1===v?6:v);break;case"e":case"E":b=_.toExponential(-1===v?6:v);break;case"g":case"G":b=_.toExponential(),(f=parseInt(b.split("e")[1],10))<-4||f>=(-1===v?6:v)||(b=_.toPrecision(-1===v?1&i?6:void 0:v))}if(2&i)for((4&i||i&J)&&(b=(4&i?"+":" ")+b);b.length<T;)b+=" ";else if(8&i&&_!==1/0&&!isNaN(_)){for(;b.length<T-(4&i||i&J?1:0);)b="0"+b;(4&i||i&J)&&(b=(4&i?"+":" ")+b)}else for((4&i||i&J)&&(b=(4&i?"+":" ")+b);b.length<T;)b=" "+b}else{if(_===-1/0)b="Inf";else switch(x.charAt(z)){case"f":b=(-_).toFixed(-1===v?6:v);break;case"e":case"E":b=(-_).toExponential(-1===v?6:v);break;case"g":case"G":b=(-_).toExponential(),(f=parseInt(b.split("e")[1],10))<-4||f>=(-1===v?6:v)||(b=(-_).toPrecision(-1===v?1&i?6:void 0:v))}if(2&i)for(b="-"+b;b.length<T;)b+=" ";else if(8&i&&_!==-1/0){for(;b.length<T-1;)b="0"+b;b="-"+b}else for(b="-"+b;b.length<T;)b=" "+b}x.charAt(z)===x.charAt(z).toUpperCase()&&_!==1/0&&_!==-1/0&&!isNaN(_)&&(b=b.toUpperCase()),b=b.replace(/([eE][-+]?)([0-9])$/,"$10$2");break e;case"a":case"A":j.$raise(H("NotImplementedError"),"`A` and `a` format field types are not implemented in Opal yet");case"c":if((_=A())["$respond_to?"]("to_ary")&&(_=_.$to_ary()[0]),1!==(b=_["$respond_to?"]("to_str")?_.$to_str():String.fromCharCode(Q(_,H("Integer"),"to_int"))).length&&j.$raise(H("ArgumentError"),"%c requires a character"),2&i)for(;b.length<T;)b+=" ";else for(;b.length<T;)b=" "+b;break e;case"p":if(b=A().$inspect(),-1!==v&&(b=b.slice(0,v)),2&i)for(;b.length<T;)b+=" ";else for(;b.length<T;)b=" "+b;break e;case"s":if(b=A().$to_s(),-1!==v&&(b=b.slice(0,v)),2&i)for(;b.length<T;)b+=" ";else for(;b.length<T;)b=" "+b;break e;default:j.$raise(H("ArgumentError"),"malformed format string - %"+x.charAt(z))}void 0===b&&j.$raise(H("ArgumentError"),"malformed format string - %"),D+=x.slice(y,g)+b,y=z+1}return B.DEBUG&&t>=0&&n<w.length&&j.$raise(H("ArgumentError"),"too many arguments for format string"),D+x.slice(y)},-2),W(K,"sprintf","format")},Opal.modules["corelib/string/encoding"]=function(l){var U,g,z,Q=l.klass,te=l.hash2,a=l.rb_plus,P=l.truthy,V=l.send,k=l.defs,j=l.eqeq,B=l.def,E=l.return_ivar,W=l.return_val,Y=l.slice,H=l.Kernel,X=l.Opal,K=l.rb_lt,x=l.top,M=l.$r([]),w=l.nil,I=l.$$$;return x.$require("corelib/string"),(z=(g=Q("::",null,"Encoding")).$$prototype).name=z.dummy=w,k(g,"$register",function R(_,b){var v,d,G,f=R.$$p||w,S=w,m=w,h=w;return R.$$p=null,null==b&&(b=te([],{})),v=a([_],P(S=b["$[]"]("aliases"))?S:[]),d=P(S=b["$[]"]("ascii"))&&S,G=P(S=b["$[]"]("dummy"))&&S,P(b["$[]"]("inherits"))?(m=b["$[]"]("inherits").$clone()).$initialize(_,v,d,G):m=this.$new(_,v,d,G),f!==w&&V(m,"instance_eval",[],f.$to_proc()),h=l.encodings,V(v,"each",[],function $(r){return null==r&&(r=w),(null==$.$$s?this:$.$$s).$const_set(r.$tr("-","_"),m),h[r]=m},{$$s:this})},-2),k(g,"$find",function(_){return j(_,"default_external")?this.$default_external():l.find_encoding(_)}),g.$singleton_class().$attr_accessor("default_external"),g.$attr_reader("name","names"),B(g,"$initialize",function(_,b,f,T){var v=this;return v.name=_,v.names=b,v.ascii=f,v.dummy=T}),B(g,"$ascii_compatible?",E("ascii")),B(g,"$dummy?",E("dummy")),B(g,"$binary?",W(!1)),B(g,"$to_s",E("name")),B(g,"$inspect",function(){return"#<Encoding:"+this.name+(P(this.dummy)?" (dummy)":w)+">"}),B(g,"$charsize",function(_){for(var b=0,f=0,T=_.length;f<T;f++){var v=_.charCodeAt(f);v>=55296&&v<=56319||b++}return b}),B(g,"$each_char",function R(_){var b=R.$$p||w;R.$$p=null;for(var f="",T=0,v=_.length;T<v;T++){var S=_.charCodeAt(T),d=_.charAt(T);S>=56320&&S<=57343?f=d:(S>=55296&&S<=56319&&(d=f+d),"UTF-8"!=_.encoding.name&&((d=new String(d)).encoding=_.encoding),l.yield1(b,d))}}),B(g,"$each_byte",function(_){return Y(arguments),H.$raise(I("NotImplementedError"))},-1),B(g,"$bytesize",function(_){return Y(arguments),H.$raise(I("NotImplementedError"))},-1),Q("::",I("StandardError"),"EncodingError"),Q("::",I("EncodingError"),"CompatibilityError"),V(I("Encoding"),"register",["UTF-8",te(["aliases","ascii"],{aliases:["CP65001"],ascii:!0})],function D(){var y=null==D.$$s?this:D.$$s;return B(y,"$each_byte",function g(z){var R=g.$$p||w;g.$$p=null;for(var b,_=1/0,f=z.length,T=null,v=0;v<f;++v){if((b=z.charCodeAt(v))>55295&&b<57344){if(!T){if(b>56319){(_-=3)>-1&&(l.yield1(R,239),l.yield1(R,191),l.yield1(R,189));continue}if(v+1===f){(_-=3)>-1&&(l.yield1(R,239),l.yield1(R,191),l.yield1(R,189));continue}T=b;continue}if(b<56320){(_-=3)>-1&&(l.yield1(R,239),l.yield1(R,191),l.yield1(R,189)),T=b;continue}b=65536+(T-55296<<10|b-56320)}else T&&(_-=3)>-1&&(l.yield1(R,239),l.yield1(R,191),l.yield1(R,189));if(T=null,b<128){if((_-=1)<0)break;l.yield1(R,b)}else if(b<2048){if((_-=2)<0)break;l.yield1(R,b>>6|192),l.yield1(R,63&b|128)}else if(b<65536){if((_-=3)<0)break;l.yield1(R,b>>12|224),l.yield1(R,b>>6&63|128),l.yield1(R,63&b|128)}else if(b<1114112){if((_-=4)<0)break;l.yield1(R,b>>18|240),l.yield1(R,b>>12&63|128),l.yield1(R,b>>6&63|128),l.yield1(R,63&b|128)}}}),B(y,"$bytesize",function(z){return z.$bytes().$length()})},{$$s:x}),V(I("Encoding"),"register",["UTF-16LE"],function D(){var y=null==D.$$s?this:D.$$s;return B(y,"$each_byte",function g(z){var R=g.$$p||w;g.$$p=null;for(var _=0,b=z.length;_<b;_++){var f=z.charCodeAt(_);l.yield1(R,255&f),l.yield1(R,f>>8)}}),B(y,"$bytesize",function(z){return 2*z.length})},{$$s:x}),V(I("Encoding"),"register",["UTF-16BE",te(["inherits"],{inherits:I(I("Encoding"),"UTF_16LE")})],function D(){return B(null==D.$$s?this:D.$$s,"$each_byte",function g(z){var R=g.$$p||w;g.$$p=null;for(var _=0,b=z.length;_<b;_++){var f=z.charCodeAt(_);l.yield1(R,f>>8),l.yield1(R,255&f)}})},{$$s:x}),V(I("Encoding"),"register",["UTF-32LE"],function D(){var y=null==D.$$s?this:D.$$s;return B(y,"$each_byte",function g(z){var R=g.$$p||w;g.$$p=null;for(var _=0,b=z.length;_<b;_++){var f=z.charCodeAt(_);l.yield1(R,255&f),l.yield1(R,f>>8),l.yield1(R,0),l.yield1(R,0)}}),B(y,"$bytesize",function(z){return 4*z.length})},{$$s:x}),V(I("Encoding"),"register",["UTF-32BE",te(["inherits"],{inherits:I(I("Encoding"),"UTF_32LE")})],function D(){return B(null==D.$$s?this:D.$$s,"$each_byte",function g(z){var R=g.$$p||w;g.$$p=null;for(var _=0,b=z.length;_<b;_++){var f=z.charCodeAt(_);l.yield1(R,0),l.yield1(R,0),l.yield1(R,f>>8),l.yield1(R,255&f)}})},{$$s:x}),V(I("Encoding"),"register",["ASCII-8BIT",te(["aliases","ascii"],{aliases:["BINARY"],ascii:!0})],function D(){var y=null==D.$$s?this:D.$$s;return B(y,"$each_char",function g(z){var R=g.$$p||w;g.$$p=null;for(var _=0,b=z.length;_<b;_++){var f=new String(z.charAt(_));f.encoding=z.encoding,l.yield1(R,f)}}),B(y,"$charsize",function(z){return z.length}),B(y,"$each_byte",function g(z){var R=g.$$p||w;g.$$p=null;for(var _=0,b=z.length;_<b;_++){var f=z.charCodeAt(_);l.yield1(R,255&f)}}),B(y,"$bytesize",function(z){return z.length}),B(y,"$binary?",W(!0))},{$$s:x}),I("Encoding").$register("ISO-8859-1",te(["aliases","ascii","inherits"],{aliases:["ISO8859-1"],ascii:!0,inherits:I(I("Encoding"),"ASCII_8BIT")})),I("Encoding").$register("US-ASCII",te(["aliases","ascii","inherits"],{aliases:["ASCII"],ascii:!0,inherits:I(I("Encoding"),"ASCII_8BIT")})),function(D,y){var g=Q("::",null,"String"),z=g.$$prototype;z.internal_encoding=z.bytes=z.encoding=w,g.$attr_reader("encoding"),g.$attr_reader("internal_encoding"),l.prop(String.prototype,"bytes",w),l.prop(String.prototype,"encoding",I(I("Encoding"),"UTF_8")),l.prop(String.prototype,"internal_encoding",I(I("Encoding"),"UTF_8")),B(g,"$b",function(){return this.$dup().$force_encoding("binary")}),B(g,"$bytesize",function(){return this.internal_encoding.$bytesize(this)}),B(g,"$each_byte",function R(){var _=R.$$p||w,b=this;return R.$$p=null,_===w?V(b,"enum_for",["each_byte"],function f(){return(null==f.$$s?this:f.$$s).$bytesize()},{$$s:b}):(V(b.internal_encoding,"each_byte",[b],_.$to_proc()),b)}),B(g,"$bytes",function(){var _=this,b=w;return"string"==typeof _?new String(_).$each_byte().$to_a():(_.bytes=P(b=_.bytes)?b:_.$each_byte().$to_a(),_.bytes.$dup())}),B(g,"$each_char",function R(){var _=R.$$p||w,b=this;return R.$$p=null,_===w?V(b,"enum_for",["each_char"],function f(){return(null==f.$$s?this:f.$$s).$length()},{$$s:b}):(V(b.encoding,"each_char",[b],_.$to_proc()),b)}),B(g,"$chars",function R(){var _=R.$$p||w;return R.$$p=null,P(_)?V(this,"each_char",[],_.$to_proc()):this.$each_char().$to_a()}),B(g,"$each_codepoint",function R(){var _=R.$$p||w,b=this;if(R.$$p=null,_===w)return b.$enum_for("each_codepoint");for(var f=0,T=b.length;f<T;f++)l.yield1(_,b.codePointAt(f));return b}),B(g,"$codepoints",function R(){var _=R.$$p||w;return R.$$p=null,_!==w?V(this,"each_codepoint",[],_.$to_proc()):this.$each_codepoint().$to_a()}),B(g,"$encode",function(_){return l.enc(this,_)}),B(g,"$force_encoding",function(_){var f=this;return _===f.encoding||(_=X["$coerce_to!"](_,I("String"),"to_s"),(_=I("Encoding").$find(_))===f.encoding)||(f=l.set_encoding(f,_)),f}),B(g,"$getbyte",function(_){var f=w;return f=this.$bytes(),_=X["$coerce_to!"](_,I("Integer"),"to_int"),P(K(f.$length(),_))?w:f["$[]"](_)}),B(g,"$initialize_copy",function(_){return"\n      self.encoding = other.encoding;\n      self.internal_encoding = other.internal_encoding;\n    "}),B(g,"$valid_encoding?",W(!0))}(),U=[I(M("Encoding"),"UTF_8")],V(I("Encoding"),"default_external=",U),U[U.length-1]},Opal.modules["corelib/math"]=function(l){var M,w,I,D,Q=l.type_error,a=l.const_set,P=l.Class,V=l.slice,k=l.Kernel,j=l.defs,B=l.truthy,E=l.send,W=l.def,Y=l.rb_minus,H=l.eqeqeq,X=l.rb_divide,U=l.nil,x=l.$$$;return M=[],I=[w=(0,l.module)("::","Math")].concat(M),D=l.$r(I),a(w,"E",Math.E),a(w,"PI",Math.PI),a(w,"DomainError",P.$new(x("StandardError"))),j(w,"$checked",function(g,z){var _;if(_=V(arguments,1),isNaN(_[0])||2==_.length&&isNaN(_[1]))return NaN;var b=Math[g].apply(null,_);return isNaN(b)&&k.$raise(D("DomainError"),'Numerical argument is out of domain - "'+g+'"'),b},-2),j(w,"$float!",function(g){try{return k.$Float(g)}catch(z){if(!l.rescue(z,[x("ArgumentError")]))throw z;try{return k.$raise(Q(g,x("Float")))}finally{l.pop_exception()}}}),j(w,"$integer!",function(g){try{return k.$Integer(g)}catch(z){if(!l.rescue(z,[x("ArgumentError")]))throw z;try{return k.$raise(Q(g,x("Integer")))}finally{l.pop_exception()}}}),w.$module_function(),B(typeof Math.erf<"u")||l.prop(Math,"erf",function(y){var T=1;y<0&&(T=-1);var v=1/(1+.3275911*(y=Math.abs(y)));return T*(1-((((1.061405429*v-1.453152027)*v+1.421413741)*v-.284496736)*v+.254829592)*v*Math.exp(-y*y))}),B(typeof Math.erfc<"u")||l.prop(Math,"erfc",function(y){var g=Math.abs(y),z=1/(.5*g+1),h=z*Math.exp(-g*g-1.26551223+z*(z*(z*(z*(z*(z*(z*(z*(.17087277*z-.82215223)+1.48851587)-1.13520398)+.27886807)-.18628806)+.09678418)+.37409196)+1.00002368));return y<0?2-h:h}),E(["acos","acosh","asin","asinh","atan","atanh","cbrt","cos","cosh","erf","erfc","exp","sin","sinh","sqrt","tanh"],"each",[],function y(g){return null==g&&(g=U),E(null==y.$$s?this:y.$$s,"define_method",[g],function(_){return null==_&&(_=U),x("Math").$checked(g,x("Math")["$float!"](_))})},{$$s:w}),W(w,"$atan2",function(g,z){return x("Math").$checked("atan2",x("Math")["$float!"](g),x("Math")["$float!"](z))}),W(w,"$hypot",function(g,z){return x("Math").$checked("hypot",x("Math")["$float!"](g),x("Math")["$float!"](z))}),W(w,"$frexp",function(g){if(g=D("Math")["$float!"](g),isNaN(g))return[NaN,0];var z=Math.floor(Math.log(Math.abs(g))/Math.log(2))+1;return[g/Math.pow(2,z),z]}),W(w,"$gamma",function(g){g=D("Math")["$float!"](g);var z,R,_,b,f,T,v,S,d,m=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];if(isNaN(g))return NaN;if(0===g&&1/g<0)return-1/0;if((-1===g||g===-1/0)&&k.$raise(D("DomainError"),'Numerical argument is out of domain - "gamma"'),D("Integer")["$==="](g)){if(g<=0)return isFinite(g)?1/0:NaN;if(g>171)return 1/0;for(b=g-2,f=g-1;b>1;)f*=b,b--;return 0==f&&(f=1),f}if(g<.5)return Math.PI/(Math.sin(Math.PI*g)*x("Math").$gamma(Y(1,g)));if(g>=171.35)return 1/0;if(g>85)return d=(S=(v=(T=g*g)*g)*g)*g,Math.sqrt(2*Math.PI/g)*Math.pow(g/Math.E,g)*(1+1/(12*g)+1/(288*T)-139/(51840*v)-571/(2488320*S)+163879/(209018880*d)+5246819/(75246796800*d*g));for(g-=1,_=m[0],z=1;z<m.length;++z)_+=m[z]/(g+z);return R=g+4.7421875+.5,Math.sqrt(2*Math.PI)*Math.pow(R,g+.5)*Math.exp(-R)*_}),W(w,"$ldexp",function(g,z){return g=D("Math")["$float!"](g),z=D("Math")["$integer!"](z),isNaN(z)&&k.$raise(x("RangeError"),"float NaN out of range of integer"),g*Math.pow(2,z)}),W(w,"$lgamma",function(g){return-1==g?[1/0,1]:[Math.log(Math.abs(x("Math").$gamma(g))),x("Math").$gamma(g)<0?-1:1]}),W(w,"$log",function(g,z){return H(x("String"),g)&&k.$raise(Q(g,x("Float"))),B(null==z)?x("Math").$checked("log",x("Math")["$float!"](g)):(H(x("String"),z)&&k.$raise(Q(z,x("Float"))),X(x("Math").$checked("log",x("Math")["$float!"](g)),x("Math").$checked("log",x("Math")["$float!"](z))))},-2),W(w,"$log10",function(g){return H(x("String"),g)&&k.$raise(Q(g,x("Float"))),x("Math").$checked("log10",x("Math")["$float!"](g))}),W(w,"$log2",function(g){return H(x("String"),g)&&k.$raise(Q(g,x("Float"))),x("Math").$checked("log2",x("Math")["$float!"](g))}),W(w,"$tan",function(g){return g=x("Math")["$float!"](g),B(g["$infinite?"]())?x(x("Float"),"NAN"):x("Math").$checked("tan",x("Math")["$float!"](g))})},Opal.modules["corelib/complex/base"]=function(l){var B,E,W,Y,te=l.truthy,a=l.def,P=l.klass,V=[],k=l.nil;return B=V,W=[E=(0,l.module)("::","Kernel")].concat(B),Y=l.$r(W),a(E,"$Complex",function(X,K){return null==K&&(K=k),te(K)?Y("Complex").$new(X,K):Y("Complex").$new(X,0)},-2),function(j,B,E){var W=P("::",null,"String"),Y=[W].concat(E),H=l.$r(Y);return a(W,"$to_c",function(){return H("Complex").$from_string(this)})}(0,0,V)},Opal.modules["corelib/complex"]=function(l){var z,R,_,b,f,Q=l.klass,te=l.truthy,a=l.eqeqeq,P=l.Kernel,V=l.defs,k=l.rb_times,j=l.def,B=l.rb_plus,E=l.rb_minus,W=l.rb_divide,Y=l.eqeq,H=l.to_ary,X=l.rb_gt,K=l.neqeq,U=l.return_val,x=l.const_set,q=l.alias,M=l.top,I=l.nil,D=l.$$$;return M.$require("corelib/numeric"),M.$require("corelib/complex/base"),z=[],_=[R=Q("::",D("Numeric"),"Complex")].concat(z),b=l.$r(_),(f=R.$$prototype).real=f.imag=I,V(R,"$rect",function(v,S){return null==S&&(S=0),a(D("Numeric"),v)&&te(v["$real?"]())&&a(D("Numeric"),S)&&te(S["$real?"]())||P.$raise(D("TypeError"),"not a real"),this.$new(v,S)},-2),V(R,"$polar",function(v,S){return null==S&&(S=0),a(D("Numeric"),v)&&te(v["$real?"]())&&a(D("Numeric"),S)&&te(S["$real?"]())||P.$raise(D("TypeError"),"not a real"),this.$new(k(v,D("Math").$cos(S)),k(v,D("Math").$sin(S)))},-2),R.$attr_reader("real","imag"),j(R,"$initialize",function(v,S){var d=this;return null==S&&(S=0),d.real=v,d.imag=S,d.$freeze()},-2),j(R,"$coerce",function(v){return a(D("Complex"),v)?[v,this]:a(D("Numeric"),v)&&te(v["$real?"]())?[D("Complex").$new(v,0),this]:P.$raise(D("TypeError"),v.$class()+" can't be coerced into Complex")}),j(R,"$==",function(v){var S=this,d=I;return a(D("Complex"),v)?te(d=S.real["$=="](v.$real()))?S.imag["$=="](v.$imag()):d:a(D("Numeric"),v)&&te(v["$real?"]())?te(d=S.real["$=="](v))?S.imag["$=="](0):d:v["$=="](S)}),j(R,"$-@",function(){return P.$Complex(this.real["$-@"](),this.imag["$-@"]())}),j(R,"$+",function(v){var S=this;return a(D("Complex"),v)?P.$Complex(B(S.real,v.$real()),B(S.imag,v.$imag())):a(D("Numeric"),v)&&te(v["$real?"]())?P.$Complex(B(S.real,v),S.imag):S.$__coerced__("+",v)}),j(R,"$-",function(v){var S=this;return a(D("Complex"),v)?P.$Complex(E(S.real,v.$real()),E(S.imag,v.$imag())):a(D("Numeric"),v)&&te(v["$real?"]())?P.$Complex(E(S.real,v),S.imag):S.$__coerced__("-",v)}),j(R,"$*",function(v){var S=this;return a(D("Complex"),v)?P.$Complex(E(k(S.real,v.$real()),k(S.imag,v.$imag())),B(k(S.real,v.$imag()),k(S.imag,v.$real()))):a(D("Numeric"),v)&&te(v["$real?"]())?P.$Complex(k(S.real,v),k(S.imag,v)):S.$__coerced__("*",v)}),j(R,"$/",function(v){var S=this;return a(D("Complex"),v)?a(D("Number"),S.real)&&te(S.real["$nan?"]())||a(D("Number"),S.imag)&&te(S.imag["$nan?"]())||a(D("Number"),v.$real())&&te(v.$real()["$nan?"]())||a(D("Number"),v.$imag())&&te(v.$imag()["$nan?"]())?D("Complex").$new(D(D("Float"),"NAN"),D(D("Float"),"NAN")):W(k(S,v.$conj()),v.$abs2()):a(D("Numeric"),v)&&te(v["$real?"]())?P.$Complex(S.real.$quo(v),S.imag.$quo(v)):S.$__coerced__("/",v)}),j(R,"$**",function(v){var S,d,G=this,m=I,h=I,$=I,r=I,e=I,n=I,t=I,i=I,s=I,c=I,u=I;if(Y(v,0))return D("Complex").$new(1,0);if(a(D("Complex"),v))return d=G.$polar(),m=null==(S=H(d))[0]?I:S[0],h=null==S[1]?I:S[1],$=v.$real(),r=v.$imag(),e=D("Math").$exp(E(k($,D("Math").$log(m)),k(r,h))),n=B(k(h,$),k(r,D("Math").$log(m))),D("Complex").$polar(e,n);if(a(D("Integer"),v)){if(te(X(v,0))){for(i=t=G,s=E(v,1);K(s,0);){for(d=s.$divmod(2),c=null==(S=H(d))[0]?I:S[0],u=null==S[1]?I:S[1];Y(u,0);)t=P.$Complex(E(k(t.$real(),t.$real()),k(t.$imag(),t.$imag())),k(k(2,t.$real()),t.$imag())),d=(s=c).$divmod(2),c=null==(S=H(d))[0]?I:S[0],u=null==S[1]?I:S[1];i=k(i,t),s=E(s,1)}return i}return W(D("Rational").$new(1,1),G)["$**"](v["$-@"]())}return a(D("Float"),v)||a(D("Rational"),v)?(d=G.$polar(),m=null==(S=H(d))[0]?I:S[0],h=null==S[1]?I:S[1],D("Complex").$polar(m["$**"](v),k(h,v))):G.$__coerced__("**",v)}),j(R,"$abs",function(){return D("Math").$hypot(this.real,this.imag)}),j(R,"$abs2",function(){var v=this;return B(k(v.real,v.real),k(v.imag,v.imag))}),j(R,"$angle",function(){return D("Math").$atan2(this.imag,this.real)}),j(R,"$conj",function(){return P.$Complex(this.real,this.imag["$-@"]())}),j(R,"$denominator",function(){return this.real.$denominator().$lcm(this.imag.$denominator())}),j(R,"$eql?",function(v){var d,G,S=this;return te(d=te(G=b("Complex")["$==="](v))?S.real.$class()["$=="](S.imag.$class()):G)?S["$=="](v):d}),j(R,"$fdiv",function(v){return a(D("Numeric"),v)||P.$raise(D("TypeError"),v.$class()+" can't be coerced into Complex"),W(this,v)}),j(R,"$finite?",function(){var S;return te(S=this.real["$finite?"]())?this.imag["$finite?"]():S}),j(R,"$hash",function(){return"Complex:"+this.real+":"+this.imag}),j(R,"$infinite?",function(){var S;return te(S=this.real["$infinite?"]())?S:this.imag["$infinite?"]()}),j(R,"$inspect",function(){return"("+this+")"}),j(R,"$numerator",function(){var S,v=this;return S=v.$denominator(),P.$Complex(k(v.real.$numerator(),W(S,v.real.$denominator())),k(v.imag.$numerator(),W(S,v.imag.$denominator())))}),j(R,"$polar",function(){return[this.$abs(),this.$arg()]}),j(R,"$rationalize",function(v){var S=this;return arguments.length>1&&P.$raise(D("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),K(S.imag,0)&&P.$raise(D("RangeError"),"can't convert "+S+" into Rational"),S.$real().$rationalize(v)},-1),j(R,"$real?",U(!1)),j(R,"$rect",function(){return[this.real,this.imag]}),j(R,"$to_f",function(){var v=this;return Y(v.imag,0)||P.$raise(D("RangeError"),"can't convert "+v+" into Float"),v.real.$to_f()}),j(R,"$to_i",function(){var v=this;return Y(v.imag,0)||P.$raise(D("RangeError"),"can't convert "+v+" into Integer"),v.real.$to_i()}),j(R,"$to_r",function(){var v=this;return Y(v.imag,0)||P.$raise(D("RangeError"),"can't convert "+v+" into Rational"),v.real.$to_r()}),j(R,"$to_s",function(){var v=this,S=I;return S=v.real.$inspect(),S=B(S,a(D("Number"),v.imag)&&te(v.imag["$nan?"]())||te(v.imag["$positive?"]())||te(v.imag["$zero?"]())?"+":"-"),S=B(S,v.imag.$abs().$inspect()),a(D("Number"),v.imag)&&(te(v.imag["$nan?"]())||te(v.imag["$infinite?"]()))&&(S=B(S,"*")),B(S,"i")}),x(_[0],"I",R.$new(0,1)),V(R,"$from_string",function(v){var G,m,S=/[+-]?[\d_]+(\.[\d_]+)?(e\d+)?/;function $(){return S.test(v)}function r(){var t=v.match(S)[0];return v=v.slice(t.length),t.replace(/_/g,"")}function e(){if($()){var n=parseFloat(r());if("/"===v[0]){if(v=v.slice(1),$()){var t=parseFloat(r());return P.$Rational(n,t)}return v="/"+v,n}return n}return null}return v.match(S),(G=e())?(m=e())?P.$Complex(G,m):"i"===v[0]?P.$Complex(0,G):P.$Complex(G,0):P.$Complex(0,"i"===v[0]?1:"-"===v[0]&&"i"===v[1]?-1:"+"===v[0]&&"i"===v[1]?1:0)}),q(l.get_singleton_class(R),"rectangular","rect"),q(R,"arg","angle"),q(R,"conjugate","conj"),q(R,"divide","/"),q(R,"imaginary","imag"),q(R,"magnitude","abs"),q(R,"phase","arg"),q(R,"quo","/"),q(R,"rectangular","rect"),l.udef(R,"$negative?"),l.udef(R,"$positive?"),l.udef(R,"$step"),I},Opal.modules["corelib/rational/base"]=function(l){var te=l.def,a=l.klass,V=l.$$$;return te((0,l.module)("::","Kernel"),"$Rational",function(E,W){return null==W&&(W=1),V("Rational").$convert(E,W)},-2),te(a("::",null,"String"),"$to_r",function(){return V("Rational").$from_string(this)})},Opal.modules["corelib/rational"]=function(l){var R,_,Q=l.klass,te=l.eqeq,a=l.Kernel,P=l.truthy,V=l.rb_lt,k=l.rb_divide,j=l.defs,B=l.eqeqeq,E=l.not,W=l.Opal,Y=l.def,H=l.return_ivar,X=l.rb_minus,K=l.rb_times,U=l.rb_plus,x=l.rb_gt,q=l.rb_le,M=l.return_self,w=l.alias,I=l.top,D=l.nil,y=l.$$$;return I.$require("corelib/numeric"),I.$require("corelib/rational/base"),(_=(R=Q("::",y("Numeric"),"Rational")).$$prototype).num=_.den=D,j(R,"$reduce",function(f,T){var S;if(f=f.$to_i(),T=T.$to_i(),te(T,0))a.$raise(y("ZeroDivisionError"),"divided by 0");else if(P(V(T,0)))f=f["$-@"](),T=T["$-@"]();else if(te(T,1))return this.$new(f,T);return S=f.$gcd(T),this.$new(k(f,S),k(T,S))}),j(R,"$convert",function(f,T){return(P(f["$nil?"]())||P(T["$nil?"]()))&&a.$raise(y("TypeError"),"cannot convert nil into Rational"),B(y("Integer"),f)&&B(y("Integer"),T)?this.$reduce(f,T):((B(y("Float"),f)||B(y("String"),f)||B(y("Complex"),f))&&(f=f.$to_r()),(B(y("Float"),T)||B(y("String"),T)||B(y("Complex"),T))&&(T=T.$to_r()),P(T["$equal?"](1))&&E(y("Integer")["$==="](f))?W["$coerce_to!"](f,y("Rational"),"to_r"):B(y("Numeric"),f)&&B(y("Numeric"),T)?k(f,T):this.$reduce(f,T))}),Y(R,"$initialize",function(f,T){var v=this;return v.num=f,v.den=T,v.$freeze()}),Y(R,"$numerator",H("num")),Y(R,"$denominator",H("den")),Y(R,"$coerce",function(f){var v,T=this;return B(y("Rational"),v=f)?[f,T]:B(y("Integer"),v)?[f.$to_r(),T]:B(y("Float"),v)?[f,T.$to_f()]:D}),Y(R,"$==",function(f){var v,T=this,S=D;return B(y("Rational"),v=f)?P(S=T.num["$=="](f.$numerator()))?T.den["$=="](f.$denominator()):S:B(y("Integer"),v)?P(S=T.num["$=="](f))?T.den["$=="](1):S:B(y("Float"),v)?T.$to_f()["$=="](f):f["$=="](T)}),Y(R,"$<=>",function(f){var v,T=this;return B(y("Rational"),v=f)?X(K(T.num,f.$denominator()),K(T.den,f.$numerator()))["$<=>"](0):B(y("Integer"),v)?X(T.num,K(T.den,f))["$<=>"](0):B(y("Float"),v)?T.$to_f()["$<=>"](f):T.$__coerced__("<=>",f)}),Y(R,"$+",function(f){var v,T=this,S=D,d=D;return B(y("Rational"),v=f)?(S=U(K(T.num,f.$denominator()),K(T.den,f.$numerator())),d=K(T.den,f.$denominator()),a.$Rational(S,d)):B(y("Integer"),v)?a.$Rational(U(T.num,K(f,T.den)),T.den):B(y("Float"),v)?U(T.$to_f(),f):T.$__coerced__("+",f)}),Y(R,"$-",function(f){var v,T=this,S=D,d=D;return B(y("Rational"),v=f)?(S=X(K(T.num,f.$denominator()),K(T.den,f.$numerator())),d=K(T.den,f.$denominator()),a.$Rational(S,d)):B(y("Integer"),v)?a.$Rational(X(T.num,K(f,T.den)),T.den):B(y("Float"),v)?X(T.$to_f(),f):T.$__coerced__("-",f)}),Y(R,"$*",function(f){var v,T=this,S=D,d=D;return B(y("Rational"),v=f)?(S=K(T.num,f.$numerator()),d=K(T.den,f.$denominator()),a.$Rational(S,d)):B(y("Integer"),v)?a.$Rational(K(T.num,f),T.den):B(y("Float"),v)?K(T.$to_f(),f):T.$__coerced__("*",f)}),Y(R,"$/",function(f){var v,T=this,S=D,d=D;return B(y("Rational"),v=f)?(S=K(T.num,f.$denominator()),d=K(T.den,f.$numerator()),a.$Rational(S,d)):B(y("Integer"),v)?te(f,0)?k(T.$to_f(),0):a.$Rational(T.num,K(T.den,f)):B(y("Float"),v)?k(T.$to_f(),f):T.$__coerced__("/",f)}),Y(R,"$**",function(f){var v,T=this;return B(y("Integer"),v=f)?te(T,0)&&P(V(f,0))?y(y("Float"),"INFINITY"):P(x(f,0))?a.$Rational(T.num["$**"](f),T.den["$**"](f)):P(V(f,0))?a.$Rational(T.den["$**"](f["$-@"]()),T.num["$**"](f["$-@"]())):a.$Rational(1,1):B(y("Float"),v)?T.$to_f()["$**"](f):B(y("Rational"),v)?te(f,0)?a.$Rational(1,1):te(f.$denominator(),1)?P(V(f,0))?a.$Rational(T.den["$**"](f.$numerator().$abs()),T.num["$**"](f.$numerator().$abs())):a.$Rational(T.num["$**"](f.$numerator()),T.den["$**"](f.$numerator())):te(T,0)&&P(V(f,0))?a.$raise(y("ZeroDivisionError"),"divided by 0"):T.$to_f()["$**"](f):T.$__coerced__("**",f)}),Y(R,"$abs",function(){return a.$Rational(this.num.$abs(),this.den.$abs())}),Y(R,"$ceil",function(f){var T=this;return null==f&&(f=0),te(f,0)?k(T.num["$-@"](),T.den)["$-@"]().$ceil():T.$with_precision("ceil",f)},-1),Y(R,"$floor",function(f){var T=this;return null==f&&(f=0),te(f,0)?k(T.num["$-@"](),T.den)["$-@"]().$floor():T.$with_precision("floor",f)},-1),Y(R,"$hash",function(){return"Rational:"+this.num+":"+this.den}),Y(R,"$inspect",function(){return"("+this+")"}),Y(R,"$rationalize",function(f){var T=this;if(arguments.length>1&&a.$raise(y("ArgumentError"),"wrong number of arguments ("+arguments.length+" for 0..1)"),null==f)return T;for(var r,e,n,t,i,v=f.$abs(),S=X(T,v),d=U(T,v),G=0,m=1,h=1,$=0;n=S.$ceil(),!q(n,d);)r=(t=n-1)*m+G,e=t*$+h,i=k(1,X(d,t)),d=k(1,X(S,t)),S=i,G=m,h=$,m=r,$=e;return a.$Rational(n*m+G,n*$+h)},-1),Y(R,"$round",function(f){var T=this,v=D,S=D,d=D;return null==f&&(f=0),te(f,0)?te(T.num,0)?0:te(T.den,1)?T.num:(v=U(K(T.num.$abs(),2),T.den),S=K(T.den,2),d=k(v,S).$truncate(),P(V(T.num,0))?d["$-@"]():d):T.$with_precision("round",f)},-1),Y(R,"$to_f",function(){return k(this.num,this.den)}),Y(R,"$to_i",function(){return this.$truncate()}),Y(R,"$to_r",M),Y(R,"$to_s",function(){return this.num+"/"+this.den}),Y(R,"$truncate",function(f){var T=this;return null==f&&(f=0),te(f,0)?P(V(T.num,0))?T.$ceil():T.$floor():T.$with_precision("truncate",f)},-1),Y(R,"$with_precision",function(f,T){var S,d=D;return B(y("Integer"),T)||a.$raise(y("TypeError"),"not an Integer"),S=10["$**"](T),d=K(this,S),P(V(T,1))?k(d.$send(f),S).$to_i():a.$Rational(d.$send(f),S)}),j(R,"$from_string",function(f){var d,G,T=f.trimLeft(),v=/^[+-]?[\d_]+(\.[\d_]+)?/;function m(){return v.test(T)}function h(){var r=T.match(v)[0];return T=T.slice(r.length),r.replace(/_/g,"")}return T.match(v),m()?(d=parseFloat(h()),"/"===T[0]?(T=T.slice(1),m()?(G=parseFloat(h()),a.$Rational(d,G)):a.$Rational(d,1)):a.$Rational(d,1)):a.$Rational(0,1)}),w(R,"divide","/"),w(R,"quo","/")},Opal.modules["corelib/time"]=function(l){var Q=l.slice,te=l.deny_frozen_access,a=l.klass,P=l.Kernel,V=l.Opal,k=l.defs,j=l.eqeqeq,B=l.def,E=l.truthy,W=l.rb_gt,Y=l.rb_lt,H=l.send,X=l.rb_plus,K=l.rb_divide,U=l.rb_minus,x=l.range,q=l.neqeq,M=l.rb_le,w=l.eqeq,I=l.alias,g=l.nil,z=l.$$$;return l.top.$require("corelib/comparable"),function(R,_,b){var f=a("::",_,"Time"),T=[f].concat([]),v=l.$r(T);f.$include(z("Comparable"));var $,S=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],d=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],G=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],m=["January","February","March","April","May","June","July","August","September","October","November","December"];function h($,r,e,n,t,i){if($=$.$$is_string?parseInt($,10):V["$coerce_to!"]($,z("Integer"),"to_int"),r===g)r=1;else if(!r.$$is_number)if(r["$respond_to?"]("to_str"))switch(r=r.$to_str(),r.toLowerCase()){case"jan":r=1;break;case"feb":r=2;break;case"mar":r=3;break;case"apr":r=4;break;case"may":r=5;break;case"jun":r=6;break;case"jul":r=7;break;case"aug":r=8;break;case"sep":r=9;break;case"oct":r=10;break;case"nov":r=11;break;case"dec":r=12;break;default:r=r.$to_i()}else r=V["$coerce_to!"](r,z("Integer"),"to_int");return(r<1||r>12)&&P.$raise(z("ArgumentError"),"month out of range: "+r),r-=1,((e=e===g?1:e.$$is_string?parseInt(e,10):V["$coerce_to!"](e,z("Integer"),"to_int"))<1||e>31)&&P.$raise(z("ArgumentError"),"day out of range: "+e),((n=n===g?0:n.$$is_string?parseInt(n,10):V["$coerce_to!"](n,z("Integer"),"to_int"))<0||n>24)&&P.$raise(z("ArgumentError"),"hour out of range: "+n),((t=t===g?0:t.$$is_string?parseInt(t,10):V["$coerce_to!"](t,z("Integer"),"to_int"))<0||t>59)&&P.$raise(z("ArgumentError"),"min out of range: "+t),i===g?i=0:i.$$is_number||(i=i.$$is_string?parseInt(i,10):V["$coerce_to!"](i,z("Integer"),"to_int")),(i<0||i>60)&&P.$raise(z("ArgumentError"),"sec out of range: "+i),[$,r,e,n,t,i]}return k(f,"$at",function(r,e){var n;return z("Time")["$==="](r)?(void 0!==e&&P.$raise(z("TypeError"),"can't convert Time into an exact number"),(n=new Date(r.getTime())).timezone=r.timezone,n):(r.$$is_number||(r=V["$coerce_to!"](r,z("Integer"),"to_int")),void 0===e?new Date(1e3*r):(e.$$is_number||(e=V["$coerce_to!"](e,z("Integer"),"to_int")),new Date(1e3*r+e/1e3)))},-2),k(f,"$new",function(r,e,n,t,i,s,c){var N,C,J,ne;return null==e&&(e=g),null==n&&(n=g),null==t&&(t=g),null==i&&(i=g),null==s&&(s=g),null==c&&(c=g),void 0===r?new Date:(r=(N=h(r,e,n,t,i,s))[0],e=N[1],n=N[2],t=N[3],i=N[4],s=N[5],c===g?(C=new Date(r,e,n,t,i,0,1e3*s),r<100&&C.setFullYear(r),C):(J=this.$_parse_offset(c),ne=new Date(Date.UTC(r,e,n,t,i,0,1e3*s)),r<100&&ne.setUTCFullYear(r),(C=new Date(ne.getTime()-36e5*J)).timezone=J,C))},-1),k(f,"$_parse_offset",function(r){var e;return r.$$is_string?"UTC"==r?e=0:/^[+-]\d\d:[0-5]\d$/.test(r)?e=("-"==r[0]?-1:1)*(+(r[1]+r[2])+ +(r[4]+r[5])/60):P.$raise(z("ArgumentError"),'"+HH:MM", "-HH:MM", "UTC" expected for utc_offset: '+r):r.$$is_number?e=r/3600:P.$raise(z("ArgumentError"),"Opal doesn't support other types for a timezone argument than Integer and String"),e}),k(f,"$local",function(r,e,n,t,i,s,c,u,N,C){var J,ne;return null==e&&(e=g),null==n&&(n=g),null==t&&(t=g),null==i&&(i=g),null==s&&(s=g),null==c&&(c=g),null==u&&(u=g),null==N&&(N=g),null==C&&(C=g),10===arguments.length&&(r=(J=Q(arguments))[5],e=J[4],n=J[3],t=J[2],i=J[1],s=J[0]),r=(J=h(r,e,n,t,i,s))[0],e=J[1],n=J[2],t=J[3],i=J[4],s=J[5],ne=new Date(r,e,n,t,i,0,1e3*s),r<100&&ne.setFullYear(r),ne},-2),k(f,"$gm",function(r,e,n,t,i,s,c,u,N,C){var J,ne;return null==e&&(e=g),null==n&&(n=g),null==t&&(t=g),null==i&&(i=g),null==s&&(s=g),null==c&&(c=g),null==u&&(u=g),null==N&&(N=g),null==C&&(C=g),10===arguments.length&&(r=(J=Q(arguments))[5],e=J[4],n=J[3],t=J[2],i=J[1],s=J[0]),r=(J=h(r,e,n,t,i,s))[0],e=J[1],n=J[2],t=J[3],i=J[4],s=J[5],ne=new Date(Date.UTC(r,e,n,t,i,0,1e3*s)),r<100&&ne.setUTCFullYear(r),ne.timezone=0,ne},-2),k(f,"$now",function(){return this.$new()}),B(f,"$+",function(r){j(z("Time"),r)&&P.$raise(z("TypeError"),"time + time?"),r.$$is_number||(r=V["$coerce_to!"](r,z("Integer"),"to_int"));var n=new Date(this.getTime()+1e3*r);return n.timezone=this.timezone,n}),B(f,"$-",function(r){var e=this;if(j(z("Time"),r))return(e.getTime()-r.getTime())/1e3;r.$$is_number||(r=V["$coerce_to!"](r,z("Integer"),"to_int"));var n=new Date(e.getTime()-1e3*r);return n.timezone=e.timezone,n}),B(f,"$<=>",function(r){var n=g;return j(z("Time"),r)?this.$to_f()["$<=>"](r.$to_f()):(n=r["$<=>"](this),E(n["$nil?"]())?g:E(W(n,0))?-1:E(Y(n,0))?1:0)}),B(f,"$==",function(r){var n;return E(n=z("Time")["$==="](r))?this.$to_f()===r.$to_f():n}),B(f,"$asctime",function(){return this.$strftime("%a %b %e %H:%M:%S %Y")}),H([["year","getFullYear","getUTCFullYear"],["mon","getMonth","getUTCMonth",1],["wday","getDay","getUTCDay"],["day","getDate","getUTCDate"],["hour","getHours","getUTCHours"],["min","getMinutes","getUTCMinutes"],["sec","getSeconds","getUTCSeconds"]],"each",[],function $(r,e,n,t){var i=null==$.$$s?this:$.$$s;return null==r&&(r=g),null==e&&(e=g),null==n&&(n=g),null==t&&(t=0),H(i,"define_method",[r],function s(){var c=null==s.$$s?this:s.$$s;return t+(null!=c.timezone?new Date(c.getTime()+36e5*c.timezone)[n]():c[e]())},{$$s:i})},{$$arity:-4,$$s:f}),B(f,"$yday",function(){var e,n,r=this;return e=v("Time").$new(r.$year()).$to_i(),n=v("Time").$new(r.$year(),r.$month(),r.$day()).$to_i(),X(K(U(n,e),86400).$round(),1)}),B(f,"$isdst",function(){var r=this,e=new Date(r.getFullYear(),0,1),n=new Date(r.getFullYear(),6,1);return r.getTimezoneOffset()<Math.max(e.getTimezoneOffset(),n.getTimezoneOffset())}),B(f,"$dup",function(){var r=this,e=g;return(e=new Date(r.getTime())).$copy_instance_variables(r),e.$initialize_dup(r),e}),B(f,"$eql?",function(r){var n;return E(n=r["$is_a?"](z("Time")))?this["$<=>"](r)["$zero?"]():n}),H([["sunday?",0],["monday?",1],["tuesday?",2],["wednesday?",3],["thursday?",4],["friday?",5],["saturday?",6]],"each",[],function $(r,e){var n=null==$.$$s?this:$.$$s;return null==r&&(r=g),null==e&&(e=g),H(n,"define_method",[r],function t(){return(null==t.$$s?this:t.$$s).$wday()===e},{$$s:n})},{$$s:f}),B(f,"$hash",function(){return"Time:"+this.getTime()}),B(f,"$inspect",function(){var r=this;return E(r["$utc?"]())?r.$strftime("%Y-%m-%d %H:%M:%S UTC"):r.$strftime("%Y-%m-%d %H:%M:%S %z")}),B(f,"$succ",function(){var e=new Date(this.getTime()+1e3);return e.timezone=this.timezone,e}),B(f,"$usec",function(){return 1e3*this.getMilliseconds()}),B(f,"$zone",function(){var r=this;if(0===r.timezone)return"UTC";if(null!=r.timezone)return g;var n,e=r.toString();return"GMT"==(n=-1==e.indexOf("(")?e.match(/[A-Z]{3,4}/)[0]:e.match(/\((.+)\)(?:\s|$)/)[1])&&/(GMT\W*\d{4})/.test(e)?RegExp.$1:n}),B(f,"$getgm",function(){var e=new Date(this.getTime());return e.timezone=0,e}),B(f,"$gmtime",function(){var r=this;return 0!==r.timezone&&(te(r),r.timezone=0),r}),B(f,"$gmt?",function(){return 0===this.timezone}),B(f,"$gmt_offset",function(){var r=this;return null!=r.timezone?60*r.timezone:60*-r.getTimezoneOffset()}),B(f,"$strftime",function(r){var e=this;return r.replace(/%([\-_#^0]*:{0,2})(\d+)?([EO]*)(.)/g,function(n,t,i,s,c){var N,C,J,u="",ne=-1!==t.indexOf("0"),se=-1===t.indexOf("-"),oe=-1!==t.indexOf("_"),ae=-1!==t.indexOf("^"),$e=-1!==t.indexOf("#"),re=(t.match(":")||[]).length;switch(i=parseInt(i,10),ne&&oe&&(t.indexOf("0")<t.indexOf("_")?ne=!1:oe=!1),c){case"Y":u+=e.$year();break;case"C":ne=!oe,u+=Math.round(e.$year()/100);break;case"y":ne=!oe,u+=e.$year()%100;break;case"m":ne=!oe,u+=e.$mon();break;case"B":u+=m[e.$mon()-1];break;case"b":case"h":oe=!ne,u+=G[e.$mon()-1];break;case"d":ne=!oe,u+=e.$day();break;case"e":oe=!ne,u+=e.$day();break;case"j":ne=!oe,i=isNaN(i)?3:i,u+=e.$yday();break;case"H":ne=!oe,u+=e.$hour();break;case"k":oe=!ne,u+=e.$hour();break;case"I":ne=!oe,u+=e.$hour()%12||12;break;case"l":oe=!ne,u+=e.$hour()%12||12;break;case"P":u+=e.$hour()>=12?"pm":"am";break;case"p":u+=e.$hour()>=12?"PM":"AM";break;case"M":ne=!oe,u+=e.$min();break;case"S":ne=!oe,u+=e.$sec();break;case"L":ne=!oe,i=isNaN(i)?3:i,u+=e.getMilliseconds();break;case"N":i=isNaN(i)?9:i,u=(u+=e.getMilliseconds().toString().$rjust(3,"0")).$ljust(i,"0");break;case"z":var le=null==e.timezone?e.getTimezoneOffset():60*-e.timezone,ee=Math.floor(Math.abs(le)/60),A=Math.abs(le)%60;u+=le<0?"+":"-",u+=ee<10?"0":"",u+=ee,re>0&&(u+=":"),u+=A<10?"0":"",u+=A,re>1&&(u+=":00");break;case"Z":u+=e.$zone();break;case"A":u+=S[e.$wday()];break;case"a":u+=d[e.$wday()];break;case"u":u+=e.$wday()+1;break;case"w":u+=e.$wday();break;case"V":u+=e.$cweek_cyear()["$[]"](0).$to_s().$rjust(2,"0");break;case"G":u+=e.$cweek_cyear()["$[]"](1);break;case"g":u+=e.$cweek_cyear()["$[]"](1)["$[]"](x(-2,-1,!1));break;case"s":u+=e.$to_i();break;case"n":u+="\n";break;case"t":u+="\t";break;case"%":u+="%";break;case"c":u+=e.$strftime("%a %b %e %T %Y");break;case"D":case"x":u+=e.$strftime("%m/%d/%y");break;case"F":u+=e.$strftime("%Y-%m-%d");break;case"v":u+=e.$strftime("%e-%^b-%4Y");break;case"r":u+=e.$strftime("%I:%M:%S %p");break;case"R":u+=e.$strftime("%H:%M");break;case"T":case"X":u+=e.$strftime("%H:%M:%S");break;case"J":if((N=e.$to_date().$jd())<2405160){u+=e.$strftime("%Y-%m-%d");break}N<2419614?(C="M",J=1867):N<2424875?(C="T",J=1911):N<2447535?(C="S",J=1925):N<2458605?(C="H",J=1988):(C="R",J=2018),u+=e.$format("%c%02d",C,U(e.$year(),J)),u+=e.$strftime("-%m-%d");break;default:return n}return ae&&(u=u.toUpperCase()),$e&&(u=u.replace(/[A-Z]/,function(L){L.toLowerCase()}).replace(/[a-z]/,function(L){L.toUpperCase()})),se&&(ne||oe)&&(u=u.$rjust(isNaN(i)?2:i,oe?" ":"0")),u})}),B(f,"$to_a",function(){var r=this;return[r.$sec(),r.$min(),r.$hour(),r.$day(),r.$month(),r.$year(),r.$wday(),r.$yday(),r.$isdst(),r.$zone()]}),B(f,"$to_f",function(){return this.getTime()/1e3}),B(f,"$to_i",function(){return parseInt(this.getTime()/1e3,10)}),B(f,"$cweek_cyear",function(){var n,r=this,i=g,s=g,c=g,N=g;return n=z("Time").$new(r.$year(),1,1).$wday(),i=r.$year(),E(M(n,4))&&q(n,0)?s=U(n,1):(s=U(U(n,7),1),w(s,-8)&&(s=-1)),c=K(X(r.$yday(),s),7).$ceil(),E(M(c,0))?z("Time").$new(U(r.$year(),1),12,31).$cweek_cyear():(w(c,53)&&(N=z("Time").$new(r.$year(),12,31).$wday(),E(M(N,3))&&q(N,0)&&(c=1,i=X(i,1))),[c,i])}),$=l.get_singleton_class(f),I($,"mktime","local"),I($,"utc","gm"),I(f,"ctime","asctime"),I(f,"dst?","isdst"),I(f,"getutc","getgm"),I(f,"gmtoff","gmt_offset"),I(f,"mday","day"),I(f,"month","mon"),I(f,"to_s","inspect"),I(f,"tv_sec","to_i"),I(f,"tv_usec","usec"),I(f,"utc","gmtime"),I(f,"utc?","gmt?"),I(f,"utc_offset","gmt_offset")}(0,Date)},Opal.modules["corelib/struct"]=function(l){var Q=l.klass,te=l.slice,a=l.extract_kwargs,P=l.ensure_kwargs,V=l.truthy,k=l.neqeq,j=l.eqeq,B=l.Opal,E=l.send,W=l.Class,Y=l.to_a,H=l.def,X=l.defs,K=l.Kernel,U=l.hash2,x=l.rb_gt,q=l.rb_minus,M=l.eqeqeq,w=l.rb_lt,I=l.rb_ge,D=l.rb_plus,y=l.alias,R=l.nil,_=l.$$$;return l.top.$require("corelib/enumerable"),function(b,f,T){var v=Q("::",null,"Struct"),S=[v].concat([]),d=l.$r(S);v.$include(_("Enumerable")),X(v,"$new",function m(h,$,r){var n,t,i,s,e=m.$$p||R,u=R;if(m.$$p=null,n=te(arguments,1),t=a(n),t=P(t),i=n,null==(s=t.$$smap.keyword_init)&&(s=!1),V(h))if(j(h.$class(),_("String"))&&k(h["$[]"](0).$upcase(),h["$[]"](0)))i.$unshift(h),h=R;else try{h=B["$const_name!"](h)}catch(N){if(!l.rescue(N,[_("TypeError"),_("NameError")]))throw N;try{i.$unshift(h),h=R}finally{l.pop_exception()}}return E(i,"map",[],function(C){return null==C&&(C=R),B["$coerce_to!"](C,_("String"),"to_str")}),u=E(W,"new",[this],function N(){var J,C=null==N.$$s?this:N.$$s;return E(i,"each",[],function J(ne){return null==ne&&(ne=R),(null==J.$$s?this:J.$$s).$define_struct_attribute(ne)},{$$s:C}),J=l.get_singleton_class(C),H(J,"$new",function(oe){var $e,le=R;return $e=te(arguments),(le=this.$allocate()).$$data={},E(le,"initialize",Y($e)),le},-1),J.$alias_method("[]","new")},{$$s:this}),V(e)&&E(u,"module_eval",[],e.$to_proc()),u.$$keyword_init=s,V(h)&&_("Struct").$const_set(h,u),u},-2),X(v,"$define_struct_attribute",function(h){var $=this;return j($,_("Struct"))&&K.$raise(_("ArgumentError"),"you cannot define attributes to the Struct class"),$.$members()["$<<"](h),E($,"define_method",[h],function r(){return(null==r.$$s?this:r.$$s).$$data[h]},{$$s:$}),E($,"define_method",[h+"="],function r(e){return null==e&&(e=R),(null==r.$$s?this:r.$$s).$$data[h]=e},{$$s:$})}),X(v,"$members",function(){var $,h=this;return null==h.members&&(h.members=R),j(h,_("Struct"))&&K.$raise(_("ArgumentError"),"the Struct class has no members"),h.members=V($=h.members)?$:[]}),X(v,"$inherited",function(h){var r,$=this;return null==$.members&&($.members=R),r=$.members,E(h,"instance_eval",[],function e(){return(null==e.$$s?this:e.$$s).members=r},{$$s:$})}),H(v,"$initialize",function(h){var $,r,e=this,n=R,t=R,i=R;return $=te(arguments),r=$,V(e.$class().$$keyword_init)?(n=V(t=r.$last())?t:U([],{}),(V(x(r.$length(),1))||V(1===r.length&&!n.$$is_hash))&&K.$raise(_("ArgumentError"),"wrong number of arguments (given "+r.$length()+", expected 0)"),i=q(n.$keys(),e.$class().$members()),V(i["$any?"]())&&K.$raise(_("ArgumentError"),"unknown keywords: "+i.$join(", ")),E(e.$class().$members(),"each",[],function s(c){var u,N=null==s.$$s?this:s.$$s;return null==c&&(c=R),u=[c,n["$[]"](c)],E(N,"[]=",u),u[u.length-1]},{$$s:e})):(V(x(r.$length(),e.$class().$members().$length()))&&K.$raise(_("ArgumentError"),"struct size differs"),E(e.$class().$members(),"each_with_index",[],function s(c,u){var N,C=null==s.$$s?this:s.$$s;return null==c&&(c=R),null==u&&(u=R),N=[c,r["$[]"](u)],E(C,"[]=",N),N[N.length-1]},{$$s:e}))},-1),H(v,"$initialize_copy",function(h){this.$$data={};var e,n,t,r=Object.keys(h.$$data);for(e=0,n=r.length;e<n;e++)this.$$data[t=r[e]]=h.$$data[t]}),X(v,"$keyword_init?",function(){return this.$$keyword_init}),H(v,"$members",function(){return this.$class().$members()}),H(v,"$hash",function(){return d("Hash").$new(this.$$data).$hash()}),H(v,"$[]",function(h){var $=this;return M(_("Integer"),h)?(V(w(h,$.$class().$members().$size()["$-@"]()))&&K.$raise(_("IndexError"),"offset "+h+" too small for struct(size:"+$.$class().$members().$size()+")"),V(I(h,$.$class().$members().$size()))&&K.$raise(_("IndexError"),"offset "+h+" too large for struct(size:"+$.$class().$members().$size()+")"),h=$.$class().$members()["$[]"](h)):M(_("String"),h)?$.$$data.hasOwnProperty(h)||K.$raise(_("NameError").$new("no member '"+h+"' in struct",h)):K.$raise(_("TypeError"),"no implicit conversion of "+h.$class()+" into Integer"),h=B["$coerce_to!"](h,_("String"),"to_str"),$.$$data[h]}),H(v,"$[]=",function(h,$){var r=this;return M(_("Integer"),h)?(V(w(h,r.$class().$members().$size()["$-@"]()))&&K.$raise(_("IndexError"),"offset "+h+" too small for struct(size:"+r.$class().$members().$size()+")"),V(I(h,r.$class().$members().$size()))&&K.$raise(_("IndexError"),"offset "+h+" too large for struct(size:"+r.$class().$members().$size()+")"),h=r.$class().$members()["$[]"](h)):M(_("String"),h)?V(r.$class().$members()["$include?"](h.$to_sym()))||K.$raise(_("NameError").$new("no member '"+h+"' in struct",h)):K.$raise(_("TypeError"),"no implicit conversion of "+h.$class()+" into Integer"),h=B["$coerce_to!"](h,_("String"),"to_str"),r.$$data[h]=$}),H(v,"$==",function(h){if(!V(h["$instance_of?"](this.$class())))return!1;var r={},e={};return function n(t,i){var s,c,u;for(s in r[t.$__id__()]=!0,e[i.$__id__()]=!0,t.$$data)if(c=t.$$data[s],u=i.$$data[s],_("Struct")["$==="](c)){if(!(r.hasOwnProperty(c.$__id__())&&e.hasOwnProperty(u.$__id__())||n(c,u)))return!1}else if(!c["$=="](u))return!1;return!0}(this,h)}),H(v,"$eql?",function(h){if(!V(h["$instance_of?"](this.$class())))return!1;var r={},e={};return function n(t,i){var s,c,u;for(s in r[t.$__id__()]=!0,e[i.$__id__()]=!0,t.$$data)if(c=t.$$data[s],u=i.$$data[s],_("Struct")["$==="](c)){if(!(r.hasOwnProperty(c.$__id__())&&e.hasOwnProperty(u.$__id__())||n(c,u)))return!1}else if(!c["$eql?"](u))return!1;return!0}(this,h)}),H(v,"$each",function m(){var h=m.$$p||R,$=this;return m.$$p=null,h===R?E($,"enum_for",["each"],function r(){return(null==r.$$s?this:r.$$s).$size()},{$$s:$}):(E($.$class().$members(),"each",[],function r(e){return null==e&&(e=R),l.yield1(h,(null==r.$$s?this:r.$$s)["$[]"](e))},{$$s:$}),$)}),H(v,"$each_pair",function m(){var h=m.$$p||R,$=this;return m.$$p=null,h===R?E($,"enum_for",["each_pair"],function r(){return(null==r.$$s?this:r.$$s).$size()},{$$s:$}):(E($.$class().$members(),"each",[],function r(e){return null==e&&(e=R),l.yield1(h,[e,(null==r.$$s?this:r.$$s)["$[]"](e)])},{$$s:$}),$)}),H(v,"$length",function(){return this.$class().$members().$length()}),H(v,"$to_a",function(){return E(this.$class().$members(),"map",[],function $(r){return null==r&&(r=R),(null==$.$$s?this:$.$$s)["$[]"](r)},{$$s:this})});var G=[];return H(v,"$inspect",function(){var h=this,$=R,r=R;return function(){try{return $="#<struct ",V(G["$include?"](h.$__id__()))?D($,":...>"):(G["$<<"](h.$__id__()),r=!0,M(_("Struct"),h)&&V(h.$class().$name())&&($=D($,h.$class()+" ")),$=D($,E(h.$each_pair(),"map",[],function(n,t){return null==n&&(n=R),null==t&&(t=R),n+"="+d("Opal").$inspect(t)}).$join(", ")),$=D($,">"))}finally{V(r)&&G.pop()}}()}),H(v,"$to_h",function m(){var h=m.$$p||R,$=this;return m.$$p=null,h!==R?E(E($,"map",[],h.$to_proc()),"to_h",Y($.$args())):E($.$class().$members(),"each_with_object",[U([],{})],function r(e,n){var t;return null==e&&(e=R),null==n&&(n=R),t=[e,(null==r.$$s?this:r.$$s)["$[]"](e)],E(n,"[]=",t),t[t.length-1]},{$$s:$})}),H(v,"$values_at",function(h){var $,r;$=te(arguments);for(var n=[],t=0,i=(r=E(r=$,"map",[],function(c){return null==c&&(c=R),c.$$is_range?c.$to_a():c}).$flatten()).length;t<i;t++)r[t].$$is_number||K.$raise(_("TypeError"),"no implicit conversion of "+r[t].$class()+" into Integer"),n.push(this["$[]"](r[t]));return n},-1),H(v,"$dig",function(h,$){var e,t=R;return e=te(arguments,1),(t=V(h.$$is_string&&this.$$data.hasOwnProperty(h))&&this.$$data[h]||R)===R||0===e.length?t:(V(t["$respond_to?"]("dig"))||K.$raise(_("TypeError"),t.$class()+" does not have #dig method"),E(t,"dig",Y(e)))},-2),y(v,"size","length"),y(v,"to_s","inspect"),y(v,"values","to_a")}()},Opal.modules["corelib/set"]=function(l){var Q=l.freeze,te=l.klass,a=l.slice,P=l.defs,V=l.hash2,k=l.truthy,j=l.eqeqeq,B=l.Kernel,E=l.send,W=l.def,Y=l.eqeq,H=l.rb_lt,X=l.rb_le,K=l.alias,x=l.nil,q=l.$$$;return function(M,w,I){var D=te("::",null,"Set"),y=[D].concat([]),g=l.$r(y);function _(b){k(b["$is_a?"](q("Set")))||B.$raise(q("ArgumentError"),"value must be a set")}return D.$$prototype.hash=x,D.$include(q("Enumerable")),P(D,"$[]",function(f){var T;return T=a(arguments),this.$new(T)},-1),W(D,"$initialize",function b(f){var T=b.$$p||x,v=this;return b.$$p=null,null==f&&(f=x),v.hash=V([],{}),k(f["$nil?"]())?x:(j(q("Enumerable"),f)||B.$raise(q("ArgumentError"),"value must be enumerable"),k(T)?E(f,"each",[],function S(d){return null==d&&(d=x),(null==S.$$s?this:S.$$s).$add(l.yield1(T,d))},{$$s:v}):v.$merge(f))},-1),W(D,"$dup",function(){return this.$class().$new().$merge(this)}),W(D,"$-",function(f){return k(f["$respond_to?"]("each"))||B.$raise(q("ArgumentError"),"value must be enumerable"),this.$dup().$subtract(f)}),W(D,"$inspect",function(){return"#<Set: {"+this.$to_a().$join(",")+"}>"}),W(D,"$==",function(f){var T=this;return!!k(T["$equal?"](f))||(k(f["$instance_of?"](T.$class()))?T.hash["$=="](f.$instance_variable_get("@hash")):!(!k(f["$is_a?"](q("Set")))||!Y(T.$size(),f.$size()))&&E(f,"all?",[],function v(S){var d=null==v.$$s?this:v.$$s;return null==d.hash&&(d.hash=x),null==S&&(S=x),d.hash["$include?"](S)},{$$s:T}))}),W(D,"$add",function(f){return this.hash["$[]="](f,!0),this}),W(D,"$classify",function b(){var f=b.$$p||x,T=this,v=x;return b.$$p=null,f===x?T.$enum_for("classify"):(v=E(q("Hash"),"new",[],function S(d,G){var m;return null==d&&(d=x),null==G&&(G=x),m=[G,(null==S.$$s?this:S.$$s).$class().$new()],E(d,"[]=",m),m[m.length-1]},{$$s:T}),E(T,"each",[],function(d){return null==d&&(d=x),v["$[]"](l.yield1(f,d)).$add(d)}),v)}),W(D,"$collect!",function b(){var f=b.$$p||x,T=this,v=x;return b.$$p=null,f===x?T.$enum_for("collect!"):(v=T.$class().$new(),E(T,"each",[],function(d){return null==d&&(d=x),v["$<<"](l.yield1(f,d))}),T.$replace(v))}),W(D,"$compare_by_identity",function(){var f=this;return k(f.hash["$respond_to?"]("compare_by_identity"))?(f.hash.$compare_by_identity(),f):f.$raise(g("NotImplementedError"),f.$class().$name()+"#compare_by_identity is not implemented")}),W(D,"$compare_by_identity?",function(){var T;return k(T=this.hash["$respond_to?"]("compare_by_identity?"))?this.hash["$compare_by_identity?"]():T}),W(D,"$delete",function(f){return this.hash.$delete(f),this}),W(D,"$delete?",function(f){var T=this;return k(T["$include?"](f))?(T.$delete(f),T):x}),W(D,"$delete_if",function b(){var f=b.$$p||x,T=this;return b.$$p=null,f===x?T.$enum_for("delete_if"):(E(E(T,"select",[],function(S){return null==S&&(S=x),l.yield1(f,S)}),"each",[],function v(S){var d=null==v.$$s?this:v.$$s;return null==d.hash&&(d.hash=x),null==S&&(S=x),d.hash.$delete(S)},{$$s:T}),T)}),W(D,"$freeze",function(){var f=this;return k(f["$frozen?"]())?f:(f.hash.$freeze(),Q(f))}),W(D,"$keep_if",function b(){var f=b.$$p||x,T=this;return b.$$p=null,f===x?T.$enum_for("keep_if"):(E(E(T,"reject",[],function(S){return null==S&&(S=x),l.yield1(f,S)}),"each",[],function v(S){var d=null==v.$$s?this:v.$$s;return null==d.hash&&(d.hash=x),null==S&&(S=x),d.hash.$delete(S)},{$$s:T}),T)}),W(D,"$reject!",function b(){var f=b.$$p||x,T=this,v=x;return b.$$p=null,f===x?T.$enum_for("reject!"):(v=T.$size(),E(T,"delete_if",[],f.$to_proc()),Y(T.$size(),v)?x:T)}),W(D,"$select!",function b(){var f=b.$$p||x,T=this,v=x;return b.$$p=null,f===x?T.$enum_for("select!"):(v=T.$size(),E(T,"keep_if",[],f.$to_proc()),Y(T.$size(),v)?x:T)}),W(D,"$add?",function(f){return k(this["$include?"](f))?x:this.$add(f)}),W(D,"$each",function b(){var f=b.$$p||x,T=this;return b.$$p=null,f===x?T.$enum_for("each"):(E(T.hash,"each_key",[],f.$to_proc()),T)}),W(D,"$empty?",function(){return this.hash["$empty?"]()}),W(D,"$eql?",function(f){return this.hash["$eql?"](E(f,"instance_eval",[],function v(){var S=null==v.$$s?this:v.$$s;return null==S.hash&&(S.hash=x),S.hash},{$$s:this}))}),W(D,"$clear",function(){return this.hash.$clear(),this}),W(D,"$include?",function(f){return this.hash["$include?"](f)}),W(D,"$merge",function(f){return E(f,"each",[],function v(S){return null==S&&(S=x),(null==v.$$s?this:v.$$s).$add(S)},{$$s:this}),this}),W(D,"$replace",function(f){var T=this;return T.$clear(),T.$merge(f),T}),W(D,"$size",function(){return this.hash.$size()}),W(D,"$subtract",function(f){return E(f,"each",[],function v(S){return null==S&&(S=x),(null==v.$$s?this:v.$$s).$delete(S)},{$$s:this}),this}),W(D,"$|",function(f){return k(f["$respond_to?"]("each"))||B.$raise(q("ArgumentError"),"value must be enumerable"),this.$dup().$merge(f)}),W(D,"$superset?",function(f){return _(f),!k(H(this.$size(),f.$size()))&&E(f,"all?",[],function v(S){return null==S&&(S=x),(null==v.$$s?this:v.$$s)["$include?"](S)},{$$s:this})}),W(D,"$proper_superset?",function(f){return _(f),!k(X(this.$size(),f.$size()))&&E(f,"all?",[],function v(S){return null==S&&(S=x),(null==v.$$s?this:v.$$s)["$include?"](S)},{$$s:this})}),W(D,"$subset?",function(f){return _(f),!k(H(f.$size(),this.$size()))&&E(this,"all?",[],function(S){return null==S&&(S=x),f["$include?"](S)})}),W(D,"$proper_subset?",function(f){return _(f),!k(X(f.$size(),this.$size()))&&E(this,"all?",[],function(S){return null==S&&(S=x),f["$include?"](S)})}),W(D,"$intersect?",function(f){var T=this;return _(f),k(H(T.$size(),f.$size()))?E(T,"any?",[],function(S){return null==S&&(S=x),f["$include?"](S)}):E(f,"any?",[],function v(S){return null==S&&(S=x),(null==v.$$s?this:v.$$s)["$include?"](S)},{$$s:T})}),W(D,"$disjoint?",function(f){return this["$intersect?"](f)["$!"]()}),W(D,"$to_a",function(){return this.hash.$keys()}),K(D,"+","|"),K(D,"<","proper_subset?"),K(D,"<<","add"),K(D,"<=","subset?"),K(D,">","proper_superset?"),K(D,">=","superset?"),K(D,"difference","-"),K(D,"filter!","select!"),K(D,"length","size"),K(D,"map!","collect!"),K(D,"member?","include?"),K(D,"union","|")}()},Opal.modules["corelib/dir"]=function(l){var X,Y,te=l.def,a=l.truthy,P=l.alias,k=l.nil,j=l.$$$;return[Y=(0,l.klass)("::",null,"Dir")].concat([]),X=l.get_singleton_class(Y),te(X,"$chdir",function U(x){var q=U.$$p||k,M=k;return U.$$p=null,function(){try{return M=l.current_dir,l.current_dir=x,l.yieldX(q,[])}finally{l.current_dir=M}}()}),te(X,"$pwd",function(){return l.current_dir||"."}),te(X,"$home",function(){var x;return a(x=j("ENV")["$[]"]("HOME"))?x:"."}),P(X,"getwd","pwd")},Opal.modules["corelib/file"]=function(l){var D,y,g,z,Q=l.truthy,a=l.const_set,P=l.Opal,V=l.regexp,k=l.rb_plus,j=l.def,B=l.Kernel,E=l.eqeq,W=l.rb_lt,Y=l.rb_minus,H=l.range,X=l.send,K=l.slice,U=l.alias,q=l.nil,M=l.$$$;return D=[],g=[y=(0,l.klass)("::",M("IO"),"File")].concat(D),z=q,a(g[0],"Separator",a(g[0],"SEPARATOR","/")),a(g[0],"ALT_SEPARATOR",q),a(g[0],"PATH_SEPARATOR",":"),a(g[0],"FNM_SYSCASE",0),z=/^[a-zA-Z]:(?:\\|\/)/,function(R,_){var b=[R].concat(_),f=l.$r(b);function T(S){return Q(S["$respond_to?"]("to_path"))&&(S=S.$to_path()),P["$coerce_to!"](S,M("String"),"to_str")}function v(){return f("ALT_SEPARATOR")===q?l.escape_regexp(f("SEPARATOR")):l.escape_regexp(k(f("SEPARATOR"),f("ALT_SEPARATOR")))}return j(R,"$absolute_path",function(d,G){var m,h,r,e,n,$=q,t=q,i=q,s=q,c=q;null==G&&(G=q),m=f("SEPARATOR"),h=v(),$=[],d=Q(d["$respond_to?"]("to_path"))?d.$to_path():d,d=P["$coerce_to!"](d,M("String"),"to_str"),G=Q(r=G)?r:M("Dir").$pwd(),e=d.substr(0,m.length)===m||z.test(d),n=G.substr(0,m.length)===m||z.test(G),Q(e)?(t=d.$split(V(["[",h,"]"])),i=z.test(d)?"":d.$sub(V(["^([",h,"]+).*$"]),"\\1"),s=!0):(t=k(G.$split(V(["[",h,"]"])),d.$split(V(["[",h,"]"]))),i=z.test(G)?"":G.$sub(V(["^([",h,"]+).*$"]),"\\1"),s=n);for(var u,N=0,C=t.length;N<C;N++)(u=t[N])!==q&&(""!==u||0!==$.length&&!s)&&("."!==u||0!==$.length&&!s)&&(".."===u?$.pop():$.push(u));return!s&&"."!==t[0]&&$.$unshift("."),c=$.$join(m),Q(s)&&(c=k(i,c)),c},-2),j(R,"$expand_path",function(d,G){var h,$,r=q,e=q,n=q;return null==G&&(G=q),h=f("SEPARATOR"),$=v(),Q("~"===d[0]||G&&"~"===G[0])&&(r=f("Dir").$home(),Q(r)||B.$raise(M("ArgumentError"),"couldn't find HOME environment -- expanding `~'"),e=z.test(r)?"":r.$sub(V(["^([",$,"]+).*$"]),"\\1"),Q(r["$start_with?"](e))||B.$raise(M("ArgumentError"),"non-absolute home"),r=k(r,h),n=V(["^\\~(?:",h,"|$)"]),d=d.$sub(n,r),Q(G)&&(G=G.$sub(n,r))),this.$absolute_path(d,G)},-2),j(R,"$dirname",function(d,G){var h;if(null==G&&(G=1),E(G,0))return d;Q(W(G,0))&&B.$raise(M("ArgumentError"),"level can't be negative"),h=v();var r,$=(d=T(d)).match(new RegExp("^["+h+"]"));return r=""===(d=(d=(d=d.replace(new RegExp("["+h+"]+$"),"")).replace(new RegExp("[^"+h+"]+$"),"")).replace(new RegExp("["+h+"]+$"),""))?$?"/":".":d,1==G?r:this.$dirname(r,Y(G,1))},-2),j(R,"$basename",function(d,G){var m;return null==G&&(G=q),m=v(),0==(d=T(d)).length||(G=G!==q?P["$coerce_to!"](G,M("String"),"to_str"):null,d=(d=d.replace(new RegExp("(.)["+m+"]*$"),"$1")).replace(new RegExp("^(?:.*["+m+"])?([^"+m+"]+)$"),"$1"),".*"===G?d=d.replace(/\.[^\.]+$/,""):null!==G&&(G=l.escape_regexp(G),d=d.replace(new RegExp(G+"$"),""))),d},-2),j(R,"$extname",function(d){var m=q,h=q;return d=T(d),m=this.$basename(d),Q(m["$empty?"]())||(h=m["$[]"](H(1,-1,!1)).$rindex("."),Q(h["$nil?"]())||E(k(h,1),Y(m.$length(),1)))?"":m["$[]"](l.Range.$new(k(h,1),-1,!1))}),j(R,"$exist?",function(d){return null!=l.modules[d]}),j(R,"$directory?",function(d){var G=q;for(var m in G=[],l.modules)G.push(m);return d=d.$gsub(V(["(^.",f("SEPARATOR"),"+|",f("SEPARATOR"),"+$)"])),X(G,"find",[],function($){return null==$&&($=q),$["$=~"](V(["^",d]))})}),j(R,"$join",function(d){var G,m,h=q;return G=K(arguments),Q((m=G)["$empty?"]())?"":(h="",m=X(m.$flatten().$each_with_index(),"map",[],function(r,e){return null==r&&(r=q),null==e&&(e=q),E(e,0)&&Q(r["$empty?"]())||E(m.$length(),k(e,1))&&Q(r["$empty?"]())?f("SEPARATOR"):r}),m=X(m,"reject",[],"empty?".$to_proc()),X(m,"each_with_index",[],function(r,e){var n=q;return null==r&&(r=q),null==e&&(e=q),n=m["$[]"](k(e,1)),Q(n["$nil?"]())?h=""+h+r:(Q(r["$end_with?"](f("SEPARATOR")))&&Q(n["$start_with?"](f("SEPARATOR")))&&(r=r.$sub(V([f("SEPARATOR"),"+$"]),"")),h=Q(r["$end_with?"](f("SEPARATOR")))||Q(n["$start_with?"](f("SEPARATOR")))?""+h+r:""+h+r+f("SEPARATOR"))}),h)},-1),j(R,"$split",function(d){return d.$split(f("SEPARATOR"))}),U(R,"realpath","expand_path"),U(R,"exists?","exist?")}(l.get_singleton_class(y),g)},Opal.modules["corelib/process/base"]=function(l){var B,Q=l.klass,te=l.slice,a=l.defs,P=l.return_val,V=l.nil;return B=Q("::",null,"Signal"),a(B,"$trap",function(W){return te(arguments),V},-1),function(k,j){var B=Q("::",null,"GC");return a(B,"$start",P(V))}()},Opal.modules["corelib/process"]=function(l){var Q=l.module,te=l.defs,a=l.truthy,P=l.return_val,V=l.Kernel,k=l.nil,j=l.$$$;return function(B){var E=Q("::","Process"),W=k;if(E.__clocks__=[],te(E,"$__register_clock__",function(X,K){var U=this;return null==U.__clocks__&&(U.__clocks__=k),U.$const_set(X,U.__clocks__.$size()),U.__clocks__["$<<"](K)}),E.$__register_clock__("CLOCK_REALTIME",function(){return Date.now()}),W=!1,l.global.performance)W=function(){return performance.now()};else if(l.global.process&&process.hrtime){var Y=process.hrtime();W=function(){var H=process.hrtime(Y);return 1e3*H[0]+(H[1]/1e3|0)/1e3}}return a(W)&&E.$__register_clock__("CLOCK_MONOTONIC",W),te(E,"$pid",P(0)),te(E,"$times",function(){var X;return X=j("Time").$now().$to_f(),j(j("Benchmark"),"Tms").$new(X,X,X,X,X)}),te(E,"$clock_gettime",function(X,K){var U=this,q=k;null==U.__clocks__&&(U.__clocks__=k),null==K&&(K="float_second"),a(q=U.__clocks__["$[]"](X))||V.$raise(j(j("Errno"),"EINVAL"),"clock_gettime("+X+") "+U.__clocks__["$[]"](X));var M=q();switch(K){case"float_second":return M/1e3;case"float_millisecond":return M/1;case"float_microsecond":return 1e3*M;case"second":return M/1e3|0;case"millisecond":return M/1|0;case"microsecond":return 1e3*M|0;case"nanosecond":return 1e6*M|0;default:V.$raise(j("ArgumentError"),"unexpected unit: "+K)}},-2)}()},Opal.modules["corelib/random/formatter"]=function(l){var K,M,w,I,D,U,te=l.module,a=l.def,P=l.range,V=l.send,k=l.rb_divide,j=l.Kernel,B=l.Opal,W=l.nil,Y=l.$$$;return K=[],M=[U=(0,l.klass)("::",null,"Random")].concat(K),I=[w=te(U,"Formatter")].concat(M),D=l.$r(I),a(w,"$hex",function(g){null==g&&(g=W),g=Y("Random").$_verify_count(g);for(var R=this.$bytes(g),_="",b=0;b<g;b++)_+=R.charCodeAt(b).toString(16).padStart(2,"0");return _.$encode("US-ASCII")},-1),a(w,"$random_bytes",function(g){return null==g&&(g=W),this.$bytes(g)},-1),a(w,"$base64",function(g){return null==g&&(g=W),Y("Base64").$strict_encode64(this.$random_bytes(g)).$encode("US-ASCII")},-1),a(w,"$urlsafe_base64",function(g,z){return null==g&&(g=W),null==z&&(z=!1),Y("Base64").$urlsafe_encode64(this.$random_bytes(g),z).$encode("US-ASCII")},-1),a(w,"$uuid",function(){var z=W;return(z=this.$hex(16).$split(""))["$[]="](12,"4"),z["$[]="](16,(3&parseInt(z["$[]"](16),16)|8).toString(16)),z=[z["$[]"](P(0,8,!0)),z["$[]"](P(8,12,!0)),z["$[]"](P(12,16,!0)),z["$[]"](P(16,20,!0)),z["$[]"](P(20,32,!0))],(z=V(z,"map",[],"join".$to_proc())).$join("-")}),a(w,"$random_float",function(){var z=W,R=W;return z=this.$bytes(4),R=0,V(4,"times",[],function(b){return null==b&&(b=W),R=(R=R["$<<"](8))["$|"](z["$[]"](b).$ord())}),k(R.$abs(),2147483647)}),a(w,"$random_number",function(g){var z=this;function R(){return z.$random_float()}function _(f){return Math.floor(R()*f)}return null==g?R():g.$$is_range?function b(){var f=g.begin,T=g.end;if(f===W||T===W)return W;var v=T-f;return v<0?W:0===v?f:(T%1==0&&f%1==0&&!g.excl&&v++,_(v)+f)}():g.$$is_number?(g<=0&&j.$raise(Y("ArgumentError"),"invalid argument - "+g),g%1==0?_(g):R()*g):((g=B["$coerce_to!"](g,Y("Integer"),"to_int"))<=0&&j.$raise(Y("ArgumentError"),"invalid argument - "+g),_(g))},-1),a(w,"$alphanumeric",function(g){var R=W;return null==g&&(g=W),g=D("Random").$_verify_count(g),R=V([P("0","9",!1),P("a","z",!1),P("A","Z",!1)],"map",[],"to_a".$to_proc()).$flatten(),V(Y("Array"),"new",[g],function _(b){return null==b&&(b=W),R["$[]"]((null==_.$$s?this:_.$$s).$random_number(R.$length()))},{$$s:this}).$join()},-1),U.$include(Y(Y("Random"),"Formatter")),U.$extend(Y(Y("Random"),"Formatter"))},Opal.modules["corelib/random/mersenne_twister"]=function(l){var W,E,Y,Q=l.klass,te=l.const_set,a=l.send,V=l.$$$,k=l.nil;return k=function(){var j=624,B=397,X=function(I,D){return function(I,D){return 2147483648&I|2147483647&D}(I,D)>>>1^(1&D?2567483615:0)};function q(I){var D;return--I.left<=0&&function x(I){var g,D=0,y=I.state;for(I.left=j,I.next=0,g=j-B+1;--g;D++)y[D]=y[D+B]^X(y[D+0],y[D+1]);for(g=B;--g;D++)y[D]=y[D+(B-j)]^X(y[D+0],y[D+1]);y[D]=y[D+(B-j)]^X(y[D+0],y[0])}(I),D=I.state[I.next++],D^=D>>>11,D^=D<<7&2636928640,D^=D<<15&4022730752,(D^=D>>>18)>>>0}return{genrand_real:function w(I){return function M(I,D){return(67108864*(I>>>=5)+(D>>>=6))*(1/9007199254740992)}(q(I),q(I))},init:function K(I){var D={left:0,next:j,state:new Array(j)};return function U(I,D){var y;for(I.state[0]=D>>>0,y=1;y<j;y++)I.state[y]=1812433253*(I.state[y-1]^I.state[y-1]>>30>>>0)+y,I.state[y]&=4294967295;I.left=1,I.next=j}(D,I),D}}}(),E=Q("::",null,"Random"),Y=Number.MAX_SAFE_INTEGER||Math.pow(2,53)-1,te(E,"MERSENNE_TWISTER_GENERATOR",{new_seed:function(){return Math.round(Math.random()*Y)},reseed:function(H){return k.init(H)},rand:function(H){return k.genrand_real(H)}}),a(E,"generator=",W=[V(E,"MERSENNE_TWISTER_GENERATOR")]),W[W.length-1]},Opal.modules["corelib/random"]=function(l){var K,Q=l.truthy,te=l.klass,a=l.Kernel,P=l.defs,V=l.Opal,k=l.def,j=l.eqeqeq,B=l.send,E=l.top,W=l.nil,Y=l.$$$;return E.$require("corelib/random/formatter"),(K=te("::",null,"Random")).$attr_reader("seed","state"),P(K,"$_verify_count",function(x){return Q(x)||(x=16),"number"!=typeof x&&(x=x.$to_int()),x<0&&a.$raise(Y("ArgumentError"),"negative string size (or size too big)"),Math.floor(x)}),k(K,"$initialize",function(x){return null==x&&(x=Y("Random").$new_seed()),x=V["$coerce_to!"](x,Y("Integer"),"to_int"),this.state=x,this.$reseed(x)},-1),k(K,"$reseed",function(x){return this.seed=x,this.$rng=l.$$rand.reseed(x)}),P(K,"$new_seed",function(){return l.$$rand.new_seed()}),P(K,"$rand",function(x){return Y(this,"DEFAULT").$rand(x)},-1),P(K,"$srand",function(x){var M;return null==x&&(x=Y("Random").$new_seed()),x=V["$coerce_to!"](x,Y("Integer"),"to_int"),M=Y(this,"DEFAULT").$seed(),Y(this,"DEFAULT").$reseed(x),M},-1),P(K,"$urandom",function(x){return Y("SecureRandom").$bytes(x)}),k(K,"$==",function(x){var M=W;return!!j(Y("Random"),x)&&(Q(M=this.$seed()["$=="](x.$seed()))?this.$state()["$=="](x.$state()):M)}),k(K,"$bytes",function(x){return x=Y("Random").$_verify_count(x),B(Y("Array"),"new",[x],function M(){return(null==M.$$s?this:M.$$s).$rand(255).$chr()},{$$s:this}).$join().$encode("ASCII-8BIT")}),P(K,"$bytes",function(x){return Y(this,"DEFAULT").$bytes(x)}),k(K,"$rand",function(x){return this.$random_number(x)},-1),k(K,"$random_float",function(){return this.state++,l.$$rand.rand(this.$rng)}),P(K,"$random_float",function(){return Y(this,"DEFAULT").$random_float()}),P(K,"$generator=",function(x){var q=this;return l.$$rand=x,Q(q["$const_defined?"]("DEFAULT"))?Y(q,"DEFAULT").$reseed():q.$const_set("DEFAULT",q.$new(q.$new_seed()))}),E.$require("corelib/random/mersenne_twister")},Opal.modules["corelib/unsupported"]=function(l){var M,w,I,Q=l.Kernel,te=l.klass,a=l.send,P=l.slice,V=l.module,k=l.def,j=l.return_val,B=l.alias,E=l.defs,W=l.top,H=l.nil,X=l.$$$,K={};function U(q){switch(l.config.unsupported_features_severity){case"error":Q.$raise(X("NotImplementedError"),q);break;case"warning":!function x(q){K[q]||(K[q]=!0,W.$warn(q))}(q)}}return w=te("::",null,"String"),I="String#%s not supported. Mutable String methods are not supported in Opal.",a(["<<","capitalize!","chomp!","chop!","downcase!","gsub!","lstrip!","next!","reverse!","slice!","squeeze!","strip!","sub!","succ!","swapcase!","tr!","tr_s!","upcase!","prepend","[]=","clear","encode!","unicode_normalize!"],"each",[],function D(y){return null==y&&(y=H),a(null==D.$$s?this:D.$$s,"define_method",[y],function(R){return P(arguments),Q.$raise(X("NotImplementedError"),I["$%"](y))},-1)},{$$s:w}),function(q){var M=V("::","Kernel"),w="Object tainting is not supported by Opal";k(M,"$taint",function(){return U(w),this}),k(M,"$untaint",function(){return U(w),this}),k(M,"$tainted?",function(){return U(w),!1})}(),function(q,M){var w=te("::",null,"Module");k(w,"$public",function(D){var g;return 0===(g=P(arguments)).length?(this.$$module_function=!1,H):1===g.length?g[0]:g},-1),k(w,"$private_class_method",function(D){var g;return 1===(g=P(arguments)).length?g[0]:g},-1),k(w,"$private_method_defined?",j(!1)),k(w,"$private_constant",function(D){return P(arguments),H},-1),B(w,"nesting","public"),B(w,"private","public"),B(w,"protected","public"),B(w,"protected_method_defined?","private_method_defined?"),B(w,"public_class_method","private_class_method"),B(w,"public_instance_method","instance_method"),B(w,"public_instance_methods","instance_methods"),B(w,"public_method_defined?","method_defined?")}(),M=V("::","Kernel"),k(M,"$private_methods",function(I){return P(arguments),[]},-1),B(M,"protected_methods","private_methods"),B(M,"private_instance_methods","private_methods"),B(M,"protected_instance_methods","private_methods"),function(q,M){var w=V("::","Kernel"),I=[w].concat([]),D=l.$r(I);k(w,"$eval",function(g){return P(arguments),Q.$raise(X("NotImplementedError"),"To use Kernel#eval, you must first require 'opal-parser'. See https://github.com/opal/opal/blob/"+D("RUBY_ENGINE_VERSION")+"/docs/opal_parser.md for details.")},-1)}(),E(W,"$public",function(M){var I;return 1===(I=P(arguments)).length?I[0]:I},-1),E(W,"$private",function(M){var I;return 1===(I=P(arguments)).length?I[0]:I},-1)},Opal.modules["corelib/binding"]=function(l){var w,I,te=l.truthy,a=l.def,P=l.slice,V=l.send,k=l.to_a,j=l.Kernel,B=l.return_ivar,E=l.eqeq,W=l.thrower,Y=l.module,H=l.const_set,X=l.top,U=l.nil,x=l.$$$;return(I=(w=(0,l.klass)("::",null,"Binding")).$$prototype).jseval=I.scope_variables=U,a(w,"$initialize",function(y,g,z,R){var _,b=this;return null==g&&(g=[]),null==R&&(R=U),b.jseval=(_=[y,g,z,R])[0],b.scope_variables=_[1],b.receiver=_[2],b.source_location=_[3],te(void 0!==typeof z)?U:z=b.$js_eval("self")},-2),a(w,"$js_eval",function(y){var z;return z=P(arguments),te(this.jseval)?V(this.jseval,"call",k(z)):j.$raise("Evaluation on a Proc#binding is not supported")},-1),a(w,"$local_variable_get",function(y){try{return this.$js_eval(y)}catch(z){if(!l.rescue(z,[x("Exception")]))throw z;try{return j.$raise(x("NameError"),"local variable `"+y+"' is not defined for "+this.$inspect())}finally{l.pop_exception()}}}),a(w,"$local_variable_set",function(y,g){return l.Binding.tmp_value=g,this.$js_eval(y+" = Opal.Binding.tmp_value"),delete l.Binding.tmp_value,g}),a(w,"$local_variables",B("scope_variables")),a(w,"$local_variable_defined?",function(y){return this.scope_variables["$include?"](y)}),a(w,"$eval",function(y,g,z){try{return W("eval_return"),null==g&&(g=U),null==z&&(z=U),E(y,"self")?this.$receiver():j.$eval(y,this,g,z)}catch(b){if(b===l.t_eval_return)return b.$v;throw b}},-2),w.$attr_reader("receiver","source_location"),a(Y("::","Kernel"),"$binding",function(){return j.$raise("Opal doesn't support dynamic calls to binding")}),H([][0],"TOPLEVEL_BINDING",x("Binding").$new(function(q){return new Function("self","return "+q)(X)},[],X,["<main>",0]))},Opal.modules["corelib/irb"]=function(l){var D,R,S,d,_,b,f,g,Q=l.module,te=l.truthy,a=l.Kernel,P=l.defs,V=l.hash,k=l.gvars,j=l.lambda,B=l.send,E=l.rb_plus,W=l.const_set,Y=l.klass,H=l.def,X=l.Opal,K=l.range,U=l.eqeq,x=l.thrower,q=[],M=l.nil,w=l.$$$;D=q,R=g=[Q(q[0],"Opal")].concat(D),b=[_=Q(g[0],"IRB")].concat(R),f=l.$r(b),P(_,"$ensure_loaded",function(v){var d,G;if(te(l.loaded_features["$include?"](v)))return M;if(d="https://cdn.opalrb.com/opal/"+(te(f("RUBY_ENGINE_VERSION")["$include?"]("dev"))?"master":f("RUBY_ENGINE_VERSION"))+"/"+v+".js",typeof XMLHttpRequest<"u"){var m=new XMLHttpRequest;m.open("GET",d,!1),m.send(""),G=m.responseText}else a.$raise("You need to provision "+v+" yourself in this environment");return new Function("Opal",G)(l),l.require(v),te(l.loaded_features["$include?"](v))?M:a.$raise("Could not load "+v+" for some reason")}),_.$singleton_class().$attr_accessor("output"),P(_,"$prepare_console",function T(){var v=T.$$p||M,d=this,G=M,m=M;return null==k.stdout&&(k.stdout=M),null==k.stderr&&(k.stderr=M),null==k.stdin&&(k.stdin=M),T.$$p=null,function(){try{return d["$output="](""),G=V(k.stdout,j(function($){return null==$&&($=M),k.stdout=$}),k.stderr,j(function($){return null==$&&($=M),k.stderr=$})),te(d["$browser?"]())&&(B(G,"each",[],function h($,r){var e=null==h.$$s?this:h.$$s,n=M;return null==$&&($=M),null==r&&(r=M),(n=$.$dup())["$write_proc="](B(e,"proc",[],function t(i){var s=null==t.$$s?this:t.$$s;return null==i&&(i=M),s["$output="](E(s.$output(),i)),s["$output="](s.$output().$split("\n").$last(30).$join("\n")),te(i["$end_with?"]("\n"))&&s["$output="](E(s.$output(),"\n")),$.$write_proc().$call(i)},{$$s:e})),n["$tty="](!1),r.$call(n)},{$$s:d}),m=k.stdin.$read_proc(),k.stdin["$read_proc="](function(h){var $=prompt(d.$output());return null!==$?$+"\n":M})),l.yieldX(v,[])}finally{B(G,"each",[],function($,r){return null==$&&($=M),null==r&&(r=M),r.$call($)}),B(k.stdin,"read_proc=",[m]),B(d,"output=",[""])}}()}),P(_,"$browser?",function(){return typeof document<"u"&&typeof prompt<"u"}),W(b[0],"LINEBREAKS",["unexpected token $end","unterminated string meets end of file"].$freeze()),(d=(S=Y(b[0],null,"Silencer")).$$prototype).collector=d.stderr=M,H(S,"$initialize",function(){return null==k.stderr&&(k.stderr=M),this.stderr=k.stderr}),H(S,"$silence",function G(){var m=G.$$p||M,h=this;return G.$$p=null,function(){try{return h.collector=w("StringIO").$new(),k.stderr=h.collector,l.yieldX(m,[])}finally{k.stderr=h.stderr}}()}),H(S,"$warnings",function(){return this.collector.$string()}),function(I,D,y){var g=Y("::",null,"Binding"),z=[g].concat(y),R=l.$r(z);H(g,"$irb",function(){try{var b=x("return"),T=M;return w(X,"IRB").$ensure_loaded("opal-replutils"),T=w(w(X,"IRB"),"Silencer").$new(),B(w(X,"IRB"),"prepare_console",[],function v(){var S=null==v.$$s?this:v.$$s;return function(){try{var d=x("break");return B(S,"loop",[],function G(){var m=null==G.$$s?this:G.$$s,h=M,$=M,r=M,e=M,n=M;for(m.$print(">> "),h=m.$gets(),te(h)||d.$throw(),$="",te(w(X,"IRB")["$browser?"]())&&m.$puts(h),te(h["$start_with?"]("ls "))?($=h["$[]"](K(3,-1,!1)),r="ls"):U(h,"ls\n")?($="self",r="ls"):te(h["$start_with?"]("show "))?($=h["$[]"](K(5,-1,!1)),r="show"):($=h,r="inspect"),e=M;;){try{B(T,"silence",[],function(){return e=l.compile($,{irb:!0})})}catch(t){if(!l.rescue(t,[R("SyntaxError")]))throw t;n=t;try{if(te(w(w(X,"IRB"),"LINEBREAKS")["$include?"](n.$message()))){m.$print(".. "),h=m.$gets(),te(h)||b.$throw(),te(w(X,"IRB")["$browser?"]())&&m.$puts(h),$=E($,h);continue}te(T.$warnings()["$empty?"]())?m.$warn(n.$full_message()):m.$warn(T.$warnings())}finally{l.pop_exception()}}break}return U(r,"show")&&(m.$puts(e),b.$throw()),m.$puts(w("REPLUtils").$eval_and_print(e,r,!1,m))},{$$s:S,$$ret:b})}catch(G){if(G===d)return G.$v;throw G}}()},{$$s:this})}catch(v){if(v===b)return v.$v;throw v}})}(0,0,q),l.irb=function(I){w("Binding").$new(I).$irb()},l.load_parser=function(){l.Opal.IRB.$ensure_loaded("opal-parser")},typeof l.eval>"u"&&(l.eval=function(I){return l.load_parser(),l.eval(I)}),typeof l.compile>"u"&&(l.compile=function(I,D){return l.load_parser(),l.compile(I,D)})},Opal.queue(function(l){var Q=l.Object;return Q.$require("opal/base"),Q.$require("opal/mini"),Q.$require("corelib/kernel/format"),Q.$require("corelib/string/encoding"),Q.$autoload("Math","corelib/math"),Q.$require("corelib/complex/base"),Q.$autoload("Complex","corelib/complex"),Q.$require("corelib/rational/base"),Q.$autoload("Rational","corelib/rational"),Q.$require("corelib/time"),Q.$autoload("Struct","corelib/struct"),Q.$autoload("Set","corelib/set"),Q.$autoload("Dir","corelib/dir"),Q.$autoload("File","corelib/file"),Q.$require("corelib/process/base"),Q.$autoload("Process","corelib/process"),Q.$autoload("Random","corelib/random"),Q.$require("corelib/unsupported"),Q.$require("corelib/binding"),Q.$require("corelib/irb")}),Opal.queue(function(l){var v,h,$,r,e,S,d,G,Q=l.module,te=l.defs,a=l.slice,P=l.truthy,V=l.send,k=l.Kernel,j=l.extract_kwargs,B=l.ensure_kwargs,E=l.range,W=l.to_a,Y=l.def,H=l.return_ivar,X=l.alias,K=l.klass,U=l.rb_minus,x=l.return_val,q=l.hash2,M=l.send2,w=l.find_super,I=l.eqeqeq,D=l.rb_ge,y=l.return_self,g=l.gvars,z=l.top,R=[],_=l.$r(R),b=l.nil,f=l.$$$;return v=R,d=[S=Q(R[0],"Native")].concat(v),G=l.$r(d),te(S,"$is_a?",function(h,$){try{return h instanceof this.$try_convert($)}catch{return!1}}),te(S,"$try_convert",function(h,$){return null==$&&($=b),this["$native?"](h)?h:h["$respond_to?"]("to_n")?h.$to_n():$},-2),te(S,"$convert",function(h){return this["$native?"](h)?h:h["$respond_to?"]("to_n")?h.$to_n():void this.$raise(G("ArgumentError"),h.$inspect()+" isn't native")}),te(S,"$call",function m(h,$,r){var t,e=m.$$p||b,i=this;m.$$p=null,t=a(arguments,2);var s=h[$];if(s instanceof Function){for(var c=new Array(t.length),u=0,N=t.length;u<N;u++){var C=t[u],J=i.$try_convert(C);c[u]=J===b?C:J}return e!==b&&c.push(e),i.$Native(s.apply(h,c))}return i.$Native(s)},-3),te(S,"$proc",function m(){var h=m.$$p||b;return m.$$p=null,P(h)||this.$raise(G("LocalJumpError"),"no block given"),V(k,"proc",[],function r(e){var n,t,s,i=null==r.$$s?this:r.$$s;if(n=a(arguments),V(t=n,"map!",[],function u(N){return null==N&&(N=b),(null==u.$$s?this:u.$$s).$Native(N)},{$$s:i}),s=i.$Native(this),this===l.global)return h.apply(i,t);var c=h.$$s;h.$$s=null;try{return h.apply(s,t)}finally{h.$$s=c}},{$$arity:-1,$$s:this})}),h=d,r=[$=Q(d[0],"Helpers")].concat(h),e=l.$r(r),Y($,"$alias_native",function n(t,i,s){var c,u,N,C,ne=this;return n.$$p=null,c=a(arguments,1),u=j(c),u=B(u),c.length>0&&(N=c.shift()),null==N&&(N=t),null==(C=u.$$smap.as)&&(C=b),P(N["$end_with?"]("="))?V(ne,"define_method",[t],function se(oe){var ae=null==se.$$s?this:se.$$s;return null==ae.native&&(ae.native=b),null==oe&&(oe=b),ae.native[N["$[]"](E(0,-2,!1))]=e("Native").$convert(oe),oe},{$$s:ne}):P(C)?V(ne,"define_method",[t],function se(oe){var re,ae=se.$$p||b,le=null==se.$$s?this:se.$$s,ee=b;return null==le.native&&(le.native=b),se.$$p=null,re=a(arguments),ee=V(e("Native"),"call",[le.native,N].concat(W(re)),ae.$to_proc()),P(ee)?C.$new(ee.$to_n()):b},{$$arity:-1,$$s:ne}):V(ne,"define_method",[t],function se(oe){var re,ae=se.$$p||b,le=null==se.$$s?this:se.$$s;return null==le.native&&(le.native=b),se.$$p=null,re=a(arguments),V(e("Native"),"call",[le.native,N].concat(W(re)),ae.$to_proc())},{$$arity:-1,$$s:ne})},-2),Y($,"$native_reader",function(t){var i;return i=a(arguments),V(i,"each",[],function u(N){var C=null==u.$$s?this:u.$$s;return null==N&&(N=b),V(C,"define_method",[N],function J(){var ne=null==J.$$s?this:J.$$s;return null==ne.native&&(ne.native=b),ne.$Native(ne.native[N])},{$$s:C})},{$$s:this})},-1),Y($,"$native_writer",function(t){var i;return i=a(arguments),V(i,"each",[],function u(N){var C=null==u.$$s?this:u.$$s;return null==N&&(N=b),V(C,"define_method",[N+"="],function J(ne){var se=null==J.$$s?this:J.$$s;return null==se.native&&(se.native=b),null==ne&&(ne=b),se.$Native(se.native[N]=ne)},{$$s:C})},{$$s:this})},-1),Y($,"$native_accessor",function(t){var i,s;return i=a(arguments),V(this,"native_reader",W(s=i)),V(this,"native_writer",W(s))},-1),function(m,h){var $=Q(m,"Wrapper"),r=[$].concat(h),e=l.$r(r);Y($,"$initialize",function(t){return P(k["$native?"](t))||k.$raise(e("ArgumentError"),t.$inspect()+" isn't native"),this.native=t}),Y($,"$to_n",H("native")),te($,"$included",function(t){return t.$extend(e("Helpers"))})}(d[0],d),te(S,"$included",function(h){return this.$warn("Including ::Native is deprecated. Please include Native::Wrapper instead."),h.$include(G("Wrapper"))}),function(T,v){var S=Q(T,"Kernel"),d=[S].concat(v),G=l.$r(d);Y(S,"$native?",function(h){return null==h||!h.$$class}),Y(S,"$Native",function m(h){var r=this;return m.$$p=null,P(null==h)?b:P(r["$native?"](h))?f(G("Native"),"Object").$new(h):P(h["$is_a?"](G("Array")))?V(h,"map",[],function e(n){return null==n&&(n=b),(null==e.$$s?this:e.$$s).$Native(n)},{$$s:r}):P(h["$is_a?"](G("Proc")))?V(r,"proc",[],function e(n){var i,t=e.$$p||b,c=null==e.$$s?this:e.$$s;return e.$$p=null,i=a(arguments),c.$Native(V(h,"call",W(i),t.$to_proc()))},{$$arity:-1,$$s:r}):h}),X(S,"_Array","Array"),Y(S,"$Array",function m(h,$){var n,r=m.$$p||b;return m.$$p=null,n=a(arguments,1),P(this["$native?"](h))?V(f(G("Native"),"Array"),"new",[h].concat(W(n)),r.$to_proc()).$to_a():this.$_Array(h)},-2)}(R[0],R),function(T,v){var S=K(T,v,"Object");S.$$prototype.native=b,S.$include(f(f("Native"),"Wrapper")),Y(S,"$==",function(m){return this.native===f("Native").$try_convert(m)}),Y(S,"$has_key?",function(m){return l.hasOwnProperty.call(this.native,m)}),Y(S,"$each",function G(m){var $,r=G.$$p||b,e=this;if(G.$$p=null,$=a(arguments),r!==b){for(var n in e.native)l.yieldX(r,[n,e.native[n]]);return e}return V(e,"method_missing",["each"].concat(W($)))},-1),Y(S,"$[]",function(m){var $=this.native[m];return $ instanceof Function?$:f("Native").$call(this.native,m)}),Y(S,"$[]=",function(m,h){var r;return r=f("Native").$try_convert(h),this.native[m]=P(r===b)?h:r}),Y(S,"$merge!",function(m){for(var $ in m=f("Native").$convert(m))this.native[$]=m[$];return this}),Y(S,"$respond_to?",function(m,h){return null==h&&(h=!1),k.$instance_method("respond_to?").$bind(this).$call(m,h)},-2),Y(S,"$respond_to_missing?",function(m,h){return null==h&&(h=!1),l.hasOwnProperty.call(this.native,m)},-2),Y(S,"$method_missing",function G(m,h){var e,n,$=G.$$p||b;return G.$$p=null,e=a(arguments,1),"="===m.charAt(m.length-1)?(n=[m.$slice(0,U(m.$length(),1)),e["$[]"](0)],V(this,"[]=",n),n[n.length-1]):V(f("Native"),"call",[this.native,m].concat(W(e)),$.$to_proc())},-2),Y(S,"$nil?",x(!1)),Y(S,"$is_a?",function(m){return l.is_a(this,m)}),Y(S,"$instance_of?",function(m){return this.$$class===m}),Y(S,"$class",function(){return this.$$class}),Y(S,"$to_a",function G(m){var h=G.$$p||b;return G.$$p=null,null==m&&(m=q([],{})),V(f(f("Native"),"Array"),"new",[this.native,m],h.$to_proc()).$to_a()},-1),Y(S,"$inspect",function(){return"#<Native:"+String(this.native)+">"}),X(S,"include?","has_key?"),X(S,"key?","has_key?"),X(S,"kind_of?","is_a?"),X(S,"member?","has_key?")}(_("Native"),_("BasicObject")),function(T,v,S){var d=K(T,null,"Array"),G=[d].concat(S),m=l.$r(G),h=d.$$prototype;h.named=h.native=h.get=h.block=h.set=h.length=b,d.$include(f(m("Native"),"Wrapper")),d.$include(m("Enumerable")),Y(d,"$initialize",function $(r,e){var n=$.$$p||b,t=this,i=b;return $.$$p=null,null==e&&(e=q([],{})),M(t,w(t,"initialize",$,!1,!0),"initialize",[r],null),t.get=P(i=e["$[]"]("get"))?i:e["$[]"]("access"),t.named=e["$[]"]("named"),t.set=P(i=e["$[]"]("set"))?i:e["$[]"]("access"),t.length=P(i=e["$[]"]("length"))?i:"length",t.block=n,P(null==t.$length())?t.$raise(m("ArgumentError"),"no length found on the array-like object"):b},-2),Y(d,"$each",function $(){var r=$.$$p||b,e=this;if($.$$p=null,!P(r))return e.$enum_for("each");for(var n=0,t=e.$length();n<t;n++)l.yield1(r,e["$[]"](n));return e}),Y(d,"$[]",function(r){var n,t,e=this;return n=I(m("String"),t=r)||I(m("Symbol"),t)?P(e.named)?e.native[e.named](r):e.native[r]:I(m("Integer"),t)?P(e.get)?e.native[e.get](r):e.native[r]:b,P(n)?P(e.block)?e.block.$call(n):e.$Native(n):b}),Y(d,"$[]=",function(r,e){var n=this;return P(n.set)?n.native[n.set](r,m("Native").$convert(e)):n.native[r]=m("Native").$convert(e)}),Y(d,"$last",function(r){var e=this,n=b,t=b;if(null==r&&(r=b),P(r)){for(n=U(e.$length(),1),t=[];P(D(n,0));)t["$<<"](e["$[]"](n)),n=U(n,1);return t}return e["$[]"](U(e.$length(),1))},-1),Y(d,"$length",function(){return this.native[this.length]}),Y(d,"$inspect",function(){return this.$to_a().$inspect()}),X(d,"to_ary","to_a")}(_("Native"),0,R),function(T,v){var S=K(T,null,"Numeric");Y(S,"$to_n",function(){return this.valueOf()})}(R[0]),function(T,v){var S=K(T,null,"Proc");Y(S,"$to_n",y)}(R[0]),function(T,v){var S=K(T,null,"String");Y(S,"$to_n",function(){return this.valueOf()})}(R[0]),function(T,v){var S=K(T,null,"Regexp");Y(S,"$to_n",function(){return this.valueOf()})}(R[0]),function(T,v){var S=K(T,null,"MatchData");Y(S,"$to_n",H("matches"))}(R[0]),function(T,v,S){var d=K(T,null,"Struct"),G=[d].concat(S),m=l.$r(G);Y(d,"$to_n",function(){var r=b;return r={},V(this,"each_pair",[],function(n,t){return null==n&&(n=b),null==t&&(t=b),r[n]=m("Native").$try_convert(t,t)}),r})}(R[0],0,R),function(T,v,S){var d=K(T,null,"Array"),G=[d].concat(S),m=l.$r(G);Y(d,"$to_n",function(){for(var r=[],e=0,n=this.length;e<n;e++){var t=this[e];r.push(m("Native").$try_convert(t,t))}return r})}(R[0],0,R),function(T,v){var S=K(T,null,"Boolean");Y(S,"$to_n",function(){return this.valueOf()})}(R[0]),function(T,v){var S=K(T,null,"Time");Y(S,"$to_n",y)}(R[0]),function(T,v){var S=K(T,null,"NilClass");Y(S,"$to_n",function(){return null})}(R[0]),P(_("Hash")["$method_defined?"]("_initialize"))||function(T,v,S){var d=K(T,null,"Hash"),G=[d].concat(S),m=l.$r(G);X(d,"_initialize","initialize"),Y(d,"$initialize",function h($){var r=h.$$p||b,e=this;if(h.$$p=null,null!=$&&(void 0===$.constructor||$.constructor===Object)){var i,s,n=e.$$smap,t=e.$$keys;for(i in $)!(s=$[i])||void 0!==s.constructor&&s.constructor!==Object?s&&s.$$is_array?(s=s.map(function(c){return!c||void 0!==c.constructor&&c.constructor!==Object?e.$Native(c):m("Hash").$new(c)}),n[i]=s):n[i]=e.$Native(s):n[i]=m("Hash").$new(s),t.push(i);return e}return V(e,"_initialize",[$],r.$to_proc())},-1),Y(d,"$to_n",function(){for(var t,i,r={},e=this.$$keys,n=this.$$smap,s=0,c=e.length;s<c;s++)i=(t=e[s]).$$is_string?n[t]:(t=t.key).value,r[t]=m("Native").$try_convert(i,i);return r})}(R[0],0,R),function(T,v){var S=K(T,null,"Module");Y(S,"$native_module",function(){return l.global[this.$name()]=this})}(R[0]),function(T,v,S){var d=K(T,null,"Class"),G=[d].concat(S),m=l.$r(G);Y(d,"$native_alias",function($,r){var e=this,n=e.prototype[l.jsid(r)];n||e.$raise(m("NameError").$new("undefined method `"+r+"' for class `"+e.$inspect()+"'",r)),e.prototype[$]=n}),Y(d,"$native_class",function(){var $=this;return $.$native_module(),$.new=$.$new})}(R[0],0,R),g.$=g.global=z.$Native(l.global)}),Opal.modules.strscan=function(l){var X,K,U,x,q,te=l.def,a=l.truthy,P=l.eqeqeq,V=l.Opal,k=l.return_ivar,j=l.send,B=l.alias,E=[],W=l.nil;return X=E,U=[K=(0,l.klass)(E[0],null,"StringScanner")].concat(X),x=l.$r(U),(q=K.$$prototype).pos=q.string=q.working=q.matched=q.prev_pos=q.match=W,K.$attr_reader("pos","matched"),te(K,"$initialize",function(w){var I=this;return I.string=w,I.pos=0,I.matched=W,I.working=w,I.match=[]}),K.$attr_reader("string"),te(K,"$beginning_of_line?",function(){var w=this;return 0===w.pos||"\n"===w.string.charAt(w.pos-1)}),te(K,"$scan",function(w){var I=this,D=(w=I.$anchor(w)).exec(I.working);return null==D?I.matched=W:(I.prev_pos=I.pos,I.pos+=D[0].length,I.working=I.working.substring(D[0].length),I.matched=D[0],I.match=D,D[0])}),te(K,"$scan_until",function(w){var I=this;w=I.$anchor(w);for(var D=I.working,y=0;D.length!=y;++y){var g=w.exec(D.substr(y));if(null!==g){var z=y+g[0].length,R=D.substr(0,z);return I.matched=g[0],I.match=g,I.prev_pos=I.pos+y,I.pos+=z,I.working=D.substr(z),R}}return I.matched=W}),te(K,"$[]",function(w){var D;if(a(this.match["$empty?"]()))return W;P(x("Symbol"),D=w)?w=w.$to_s():P(x("String"),D)||(w=V["$coerce_to!"](w,x("Integer"),"to_int"));var y=this.match;return w<0&&(w+=y.length),w<0||w>=y.length||null==y[w]?W:y[w]}),te(K,"$check",function(w){var I=this,D=(w=I.$anchor(w)).exec(I.working);return I.matched=null==D?W:D[0]}),te(K,"$check_until",function(w){var I=this,D=I.prev_pos,y=I.pos,g=I.working,z=I.$scan_until(w);return I.prev_pos=D,I.pos=y,I.working=g,z}),te(K,"$peek",function(w){return this.working.substring(0,w)}),te(K,"$eos?",function(){return 0===this.working.length}),te(K,"$exist?",function(w){var D=w.exec(this.working);return null==D?W:0==D.index?0:D.index+1}),te(K,"$skip",function(w){var I=this,D=(w=I.$anchor(w)).exec(I.working);if(null==D)return I.match=[],I.matched=W;var y=D[0],g=y.length;return I.matched=y,I.match=D,I.prev_pos=I.pos,I.pos+=g,I.working=I.working.substring(g),g}),te(K,"$skip_until",function(w){var D=this.$scan_until(w);return D===W?W:(this.matched=D.substr(-1),D.length)}),te(K,"$get_byte",function(){var w=this,I=W;return w.pos<w.string.length?(w.prev_pos=w.pos,w.pos+=1,I=w.matched=w.working.substring(0,1),w.working=w.working.substring(1)):w.matched=W,I}),te(K,"$match?",function(w){var I=this,D=(w=I.$anchor(w)).exec(I.working);return null==D?W:(I.prev_pos=I.pos,D[0].length)}),te(K,"$pos=",function(w){var I=this;return w<0&&(w+=I.string.$length()),I.pos=w,I.working=I.string.slice(w)}),te(K,"$matched_size",function(){return this.matched===W?W:this.matched.length}),te(K,"$post_match",function(){var w=this;return w.matched===W?W:w.string.substr(w.pos)}),te(K,"$pre_match",function(){var w=this;return w.matched===W?W:w.string.substr(0,w.prev_pos)}),te(K,"$reset",function(){var w=this;return w.working=w.string,w.matched=W,w.pos=0}),te(K,"$rest",k("working")),te(K,"$rest?",function(){return 0!==this.working.length}),te(K,"$rest_size",function(){return this.$rest().$size()}),te(K,"$terminate",function(){var w,I=this;return I.match=W,w=[I.string.$length()],j(I,"pos=",w),w[w.length-1]}),te(K,"$unscan",function(){var w=this;return w.pos=w.prev_pos,w.prev_pos=W,w.match=W,w}),B(K,"bol?","beginning_of_line?"),B(K,"getch","get_byte"),K.$private(),te(K,"$anchor",function(w){var I=w.toString().match(/\/([^\/]+)$/);return I=I?I[1]:void 0,new RegExp("^(?:"+w.source+")",I)})},Opal.queue(function(l){var E,W,X,Y,Q=l.klass,te=l.def,a=l.module,P=l.top,V=[],k=l.$r(V),j=l.nil;return P.$require("strscan"),W=V,[Y=Q(V[0],null,"Dir")].concat(W),X=l.get_singleton_class(Y),te(X,"$[]",function(){return[]}),E=a(V[0],"StringScannerPatch"),te(E,"$scan_until",function(Y){var H=this;Y=(H=this).$anchor(Y);for(var U,X=H.pos,K=H.working;;){var x=0===K.length;if(U=Y.exec(K),X+=1,K=K.substr(1),null!=U)return H.matched=H.string.substr(H.pos,X-H.pos-1+U[0].length),H.prev_pos=X-1,H.pos=X,H.working=K.substr(U[0].length-1),H.matched;if(x)return H.matched=j}}),k("StringScanner").$prepend(k("StringScannerPatch")),l.top.$__dir__=()=>"/",j})},8465:(l,Q,te)=>{te(9993),Opal.modules["bcdice/arithmetic/node"]=function(a){var y,_,v,$,r,d,G,f,z,P=a.module,V=a.klass,k=a.def,j=a.thrower,B=a.return_ivar,E=a.send2,W=a.find_super,Y=a.eqeq,H=a.const_set,X=a.eqeqeq,K=a.rb_divide,U=a.truthy,x=a.assign_ivar,q=a.alias,M=[],w=a.nil,I=a.$$$;return y=M,_=z=[P(M[0],"BCDice")].concat(y),v=f=[P(z[0],"Arithmetic")].concat(_),d=[P(f[0],"Node")].concat(v),G=a.$r(d),(r=($=V(d[0],null,"BinaryOp")).$$prototype).lhs=r.rhs=r.op=w,k($,"$initialize",function(n,t,i){var s=this;return s.lhs=n,s.op=t,s.rhs=i}),k($,"$eval",function(n){try{j("eval_return");var c,i=this,s=w;return s=i.lhs.$eval(n),c=i.rhs.$eval(n),s.$send(i.op,c)}catch(u){if(u===a.t_eval_return)return u.$v;throw u}}),k($,"$output",function(){var n=this;return""+n.lhs.$output()+n.op+n.rhs.$output()}),k($,"$s_exp",function(){var n=this;return"("+n.$op_for_s_exp()+" "+n.lhs.$s_exp()+" "+n.rhs.$s_exp()+")"}),k($,"$op_for_s_exp",B("op")),function(m,h,$){var r=V(m,h,"DivideBase"),e=[r].concat($),n=a.$r(e),t=r.$$prototype;t.lhs=t.rhs=t.op=w,k(r,"$initialize",function i(s,c){return i.$$p=null,E(this,W(this,"initialize",i,!1,!0),"initialize",[s,"/",c],null)}),k(r,"$eval",function(s){try{j("eval_return");var N,C,u=this;return N=u.lhs.$eval(s),C=u.rhs.$eval(s),Y(C,0)&&u.$raise(n("ZeroDivisionError")),u.$divide_and_round(N,C,s)}catch(J){if(J===a.t_eval_return)return J.$v;throw J}}),k(r,"$output",function i(){var s=i.$$p||w,c=this;return i.$$p=null,""+E(c,W(c,"output",i,!1,!0),"output",[],s)+c.$rounding_method()}),r.$private(),k(r,"$rounding_method",function(){return I(this.$class(),"ROUNDING_METHOD")}),k(r,"$op_for_s_exp",function(){return""+this.op+this.$rounding_method()}),k(r,"$divide_and_round",function(s,c,u){return this.$raise(n("NotImplementedError"))})}(d[0],G("BinaryOp"),d),function(m,h,$){var r=V(m,h,"DivideWithGameSystemDefault"),e=[r].concat($),n=a.$r(e);H(e[0],"ROUNDING_METHOD",""),r.$private(),k(r,"$divide_and_round",function(i,s,c){var u,N=w;return X(I(n("RoundType"),"CEIL"),u=c)?K(i.$to_f(),s).$ceil():X(I(n("RoundType"),"ROUND"),u)?(N=K(i.$to_f(),s),U(N["$negative?"]())?N.$abs().$round()["$-@"]():N.$round()):K(i,s).$floor()})}(d[0],G("DivideBase"),d),function(m,h,$){var r=V(m,h,"DivideWithCeil"),e=[r].concat($);H(e[0],"ROUNDING_METHOD","C"),r.$private(),k(r,"$divide_and_round",function(t,i,s){return K(t.$to_f(),i).$ceil()})}(d[0],G("DivideBase"),d),function(m,h,$){var r=V(m,h,"DivideWithRound"),e=[r].concat($);H(e[0],"ROUNDING_METHOD","R"),r.$private(),k(r,"$divide_and_round",function(t,i,s){var c=w;return c=K(t.$to_f(),i),U(c["$negative?"]())?c.$abs().$round()["$-@"]():c.$round()})}(d[0],G("DivideBase"),d),function(m,h,$){var r=V(m,h,"DivideWithFloor"),e=[r].concat($);H(e[0],"ROUNDING_METHOD","F"),r.$private(),k(r,"$divide_and_round",function(t,i,s){return K(t,i).$floor()})}(d[0],G("DivideBase"),d),function(m,h){var $=V(m,null,"Negative");$.$$prototype.body=w,k($,"$initialize",x("body")),k($,"$eval",function(n){try{return j("eval_return"),this.body.$eval(n)["$-@"]()}catch(s){if(s===a.t_eval_return)return s.$v;throw s}}),k($,"$output",function(){return"-"+this.body.$output()}),k($,"$s_exp",function(){return"(- "+this.body.$s_exp()+")"})}(d[0]),function(m,h){var $=V(m,null,"Parenthesis");$.$$prototype.expr=w,k($,"$initialize",x("expr")),k($,"$eval",function(n){try{return j("eval_return"),this.expr.$eval(n)}catch(s){if(s===a.t_eval_return)return s.$v;throw s}}),k($,"$output",function(){return"("+this.expr.$output()+")"}),k($,"$s_exp",function(){return"(Parenthesis "+this.expr.$s_exp()+")"})}(d[0]),function(m,h){var $=V(m,null,"Number");return $.$$prototype.value=w,k($,"$initialize",x("value")),k($,"$eval",B("value")),k($,"$output",function(){return this.value.$to_s()}),q($,"s_exp","output")}(d[0])},Opal.modules["racc/parser"]=function(a){var T,S,d,P=a.module,V=a.klass,k=a.truthy,j=a.const_set,B=a.defs,E=a.gvars,W=a.rb_lt,Y=a.def,H=a.to_ary,X=a.send,K=a.neqeq,U=a.rb_plus,x=a.eqeq,q=a.rb_ge,M=a.rb_gt,w=a.rb_minus,I=a.rb_le,D=a.rb_times,y=a.assign_ivar_val,z=[],R=a.$r(z),_=a.nil,b=a.$$$;return T=z,S=[P(z[0],"Racc")].concat(T),d=a.$r(S),V(S[0],d("StandardError"),"ParseError"),k(b("::","ParseError","skip_raise")?"constant":_)||j(z[0],"ParseError",b(R("Racc"),"ParseError")),function(f,T){var $,r,e,n,t,d=[P(f,"Racc")].concat(T),G=a.$r(d);return k(G("Racc_No_Extensions","skip_raise")?"constant":_)||j(d[0],"Racc_No_Extensions",!1),$=d,e=[r=V(d[0],null,"Parser")].concat($),n=a.$r(e),(t=r.$$prototype).yydebug=t.racc_debug_out=t.racc_error_status=t.racc_t=t.racc_vstack=t.racc_val=t.racc_state=t.racc_tstack=_,j(e[0],"Racc_Runtime_Version","1.4.6"),j(e[0],"Racc_Runtime_Revision",["originalRevision:","1.8"]["$[]"](1)),j(e[0],"Racc_Runtime_Core_Version_R","1.4.6"),j(e[0],"Racc_Runtime_Core_Revision_R",["originalRevision:","1.8"]["$[]"](1)),j(e[0],"Racc_Main_Parsing_Routine","_racc_do_parse_rb"),j(e[0],"Racc_YY_Parse_Method","_racc_yyparse_rb"),j(e[0],"Racc_Runtime_Core_Version",n("Racc_Runtime_Core_Version_R")),j(e[0],"Racc_Runtime_Core_Revision",n("Racc_Runtime_Core_Revision_R")),j(e[0],"Racc_Runtime_Type","ruby"),B(n("Parser"),"$racc_runtime_type",function(){return n("Racc_Runtime_Type")}),Y(r,"$_racc_setup",function(){var s,c,u=this,N=_,C=_;return null==E.stderr&&(E.stderr=_),k(b(u.$class(),"Racc_debug_parser"))||(u.yydebug=!1),k(null!=(s=u.yydebug)&&s!==_?"instance-variable":_)||(u.yydebug=!1),k(u.yydebug)&&(k(null!=(c=u.racc_debug_out)&&c!==_?"instance-variable":_)||(u.racc_debug_out=E.stderr),u.racc_debug_out=k(N=u.racc_debug_out)?N:E.stderr),C=b(u.$class(),"Racc_arg"),k(W(C.$size(),14))&&C["$[]="](13,!0),C}),Y(r,"$_racc_init_sysvars",function(){var s=this;return s.racc_state=[0],s.racc_tstack=[],s.racc_vstack=[],s.racc_t=_,s.racc_val=_,s.racc_read_next=!0,s.racc_user_yyerror=!1,s.racc_error_status=0}),Y(r,"$do_parse",function(){return this.$__send__(n("Racc_Main_Parsing_Routine"),this.$_racc_setup(),!1)}),Y(r,"$next_token",function(){return this.$raise(n("NotImplementedError"),this.$class()+"#next_token is not defined")}),Y(r,"$_racc_do_parse_rb",function(s,c){var u,C=this,J=_,ne=_,se=_,oe=_,$e=_,re=_,le=_,ee=_;return u=H(s),J=null==u[0]?_:u[0],ne=null==u[1]?_:u[1],se=null==u[2]?_:u[2],oe=null==u[3]?_:u[3],$e=null==u[10]?_:u[10],C.$_racc_init_sysvars(),re=le=ee=_,X(C,"catch",["racc_end_parse"],function A(){var L,O,o=null==A.$$s?this:A.$$s,p=_;for(null==o.racc_state&&(o.racc_state=_),null==o.racc_read_next&&(o.racc_read_next=_),null==o.racc_t&&(o.racc_t=_),null==o.yydebug&&(o.yydebug=_),null==o.racc_val&&(o.racc_val=_);k(!0);)for(k(ee=oe["$[]"](o.racc_state["$[]"](-1)))?(k(o.racc_read_next)&&K(o.racc_t,0)&&(O=o.$next_token(),L=H(O),re=null==L[0]?_:L[0],o.racc_val=null==L[1]?_:L[1],o.racc_t=k(re)?k(p=$e["$[]"](re))?p:1:0,k(o.yydebug)&&o.$racc_read_token(o.racc_t,re,o.racc_val),o.racc_read_next=!1),ee=U(ee,o.racc_t),k(q(ee,0))&&k(le=J["$[]"](ee))&&x(ne["$[]"](ee),o.racc_state["$[]"](-1))||(le=se["$[]"](o.racc_state["$[]"](-1)))):le=se["$[]"](o.racc_state["$[]"](-1));k(le=o.$_racc_evalact(le,s)););},{$$s:C})}),Y(r,"$yyparse",function(s,c){return this.$__send__(n("Racc_YY_Parse_Method"),s,c,this.$_racc_setup(),!0)}),Y(r,"$_racc_yyparse_rb",function(s,c,u,N){var C,se=_,oe=_,ae=_,$e=_,le=_,ee=_,A=_;return C=H(u),se=null==C[0]?_:C[0],oe=null==C[1]?_:C[1],ae=null==C[2]?_:C[2],$e=null==C[3]?_:C[3],le=null==C[10]?_:C[10],this.$_racc_init_sysvars(),ee=_,A=_,X(this,"catch",["racc_end_parse"],function L(){var O=null==L.$$s?this:L.$$s;for(null==O.racc_state&&(O.racc_state=_);!k(A=$e["$[]"](O.racc_state["$[]"](-1)));)for(;k(ee=O.$_racc_evalact(ae["$[]"](O.racc_state["$[]"](-1)),u)););return X(s,"__send__",[c],function o(p,F){var Z=null==o.$$s?this:o.$$s,ie=_,ue=_;for(null==Z.racc_t&&(Z.racc_t=_),null==Z.racc_state&&(Z.racc_state=_),null==Z.racc_read_next&&(Z.racc_read_next=_),null==p&&(p=_),null==F&&(F=_),Z.racc_t=k(p)?k(ie=le["$[]"](p))?ie:1:0,Z.racc_val=F,Z.racc_read_next=!1,A=U(A,Z.racc_t),k(q(A,0))&&k(ee=se["$[]"](A))&&x(oe["$[]"](A),Z.racc_state["$[]"](-1))||(ee=ae["$[]"](Z.racc_state["$[]"](-1)));k(ee=Z.$_racc_evalact(ee,u)););for(;k(k(ie=k(ue=(A=$e["$[]"](Z.racc_state["$[]"](-1)))["$!"]())?ue:Z.racc_read_next["$!"]())?ie:Z.racc_t["$=="](0));)for(k(A)&&k(A=U(A,Z.racc_t))&&k(q(A,0))&&k(ee=se["$[]"](A))&&x(oe["$[]"](A),Z.racc_state["$[]"](-1))||(ee=ae["$[]"](Z.racc_state["$[]"](-1)));k(ee=Z.$_racc_evalact(ee,u)););},{$$s:O})},{$$s:this})}),Y(r,"$_racc_evalact",function(s,c){var u,ae,C=this,J=_,ne=_,oe=_,$e=_,re=_,le=_;if(J=null==(u=H(c))[0]?_:u[0],ne=null==u[1]?_:u[1],oe=null==u[3]?_:u[3],ae=null==u[11]?_:u[11],$e=null==u[12]?_:u[12],k(M(s,0))&&k(W(s,ae)))k(M(C.racc_error_status,0))&&(x(C.racc_t,1)||(C.racc_error_status=w(C.racc_error_status,1))),C.racc_vstack.$push(C.racc_val),C.racc_state.$push(s),C.racc_read_next=!0,k(C.yydebug)&&(C.racc_tstack.$push(C.racc_t),C.$racc_shift(C.racc_t,C.racc_tstack,C.racc_vstack));else if(k(W(s,0))&&k(M(s,$e["$-@"]()))){if(re=X(C,"catch",["racc_jump"],function ee(){var A=null==ee.$$s?this:ee.$$s;return null==A.racc_state&&(A.racc_state=_),A.racc_state.$push(A.$_racc_do_reduce(c,s)),!1},{$$s:C}),k(re))switch(re){case 1:return C.racc_user_yyerror=!0,$e["$-@"]();case 2:return ae;default:C.$raise("[Racc Bug] unknown jump code")}}else if(x(s,ae))k(C.yydebug)&&C.$racc_accept(),C.$throw("racc_end_parse",C.racc_vstack["$[]"](0));else{if(x(s,$e["$-@"]())){switch(C.racc_error_status){case 0:k(c["$[]"](21))||C.$on_error(C.racc_t,C.racc_val,C.racc_vstack);break;case 3:x(C.racc_t,0)&&C.$throw("racc_end_parse",_),C.racc_read_next=!0}for(C.racc_user_yyerror=!1,C.racc_error_status=3;k(!0)&&!(k(le=oe["$[]"](C.racc_state["$[]"](-1)))&&(le=U(le,1),k(q(le,0))&&k(s=J["$[]"](le))&&x(ne["$[]"](le),C.racc_state["$[]"](-1))));)k(I(C.racc_state.$size(),1))&&C.$throw("racc_end_parse",_),C.racc_state.$pop(),C.racc_vstack.$pop(),k(C.yydebug)&&(C.racc_tstack.$pop(),C.$racc_e_pop(C.racc_state,C.racc_tstack,C.racc_vstack));return s}C.$raise("[Racc Bug] unknown action "+s.$inspect())}return k(C.yydebug)&&C.$racc_next_state(C.racc_state["$[]"](-1),C.racc_state),_}),Y(r,"$_racc_do_reduce",function(s,c){var u,$e,le,p,F,Z,ce,C=this,ne=_,se=_,oe=_,ae=_,re=_,ee=_,A=_,L=_,O=_,o=_,ie=_,ue=_,fe=_;return ne=null==(u=H(s))[4]?_:u[4],se=null==u[5]?_:u[5],oe=null==u[6]?_:u[6],ae=null==u[7]?_:u[7],$e=null==u[8]?_:u[8],re=null==u[9]?_:u[9],le=null==u[13]?_:u[13],ee=C.racc_state,A=C.racc_vstack,L=C.racc_tstack,O=D(c,-3),o=re["$[]"](O),p=re["$[]"](U(O,1)),F=re["$[]"](U(O,2)),Z=[],k(C.yydebug)&&(ie=L["$[]"](o["$-@"](),o)),ue=A["$[]"](o["$-@"](),o),k(C.yydebug)&&L["$[]="](o["$-@"](),o,Z),A["$[]="](o["$-@"](),o,Z),ee["$[]="](o["$-@"](),o,Z),k(le)?A.$push(C.$__send__(F,ue,A,ue["$[]"](0))):A.$push(C.$__send__(F,ue,A)),L.$push(p),k(C.yydebug)&&C.$racc_reduce(ie,p,L,A),ce=w(p,$e),k(O=ae["$[]"](ce))&&(O=U(O,ee["$[]"](-1)),k(q(O,0))&&k(fe=ne["$[]"](O))&&x(se["$[]"](O),ce))?fe:oe["$[]"](ce)}),Y(r,"$on_error",function(s,c,u){var C,N=this;return N.$raise(n("ParseError"),N.$sprintf("\nparse error on value %s (%s)",c.$inspect(),k(C=N.$token_to_str(s))?C:"?"))}),Y(r,"$yyerror",function(){return this.$throw("racc_jump",1)}),Y(r,"$yyaccept",function(){return this.$throw("racc_jump",2)}),Y(r,"$yyerrok",y("racc_error_status",0)),Y(r,"$racc_read_token",function(s,c,u){var N=this;return N.racc_debug_out.$print("read    "),N.racc_debug_out.$print(c.$inspect(),"(",N.$racc_token2str(s),") "),N.racc_debug_out.$puts(u.$inspect()),N.racc_debug_out.$puts()}),Y(r,"$racc_shift",function(s,c,u){var N=this;return N.racc_debug_out.$puts("shift   "+N.$racc_token2str(s)),N.$racc_print_stacks(c,u),N.racc_debug_out.$puts()}),Y(r,"$racc_reduce",function(s,c,u,N){var C=this,J=_;return(J=C.racc_debug_out).$print("reduce "),k(s["$empty?"]())?J.$print(" <none>"):X(s,"each",[],function ne(se){return null==se&&(se=_),J.$print(" ",(null==ne.$$s?this:ne.$$s).$racc_token2str(se))},{$$s:C}),J.$puts(" --\x3e "+C.$racc_token2str(c)),C.$racc_print_stacks(u,N),C.racc_debug_out.$puts()}),Y(r,"$racc_accept",function(){return this.racc_debug_out.$puts("accept"),this.racc_debug_out.$puts()}),Y(r,"$racc_e_pop",function(s,c,u){var N=this;return N.racc_debug_out.$puts("error recovering mode: pop token"),N.$racc_print_states(s),N.$racc_print_stacks(c,u),N.racc_debug_out.$puts()}),Y(r,"$racc_next_state",function(s,c){var u=this;return u.racc_debug_out.$puts("goto    "+s),u.$racc_print_states(c),u.racc_debug_out.$puts()}),Y(r,"$racc_print_stacks",function(s,c){var N=_;return(N=this.racc_debug_out).$print("        ["),X(s,"each_index",[],function C(J){return null==J&&(J=_),N.$print(" (",(null==C.$$s?this:C.$$s).$racc_token2str(s["$[]"](J))," ",c["$[]"](J).$inspect(),")")},{$$s:this}),N.$puts(" ]")}),Y(r,"$racc_print_states",function(s){var u=_;return(u=this.racc_debug_out).$print("        ["),X(s,"each",[],function(C){return null==C&&(C=_),u.$print(" ",C)}),u.$puts(" ]")}),Y(r,"$racc_token2str",function(s){var u;return k(u=b(this.$class(),"Racc_token_to_s_table")["$[]"](s))?u:this.$raise("[Racc Bug] can't convert token "+s+" to string")}),Y(r,"$token_to_str",function(s){return b(this.$class(),"Racc_token_to_s_table")["$[]"](s)})}(z[0],z)},Opal.modules.strscan=function(a){var x,q,M,w,I,V=a.def,k=a.truthy,j=a.eqeqeq,B=a.Opal,E=a.return_ivar,W=a.send,Y=a.alias,H=[],X=a.nil;return x=H,M=[q=(0,a.klass)(H[0],null,"StringScanner")].concat(x),w=a.$r(M),(I=q.$$prototype).pos=I.string=I.working=I.matched=I.prev_pos=I.match=X,q.$attr_reader("pos","matched"),V(q,"$initialize",function(y){var g=this;return g.string=y,g.pos=0,g.matched=X,g.working=y,g.match=[]}),q.$attr_reader("string"),V(q,"$beginning_of_line?",function(){var y=this;return 0===y.pos||"\n"===y.string.charAt(y.pos-1)}),V(q,"$scan",function(y){var g=this,z=(y=g.$anchor(y)).exec(g.working);return null==z?g.matched=X:(g.prev_pos=g.pos,g.pos+=z[0].length,g.working=g.working.substring(z[0].length),g.matched=z[0],g.match=z,z[0])}),V(q,"$scan_until",function(y){var g=this;y=g.$anchor(y);for(var z=g.working,R=0;z.length!=R;++R){var _=y.exec(z.substr(R));if(null!==_){var b=R+_[0].length,f=z.substr(0,b);return g.matched=_[0],g.match=_,g.prev_pos=g.pos+R,g.pos+=b,g.working=z.substr(b),f}}return g.matched=X}),V(q,"$[]",function(y){var z;if(k(this.match["$empty?"]()))return X;j(w("Symbol"),z=y)?y=y.$to_s():j(w("String"),z)||(y=B["$coerce_to!"](y,w("Integer"),"to_int"));var R=this.match;return y<0&&(y+=R.length),y<0||y>=R.length||null==R[y]?X:R[y]}),V(q,"$check",function(y){var g=this,z=(y=g.$anchor(y)).exec(g.working);return g.matched=null==z?X:z[0]}),V(q,"$check_until",function(y){var g=this,z=g.prev_pos,R=g.pos,_=g.working,b=g.$scan_until(y);return g.prev_pos=z,g.pos=R,g.working=_,b}),V(q,"$peek",function(y){return this.working.substring(0,y)}),V(q,"$eos?",function(){return 0===this.working.length}),V(q,"$exist?",function(y){var z=y.exec(this.working);return null==z?X:0==z.index?0:z.index+1}),V(q,"$skip",function(y){var g=this,z=(y=g.$anchor(y)).exec(g.working);if(null==z)return g.match=[],g.matched=X;var R=z[0],_=R.length;return g.matched=R,g.match=z,g.prev_pos=g.pos,g.pos+=_,g.working=g.working.substring(_),_}),V(q,"$skip_until",function(y){var z=this.$scan_until(y);return z===X?X:(this.matched=z.substr(-1),z.length)}),V(q,"$get_byte",function(){var y=this,g=X;return y.pos<y.string.length?(y.prev_pos=y.pos,y.pos+=1,g=y.matched=y.working.substring(0,1),y.working=y.working.substring(1)):y.matched=X,g}),V(q,"$match?",function(y){var g=this,z=(y=g.$anchor(y)).exec(g.working);return null==z?X:(g.prev_pos=g.pos,z[0].length)}),V(q,"$pos=",function(y){var g=this;return y<0&&(y+=g.string.$length()),g.pos=y,g.working=g.string.slice(y)}),V(q,"$matched_size",function(){return this.matched===X?X:this.matched.length}),V(q,"$post_match",function(){var y=this;return y.matched===X?X:y.string.substr(y.pos)}),V(q,"$pre_match",function(){var y=this;return y.matched===X?X:y.string.substr(0,y.prev_pos)}),V(q,"$reset",function(){var y=this;return y.working=y.string,y.matched=X,y.pos=0}),V(q,"$rest",E("working")),V(q,"$rest?",function(){return 0!==this.working.length}),V(q,"$rest_size",function(){return this.$rest().$size()}),V(q,"$terminate",function(){var y,g=this;return g.match=X,y=[g.string.$length()],W(g,"pos=",y),y[y.length-1]}),V(q,"$unscan",function(){var y=this;return y.pos=y.prev_pos,y.prev_pos=X,y.match=X,y}),Y(q,"bol?","beginning_of_line?"),Y(q,"getch","get_byte"),q.$private(),V(q,"$anchor",function(y){var g=y.toString().match(/\/([^\/]+)$/);return g=g?g[1]:void 0,new RegExp("^(?:"+y.source+")",g)})},Opal.modules["bcdice/normalize"]=function(a){var Y,U,X,P=a.module,V=a.eqeqeq,k=a.def,j=a.eqeq,B=[],E=a.nil;return Y=B,X=[P(B[0],"BCDice")].concat(Y),(U=P(X[0],"Normalize")).$module_function(),k(U,"$comparison_operator",function(q){var M;return V(/<=|=</,M=q)?"<=":V(/>=|=>/,M)?">=":V(/<>|!=|=!/,M)?"!=":V(/</,M)?"<":V(/>/,M)?">":V(/=/,M)?"==":E}),k(U,"$target_number",function(q){return j(q,"?")?q:q.$to_i()})},Opal.modules["bcdice/common_command/lexer"]=function(a){var K,M,g,z,R,_,I,x,P=a.module,V=a.klass,k=a.const_set,j=a.hash2,B=a.truthy,E=a.def,W=a.top,Y=[],H=a.nil;return W.$require("strscan"),W.$require("bcdice/normalize"),K=Y,M=x=[P(Y[0],"BCDice")].concat(K),g=I=[P(x[0],"CommonCommand")].concat(M),R=[z=V(I[0],null,"Lexer")].concat(g),_=a.$r(R),z.$$prototype.scanner=H,k(R[0],"SYMBOLS",j(["+","-","*","/","(",")","[","]","?","@"],{"+":"PLUS","-":"MINUS","*":"ASTERISK","/":"SLASH","(":"PARENL",")":"PARENR","[":"BRACKETL","]":"BRACKETR","?":"QUESTION","@":"AT"}).$freeze()),E(z,"$initialize",function(T){var S;return T=B(S=T.$split(" ",2).$first())?S:"",this.scanner=_("StringScanner").$new(T)}),E(z,"$next_token",function(){var T=this,v=H,S=H,d=H,m=H;return B(T.scanner["$eos?"]())?[!1,"$"]:B(v=T.scanner.$scan(/\d+/))?["NUMBER",v.$to_i()]:B(S=T.scanner.$scan(/[<>!=]+/))?["CMP_OP",_("Normalize").$comparison_operator(S)]:(d=T.scanner.$getch().$upcase(),[B(m=_("SYMBOLS")["$[]"](d))?m:d.$to_sym(),d])}),E(z,"$source",function(){return this.scanner.$string()})},Opal.modules["bcdice/arithmetic/parser"]=function(a){var U,w,R,T,v,S,d,G,m,h,$,r,t,_,b,f,D,y,q,P=a.module,V=a.klass,k=a.defs,j=a.def,B=a.hash,E=a.const_set,W=a.top,Y=[],H=a.nil,X=a.$$$;return W.$require("racc/parser.rb"),W.$require("bcdice/common_command/lexer"),W.$require("bcdice/arithmetic/node"),U=Y,w=q=[P(Y[0],"BCDice")].concat(U),D=[P(q[0],"Arithmetic")].concat(w),y=a.$r(D),R=D,b=[_=V(D[0],X(y("Racc"),"Parser"),"Parser")].concat(R),f=a.$r(b),_.$$prototype.lexer=H,k(_,"$parse",function(N){return this.$new().$parse(N)}),j(_,"$parse",function(N){try{return this.lexer=X(X(f("BCDice"),"CommonCommand"),"Lexer").$new(N),this.$do_parse()}catch(J){if(!a.rescue(J,[f("ParseError")]))throw J;try{return H}finally{a.pop_exception()}}}),_.$private(),j(_,"$next_token",function(){return this.lexer.$next_token()}),T=a.large_array_unpack("8,17,8,12,13,4,5,4,5,7,8,7,8,12,13,4,5,4,5,7,8,7,8,12,13,4,5,4,5,7,8,7,8,,,4,5,4,5,7,9,7,,,10,11,,10,11,22,26,24,25,27"),v=a.large_array_unpack("0,9,4,2,2,0,0,4,4,0,5,4,7,18,18,5,5,7,7,5,10,7,11,19,19,10,10,11,11,10,12,11,13,,,12,12,13,13,12,1,13,,,16,16,,1,1,16,21,21,21,21"),S=[-2,40,-6,H,0,8,H,10,H,1,18,20,28,30,H,H,37,H,4,14,H,47,H,H,H,H,H,H],d=[-17,-17,-3,-6,-17,-17,-14,-17,-16,-17,-17,-17,-17,-17,-12,-13,-17,28,-1,-2,-4,-7,-15,-5,-8,-9,-10,-11],G=[14,15,23,1,18,19,H,H,20,21,16],m=[3,3,4,1,2,2,H,H,3,3,1],h=[H,3,-6,-4,-19,H],$=[H,H,2,3,H,6],r=a.large_array_unpack("0,0,racc_error,3,14,_reduce_1,3,14,_reduce_2,1,14,_reduce_none,3,15,_reduce_4,4,15,_reduce_5,1,15,_reduce_none,0,17,_reduce_7,1,17,_reduce_8,1,17,_reduce_9,1,17,_reduce_10,1,17,_reduce_11,2,16,_reduce_12,2,16,_reduce_13,1,16,_reduce_none,3,18,_reduce_15,1,18,_reduce_16"),t=B(!1,0,"error",1,"NUMBER",2,"R",3,"U",4,"C",5,"F",6,"PLUS",7,"MINUS",8,"ASTERISK",9,"SLASH",10,"PARENL",11,"PARENR",12),E(b[0],"Racc_arg",[T,v,d,S,G,m,$,h,13,r,t,28,17,!0]),E(b[0],"Racc_token_to_s_table",["$end","error","NUMBER","R","U","C","F","PLUS","MINUS","ASTERISK","SLASH","PARENL","PARENR","$start","add","mul","unary","round_type","term"]),E(b[0],"Racc_debug_parser",!1),j(_,"$_reduce_1",function(N,C,J){return X(X(f("Arithmetic"),"Node"),"BinaryOp").$new(N["$[]"](0),"+",N["$[]"](2))}),j(_,"$_reduce_2",function(N,C,J){return X(X(f("Arithmetic"),"Node"),"BinaryOp").$new(N["$[]"](0),"-",N["$[]"](2))}),j(_,"$_reduce_4",function(N,C,J){return X(X(f("Arithmetic"),"Node"),"BinaryOp").$new(N["$[]"](0),"*",N["$[]"](2))}),j(_,"$_reduce_5",function(N,C,J){return N["$[]"](3).$new(N["$[]"](0),N["$[]"](2))}),j(_,"$_reduce_7",function(N,C,J){return X(X(f("Arithmetic"),"Node"),"DivideWithGameSystemDefault")}),j(_,"$_reduce_8",function(N,C,J){return X(X(f("Arithmetic"),"Node"),"DivideWithCeil")}),j(_,"$_reduce_9",function(N,C,J){return X(X(f("Arithmetic"),"Node"),"DivideWithCeil")}),j(_,"$_reduce_10",function(N,C,J){return X(X(f("Arithmetic"),"Node"),"DivideWithRound")}),j(_,"$_reduce_11",function(N,C,J){return X(X(f("Arithmetic"),"Node"),"DivideWithFloor")}),j(_,"$_reduce_12",function(N,C,J){return N["$[]"](1)}),j(_,"$_reduce_13",function(N,C,J){return X(X(f("Arithmetic"),"Node"),"Negative").$new(N["$[]"](1))}),j(_,"$_reduce_15",function(N,C,J){return N["$[]"](1)}),j(_,"$_reduce_16",function(N,C,J){return X(X(f("Arithmetic"),"Node"),"Number").$new(N["$[]"](0))}),j(_,"$_reduce_none",function(N,C,J){return N["$[]"](0)})},Opal.modules["bcdice/arithmetic"]=function(a){var Y,U,M,I,D,x,q,X,P=a.module,V=a.thrower,k=a.def,j=a.top,B=[],E=a.nil;return j.$require("bcdice/arithmetic/node"),j.$require("bcdice/arithmetic/parser"),Y=B,U=X=[P(B[0],"BCDice")].concat(Y),q=[x=P(X[0],"Arithmetic")].concat(U),I=[M=a.get_singleton_class(x)].concat(q),D=a.$r(I),k(M,"$eval",function(g,z){try{var _;V("eval_return");try{return(_=D("Parser").$parse(g))===E||null==_?E:_.$eval(z)}catch(f){if(!a.rescue(f,[D("ZeroDivisionError")]))throw f;try{return E}finally{a.pop_exception()}}}catch(f){if(f===a.t_eval_return)return f.$v;throw f}})},Opal.queue(function(a){var x,D,y,g,z,R,M,P=a.module,V=a.klass,k=a.defs,j=a.def,B=a.send,E=a.truthy,W=a.eqeq,Y=a.thrower,X=[],K=a.nil;return a.top.$require("bcdice/arithmetic"),x=X,D=M=[P(X[0],"BCDice")].concat(x),g=[y=V(M[0],null,"Preprocessor")].concat(D),z=a.$r(g),(R=y.$$prototype).game_system=R.text=K,k(y,"$process",function(b,f){return z("Preprocessor").$new(b,f).$process()}),j(y,"$initialize",function(b,f){return this.text=b,this.game_system=f}),j(y,"$process",function(){var b=this;return b.$trim_after_whitespace(),b.$replace_parentheses(),b.text=b.game_system.$change_text(b.text),b.$replace_implicit_d(),b.text}),y.$private(),j(y,"$trim_after_whitespace",function(){return this.text=this.text.$strip().$split(/\s/,2).$first()}),j(y,"$replace_parentheses",function(){try{Y("eval_return");var f=this;return function(){try{var T=Y("break");return B(f,"loop",[],function v(){var d,S=null==v.$$s?this:v.$$s;if(null==S.text&&(S.text=K),d=S.text,S.text=B(S.text,"gsub",[/\([\d\/+*\-CURF]+\)/],function G(m){var $,h=null==G.$$s?this:G.$$s;return null==h.game_system&&(h.game_system=K),null==m&&(m=K),E($=z("Arithmetic").$eval(m,h.game_system.$round_type()))?$:m},{$$s:S}),!W(d,S.text))return K;T.$throw()},{$$s:f})}catch(v){if(v===T)return v.$v;throw v}}()}catch(T){if(T===a.t_eval_return)return T.$v;throw T}}),j(y,"$replace_implicit_d",function(){var b=this;return b.text=B(b.text,"gsub",[/(\d+)D([^\w]|$)/i],function f(){var T=null==f.$$s?this:f.$$s;return null==T.game_system&&(T.game_system=K),z("Regexp").$last_match(1)+"D"+T.game_system.$sides_implicit_d()+z("Regexp").$last_match(2)},{$$s:b})})})},6956:(l,Q,te)=>{te(9993),Opal.queue(function(a){var E,k=[];return E=k,(0,a.const_set)([(0,a.module)(k[0],"BCDice")].concat(E)[0],"VERSION","3.9.0")})},3583:function(l,Q,te){"use strict";var a=this&&this.__importDefault||function(k){return k&&k.__esModule?k:{default:k}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.Opal=Q.I18n=Q.BCDice=void 0,te(6956);var P=a(te(8459));Q.BCDice=P.default.module(null,"BCDice"),Q.I18n=P.default.module(null,"I18n");var V=te(8459);Object.defineProperty(Q,"Opal",{enumerable:!0,get:function(){return a(V).default}})},8459:(l,Q,te)=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0}),Q.nilToNull=void 0,te(9993),Opal.config.unsupported_features_severity="ignore",Q.default=Opal,Q.nilToNull=function a(P){return P===Opal.nil?null:P}},3604:function(l,Q,te){"use strict";var K,a=this&&this.__extends||(K=function(U,x){return(K=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,M){q.__proto__=M}||function(q,M){for(var w in M)Object.prototype.hasOwnProperty.call(M,w)&&(q[w]=M[w])})(U,x)},function(U,x){function q(){this.constructor=U}K(U,x),U.prototype=null===x?Object.create(x):(q.prototype=x.prototype,new q)}),P=this&&this.__awaiter||function(K,U,x,q){return new(x||(x=Promise))(function(w,I){function D(z){try{g(q.next(z))}catch(R){I(R)}}function y(z){try{g(q.throw(z))}catch(R){I(R)}}function g(z){z.done?w(z.value):function M(w){return w instanceof x?w:new x(function(I){I(w)})}(z.value).then(D,y)}g((q=q.apply(K,U||[])).next())})},V=this&&this.__generator||function(K,U){var q,M,w,I,x={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return I={next:D(0),throw:D(1),return:D(2)},"function"==typeof Symbol&&(I[Symbol.iterator]=function(){return this}),I;function D(g){return function(z){return function y(g){if(q)throw new TypeError("Generator is already executing.");for(;x;)try{if(q=1,M&&(w=2&g[0]?M.return:g[0]?M.throw||((w=M.return)&&w.call(M),0):M.next)&&!(w=w.call(M,g[1])).done)return w;switch(M=0,w&&(g=[2&g[0],w.value]),g[0]){case 0:case 1:w=g;break;case 4:return x.label++,{value:g[1],done:!1};case 5:x.label++,M=g[1],g=[0];continue;case 7:g=x.ops.pop(),x.trys.pop();continue;default:if(!(w=(w=x.trys).length>0&&w[w.length-1])&&(6===g[0]||2===g[0])){x=0;continue}if(3===g[0]&&(!w||g[1]>w[0]&&g[1]<w[3])){x.label=g[1];break}if(6===g[0]&&x.label<w[1]){x.label=w[1],w=g;break}if(w&&x.label<w[2]){x.label=w[2],x.ops.push(g);break}w[2]&&x.ops.pop(),x.trys.pop();continue}g=U.call(K,x)}catch(z){g=[6,z],M=0}finally{q=w=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([g,z])}}},k=this&&this.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(Q,"__esModule",{value:!0}),Q.getGameSystemClass=void 0;var j=k(te(5904)),B=te(3583),E=te(3693),W=k(te(4682)),Y=k(te(3034));function H(K){var U;return(U=function(x){function q(M,w){return x.call(this,M,w??K.$new(M))||this}return a(q,x),q.eval=function(M){return E.parseResult(K.$eval(M))},q}(j.default)).ID=K.$const_get("ID"),U.NAME=K.$const_get("NAME"),U.SORT_KEY=K.$const_get("SORT_KEY"),U.HELP_MESSAGE=K.$const_get("HELP_MESSAGE"),U.COMMAND_PATTERN=K.$command_pattern(),U}Q.getGameSystemClass=H;var X=function(){function K(){}return K.prototype.getGameSystemIdByName=function(U){var x,q=null===(x=this.listAvailableGameSystems().find(function(M){return M.name===U}))||void 0===x?void 0:x.id;if(!q)throw new Error("GameSystem named "+U+" does not exists");return q},K.prototype.getGameSystemInfo=function(U){var x=this.listAvailableGameSystems().find(function(q){return q.id===U});if(!x)throw new Error("GameSystem is not found");return x},K.prototype.getGameSystemClass=function(U){var x=this.listLoadedGameSystems().find(function(q){return q.ID===U});if(!x)throw new Error("GameSystem "+U+" is not loaded");return x},K.prototype.getI18nInfos=function(U){var x=U.replace(/_[^0-9].*$/g,""),q=this.listAvailabletI18nInfoList().find(function(I){return I.baseClassName===x||I.baseClassName===U}),M=q?[q]:[],w=this.listAvailableGameSystems().find(function(I){return I.className===U});return w?Array.from(new Set(this.getI18nInfos(w.superClassName).concat(M))):M},K.prototype.listLoadedGameSystems=function(){var U,x,q;return null!==(q=null===(x=null===(U=B.BCDice.GameSystem)||void 0===U?void 0:U.$constants())||void 0===x?void 0:x.map(function(M){return H(B.BCDice.GameSystem[M])}))&&void 0!==q?q:[]},K.prototype.listAvailableGameSystems=function(){return W.default.gameSystems},K.prototype.listAvailabletI18nInfoList=function(){return Y.default.i18nList},K.prototype.dynamicLoad=function(U){var x;return P(this,void 0,void 0,function(){var q,M,w,I,D,y,g,z,R,b,f,T,v;return V(this,function(S){switch(S.label){case 0:if(q=this.getGameSystemInfo(U),!(M=null!==(x=q?.className)&&void 0!==x?x:U).match(/^[A-Z]\w*$/))throw new Error("Invalid id");w=this.getI18nInfos(M),I=0,D=w,S.label=1;case 1:if(!(I<D.length))return[3,6];g=(y=D[I]).locales.filter(function(d){return d===q.locale||d===B.I18n.$default_locale()}),z=0,R=g,S.label=2;case 2:return z<R.length?(T=(f=JSON).stringify,[4,this.dynamicImportI18n(y.baseClassName,R[z])]):[3,5];case 3:b=T.apply(f,[S.sent()]),B.I18n.$load_translation(b),S.label=4;case 4:return z++,[3,2];case 5:return I++,[3,1];case 6:return[4,this.dynamicImport(M)];case 7:if(S.sent(),!(v=B.BCDice.GameSystem.$const_get(M)))throw new Error("Failed to load game system");return[2,H(v)]}})})},K.prototype.dynamicImportI18n=function(U,x){throw new Error("Not implemented")},K.prototype.dynamicImport=function(U){throw new Error("Not implemented")},K}();Q.default=X},3693:function(l,Q,te){"use strict";var a=this&&this.__assign||function(){return a=Object.assign||function(j){for(var B,E=1,W=arguments.length;E<W;E++)for(var Y in B=arguments[E])Object.prototype.hasOwnProperty.call(B,Y)&&(j[Y]=B[Y]);return j},a.apply(this,arguments)},P=this&&this.__rest||function(j,B){var E={};for(var W in j)Object.prototype.hasOwnProperty.call(j,W)&&B.indexOf(W)<0&&(E[W]=j[W]);if(null!=j&&"function"==typeof Object.getOwnPropertySymbols){var Y=0;for(W=Object.getOwnPropertySymbols(j);Y<W.length;Y++)B.indexOf(W[Y])<0&&Object.prototype.propertyIsEnumerable.call(j,W[Y])&&(E[W[Y]]=j[W[Y]])}return E};Object.defineProperty(Q,"__esModule",{value:!0}),Q.parseResult=void 0;var V=te(3583);Q.parseResult=function k(j){if(j===V.Opal.nil)return null;var B=j.detailed_rands,E=P(j,["detailed_rands"]);return a(a({},E),{detailedRands:B.map(function(W){return W.$to_n()})})}},85:(l,Q,te)=>{var a={"./AFF2e":[7676,7327],"./AFF2e.js":[7676,7327],"./AceKillerGene":[1439,7217],"./AceKillerGene.js":[1439,7217],"./Ainecadette":[2160,8150],"./Ainecadette.js":[2160,8150],"./Airgetlamh":[6408,5247],"./Airgetlamh.js":[6408,5247],"./AlchemiaStruggle":[6510,5225],"./AlchemiaStruggle.js":[6510,5225],"./Alsetto":[905,2948],"./Alsetto.js":[905,2948],"./Alshard":[7058,6420],"./Alshard.js":[7058,6420],"./AlterRaise":[1105,3385],"./AlterRaise.js":[1105,3385],"./Amadeus":[5752,1582],"./Amadeus.js":[5752,1582],"./Amadeus_Korean":[6602,5512],"./Amadeus_Korean.js":[6602,5512],"./AngelGear":[4200,9437],"./AngelGear.js":[4200,9437],"./AnimaAnimus":[7164,2919],"./AnimaAnimus.js":[7164,2919],"./Aoharubaan":[5757,6968],"./Aoharubaan.js":[5757,6968],"./Arianrhod":[4005,5283],"./Arianrhod.js":[4005,5283],"./ArsMagica":[3655,5734],"./ArsMagica.js":[3655,5734],"./AssaultEngine":[3898,4339],"./AssaultEngine.js":[3898,4339],"./Avandner":[8206,3084],"./Avandner.js":[8206,3084],"./Ayabito":[5853,1253],"./Ayabito.js":[5853,1253],"./BBN":[8554,2522],"./BBN.js":[8554,2522],"./BadLife":[9538,4872],"./BadLife.js":[9538,4872],"./Bakenokawa":[6103,2135],"./Bakenokawa.js":[6103,2135],"./BarnaKronika":[5396,7073],"./BarnaKronika.js":[5396,7073],"./BattleTech":[2890,6344],"./BattleTech.js":[2890,6344],"./BeastBindTrinity":[1063,4572],"./BeastBindTrinity.js":[1063,4572],"./BeginningIdol":[8857,66],"./BeginningIdol.js":[8857,66],"./BeginningIdol2022":[8381,6466],"./BeginningIdol2022.js":[8381,6466],"./BeginningIdol_Korean":[7816,7117],"./BeginningIdol_Korean.js":[7816,7117],"./BladeOfArcana":[3449,1087],"./BladeOfArcana.js":[3449,1087],"./BlindMythos":[2639,5539],"./BlindMythos.js":[2639,5539],"./BloodCrusade":[2906,2013],"./BloodCrusade.js":[2906,2013],"./BloodMoon":[7994,593],"./BloodMoon.js":[7994,593],"./Bloodorium":[3498,3312],"./Bloodorium.js":[3498,3312],"./CardRanker":[6006,873],"./CardRanker.js":[6006,873],"./CastleInGray":[2519,1820],"./CastleInGray.js":[2519,1820],"./ChaosFlare":[229,1114],"./ChaosFlare.js":[229,1114],"./Chill":[9894,1919],"./Chill.js":[9894,1919],"./Chill3":[3294,8585],"./Chill3.js":[3294,8585],"./CodeLayerd":[6106,9606],"./CodeLayerd.js":[6106,9606],"./ColossalHunter":[519,2461],"./ColossalHunter.js":[519,2461],"./Comes":[1712,2793],"./Comes.js":[1712,2793],"./ConvictorDrive":[1011,8138],"./ConvictorDrive.js":[1011,8138],"./CrashWorld":[6506,2519],"./CrashWorld.js":[6506,2519],"./Cthulhu":[2605,3364],"./Cthulhu.js":[2605,3364],"./Cthulhu7th":[5149,8376],"./Cthulhu7th.js":[5149,8376],"./Cthulhu7th_ChineseTraditional":[9464,6447],"./Cthulhu7th_ChineseTraditional.js":[9464,6447],"./Cthulhu7th_Korean":[329,7170],"./Cthulhu7th_Korean.js":[329,7170],"./CthulhuTech":[9818,2555],"./CthulhuTech.js":[9818,2555],"./Cthulhu_ChineseTraditional":[3109,9285],"./Cthulhu_ChineseTraditional.js":[3109,9285],"./Cthulhu_Korean":[9585,7008],"./Cthulhu_Korean.js":[9585,7008],"./Cthulhu_SimplifiedChinese":[4916,1448],"./Cthulhu_SimplifiedChinese.js":[4916,1448],"./CyberpunkRed":[1933,347],"./CyberpunkRed.js":[1933,347],"./DarkBlaze":[7810,3005],"./DarkBlaze.js":[7810,3005],"./DarkDaysDrive":[3543,5736],"./DarkDaysDrive.js":[3543,5736],"./DarkSouls":[5581,3958],"./DarkSouls.js":[5581,3958],"./DeadlineHeroes":[2270,6143],"./DeadlineHeroes.js":[2270,6143],"./DemonParasite":[7605,5670],"./DemonParasite.js":[7605,5670],"./DesperateRun":[8999,148],"./DesperateRun.js":[8999,148],"./DetatokoSaga":[3264,5413],"./DetatokoSaga.js":[3264,5413],"./DetatokoSaga_Korean":[4236,7553],"./DetatokoSaga_Korean.js":[4236,7553],"./DiceBot":[8618,8159],"./DiceBot.js":[8618,8159],"./DiceOfTheDead":[2533,5651],"./DiceOfTheDead.js":[2533,5651],"./DoubleCross":[1316,8436],"./DoubleCross.js":[1316,8436],"./DoubleCross_Korean":[9761,6708],"./DoubleCross_Korean.js":[9761,6708],"./Dracurouge":[2204,2697],"./Dracurouge.js":[2204,2697],"./Dracurouge_Korean":[759,9678],"./Dracurouge_Korean.js":[759,9678],"./DungeonsAndDragons":[8454,8358],"./DungeonsAndDragons.js":[8454,8358],"./DungeonsAndDragons5":[9781,1125],"./DungeonsAndDragons5.js":[9781,1125],"./EarthDawn":[1329,517],"./EarthDawn.js":[1329,517],"./EarthDawn3":[4021,9730],"./EarthDawn3.js":[4021,9730],"./EarthDawn4":[9918,809],"./EarthDawn4.js":[9918,809],"./EclipsePhase":[410,9735],"./EclipsePhase.js":[410,9735],"./Elric":[8326,7309],"./Elric.js":[8326,7309],"./Elysion":[9626,7372],"./Elysion.js":[9626,7372],"./EmbryoMachine":[2035,9755],"./EmbryoMachine.js":[2035,9755],"./Emoklore":[8686,5620],"./Emoklore.js":[8686,5620],"./EndBreaker":[4869,3515],"./EndBreaker.js":[4869,3515],"./EtrianOdysseySRS":[3460,1851],"./EtrianOdysseySRS.js":[3460,1851],"./FateCoreSystem":[5925,5899],"./FateCoreSystem.js":[5925,5899],"./Fiasco":[6587,6739],"./Fiasco.js":[6587,6739],"./Fiasco_Korean":[3734,7036],"./Fiasco_Korean.js":[3734,7036],"./FilledWith":[4239,6705],"./FilledWith.js":[4239,6705],"./FullMetalPanic":[1959,8725],"./FullMetalPanic.js":[1959,8725],"./FutariSousa":[2729,4564],"./FutariSousa.js":[2729,4564],"./FutariSousa_Korean":[4424,8175],"./FutariSousa_Korean.js":[4424,8175],"./GURPS":[7782,6908],"./GURPS.js":[7782,6908],"./Garako":[1948,8165],"./Garako.js":[1948,8165],"./GardenOrder":[2017,172],"./GardenOrder.js":[2017,172],"./GehennaAn":[1647,5105],"./GehennaAn.js":[1647,5105],"./GeishaGirlwithKatana":[5593,8780],"./GeishaGirlwithKatana.js":[5593,8780],"./GhostLive":[4656,9626],"./GhostLive.js":[4656,9626],"./GoblinSlayer":[3983,2006],"./GoblinSlayer.js":[3983,2006],"./GoldenSkyStories":[3437,9940],"./GoldenSkyStories.js":[3437,9940],"./Gorilla":[6362,7576],"./Gorilla.js":[6362,7576],"./GranCrest":[7150,6613],"./GranCrest.js":[7150,6613],"./Gundog":[8166,6501],"./Gundog.js":[8166,6501],"./GundogRevised":[4196,427],"./GundogRevised.js":[4196,427],"./GundogZero":[5273,493],"./GundogZero.js":[5273,493],"./GurpsFW":[882,6949],"./GurpsFW.js":[882,6949],"./HarnMaster":[6765,4075],"./HarnMaster.js":[6765,4075],"./HatsuneMiku":[3124,6589],"./HatsuneMiku.js":[3124,6589],"./Hieizan":[7418,8171],"./Hieizan.js":[7418,8171],"./HouraiGakuen":[7945,7155],"./HouraiGakuen.js":[7945,7155],"./HunterTheReckoning5th":[7434,3191],"./HunterTheReckoning5th.js":[7434,3191],"./HuntersMoon":[4873,1909],"./HuntersMoon.js":[4873,1909],"./IfIfIf":[7043,4507],"./IfIfIf.js":[7043,4507],"./Illusio":[3843,4796],"./Illusio.js":[3843,4796],"./InfiniteBabeL":[7878,7641],"./InfiniteBabeL.js":[7878,7641],"./InfiniteFantasia":[6391,391],"./InfiniteFantasia.js":[6391,391],"./Insane":[5844,9001],"./Insane.js":[5844,9001],"./Insane_Korean":[9199,1918],"./Insane_Korean.js":[9199,1918],"./Irisbane":[4167,6957],"./Irisbane.js":[4167,6957],"./IthaWenUa":[2726,9872],"./IthaWenUa.js":[2726,9872],"./JamesBond":[4866,7097],"./JamesBond.js":[4866,7097],"./JekyllAndHyde":[817,4788],"./JekyllAndHyde.js":[817,4788],"./JuinKansen":[9673,9327],"./JuinKansen.js":[9673,9327],"./Kamigakari":[2920,8602],"./Kamigakari.js":[2920,8602],"./Kamigakari_Korean":[6250,5309],"./Kamigakari_Korean.js":[6250,5309],"./KanColle":[4670,2098],"./KanColle.js":[4670,2098],"./Karukami":[2838,1616],"./Karukami.js":[2838,1616],"./KemonoNoMori":[1151,3962],"./KemonoNoMori.js":[1151,3962],"./KillDeathBusiness":[744,6750],"./KillDeathBusiness.js":[744,6750],"./KillDeathBusiness_Korean":[346,4401],"./KillDeathBusiness_Korean.js":[346,4401],"./KurayamiCrying":[5627,164],"./KurayamiCrying.js":[5627,164],"./Kutulu":[76,8790],"./Kutulu.js":[76,8790],"./LiveraDoll":[6459,8440],"./LiveraDoll.js":[6459,8440],"./LogHorizon":[8991,4810],"./LogHorizon.js":[8991,4810],"./LogHorizon_Korean":[8959,348],"./LogHorizon_Korean.js":[8959,348],"./LostRecord":[6543,7171],"./LostRecord.js":[6543,7171],"./LostRoyal":[9348,9625],"./LostRoyal.js":[9348,9625],"./MagicaLogia":[5563,2399],"./MagicaLogia.js":[5563,2399],"./MagicaLogia_Korean":[2586,7729],"./MagicaLogia_Korean.js":[2586,7729],"./MagicaLogia_SimplifiedChinese":[3677,6875],"./MagicaLogia_SimplifiedChinese.js":[3677,6875],"./MeikyuDays":[3433,1493],"./MeikyuDays.js":[3433,1493],"./MeikyuKingdom":[9889,8326],"./MeikyuKingdom.js":[9889,8326],"./MeikyuKingdomBasic":[668,7016],"./MeikyuKingdomBasic.js":[668,7016],"./MetalHead":[1175,7276],"./MetalHead.js":[1175,7276],"./MetalHeadExtream":[1587,3062],"./MetalHeadExtream.js":[1587,3062],"./MetallicGuardian":[1245,2040],"./MetallicGuardian.js":[1245,2040],"./MonotoneMuseum":[4351,735],"./MonotoneMuseum.js":[4351,735],"./MonotoneMuseum_Korean":[3989,5249],"./MonotoneMuseum_Korean.js":[3989,5249],"./NSSQ":[6681,4238],"./NSSQ.js":[6681,4238],"./Nechronica":[8885,3532],"./Nechronica.js":[8885,3532],"./Nechronica_Korean":[4361,4116],"./Nechronica_Korean.js":[4361,4116],"./NeverCloud":[9447,3096],"./NeverCloud.js":[9447,3096],"./NightWizard":[7740,5811],"./NightWizard.js":[7740,5811],"./NightWizard3rd":[4933,3535],"./NightWizard3rd.js":[4933,3535],"./NightmareHunterDeep":[1387,298],"./NightmareHunterDeep.js":[1387,298],"./NinjaSlayer":[517,7381],"./NinjaSlayer.js":[517,7381],"./NjslyrBattle":[596,3443],"./NjslyrBattle.js":[596,3443],"./NobunagasBlackCastle":[1067,6652],"./NobunagasBlackCastle.js":[1067,6652],"./Nuekagami":[1848,3293],"./Nuekagami.js":[1848,3293],"./OneWayHeroics":[1989,3852],"./OneWayHeroics.js":[1989,3852],"./OracleEngine":[978,2989],"./OracleEngine.js":[978,2989],"./OrgaRain":[8614,644],"./OrgaRain.js":[8614,644],"./Oukahoushin3rd":[7133,3407],"./Oukahoushin3rd.js":[7133,3407],"./Paradiso":[2313,4246],"./Paradiso.js":[2313,4246],"./Paranoia":[6634,1031],"./Paranoia.js":[6634,1031],"./ParanoiaRebooted":[9628,5289],"./ParanoiaRebooted.js":[9628,5289],"./ParasiteBlood":[8073,1410],"./ParasiteBlood.js":[8073,1410],"./Pathfinder":[5017,1599],"./Pathfinder.js":[5017,1599],"./Peekaboo":[9309,844],"./Peekaboo.js":[9309,844],"./Pendragon":[9113,2311],"./Pendragon.js":[9113,2311],"./PersonaO":[6706,481],"./PersonaO.js":[6706,481],"./PhantasmAdventure":[926,8614],"./PhantasmAdventure.js":[926,8614],"./Postman":[3021,5124],"./Postman.js":[3021,5124],"./PulpCthulhu":[4292,9449],"./PulpCthulhu.js":[4292,9449],"./Raisondetre":[2909,293],"./Raisondetre.js":[2909,293],"./RecordOfLodossWar":[1925,281],"./RecordOfLodossWar.js":[1925,281],"./RecordOfSteam":[1293,2213],"./RecordOfSteam.js":[1293,2213],"./Revulture":[573,9886],"./Revulture.js":[573,9886],"./RokumonSekai2":[3592,9495],"./RokumonSekai2.js":[3592,9495],"./RoleMaster":[4601,2625],"./RoleMaster.js":[4601,2625],"./RuinBreakers":[1349,7696],"./RuinBreakers.js":[1349,7696],"./RuneQuest":[7543,7480],"./RuneQuest.js":[7543,7480],"./RyuTuber":[1287,1766],"./RyuTuber.js":[1287,1766],"./Ryutama":[8123,585],"./Ryutama.js":[8123,585],"./SRS":[5762,1377],"./SRS.js":[5762,1377],"./SajinsenkiAGuS":[4969,5034],"./SajinsenkiAGuS.js":[4969,5034],"./SamsaraBallad":[2255,2250],"./SamsaraBallad.js":[2255,2250],"./Satasupe":[8236,3314],"./Satasupe.js":[8236,3314],"./ScreamHighSchool":[7728,512],"./ScreamHighSchool.js":[7728,512],"./Sengensyou":[1369,3109],"./Sengensyou.js":[1369,3109],"./SevenFortressMobius":[2004,1091],"./SevenFortressMobius.js":[2004,1091],"./ShadowRun":[7633,8975],"./ShadowRun.js":[7633,8975],"./ShadowRun4":[8489,5925],"./ShadowRun4.js":[8489,5925],"./ShadowRun5":[3265,3665],"./ShadowRun5.js":[3265,3665],"./SharedFantasia":[554,2025],"./SharedFantasia.js":[554,2025],"./ShinMegamiTenseiKakuseihen":[6821,8657],"./ShinMegamiTenseiKakuseihen.js":[6821,8657],"./ShinkuuGakuen":[708,1763],"./ShinkuuGakuen.js":[708,1763],"./ShinobiGami":[1946,132],"./ShinobiGami.js":[1946,132],"./Shiranui":[9776,2709],"./Shiranui.js":[9776,2709],"./ShoujoTenrankai":[8491,8565],"./ShoujoTenrankai.js":[8491,8565],"./ShuumatsuKikou":[918,533],"./ShuumatsuKikou.js":[918,533],"./Skynauts":[8327,5150],"./Skynauts.js":[8327,5150],"./SkynautsBouken":[5444,303],"./SkynautsBouken.js":[5444,303],"./StarryDolls":[783,9354],"./StarryDolls.js":[783,9354],"./SteamPunkers":[6339,7103],"./SteamPunkers.js":[6339,7103],"./StellarKnights":[5849,628],"./StellarKnights.js":[5849,628],"./StellarKnights_Korean":[2795,6768],"./StellarKnights_Korean.js":[2795,6768],"./StellarLife":[8594,3740],"./StellarLife.js":[8594,3740],"./StrangerOfSwordCity":[5214,1593],"./StrangerOfSwordCity.js":[5214,1593],"./StratoShout":[203,8470],"./StratoShout.js":[203,8470],"./StratoShout_Korean":[2030,6114],"./StratoShout_Korean.js":[2030,6114],"./Strave":[1758,8233],"./Strave.js":[1758,8233],"./SwordWorld":[8250,3210],"./SwordWorld.js":[8250,3210],"./SwordWorld2_0":[3840,7043],"./SwordWorld2_0.js":[3840,7043],"./SwordWorld2_0_SimplifiedChinese":[206,8196],"./SwordWorld2_0_SimplifiedChinese.js":[206,8196],"./SwordWorld2_5":[9527,9753],"./SwordWorld2_5.js":[9527,9753],"./SwordWorld2_5_SimplifiedChinese":[8463,6152],"./SwordWorld2_5_SimplifiedChinese.js":[8463,6152],"./SwordWorld_SimplifiedChinese":[7184,9640],"./SwordWorld_SimplifiedChinese.js":[7184,9640],"./TalesFromTheLoop":[4331,1982],"./TalesFromTheLoop.js":[4331,1982],"./TenkaRyouran":[8650,7812],"./TenkaRyouran.js":[8650,7812],"./TherapieSein":[4028,5405],"./TherapieSein.js":[4028,5405],"./TokumeiTenkousei":[4905,5101],"./TokumeiTenkousei.js":[4905,5101],"./TokyoGhostResearch":[3874,2686],"./TokyoGhostResearch.js":[3874,2686],"./TokyoNova":[7459,7455],"./TokyoNova.js":[7459,7455],"./Torg":[3042,6604],"./Torg.js":[3042,6604],"./Torg1_5":[3257,8177],"./Torg1_5.js":[3257,8177],"./TorgEternity":[9543,9931],"./TorgEternity.js":[9543,9931],"./ToshiakiHolyGrailWar":[1641,4957],"./ToshiakiHolyGrailWar.js":[1641,4957],"./TrinitySeven":[8262,589],"./TrinitySeven.js":[8262,589],"./TunnelsAndTrolls":[6450,5188],"./TunnelsAndTrolls.js":[6450,5188],"./TwilightGunsmoke":[4547,6331],"./TwilightGunsmoke.js":[4547,6331],"./UnsungDuet":[6694,1209],"./UnsungDuet.js":[6694,1209],"./Utakaze":[5520,357],"./Utakaze.js":[5520,357],"./VampireTheMasquerade5th":[6409,7115],"./VampireTheMasquerade5th.js":[6409,7115],"./Villaciel":[6633,4906],"./Villaciel.js":[6633,4906],"./VisionConnect":[2527,35],"./VisionConnect.js":[2527,35],"./WARPS":[8581,1380],"./WARPS.js":[8581,1380],"./WaresBlade":[9840,4213],"./WaresBlade.js":[9840,4213],"./Warhammer":[9883,7339],"./Warhammer.js":[9883,7339],"./Warhammer4":[2135,4837],"./Warhammer4.js":[2135,4837],"./WitchQuest":[3617,6088],"./WitchQuest.js":[3617,6088],"./WorldOfDarkness":[3350,3726],"./WorldOfDarkness.js":[3350,3726],"./WorldsEndFrontline":[2118,1795],"./WorldsEndFrontline.js":[2118,1795],"./YankeeYogSothoth":[1930,7906],"./YankeeYogSothoth.js":[1930,7906],"./YearZeroEngine":[929,6632],"./YearZeroEngine.js":[929,6632],"./Yggdrasill":[7157,6467],"./Yggdrasill.js":[7157,6467],"./ZettaiReido":[6698,4999],"./ZettaiReido.js":[6698,4999]};function P(V){if(!te.o(a,V))return Promise.resolve().then(()=>{var B=new Error("Cannot find module '"+V+"'");throw B.code="MODULE_NOT_FOUND",B});var k=a[V],j=k[0];return te.e(k[1]).then(()=>te.t(j,23))}P.keys=()=>Object.keys(a),P.id=85,l.exports=P},6507:(l,Q,te)=>{var a={"./Amadeus.ja_jp.json":[6070,9299],"./Amadeus.ko_kr.json":[765,4092],"./Arianrhod.ja_jp.json":[7267,8206],"./BeginningIdol.ja_jp.json":[5355,8635],"./BeginningIdol.ko_kr.json":[2590,6961],"./Cthulhu.ja_jp.json":[8128,652],"./Cthulhu.ko_kr.json":[7002,2617],"./Cthulhu.zh_hans.json":[4209,4922],"./Cthulhu.zh_hant.json":[8021,3147],"./DetatokoSaga.ja_jp.json":[4608,5777],"./DetatokoSaga.ko_kr.json":[408,4502],"./DoubleCross.ja_jp.json":[9221,8706],"./DoubleCross.ko_kr.json":[9734,8517],"./Dracurouge.ja_jp.json":[2286,2847],"./Dracurouge.ko_kr.json":[3597,155],"./Emoklore.ja_jp.json":[8985,6488],"./Fiasco.ja_jp.json":[9873,1800],"./Fiasco.ko_kr.json":[5244,783],"./FutariSousa.ja_jp.json":[9491,8078],"./FutariSousa.ko_kr.json":[8721,9567],"./Insane.ja_jp.json":[5040,6446],"./Insane.ko_kr.json":[5488,3978],"./Kamigakari.ja_jp.json":[2742,3922],"./Kamigakari.ko_kr.json":[7708,1197],"./KillDeathBusiness.ja_jp.json":[2288,3760],"./KillDeathBusiness.ko_kr.json":[1847,287],"./LogHorizon.ja_jp.json":[6438,3811],"./LogHorizon.ko_kr.json":[8319,5106],"./MagicaLogia.ja_jp.json":[4786,9120],"./MagicaLogia.ko_kr.json":[339,2107],"./MagicaLogia.zh_hans.json":[9116,3229],"./MonotoneMuseum.ja_jp.json":[5628,7848],"./MonotoneMuseum.ko_kr.json":[1302,8157],"./Nechronica.ja_jp.json":[9437,667],"./Nechronica.ko_kr.json":[4241,7743],"./StellarKnights.ja_jp.json":[7251,9206],"./StellarKnights.ko_kr.json":[6697,5717],"./StratoShout.ja_jp.json":[7313,7015],"./StratoShout.ko_kr.json":[424,4113],"./SwordWorld.ja_jp.json":[1243,7348],"./SwordWorld.zh_hans.json":[715,654],"./SwordWorld2_0.ja_jp.json":[7547,5351],"./SwordWorld2_0.zh_hans.json":[7912,5642],"./SwordWorld2_5.ja_jp.json":[8368,669],"./SwordWorld2_5.zh_hans.json":[9860,2597]};function P(V){if(!te.o(a,V))return Promise.resolve().then(()=>{var B=new Error("Cannot find module '"+V+"'");throw B.code="MODULE_NOT_FOUND",B});var k=a[V],j=k[0];return te.e(k[1]).then(()=>te.t(j,19))}P.keys=()=>Object.keys(a),P.id=6507,l.exports=P},4682:l=>{"use strict";l.exports=JSON.parse('{"gameSystems":[{"id":"MeikyuKingdom","name":"\u8ff7\u5bae\u30ad\u30f3\u30b0\u30c0\u30e0","className":"MeikyuKingdom","superClassName":"Base","sortKey":"\u3081\u3044\u304d\u3086\u3046\u304d\u3093\u304f\u305f\u3080","locale":"ja_jp"},{"id":"AceKillerGene","name":"\u30a8\u30fc\u30b9\u30ad\u30e9\u30fc\u30b8\u30fc\u30f3","className":"AceKillerGene","superClassName":"GardenOrder","sortKey":"\u3048\u3048\u3059\u304d\u3089\u3042\u3057\u3044\u3093","locale":"ja_jp"},{"id":"GardenOrder","name":"\u30ac\u30fc\u30c7\u30f3\u30aa\u30fc\u30c0\u30fc","className":"GardenOrder","superClassName":"Base","sortKey":"\u304b\u3042\u3066\u3093\u304a\u304a\u305f\u3042","locale":"ja_jp"},{"id":"SajinsenkiAGuS","name":"\u7802\u5875\u6226\u6a5f\u30a2\u30fc\u30ac\u30b9","className":"SajinsenkiAGuS","superClassName":"Base","sortKey":"\u3055\u3057\u3093\u305b\u3093\u304d\u3042\u3042\u304b\u3059","locale":"ja_jp"},{"id":"Chill3","name":"Chill 3rd Edition","className":"Chill3","superClassName":"Base","sortKey":"\u3061\u308b3","locale":"ja_jp"},{"id":"SamsaraBallad","name":"\u30b5\u30f3\u30b5\u30fc\u30e9\u30fb\u30d0\u30e9\u30c3\u30c9","className":"SamsaraBallad","superClassName":"Base","sortKey":"\u3055\u3093\u3055\u3042\u3089\u306f\u3089\u3064\u3068","locale":"ja_jp"},{"id":"CodeLayerd","name":"\u30b3\u30fc\u30c9\uff1a\u30ec\u30a4\u30e4\u30fc\u30c9","className":"CodeLayerd","superClassName":"Base","sortKey":"\u3053\u304a\u3068\u308c\u3044\u3084\u3042\u3068","locale":"ja_jp"},{"id":"EmbryoMachine","name":"\u30a8\u30e0\u30d6\u30ea\u30aa\u30de\u30b7\u30f3RPG","className":"EmbryoMachine","superClassName":"Base","sortKey":"\u3048\u3080\u3075\u308a\u304a\u307e\u3057\u3093RPG","locale":"ja_jp"},{"id":"Satasupe","name":"\u30b5\u30bf\u30b9\u30da","className":"Satasupe","superClassName":"Base","sortKey":"\u3055\u305f\u3059\u3078","locale":"ja_jp"},{"id":"Ainecadette","name":"\u30a8\u30cd\u30ab\u30c7\u30c3\u30c8","className":"Ainecadette","superClassName":"Base","sortKey":"\u3048\u306d\u304b\u3066\u3064\u3068","locale":"ja_jp"},{"id":"ColossalHunter","name":"\u30b3\u30ed\u30c3\u30b5\u30eb\u30cf\u30f3\u30bf\u30fc","className":"ColossalHunter","superClassName":"Base","sortKey":"\u3053\u308d\u3064\u3055\u308b\u306f\u3093\u305f\u3042","locale":"ja_jp"},{"id":"Emoklore","name":"\u30a8\u30e2\u30af\u30ed\u30a2TRPG","className":"Emoklore","superClassName":"Base","sortKey":"\u3048\u3082\u304f\u308d\u3042TRPG","locale":"ja_jp"},{"id":"Airgetlamh","name":"\u6731\u306e\u5b64\u5854\u306e\u30a8\u30a2\u30b2\u30c8\u30e9\u30e0","className":"Airgetlamh","superClassName":"Base","sortKey":"\u3042\u3051\u306e\u3053\u3068\u3046\u306e\u3048\u3042\u3051\u3068\u3089\u3080","locale":"ja_jp"},{"id":"EndBreaker","name":"\u30a8\u30f3\u30c9\u30d6\u30ec\u30a4\u30ab\u30fc\uff01","className":"EndBreaker","superClassName":"Base","sortKey":"\u3048\u3093\u3068\u3075\u308c\u3044\u304b\u3042","locale":"ja_jp"},{"id":"EtrianOdysseySRS","name":"\u4e16\u754c\u6a39\u306e\u8ff7\u5baeSRS","className":"EtrianOdysseySRS","superClassName":"SRS","sortKey":"\u305b\u304b\u3044\u3057\u3086\u306e\u3081\u3044\u304d\u3086\u3046SRS","locale":"ja_jp"},{"id":"FateCoreSystem","name":"Fate Core System","className":"FateCoreSystem","superClassName":"Base","sortKey":"\u3075\u3048\u3044\u3068\u3053\u3042\u3057\u3059\u3066\u3080","locale":"ja_jp"},{"id":"Comes","name":"\u30ab\u30e0\u30ba","className":"Comes","superClassName":"Base","sortKey":"\u304b\u3080\u3059","locale":"ja_jp"},{"id":"AlchemiaStruggle","name":"\u30a2\u30eb\u30b1\u30df\u30a2\u30fb\u30b9\u30c8\u30e9\u30b0\u30eb","className":"AlchemiaStruggle","superClassName":"Base","sortKey":"\u3042\u308b\u3051\u307f\u3042\u3059\u3068\u3089\u304f\u308b","locale":"ja_jp"},{"id":"ConvictorDrive","name":"\u30b3\u30f3\u30f4\u30a3\u30af\u30bf\u30fc\u30fb\u30c9\u30e9\u30a4\u30d6","className":"ConvictorDrive","superClassName":"Base","sortKey":"\u3053\u3093\u3046\u3044\u304f\u305f\u3042\u3068\u3089\u3044\u3075","locale":"ja_jp"},{"id":"CrashWorld","name":"\u589c\u843d\u4e16\u754c","className":"CrashWorld","superClassName":"Base","sortKey":"\u3064\u3044\u3089\u304f\u305b\u304b\u3044","locale":"ja_jp"},{"id":"Fiasco","name":"\u30d5\u30a3\u30a2\u30b9\u30b3","className":"Fiasco","superClassName":"Base","sortKey":"\u3075\u3044\u3042\u3059\u3053","locale":"ja_jp"},{"id":"Cthulhu","name":"\u30af\u30c8\u30a5\u30eb\u30d5\u795e\u8a71TRPG","className":"Cthulhu","superClassName":"Base","sortKey":"\u304f\u3068\u3046\u308b\u3075\u3057\u3093\u308fTRPG","locale":"ja_jp"},{"id":"Fiasco:Korean","name":"\ud53c\uc544\uc2a4\ucf54","className":"Fiasco_Korean","superClassName":"Fiasco","sortKey":"\u56fd\u969b\u5316:Korean:\ud53c\uc544\uc2a4\ucf54","locale":"ko_kr"},{"id":"FilledWith","name":"\u30d5\u30a3\u30eb\u30c8\u30a6\u30a3\u30ba","className":"FilledWith","superClassName":"Base","sortKey":"\u3075\u3044\u308b\u3068\u3046\u3044\u3059","locale":"ja_jp"},{"id":"VisionConnect","name":"\u30f4\u30a3\u30b8\u30e7\u30f3\u30b3\u30cd\u30af\u30c8","className":"VisionConnect","superClassName":"Base","sortKey":"\u3046\u3044\u3057\u3088\u3093\u3053\u306d\u304f\u3068","locale":"ja_jp"},{"id":"ScreamHighSchool","name":"\u30b9\u30af\u30ea\u30fc\u30e0\u30cf\u30a4\u30b9\u30af\u30fc\u30eb","className":"ScreamHighSchool","superClassName":"GardenOrder","sortKey":"\u3059\u304f\u308a\u3044\u3080\u306f\u3044\u3059\u304f\u3046\u308b","locale":"ja_jp"},{"id":"Alsetto","name":"\u8a69\u7247\u306e\u30a2\u30eb\u30bb\u30c3\u30c8","className":"Alsetto","superClassName":"Base","sortKey":"\u3046\u305f\u304b\u305f\u306e\u3042\u308b\u305b\u3064\u3068","locale":"ja_jp"},{"id":"WaresBlade","name":"\u30ef\u30fc\u30b9\u30d6\u30ec\u30a4\u30c9","className":"WaresBlade","superClassName":"Base","sortKey":"\u308f\u3042\u3059\u3075\u308c\u3044\u3068","locale":"ja_jp"},{"id":"WARPS","name":"\u30ef\u30fc\u30d7\u30b9","className":"WARPS","superClassName":"Base","sortKey":"\u308f\u3042\u3075\u3059","locale":"ja_jp"},{"id":"Alshard","name":"\u30a2\u30eb\u30b7\u30e3\u30fc\u30c9","className":"Alshard","superClassName":"SRS","sortKey":"\u3042\u308b\u3057\u3084\u3042\u3068","locale":"ja_jp"},{"id":"SRS","name":"\u30b9\u30bf\u30f3\u30c0\u30fc\u30c9RPG\u30b7\u30b9\u30c6\u30e0","className":"SRS","superClassName":"Base","sortKey":"\u3059\u305f\u3093\u305f\u3042\u3068RPG\u3057\u3059\u3066\u3080","locale":"ja_jp"},{"id":"Sengensyou","name":"\u5343\u5e7b\u6284","className":"Sengensyou","superClassName":"Base","sortKey":"\u305b\u3093\u3051\u3093\u3057\u3088\u3046","locale":"ja_jp"},{"id":"Cthulhu7th","name":"\u65b0\u30af\u30c8\u30a5\u30eb\u30d5\u795e\u8a71TRPG","className":"Cthulhu7th","superClassName":"Base","sortKey":"\u3057\u3093\u304f\u3068\u3046\u308b\u3075\u3057\u3093\u308fTRPG","locale":"ja_jp"},{"id":"SevenFortressMobius","name":"\u30bb\u30d6\u30f3\uff1d\u30d5\u30a9\u30fc\u30c8\u30ec\u30b9 \u30e1\u30d3\u30a6\u30b9","className":"SevenFortressMobius","superClassName":"NightWizard","sortKey":"\u305b\u3075\u3093\u3075\u304a\u304a\u3068\u308c\u3059\u3081\u3072\u3046\u3059","locale":"ja_jp"},{"id":"ShadowRun","name":"\u30b7\u30e3\u30c9\u30a6\u30e9\u30f3","className":"ShadowRun","superClassName":"Base","sortKey":"\u3057\u3084\u3068\u3046\u3089\u3093","locale":"ja_jp"},{"id":"ShadowRun4","name":"\u30b7\u30e3\u30c9\u30a6\u30e9\u30f3 4th Edition","className":"ShadowRun4","superClassName":"Base","sortKey":"\u3057\u3084\u3068\u3046\u3089\u30934","locale":"ja_jp"},{"id":"Warhammer","name":"\u30a6\u30a9\u30fc\u30cf\u30f3\u30de\u30fc","className":"Warhammer","superClassName":"Base","sortKey":"\u3046\u304a\u304a\u306f\u3093\u307e\u3042","locale":"ja_jp"},{"id":"ShadowRun5","name":"\u30b7\u30e3\u30c9\u30a6\u30e9\u30f3 5th Edition","className":"ShadowRun5","superClassName":"ShadowRun4","sortKey":"\u3057\u3084\u3068\u3046\u3089\u30935","locale":"ja_jp"},{"id":"SharedFantasia","name":"Shared\u2020Fantasia","className":"SharedFantasia","superClassName":"Base","sortKey":"\u3057\u3048\u3042\u3042\u3068\u3075\u3042\u3093\u305f\u3057\u3042","locale":"ja_jp"},{"id":"ShinMegamiTenseiKakuseihen","name":"\u771f\u30fb\u5973\u795e\u8ee2\u751fTRPG \u899a\u9192\u7bc7","className":"ShinMegamiTenseiKakuseihen","superClassName":"Base","sortKey":"\u3057\u3093\u3081\u304b\u307f\u3066\u3093\u305b\u3044TRPG\u304b\u304f\u305b\u3044\u3078\u3093","locale":"ja_jp"},{"id":"ShinkuuGakuen","name":"\u771f\u7a7a\u5b66\u5712","className":"ShinkuuGakuen","superClassName":"Base","sortKey":"\u3057\u3093\u304f\u3046\u304b\u304f\u3048\u3093","locale":"ja_jp"},{"id":"Warhammer4","name":"\u30a6\u30a9\u30fc\u30cf\u30f3\u30de\u30fcRPG\u7b2c4\u7248","className":"Warhammer4","superClassName":"Base","sortKey":"\u3046\u304a\u304a\u306f\u3093\u307e\u30424","locale":"ja_jp"},{"id":"FullMetalPanic","name":"\u30d5\u30eb\u30e1\u30bf\u30eb\u30fb\u30d1\u30cb\u30c3\u30af\uff01RPG","className":"FullMetalPanic","superClassName":"SRS","sortKey":"\u3075\u308b\u3081\u305f\u308b\u306f\u306b\u3064\u304fRPG","locale":"ja_jp"},{"id":"FutariSousa","name":"\u30d5\u30bf\u30ea\u30bd\u30a6\u30b5","className":"FutariSousa","superClassName":"Base","sortKey":"\u3075\u305f\u308a\u305d\u3046\u3055","locale":"ja_jp"},{"id":"AlterRaise","name":"\u30a2\u30eb\u30c8\u30ec\u30a4\u30ba","className":"AlterRaise","superClassName":"Base","sortKey":"\u3042\u308b\u3068\u308c\u3044\u3059","locale":"ja_jp"},{"id":"FutariSousa:Korean","name":"\ub458\uc774\uc11c \uc218\uc0ac(\ud6c4\ud0c0\ub9ac\uc18c\uc6b0\uc0ac)","className":"FutariSousa_Korean","superClassName":"FutariSousa","sortKey":"\u56fd\u969b\u5316:Korean:\ub458\uc774\uc11c \uc218\uc0ac","locale":"ko_kr"},{"id":"Garako","name":"\u30ac\u30e9\u30b3\u3068\u7834\u754c\u306e\u5854","className":"Garako","superClassName":"Base","sortKey":"\u304b\u3089\u3053\u3068\u306f\u304b\u3044\u306e\u3068\u3046","locale":"ja_jp"},{"id":"MeikyuKingdomBasic","name":"\u8ff7\u5bae\u30ad\u30f3\u30b0\u30c0\u30e0 \u57fa\u672c\u30eb\u30fc\u30eb\u30d6\u30c3\u30af","className":"MeikyuKingdomBasic","superClassName":"MeikyuKingdom","sortKey":"\u3081\u3044\u304d\u3086\u3046\u304d\u3093\u304f\u305f\u3080\u304d\u307b\u3093\u308b\u3046\u308b\u3075\u3064\u304f","locale":"ja_jp"},{"id":"WitchQuest","name":"\u30a6\u30a3\u30c3\u30c1\u30af\u30a8\u30b9\u30c8","className":"WitchQuest","superClassName":"Base","sortKey":"\u3046\u3044\u3064\u3061\u304f\u3048\u3059\u3068","locale":"ja_jp"},{"id":"Amadeus","name":"\u30a2\u30de\u30c7\u30a6\u30b9","className":"Amadeus","superClassName":"Base","sortKey":"\u3042\u307e\u3066\u3046\u3059","locale":"ja_jp"},{"id":"GehennaAn","name":"\u30b2\u30d8\u30ca\u30fb\u30a2\u30ca\u30b9\u30bf\u30b7\u30b9","className":"GehennaAn","superClassName":"Base","sortKey":"\u3051\u3078\u306a\u3042\u306a\u3059\u305f\u3057\u3059","locale":"ja_jp"},{"id":"WorldOfDarkness","name":"\u30ef\u30fc\u30eb\u30c9\u30fb\u30aa\u30d6\u30fb\u30c0\u30fc\u30af\u30cd\u30b9","className":"WorldOfDarkness","superClassName":"Base","sortKey":"\u308f\u3042\u308b\u3068\u304a\u3075\u305f\u3042\u304f\u306d\u3059","locale":"ja_jp"},{"id":"GeishaGirlwithKatana","name":"\u30b2\u30a4\u30b7\u30e3\u30fb\u30ac\u30fc\u30eb\u30fb\u30a6\u30a3\u30ba\u30fb\u30ab\u30bf\u30ca","className":"GeishaGirlwithKatana","superClassName":"Base","sortKey":"\u3051\u3044\u3057\u3084\u304b\u3042\u308b\u3046\u3044\u3059\u304b\u305f\u306a","locale":"ja_jp"},{"id":"WorldsEndFrontline","name":"\u30ef\u30fc\u30eb\u30c9\u30a8\u30f3\u30c9\u30d5\u30ed\u30f3\u30c8\u30e9\u30a4\u30f3","className":"WorldsEndFrontline","superClassName":"Bloodorium","sortKey":"\u308f\u3042\u308b\u3068\u3048\u3093\u3068\u3075\u308d\u3093\u3068\u3089\u3044\u3093","locale":"ja_jp"},{"id":"Amadeus:Korean","name":"\uc544\ub9c8\ub370\uc6b0\uc2a4","className":"Amadeus_Korean","superClassName":"Amadeus","sortKey":"\u56fd\u969b\u5316:Korean:\uc544\ub9c8\ub370\uc6b0\uc2a4","locale":"ko_kr"},{"id":"YankeeYogSothoth","name":"\u30e4\u30f3\u30ad\u30fc\uff06\u30e8\u30b0\uff1d\u30bd\u30c8\u30fc\u30b9","className":"YankeeYogSothoth","superClassName":"Base","sortKey":"\u3084\u3093\u304d\u3044\u3042\u3093\u3068\u3088\u304f\u305d\u3068\u304a\u3059","locale":"ja_jp"},{"id":"AngelGear","name":"\u30a8\u30f3\u30bc\u30eb\u30ae\u30a2 \u5929\u4f7f\u5927\u6226TRPG The 2nd Editon","className":"AngelGear","superClassName":"Base","sortKey":"\u3048\u3093\u305b\u308b\u304d\u30422","locale":"ja_jp"},{"id":"YearZeroEngine","name":"YearZeroEngine","className":"YearZeroEngine","superClassName":"Base","sortKey":"\u3044\u3084\u3042\u305b\u308d\u3048\u3093\u3057\u3093","locale":"ja_jp"},{"id":"ShinobiGami","name":"\u30b7\u30ce\u30d3\u30ac\u30df","className":"ShinobiGami","superClassName":"Base","sortKey":"\u3057\u306e\u3072\u304b\u307f","locale":"ja_jp"},{"id":"AnimaAnimus","name":"\u30a2\u30cb\u30de\u30a2\u30cb\u30e0\u30b9","className":"AnimaAnimus","superClassName":"Base","sortKey":"\u3042\u306b\u307e\u3042\u306b\u3080\u3059","locale":"ja_jp"},{"id":"GhostLive","name":"\u5b9f\u6cc1\u30b4\u30fc\u30b9\u30c8\u30e9\u30a4\u30f4","className":"GhostLive","superClassName":"Base","sortKey":"\u3057\u3064\u304d\u3088\u3046\u3053\u304a\u3059\u3068\u3089\u3044\u3075","locale":"ja_jp"},{"id":"GoblinSlayer","name":"\u30b4\u30d6\u30ea\u30f3\u30b9\u30ec\u30a4\u30e4\u30fcTRPG","className":"GoblinSlayer","superClassName":"Base","sortKey":"\u3053\u3075\u308a\u3093\u3059\u308c\u3044\u3084\u3042TRPG","locale":"ja_jp"},{"id":"Aoharubaan","name":"\u3042\u304a\u306f\u308b\u3070\u30fc\u3093\u3063","className":"Aoharubaan","superClassName":"Base","sortKey":"\u3042\u304a\u306f\u308b\u306f\u3042\u3093\u3064","locale":"ja_jp"},{"id":"Cthulhu7th:ChineseTraditional","name":"\u514b\u8607\u9b6f\u795e\u8a71\u7b2c7\u7248","className":"Cthulhu7th_ChineseTraditional","superClassName":"Base","sortKey":"\u56fd\u969b\u5316:Chinese Traditional:\u514b\u8607\u9b6f\u795e\u8a71\u7b2c7\u7248","locale":"ja_jp"},{"id":"Shiranui","name":"\u4e0d\u77e5\u706b","className":"Shiranui","superClassName":"Base","sortKey":"\u3057\u3089\u306c\u3044","locale":"ja_jp"},{"id":"Yggdrasill","name":"\u92fc\u9244\u306e\u30e6\u30b0\u30c9\u30e9\u30b7\u30eb","className":"Yggdrasill","superClassName":"Base","sortKey":"\u3053\u3046\u3066\u3064\u306e\u3086\u304f\u3068\u3089\u3057\u308b","locale":"ja_jp"},{"id":"ShuumatsuKikou","name":"\u7d42\u672b\u7d00\u884c\uff32\uff30\uff27","className":"ShuumatsuKikou","superClassName":"Base","sortKey":"\u3057\u3086\u3046\u307e\u3064\u304d\u3053\u3046","locale":"ja_jp"},{"id":"Arianrhod","name":"\u30a2\u30ea\u30a2\u30f3\u30ed\u30c3\u30c9RPG","className":"Arianrhod","superClassName":"Base","sortKey":"\u3042\u308a\u3042\u3093\u308d\u3064\u3068RPG","locale":"ja_jp"},{"id":"Cthulhu7th:Korean","name":"\ud06c\ud234\ub8e8\uc758 \ubd80\ub984 7\ud310","className":"Cthulhu7th_Korean","superClassName":"Base","sortKey":"\u56fd\u969b\u5316:Korean:\ud06c\ud234\ub8e8\uc758 \ubd80\ub984 7\ud310","locale":"ja_jp"},{"id":"CthulhuTech","name":"\u30af\u30c8\u30a5\u30eb\u30d5\u30c6\u30c3\u30af","className":"CthulhuTech","superClassName":"Base","sortKey":"\u304f\u3068\u3046\u308b\u3075\u3066\u3064\u304f","locale":"ja_jp"},{"id":"ArsMagica","name":"\u30a2\u30eb\u30b9\u30de\u30ae\u30ab","className":"ArsMagica","superClassName":"Base","sortKey":"\u3042\u308b\u3059\u307e\u304d\u304b","locale":"ja_jp"},{"id":"GoldenSkyStories","name":"\u3086\u3046\u3084\u3051\u3053\u3084\u3051","className":"GoldenSkyStories","superClassName":"Base","sortKey":"\u3086\u3046\u3084\u3051\u3053\u3084\u3051","locale":"ja_jp"},{"id":"Gorilla","name":"\u30b4\u30ea\u30e9TRPG","className":"Gorilla","superClassName":"Base","sortKey":"\u3053\u308a\u3089TRPG","locale":"ja_jp"},{"id":"GranCrest","name":"\u30b0\u30e9\u30f3\u30af\u30ec\u30b9\u30c8RPG","className":"GranCrest","superClassName":"Base","sortKey":"\u304f\u3089\u3093\u304f\u308c\u3059\u3068RPG","locale":"ja_jp"},{"id":"Gundog","name":"\u30ac\u30f3\u30c9\u30c3\u30b0","className":"Gundog","superClassName":"Base","sortKey":"\u304b\u3093\u3068\u3064\u304f","locale":"ja_jp"},{"id":"GundogRevised","name":"\u30ac\u30f3\u30c9\u30c3\u30b0\u30fb\u30ea\u30f4\u30a1\u30a4\u30ba\u30c9","className":"GundogRevised","superClassName":"Base","sortKey":"\u304b\u3093\u3068\u3064\u304f\u308a\u3046\u3042\u3044\u3059\u3068","locale":"ja_jp"},{"id":"Skynauts","name":"\u6b6f\u8eca\u306e\u5854\u306e\u63a2\u7a7a\u58eb\uff08\u516d\u7573\u9593\u5e7b\u60f3\u7a7a\u9593\uff09","className":"Skynauts","superClassName":"Base","sortKey":"\u306f\u304f\u308b\u307e\u306e\u3068\u3046\u306e\u3059\u304b\u3044\u306e\u304a\u3064","locale":"ja_jp"},{"id":"GundogZero","name":"\u30ac\u30f3\u30c9\u30c3\u30b0\u30bc\u30ed","className":"GundogZero","superClassName":"Gundog","sortKey":"\u304b\u3093\u3068\u3064\u304f\u305b\u308d","locale":"ja_jp"},{"id":"AssaultEngine","name":"\u30a2\u30b5\u30eb\u30c8\u30a8\u30f3\u30b8\u30f3","className":"AssaultEngine","superClassName":"Base","sortKey":"\u3042\u3055\u308b\u3068\u3048\u3093\u3057\u3093","locale":"ja_jp"},{"id":"GURPS","name":"\u30ac\u30fc\u30d7\u30b9","className":"GURPS","superClassName":"Base","sortKey":"\u304b\u3042\u3075\u3059","locale":"ja_jp"},{"id":"MetalHead","name":"\u30e1\u30bf\u30eb\u30d8\u30c3\u30c9","className":"MetalHead","superClassName":"Base","sortKey":"\u3081\u305f\u308b\u3078\u3064\u3068","locale":"ja_jp"},{"id":"Cthulhu:ChineseTraditional","name":"\u514b\u8607\u9b6f\u795e\u8a71","className":"Cthulhu_ChineseTraditional","superClassName":"Cthulhu","sortKey":"\u56fd\u969b\u5316:Chinese Traditional:\u514b\u8607\u9b6f\u795e\u8a71","locale":"zh_hant"},{"id":"Avandner","name":"\u9ed2\u7d62\u306e\u30a2\u30f4\u30a1\u30f3\u30c9\u30ca\u30fc","className":"Avandner","superClassName":"Base","sortKey":"\u3053\u3064\u3051\u3093\u306e\u3042\u3046\u3042\u3093\u3068\u306a\u3042","locale":"ja_jp"},{"id":"Ayabito","name":"\u3042\u3084\u3073\u3068","className":"Ayabito","superClassName":"Base","sortKey":"\u3042\u3084\u3072\u3068","locale":"ja_jp"},{"id":"Cthulhu:Korean","name":"\ud06c\ud234\ub8e8","className":"Cthulhu_Korean","superClassName":"Cthulhu","sortKey":"\u56fd\u969b\u5316:Korean:\ud06c\ud234\ub8e8","locale":"ko_kr"},{"id":"Cthulhu:SimplifiedChinese","name":"\u514b\u82cf\u9c81\u7684\u547c\u5524 \u7b2c\u516d\u7248","className":"Cthulhu_SimplifiedChinese","superClassName":"Cthulhu","sortKey":"\u56fd\u969b\u5316:Simplified Chinese:\u514b\u82cf\u9c81\u7684\u547c\u5524 \u7b2c\u516d\u7248","locale":"zh_hans"},{"id":"CyberpunkRed","name":"\u30b5\u30a4\u30d0\u30fc\u30d1\u30f3\u30afRED","className":"CyberpunkRed","superClassName":"Base","sortKey":"\u3055\u3044\u306f\u3042\u306f\u3093\u304f\u308c\u3064\u3068","locale":"ja_jp"},{"id":"GurpsFW","name":"\u30ac\u30fc\u30d7\u30b9\u30d5\u30a3\u30eb\u30c8\u30a6\u30a3\u30ba","className":"GurpsFW","superClassName":"Base","sortKey":"\u304b\u3042\u3075\u3059\u3075\u3044\u308b\u3068\u3046\u3044\u3059","locale":"ja_jp"},{"id":"MetalHeadExtream","name":"\u30e1\u30bf\u30eb\u30d8\u30c3\u30c9\u30a8\u30af\u30b9\u30c8\u30ea\u30fc\u30e0","className":"MetalHeadExtream","superClassName":"Base","sortKey":"\u3081\u305f\u308b\u3078\u3064\u3068\u3048\u304f\u3059\u3068\u308a\u3044\u3080","locale":"ja_jp"},{"id":"Bakenokawa","name":"\u30d0\u30b1\u30ce\u30ab\u30ef","className":"Bakenokawa","superClassName":"Base","sortKey":"\u306f\u3051\u306e\u304b\u308f","locale":"ja_jp"},{"id":"SkynautsBouken","name":"\u6b6f\u8eca\u306e\u5854\u306e\u63a2\u7a7a\u58eb\uff08\u5192\u967a\u4f01\u753b\u5c40\uff09","className":"SkynautsBouken","superClassName":"Base","sortKey":"\u306f\u304f\u308b\u307e\u306e\u3068\u3046\u306e\u3059\u304b\u3044\u306e\u304a\u30642","locale":"ja_jp"},{"id":"BBN","name":"BBNTRPG","className":"BBN","superClassName":"Base","sortKey":"\u3072\u3044\u3072\u3044\u3048\u306cTRPG","locale":"ja_jp"},{"id":"ZettaiReido","name":"\u7d76\u5bfe\u96b7\u5974","className":"ZettaiReido","superClassName":"Base","sortKey":"\u305b\u3064\u305f\u3044\u308c\u3044\u3068","locale":"ja_jp"},{"id":"BadLife","name":"\u30d0\u30c3\u30c9\u30e9\u30a4\u30d5","className":"BadLife","superClassName":"Base","sortKey":"\u306f\u3064\u3068\u3089\u3044\u3075","locale":"ja_jp"},{"id":"HarnMaster","name":"\u30cf\u30fc\u30f3\u30de\u30b9\u30bf\u30fc","className":"HarnMaster","superClassName":"Base","sortKey":"\u306f\u3042\u3093\u307e\u3059\u305f\u3042","locale":"ja_jp"},{"id":"StarryDolls","name":"\u30b9\u30bf\u30ea\u30a3\u30c9\u30fc\u30eb","className":"StarryDolls","superClassName":"Base","sortKey":"\u3059\u305f\u308a\u3044\u3068\u304a\u308b","locale":"ja_jp"},{"id":"SteamPunkers","name":"\u30b9\u30c1\u30fc\u30e0\u30d1\u30f3\u30ab\u30fc\u30ba","className":"SteamPunkers","superClassName":"Base","sortKey":"\u3059\u3061\u3044\u3080\u306f\u3093\u304b\u3042\u3059","locale":"ja_jp"},{"id":"HatsuneMiku","name":"\u521d\u97f3\u30df\u30afTRPG \u30b3\u30b3\u30ed\u30c0\u30f3\u30b8\u30e7\u30f3","className":"HatsuneMiku","superClassName":"Base","sortKey":"\u306f\u3064\u306d\u307f\u304fTRPG\u3053\u3053\u308d\u305f\u3093\u3057\u3088\u3093","locale":"ja_jp"},{"id":"BarnaKronika","name":"\u30d0\u30eb\u30ca\u30fb\u30af\u30ed\u30cb\u30ab","className":"BarnaKronika","superClassName":"Base","sortKey":"\u306f\u308b\u306a\u304f\u308d\u306b\u304b","locale":"ja_jp"},{"id":"StellarKnights","name":"\u9280\u5263\u306e\u30b9\u30c6\u30e9\u30ca\u30a4\u30c4","className":"StellarKnights","superClassName":"Base","sortKey":"\u304d\u3093\u3051\u3093\u306e\u3059\u3066\u3089\u306a\u3044\u3064","locale":"ja_jp"},{"id":"DarkBlaze","name":"\u30c0\u30fc\u30af\u30d6\u30ec\u30a4\u30ba","className":"DarkBlaze","superClassName":"Base","sortKey":"\u305f\u3042\u304f\u3075\u308c\u3044\u3059","locale":"ja_jp"},{"id":"Hieizan","name":"\u6bd4\u53e1\u5c71\u708e\u4e0a","className":"Hieizan","superClassName":"Base","sortKey":"\u3072\u3048\u3044\u3055\u3093\u3048\u3093\u3057\u3088\u3046","locale":"ja_jp"},{"id":"HouraiGakuen","name":"\u84ec\u83b1\u5b66\u5712\u306e\u5192\u967a!!","className":"HouraiGakuen","superClassName":"Base","sortKey":"\u307b\u3046\u3089\u3044\u304b\u304f\u3048\u3093\u306e\u307b\u3046\u3051\u3093","locale":"ja_jp"},{"id":"MonotoneMuseum","name":"\u30e2\u30ce\u30c8\u30fc\u30f3\u30df\u30e5\u30fc\u30b8\u30a2\u30e0RPG","className":"MonotoneMuseum","superClassName":"Base","sortKey":"\u3082\u306e\u3068\u304a\u3093\u307f\u3086\u3046\u3057\u3042\u3080RPG","locale":"ja_jp"},{"id":"MetallicGuardian","name":"\u30e1\u30bf\u30ea\u30c3\u30af\u30ac\u30fc\u30c7\u30a3\u30a2\u30f3RPG","className":"MetallicGuardian","superClassName":"SRS","sortKey":"\u3081\u305f\u308a\u3064\u304f\u304b\u3042\u3066\u3044\u3042\u3093RPG","locale":"ja_jp"},{"id":"MonotoneMuseum:Korean","name":"\ubaa8\ub178\ud1a4 \ubba4\uc9c0\uc5c4","className":"MonotoneMuseum_Korean","superClassName":"MonotoneMuseum","sortKey":"\u56fd\u969b\u5316:Korean:\ubaa8\ub178\ud1a4 \ubba4\uc9c0\uc5c4","locale":"ko_kr"},{"id":"Nechronica","name":"\u30cd\u30af\u30ed\u30cb\u30ab","className":"Nechronica","superClassName":"Base","sortKey":"\u306d\u304f\u308d\u306b\u304b","locale":"ja_jp"},{"id":"StellarKnights:Korean","name":"\uc740\uac80\uc758 \uc2a4\ud154\ub77c\ub098\uc774\uce20","className":"StellarKnights_Korean","superClassName":"StellarKnights","sortKey":"\u56fd\u969b\u5316:Korean:\uc740\uac80\uc758 \uc2a4\ud154\ub77c\ub098\uc774\uce20","locale":"ko_kr"},{"id":"BattleTech","name":"\u30d0\u30c8\u30eb\u30c6\u30c3\u30af","className":"BattleTech","superClassName":"Base","sortKey":"\u306f\u3068\u308b\u3066\u3064\u304f","locale":"ja_jp"},{"id":"DarkDaysDrive","name":"\u30c0\u30fc\u30af\u30c7\u30a4\u30ba\u30c9\u30e9\u30a4\u30d6","className":"DarkDaysDrive","superClassName":"Base","sortKey":"\u305f\u3042\u304f\u3066\u3044\u3059\u3068\u3089\u3044\u3075","locale":"ja_jp"},{"id":"StellarLife","name":"\u30b9\u30c6\u30e9\u30fc\u30e9\u30a4\u30d5TRPG","className":"StellarLife","superClassName":"Base","sortKey":"\u3059\u3066\u3089\u3042\u3089\u3044\u3075TRPG","locale":"ja_jp"},{"id":"DarkSouls","name":"\u30c0\u30fc\u30af\u30bd\u30a6\u30ebTRPG","className":"DarkSouls","superClassName":"Base","sortKey":"\u305f\u3042\u304f\u305d\u3046\u308bTRPG","locale":"ja_jp"},{"id":"Nechronica:Korean","name":"\ub124\ud06c\ub85c\ub2c8\uce74","className":"Nechronica_Korean","superClassName":"Nechronica","sortKey":"\u56fd\u969b\u5316:Korean:\ub124\ud06c\ub85c\ub2c8\uce74","locale":"ko_kr"},{"id":"NeverCloud","name":"\u30cd\u30d0\u30fc\u30af\u30e9\u30a6\u30c9TRPG","className":"NeverCloud","superClassName":"Base","sortKey":"\u306d\u306f\u3042\u304f\u3089\u3046\u3068TRPG","locale":"ja_jp"},{"id":"StrangerOfSwordCity","name":"\u5263\u306e\u8857\u306e\u7570\u90a6\u4ebaTRPG","className":"StrangerOfSwordCity","superClassName":"Base","sortKey":"\u3064\u308b\u304d\u306e\u307e\u3061\u306e\u3044\u307b\u3046\u3057\u3093TRPG","locale":"ja_jp"},{"id":"StratoShout","name":"\u30b9\u30c8\u30e9\u30c8\u30b7\u30e3\u30a6\u30c8","className":"StratoShout","superClassName":"Base","sortKey":"\u3059\u3068\u3089\u3068\u3057\u3084\u3046\u3068","locale":"ja_jp"},{"id":"StratoShout:Korean","name":"\uc2a4\ud2b8\ub77c\ud1a0 \uc0e4\uc6b0\ud2b8","className":"StratoShout_Korean","superClassName":"StratoShout","sortKey":"\u56fd\u969b\u5316:Korean:\uc2a4\ud2b8\ub77c\ud1a0 \uc0e4\uc6b0\ud2b8","locale":"ko_kr"},{"id":"Strave","name":"\u78a7\u7a7a\u306e\u30b9\u30c8\u30ec\u30a4\u30f4","className":"Strave","superClassName":"Base","sortKey":"\u3078\u304d\u304f\u3046\u306e\u3059\u3068\u308c\u3044\u3075","locale":"ja_jp"},{"id":"NightWizard","name":"\u30ca\u30a4\u30c8\u30a6\u30a3\u30b6\u30fc\u30c9 The 2nd Edition","className":"NightWizard","superClassName":"Base","sortKey":"\u306a\u3044\u3068\u3046\u3044\u3055\u3042\u30682","locale":"ja_jp"},{"id":"DeadlineHeroes","name":"\u30c7\u30c3\u30c9\u30e9\u30a4\u30f3\u30d2\u30fc\u30ed\u30fc\u30baRPG","className":"DeadlineHeroes","superClassName":"Base","sortKey":"\u3066\u3064\u3068\u3089\u3044\u3093\u3072\u3044\u308d\u304a\u3059RPG","locale":"ja_jp"},{"id":"SwordWorld","name":"\u30bd\u30fc\u30c9\u30fb\u30ef\u30fc\u30eb\u30c9RPG","className":"SwordWorld","superClassName":"Base","sortKey":"\u305d\u304a\u3068\u308f\u3042\u308b\u3068","locale":"ja_jp"},{"id":"HuntersMoon","name":"\u30cf\u30f3\u30bf\u30fc\u30ba\u30fb\u30e0\u30fc\u30f3","className":"HuntersMoon","superClassName":"Base","sortKey":"\u306f\u3093\u305f\u3042\u3059\u3080\u3046\u3093","locale":"ja_jp"},{"id":"HunterTheReckoning5th","name":"Hunter: The Reckoning 5th Edition","className":"HunterTheReckoning5th","superClassName":"Base","sortKey":"\u306f\u3093\u3042\u305f\u3055\u308c\u3053\u306b\u3093\u304f5","locale":"ja_jp"},{"id":"NightWizard3rd","name":"\u30ca\u30a4\u30c8\u30a6\u30a3\u30b6\u30fc\u30c9 The 3rd Edition","className":"NightWizard3rd","superClassName":"NightWizard","sortKey":"\u306a\u3044\u3068\u3046\u3044\u3055\u3042\u30683","locale":"ja_jp"},{"id":"NightmareHunterDeep","name":"\u30ca\u30a4\u30c8\u30e1\u30a2\u30cf\u30f3\u30bf\u30fc=\u30c7\u30a3\u30fc\u30d7","className":"NightmareHunterDeep","superClassName":"Base","sortKey":"\u306a\u3044\u3068\u3081\u3042\u306f\u3093\u305f\u3042\u3066\u3044\u3044\u3075","locale":"ja_jp"},{"id":"DemonParasite","name":"\u30c7\u30e2\u30f3\u30d1\u30e9\u30b5\u30a4\u30c8","className":"DemonParasite","superClassName":"Base","sortKey":"\u3066\u3082\u3093\u306f\u3089\u3055\u3044\u3068","locale":"ja_jp"},{"id":"NinjaSlayer","name":"\u30cb\u30f3\u30b8\u30e3\u30b9\u30ec\u30a4\u30e4\u30fcTRPG","className":"NinjaSlayer","superClassName":"Base","sortKey":"\u306b\u3093\u3057\u3084\u3059\u308c\u3044\u3084\u3042RPG","locale":"ja_jp"},{"id":"IfIfIf","name":"\u30a4\u30d5\u30fb\u30a4\u30d5\u30fb\u30a4\u30d5","className":"IfIfIf","superClassName":"Base","sortKey":"\u3044\u3075\u3044\u3075\u3044\u3075","locale":"ja_jp"},{"id":"DesperateRun","name":"Desperate Run TRPG","className":"DesperateRun","superClassName":"Base","sortKey":"\u3066\u3059\u3078\u308c\u3044\u3068\u3089\u3093TRPG","locale":"ja_jp"},{"id":"BeastBindTrinity","name":"\u30d3\u30fc\u30b9\u30c8\u30d0\u30a4\u30f3\u30c9 \u30c8\u30ea\u30cb\u30c6\u30a3","className":"BeastBindTrinity","superClassName":"Base","sortKey":"\u3072\u3044\u3059\u3068\u306f\u3044\u3093\u3068\u3068\u308a\u306b\u3066\u3044","locale":"ja_jp"},{"id":"DetatokoSaga","name":"\u3067\u305f\u3068\u3053\u30b5\u30fc\u30ac","className":"DetatokoSaga","superClassName":"Base","sortKey":"\u3066\u305f\u3068\u3053\u3055\u3042\u304b","locale":"ja_jp"},{"id":"NjslyrBattle","name":"NJSLYRBATTLE","className":"NjslyrBattle","superClassName":"Base","sortKey":"\u306b\u3093\u3057\u3084\u3059\u308c\u3044\u3084\u3042\u306f\u3068\u308b","locale":"ja_jp"},{"id":"NobunagasBlackCastle","name":"\u4fe1\u9577\u306e\u9ed2\u3044\u57ce","className":"NobunagasBlackCastle","superClassName":"Base","sortKey":"\u306e\u3075\u306a\u304b\u306e\u304f\u308d\u3044\u3057\u308d","locale":"ja_jp"},{"id":"DetatokoSaga:Korean","name":"\ub370\ud0c0\ud1a0\ucf54 \uc0ac\uac00","className":"DetatokoSaga_Korean","superClassName":"DetatokoSaga","sortKey":"\u56fd\u969b\u5316:Korean:\ub370\ud0c0\ud1a0\ucf54 \uc0ac\uac00","locale":"ko_kr"},{"id":"DiceOfTheDead","name":"\u30c0\u30a4\u30b9\u30fb\u30aa\u30d6\u30fb\u30b6\u30fb\u30c7\u30c3\u30c9","className":"DiceOfTheDead","superClassName":"Base","sortKey":"\u305f\u3044\u3059\u304a\u3075\u3055\u3066\u3064\u3068","locale":"ja_jp"},{"id":"Illusio","name":"\u6643\u5929\u306e\u30a4\u30eb\u30fc\u30b8\u30aa","className":"Illusio","superClassName":"Base","sortKey":"\u3053\u3046\u3066\u3093\u306e\u3044\u308b\u3046\u3057\u304a","locale":"ja_jp"},{"id":"DoubleCross","name":"\u30c0\u30d6\u30eb\u30af\u30ed\u30b92nd,3rd","className":"DoubleCross","superClassName":"Base","sortKey":"\u305f\u3075\u308b\u304f\u308d\u30592","locale":"ja_jp"},{"id":"NSSQ","name":"SRS\u3058\u3083\u306a\u3044\u4e16\u754c\u6a39\u306e\u8ff7\u5baeTRPG","className":"NSSQ","superClassName":"Base","sortKey":"\u3048\u3059\u3042\u3042\u308b\u3048\u3059\u3057\u3084\u306a\u3044\u305b\u304b\u3044\u3057\u3086\u306e\u3081\u3044\u304d\u3086\u3046TRPG","locale":"ja_jp"},{"id":"SwordWorld2.0","name":"\u30bd\u30fc\u30c9\u30fb\u30ef\u30fc\u30eb\u30c92.0","className":"SwordWorld2_0","superClassName":"SwordWorld","sortKey":"\u305d\u304a\u3068\u308f\u3042\u308b\u30682.0","locale":"ja_jp"},{"id":"InfiniteBabeL","name":"\u5c11\u5e74\u306e\u305f\u3081\u306e\u5c11\u5973\u5c55\u721b\u4f1a\u7570\u805e Infinite BabeL","className":"InfiniteBabeL","superClassName":"ShoujoTenrankai","sortKey":"\u3057\u3088\u3046\u306d\u3093\u306e\u305f\u3081\u306e\u3057\u3088\u3046\u3057\u3088\u3066\u3093\u3089\u3093\u304b\u3044\u3044\u3075\u3093\u3044\u3093\u3075\u3044\u306b\u3064\u3068\u306f\u3078\u308b","locale":"ja_jp"},{"id":"BeginningIdol","name":"\u30d3\u30ae\u30cb\u30f3\u30b0\u30a2\u30a4\u30c9\u30eb","className":"BeginningIdol","superClassName":"Base","sortKey":"\u3072\u304d\u306b\u3093\u304f\u3042\u3044\u3068\u308b","locale":"ja_jp"},{"id":"ShoujoTenrankai","name":"\u5c11\u5973\u5c55\u721b\u4f1aTRPG","className":"ShoujoTenrankai","superClassName":"Base","sortKey":"\u3057\u3088\u3046\u3057\u3088\u3066\u3093\u3089\u3093\u304b\u3044TRPG","locale":"ja_jp"},{"id":"InfiniteFantasia","name":"\u7121\u9650\u306e\u30d5\u30a1\u30f3\u30bf\u30b8\u30a2","className":"InfiniteFantasia","superClassName":"Base","sortKey":"\u3080\u3051\u3093\u306e\u3075\u3042\u3093\u305f\u3057\u3042","locale":"ja_jp"},{"id":"Insane","name":"\u30a4\u30f3\u30bb\u30a4\u30f3","className":"Insane","superClassName":"Base","sortKey":"\u3044\u3093\u305b\u3044\u3093","locale":"ja_jp"},{"id":"OneWayHeroics","name":"\u7247\u9053\u52c7\u8005TRPG","className":"OneWayHeroics","superClassName":"Base","sortKey":"\u304b\u305f\u307f\u3061\u3086\u3046\u3057\u3084TRPG","locale":"ja_jp"},{"id":"Nuekagami","name":"\u9d7a\u93e1","className":"Nuekagami","superClassName":"Base","sortKey":"\u306c\u3048\u304b\u304b\u307f","locale":"ja_jp"},{"id":"Insane:Korean","name":"\uc778\uc138\uc778","className":"Insane_Korean","superClassName":"Insane","sortKey":"\u56fd\u969b\u5316:Korean:\uc778\uc138\uc778","locale":"ko_kr"},{"id":"Irisbane","name":"\u77b3\u9038\u3089\u3055\u306c\u30a4\u30ea\u30b9\u30d9\u30a4\u30f3","className":"Irisbane","superClassName":"Base","sortKey":"\u3072\u3068\u307f\u305d\u3089\u3055\u306c\u3044\u308a\u3059\u3078\u3044\u3093","locale":"ja_jp"},{"id":"SwordWorld2.5","name":"\u30bd\u30fc\u30c9\u30fb\u30ef\u30fc\u30eb\u30c92.5","className":"SwordWorld2_5","superClassName":"SwordWorld2_0","sortKey":"\u305d\u304a\u3068\u308f\u3042\u308b\u30682.5","locale":"ja_jp"},{"id":"SwordWorld:SimplifiedChinese","name":"\u5251\u4e16\u754c","className":"SwordWorld_SimplifiedChinese","superClassName":"SwordWorld","sortKey":"\u56fd\u969b\u5316:Simplified Chinese:\u5251\u4e16\u754c","locale":"zh_hans"},{"id":"SwordWorld2.0:SimplifiedChinese","name":"\u5251\u4e16\u754c2.0","className":"SwordWorld2_0_SimplifiedChinese","superClassName":"SwordWorld2_0","sortKey":"\u56fd\u969b\u5316:Simplified Chinese:\u5251\u4e16\u754c2.0","locale":"zh_hans"},{"id":"SwordWorld2.5:SimplifiedChinese","name":"\u5251\u4e16\u754c2.5","className":"SwordWorld2_5_SimplifiedChinese","superClassName":"SwordWorld2_5","sortKey":"\u56fd\u969b\u5316:Simplified Chinese:\u5251\u4e16\u754c2.5","locale":"zh_hans"},{"id":"DoubleCross:Korean","name":"\ub354\ube14\ud06c\ub85c\uc2a42nd,3rd","className":"DoubleCross_Korean","superClassName":"DoubleCross","sortKey":"\u56fd\u969b\u5316:Korean:\ub354\ube14\ud06c\ub85c\uc2a4","locale":"ko_kr"},{"id":"Dracurouge","name":"\u30c9\u30e9\u30af\u30eb\u30fc\u30b8\u30e5","className":"Dracurouge","superClassName":"Base","sortKey":"\u3068\u3089\u304f\u308b\u3046\u3057\u3086","locale":"ja_jp"},{"id":"TalesFromTheLoop","name":"\u30b6\u30fb\u30eb\u30fc\u30d7TRPG","className":"TalesFromTheLoop","superClassName":"Base","sortKey":"\u3055\u308b\u3046\u3075TRPG","locale":"ja_jp"},{"id":"IthaWenUa","name":"\u30a4\u30b5\u30fc\u30fb\u30a6\u30a7\u30f3\uff1d\u30a2\u30fc","className":"IthaWenUa","superClassName":"Base","sortKey":"\u3044\u3055\u3042\u3046\u3048\u3093\u3042\u3042","locale":"ja_jp"},{"id":"JamesBond","name":"\u30b8\u30a7\u30fc\u30e0\u30ba\u30fb\u30dc\u30f3\u30c9007","className":"JamesBond","superClassName":"Base","sortKey":"\u3057\u3048\u3048\u3080\u3059\u307b\u3093\u3068007","locale":"ja_jp"},{"id":"DiceBot","name":"DiceBot","className":"DiceBot","superClassName":"Base","sortKey":"*\u305f\u3044\u3059\u307b\u3064\u3068","locale":"ja_jp"},{"id":"JekyllAndHyde","name":"\u30b8\u30ad\u30eb\u3068\u30cf\u30a4\u30c9\u3068\u30b0\u30ea\u30c8\u30b0\u30e9","className":"JekyllAndHyde","superClassName":"DesperateRun","sortKey":"\u3057\u304d\u308b\u3068\u306f\u3044\u3068\u3068\u304f\u308a\u3068\u304f\u3089","locale":"ja_jp"},{"id":"JuinKansen","name":"\u546a\u5370\u611f\u67d3","className":"JuinKansen","superClassName":"Base","sortKey":"\u3057\u3086\u3044\u3093\u304b\u3093\u305b\u3093","locale":"ja_jp"},{"id":"Kamigakari","name":"\u795e\u6211\u72e9","className":"Kamigakari","superClassName":"Base","sortKey":"\u304b\u307f\u304b\u304b\u308a","locale":"ja_jp"},{"id":"TherapieSein","name":"\u30bb\u30e9\u30d5\u30a3\u30b6\u30a4\u30f3","className":"TherapieSein","superClassName":"Base","sortKey":"\u305b\u3089\u3075\u3044\u3055\u3044\u3093","locale":"ja_jp"},{"id":"TenkaRyouran","name":"\u5929\u4e0b\u7e5a\u4e71","className":"TenkaRyouran","superClassName":"SRS","sortKey":"\u3066\u3093\u304b\u308a\u3088\u3046\u3089\u3093","locale":"ja_jp"},{"id":"TokyoGhostResearch","name":"\u6771\u4eac\u30b4\u30fc\u30b9\u30c8\u30ea\u30b5\u30fc\u30c1","className":"TokyoGhostResearch","superClassName":"Base","sortKey":"\u3068\u3046\u304d\u3088\u3046\u3053\u304a\u3059\u3068\u308a\u3055\u3042\u3061","locale":"ja_jp"},{"id":"TokumeiTenkousei","name":"\u7279\u547d\u8ee2\u653b\u751f","className":"TokumeiTenkousei","superClassName":"Base","sortKey":"\u3068\u304f\u3081\u3044\u3066\u3093\u3053\u3046\u305b\u3044","locale":"ja_jp"},{"id":"OracleEngine","name":"\u30aa\u30e9\u30af\u30eb\u30a8\u30f3\u30b8\u30f3","className":"OracleEngine","superClassName":"Base","sortKey":"\u304a\u3089\u304f\u308b\u3048\u3093\u3057\u3093","locale":"ja_jp"},{"id":"Kamigakari:Korean","name":"\uce74\ubbf8\uac00\uce74\ub9ac","className":"Kamigakari_Korean","superClassName":"Kamigakari","sortKey":"\u56fd\u969b\u5316:Korean:\uce74\ubbf8\uac00\uce74\ub9ac","locale":"ko_kr"},{"id":"KanColle","name":"\u8266\u3053\u308cRPG","className":"KanColle","superClassName":"Base","sortKey":"\u304b\u3093\u3053\u308cRPG","locale":"ja_jp"},{"id":"Torg","name":"\u30c8\u30fc\u30b0","className":"Torg","superClassName":"Base","sortKey":"\u3068\u304a\u304f","locale":"ja_jp"},{"id":"TokyoNova","name":"\u30c8\u30fc\u30ad\u30e7\u30fcN\u25ceVA","className":"TokyoNova","superClassName":"Base","sortKey":"\u3068\u304a\u304d\u3088\u304a\u306e\u306f","locale":"ja_jp"},{"id":"Karukami","name":"\u30ab\u30eb\u30ab\u30df","className":"Karukami","superClassName":"Base","sortKey":"\u304b\u308b\u304b\u307f","locale":"ja_jp"},{"id":"KemonoNoMori","name":"\u7378\u30ce\u68ee","className":"KemonoNoMori","superClassName":"Base","sortKey":"\u3051\u3082\u306e\u306e\u3082\u308a","locale":"ja_jp"},{"id":"Dracurouge:Korean","name":"\ub4dc\ub77c\ud06c\ub8e8\uc8fc","className":"Dracurouge_Korean","superClassName":"Dracurouge","sortKey":"\u56fd\u969b\u5316:Korean:\ub4dc\ub77c\ud06c\ub8e8\uc8fc","locale":"ko_kr"},{"id":"DungeonsAndDragons","name":"\u30c0\u30f3\u30b8\u30e7\u30f3\u30ba\uff06\u30c9\u30e9\u30b4\u30f3\u30ba","className":"DungeonsAndDragons","superClassName":"Base","sortKey":"\u305f\u3093\u3057\u3088\u3093\u3059\u3042\u3093\u3068\u3068\u3089\u3053\u3093\u3059","locale":"ja_jp"},{"id":"DungeonsAndDragons5","name":"\u30c0\u30f3\u30b8\u30e7\u30f3\u30ba\uff06\u30c9\u30e9\u30b4\u30f3\u30ba\u7b2c5\u7248","className":"DungeonsAndDragons5","superClassName":"Base","sortKey":"\u305f\u3093\u3057\u3088\u3093\u3059\u3042\u3093\u3068\u3068\u3089\u3053\u3093\u30595","locale":"ja_jp"},{"id":"OrgaRain","name":"\u5728\u308a\u3066\u904d\u304f\u30aa\u30eb\u30ac\u30ec\u30a4\u30f3","className":"OrgaRain","superClassName":"Base","sortKey":"\u3042\u308a\u3066\u3042\u307e\u306d\u304f\u304a\u308b\u304b\u308c\u3044\u3093","locale":"ja_jp"},{"id":"Oukahoushin3rd","name":"\u592e\u83ef\u5c01\u795eRPG \u7b2c\u4e09\u7248","className":"Oukahoushin3rd","superClassName":"Base","sortKey":"\u304a\u3046\u304b\u307b\u3046\u3057\u3093RPG3","locale":"ja_jp"},{"id":"Paradiso","name":"\u30c1\u30a7\u30ec\u30b9\u30c6\u8272\u306e\u30d1\u30e9\u30c7\u30a3\u30fc\u30be","className":"Paradiso","superClassName":"Base","sortKey":"\u3061\u3048\u308c\u3059\u3066\u3044\u308d\u306e\u306f\u3089\u3066\u3044\u3044\u305d","locale":"ja_jp"},{"id":"KillDeathBusiness","name":"\u30ad\u30eb\u30c7\u30b9\u30d3\u30b8\u30cd\u30b9","className":"KillDeathBusiness","superClassName":"Base","sortKey":"\u304d\u308b\u3066\u3059\u3072\u3057\u306d\u3059","locale":"ja_jp"},{"id":"Torg1.5","name":"\u30c8\u30fc\u30b01.5\u7248","className":"Torg1_5","superClassName":"Torg","sortKey":"\u3068\u304a\u304f1.5","locale":"ja_jp"},{"id":"EarthDawn","name":"\u30a2\u30fc\u30b9\u30c9\u30fc\u30f3","className":"EarthDawn","superClassName":"Base","sortKey":"\u3042\u3042\u3059\u3068\u304a\u3093","locale":"ja_jp"},{"id":"TorgEternity","name":"\u30c8\u30fc\u30b0 \u30a8\u30bf\u30cb\u30c6\u30a3","className":"TorgEternity","superClassName":"Base","sortKey":"\u3068\u304a\u304f\u3048\u305f\u306b\u3066\u3044","locale":"ja_jp"},{"id":"Paranoia","name":"\u30d1\u30e9\u30ce\u30a4\u30a2","className":"Paranoia","superClassName":"Base","sortKey":"\u306f\u3089\u306e\u3044\u3042","locale":"ja_jp"},{"id":"ParanoiaRebooted","name":"\u30d1\u30e9\u30ce\u30a4\u30a2 \u30ea\u30d6\u30fc\u30c6\u30c3\u30c9","className":"ParanoiaRebooted","superClassName":"Base","sortKey":"\u306f\u3089\u306e\u3044\u3042\u308a\u3075\u3046\u3066\u3064\u3068","locale":"ja_jp"},{"id":"ParasiteBlood","name":"\u30d1\u30e9\u30b5\u30a4\u30c8\u30d6\u30e9\u30c3\u30c9RPG","className":"ParasiteBlood","superClassName":"DemonParasite","sortKey":"\u306f\u3089\u3055\u3044\u3068\u3075\u3089\u3064\u3068RPG","locale":"ja_jp"},{"id":"KillDeathBusiness:Korean","name":"Kill Death Business (\ud55c\uad6d\uc5b4)","className":"KillDeathBusiness_Korean","superClassName":"KillDeathBusiness","sortKey":"\u56fd\u969b\u5316:Korean:Kill Death Business","locale":"ko_kr"},{"id":"KurayamiCrying","name":"\u30af\u30e9\u30e4\u30df\u30af\u30e9\u30a4\u30f3","className":"KurayamiCrying","superClassName":"Base","sortKey":"\u304f\u3089\u3084\u307f\u304f\u3089\u3044\u3093","locale":"ja_jp"},{"id":"Pathfinder","name":"Pathfinder","className":"Pathfinder","superClassName":"DungeonsAndDragons","sortKey":"\u306f\u3059\u3075\u3042\u3044\u3093\u305f\u3042","locale":"ja_jp"},{"id":"Kutulu","name":"Kutulu","className":"Kutulu","superClassName":"Base","sortKey":"\u304f\u3068\u3046\u308b\u3046","locale":"ja_jp"},{"id":"Pendragon","name":"\u30da\u30f3\u30c9\u30e9\u30b4\u30f3","className":"Pendragon","superClassName":"Base","sortKey":"\u3078\u3093\u3068\u3089\u3053\u3093","locale":"ja_jp"},{"id":"PersonaO","name":"\u30da\u30eb\u30bd\u30caTRPG-O","className":"PersonaO","superClassName":"Base","sortKey":"\u3078\u308b\u305d\u306aTRPGO","locale":"ja_jp"},{"id":"Peekaboo","name":"\u30d4\u30fc\u30ab\u30fc\u30d6\u30fc","className":"Peekaboo","superClassName":"Base","sortKey":"\u3072\u3044\u304b\u3042\u3075\u3046","locale":"ja_jp"},{"id":"LiveraDoll","name":"\u7d2b\u7e1e\u306e\u30ea\u30f4\u30e9\u30c9\u30fc\u30eb","className":"LiveraDoll","superClassName":"Base","sortKey":"\u3057\u3057\u307e\u306e\u308a\u3046\u3089\u3068\u304a\u308b","locale":"ja_jp"},{"id":"BeginningIdol:Korean","name":"\ube44\uae30\ub2dd \uc544\uc774\ub3cc","className":"BeginningIdol_Korean","superClassName":"BeginningIdol","sortKey":"\u56fd\u969b\u5316:Korean:\ube44\uae30\ub2dd \uc544\uc774\ub3cc","locale":"ko_kr"},{"id":"BeginningIdol2022","name":"\u30d3\u30ae\u30cb\u30f3\u30b0\u30a2\u30a4\u30c9\u30eb\uff082022\u5e74\u6539\u8a02\u7248\uff09","className":"BeginningIdol2022","superClassName":"Base","sortKey":"\u3072\u304d\u306b\u3093\u304f\u3042\u3044\u3068\u308b2022","locale":"ja_jp"},{"id":"PhantasmAdventure","name":"\u30d5\u30a1\u30f3\u30bf\u30ba\u30e0\u30fb\u30a2\u30c9\u30d9\u30f3\u30c1\u30e3\u30fc","className":"PhantasmAdventure","superClassName":"Base","sortKey":"\u3075\u3042\u3093\u305f\u3059\u3080\u3042\u3068\u3078\u3093\u3061\u3084\u3042","locale":"ja_jp"},{"id":"LogHorizon","name":"\u30ed\u30b0\u30fb\u30db\u30e9\u30a4\u30ba\u30f3TRPG","className":"LogHorizon","superClassName":"Base","sortKey":"\u308d\u304f\u307b\u3089\u3044\u3059\u3093TRPG","locale":"ja_jp"},{"id":"Postman","name":"\u58ca\u308c\u305f\u4e16\u754c\u306e\u30dd\u30b9\u30c8\u30de\u30f3","className":"Postman","superClassName":"Base","sortKey":"\u3053\u308f\u308c\u305f\u305b\u304b\u3044\u306e\u307b\u3059\u3068\u307e\u3093","locale":"ja_jp"},{"id":"EarthDawn3","name":"\u30a2\u30fc\u30b9\u30c9\u30fc\u30f33\u7248","className":"EarthDawn3","superClassName":"EarthDawn","sortKey":"\u3042\u3042\u3059\u3068\u304a\u30933","locale":"ja_jp"},{"id":"PulpCthulhu","name":"\u30d1\u30eb\u30d7\u30fb\u30af\u30c8\u30a5\u30eb\u30d5","className":"PulpCthulhu","superClassName":"Cthulhu7th","sortKey":"\u306f\u308b\u3075\u304f\u3068\u3046\u308b\u3075","locale":"ja_jp"},{"id":"ToshiakiHolyGrailWar","name":"\u3068\u3057\u3042\u304d\u306e\u8056\u676f\u6226\u4e89TRPG","className":"ToshiakiHolyGrailWar","superClassName":"Base","sortKey":"\u3068\u3057\u3042\u304d\u306e\u305b\u3044\u306f\u3044\u305b\u3093\u305d\u3046TRPG","locale":"ja_jp"},{"id":"BladeOfArcana","name":"\u30d6\u30ec\u30a4\u30c9\u30fb\u30aa\u30d6\u30fb\u30a2\u30eb\u30ab\u30ca","className":"BladeOfArcana","superClassName":"Base","sortKey":"\u3075\u308c\u3044\u3068\u304a\u3075\u3042\u308b\u304b\u306a","locale":"ja_jp"},{"id":"Raisondetre","name":"\u53db\u9006\u30ec\u30be\u30f3\u30c7\u30fc\u30c8\u30eb","className":"Raisondetre","superClassName":"Base","sortKey":"\u306f\u3093\u304d\u3084\u304f\u308c\u305d\u3093\u3066\u3068\u304a\u308b","locale":"ja_jp"},{"id":"TrinitySeven","name":"\u30c8\u30ea\u30cb\u30c6\u30a3\u30bb\u30d6\u30f3RPG","className":"TrinitySeven","superClassName":"Base","sortKey":"\u3068\u308a\u306b\u3066\u3044\u305b\u3075\u3093RPG","locale":"ja_jp"},{"id":"BlindMythos","name":"\u30d6\u30e9\u30a4\u30f3\u30c9\u30fb\u30df\u30c8\u30b9RPG","className":"BlindMythos","superClassName":"Base","sortKey":"\u3075\u3089\u3044\u3093\u3068\u307f\u3068\u3059RPG","locale":"ja_jp"},{"id":"RecordOfLodossWar","name":"\u30ed\u30fc\u30c9\u30b9\u5cf6\u6226\u8a18RPG","className":"RecordOfLodossWar","superClassName":"Base","sortKey":"\u308d\u304a\u3068\u3059\u3068\u3046\u305b\u3093\u304dRPG","locale":"ja_jp"},{"id":"RecordOfSteam","name":"Record of Steam","className":"RecordOfSteam","superClassName":"Base","sortKey":"\u308c\u3053\u304a\u3068\u304a\u3075\u3059\u3061\u3044\u3080","locale":"ja_jp"},{"id":"EarthDawn4","name":"\u30a2\u30fc\u30b9\u30c9\u30fc\u30f34\u7248","className":"EarthDawn4","superClassName":"EarthDawn","sortKey":"\u3042\u3042\u3059\u3068\u304a\u30934","locale":"ja_jp"},{"id":"TunnelsAndTrolls","name":"\u30c8\u30f3\u30cd\u30eb\u30ba\uff06\u30c8\u30ed\u30fc\u30eb\u30ba","className":"TunnelsAndTrolls","superClassName":"Base","sortKey":"\u3068\u3093\u306d\u308b\u3059\u3042\u3093\u3068\u3068\u308d\u304a\u308b\u3059","locale":"ja_jp"},{"id":"LogHorizon:Korean","name":"\ub85c\uadf8 \ud638\ub77c\uc774\uc98c","className":"LogHorizon_Korean","superClassName":"LogHorizon","sortKey":"\u56fd\u969b\u5316:Korean:\ub85c\uadf8 \ud638\ub77c\uc774\uc98c","locale":"ko_kr"},{"id":"LostRecord","name":"\u30ed\u30b9\u30c8\u30ec\u30b3\u30fc\u30c9","className":"LostRecord","superClassName":"Base","sortKey":"\u308d\u3059\u3068\u308c\u3053\u304a\u3068","locale":"ja_jp"},{"id":"LostRoyal","name":"\u30ed\u30b9\u30c8\u30ed\u30a4\u30e4\u30eb","className":"LostRoyal","superClassName":"Base","sortKey":"\u308d\u3059\u3068\u308d\u3044\u3084\u308b","locale":"ja_jp"},{"id":"EclipsePhase","name":"\u30a8\u30af\u30ea\u30d7\u30b9\u30fb\u30d5\u30a7\u30a4\u30ba","className":"EclipsePhase","superClassName":"Base","sortKey":"\u3048\u304f\u308a\u3075\u3059\u3075\u3048\u3044\u3059","locale":"ja_jp"},{"id":"Revulture","name":"\u5149\u7815\u306e\u30ea\u30f4\u30a1\u30eb\u30c1\u30e3\u30fc","className":"Revulture","superClassName":"Base","sortKey":"\u3053\u3046\u3055\u3044\u306e\u308a\u3046\u3042\u308b\u3061\u3084\u3042","locale":"ja_jp"},{"id":"Elric","name":"\u30a8\u30eb\u30ea\u30c3\u30af\uff01","className":"Elric","superClassName":"Base","sortKey":"\u3048\u308b\u308a\u3064\u304f","locale":"ja_jp"},{"id":"Elysion","name":"\u30a8\u30ea\u30e5\u30b7\u30aa\u30f3","className":"Elysion","superClassName":"Base","sortKey":"\u3048\u308a\u3086\u3057\u304a\u3093","locale":"ja_jp"},{"id":"TwilightGunsmoke","name":"\u30c8\u30ef\u30a4\u30e9\u30a4\u30c8\u30ac\u30f3\u30b9\u30e2\u30fc\u30af","className":"TwilightGunsmoke","superClassName":"Base","sortKey":"\u3068\u308f\u3044\u3089\u3044\u3068\u304b\u3093\u3059\u3082\u304a\u304f","locale":"ja_jp"},{"id":"UnsungDuet","name":"\u30a2\u30f3\u30b5\u30f3\u30b0\u30fb\u30c7\u30e5\u30a8\u30c3\u30c8","className":"UnsungDuet","superClassName":"Base","sortKey":"\u3042\u3093\u3055\u3093\u304f\u3066\u3086\u3048\u3064\u3068","locale":"ja_jp"},{"id":"RokumonSekai2","name":"\u516d\u9580\u4e16\u754cRPG \u30bb\u30ab\u30f3\u30c9\u30a8\u30c7\u30a3\u30b7\u30e7\u30f3","className":"RokumonSekai2","superClassName":"Base","sortKey":"\u308d\u304f\u3082\u3093\u305b\u304b\u3044RPG2","locale":"ja_jp"},{"id":"BloodCrusade","name":"\u30d6\u30e9\u30c3\u30c9\u30fb\u30af\u30eb\u30bb\u30a4\u30c9","className":"BloodCrusade","superClassName":"Base","sortKey":"\u3075\u3089\u3064\u3068\u304f\u308b\u305b\u3044\u3068","locale":"ja_jp"},{"id":"MagicaLogia","name":"\u30de\u30ae\u30ab\u30ed\u30ae\u30a2","className":"MagicaLogia","superClassName":"Base","sortKey":"\u307e\u304d\u304b\u308d\u304d\u3042","locale":"ja_jp"},{"id":"Utakaze","name":"\u30a6\u30bf\u30ab\u30bc","className":"Utakaze","superClassName":"Base","sortKey":"\u3046\u305f\u304b\u305b","locale":"ja_jp"},{"id":"BloodMoon","name":"\u30d6\u30e9\u30c3\u30c9\u30e0\u30fc\u30f3","className":"BloodMoon","superClassName":"Base","sortKey":"\u3075\u3089\u3064\u3068\u3080\u3046\u3093","locale":"ja_jp"},{"id":"Bloodorium","name":"\u30d6\u30e9\u30c9\u30ea\u30a6\u30e0","className":"Bloodorium","superClassName":"Base","sortKey":"\u3075\u3089\u3068\u308a\u3046\u3080","locale":"ja_jp"},{"id":"RoleMaster","name":"\u30ed\u30fc\u30eb\u30de\u30b9\u30bf\u30fc","className":"RoleMaster","superClassName":"Base","sortKey":"\u308d\u304a\u308b\u307e\u3059\u305f\u3042","locale":"ja_jp"},{"id":"RuinBreakers","name":"\u30eb\u30fc\u30a4\u30f3\u30d6\u30ec\u30a4\u30ab\u30fc\u30ba","className":"RuinBreakers","superClassName":"Base","sortKey":"\u308b\u3046\u3044\u3093\u3075\u308c\u3044\u304b\u3042\u3059","locale":"ja_jp"},{"id":"CardRanker","name":"\u30ab\u30fc\u30c9\u30e9\u30f3\u30ab\u30fc","className":"CardRanker","superClassName":"Base","sortKey":"\u304b\u3042\u3068\u3089\u3093\u304b\u3042","locale":"ja_jp"},{"id":"CastleInGray","name":"\u7070\u8272\u57ce\u7dba\u8b5a","className":"CastleInGray","superClassName":"Base","sortKey":"\u306f\u3044\u3044\u308d\u3057\u3088\u3046\u304d\u305f\u3093","locale":"ja_jp"},{"id":"RuneQuest","name":"\u30eb\u30fc\u30f3\u30af\u30a8\u30b9\u30c8","className":"RuneQuest","superClassName":"Base","sortKey":"\u308b\u3046\u3093\u304f\u3048\u3059\u3068","locale":"ja_jp"},{"id":"RyuTuber","name":"\u30ea\u30e5\u30fc\u30c1\u30e5\u30fc\u30d0\u30fc\u3068\u3061\u3044\u3055\u306a\u5947\u8de1","className":"RyuTuber","superClassName":"Base","sortKey":"\u308a\u3086\u3046\u3061\u3086\u3046\u306f\u3042\u3068\u3061\u3044\u3055\u306a\u304d\u305b\u304d","locale":"ja_jp"},{"id":"AFF2e","name":"ADVANCED FIGHTING FANTASY 2nd Edition","className":"AFF2e","superClassName":"Base","sortKey":"\u3042\u3068\u306f\u3093\u3059\u3068\u3075\u3042\u3044\u3066\u3044\u3093\u304f\u3075\u3042\u3093\u305f\u3057\u30442","locale":"ja_jp"},{"id":"Ryutama","name":"\u308a\u3085\u3046\u305f\u307e","className":"Ryutama","superClassName":"Base","sortKey":"\u308a\u3086\u3046\u305f\u307e","locale":"ja_jp"},{"id":"VampireTheMasquerade5th","name":"Vampire: The Masquerade 5th Edition","className":"VampireTheMasquerade5th","superClassName":"Base","sortKey":"\u3046\u3042\u3093\u306f\u3044\u3042\u3055\u307e\u3059\u304b\u308c\u3048\u30685","locale":"ja_jp"},{"id":"ChaosFlare","name":"\u30ab\u30aa\u30b9\u30d5\u30ec\u30a2","className":"ChaosFlare","superClassName":"Base","sortKey":"\u304b\u304a\u3059\u3075\u308c\u3042","locale":"ja_jp"},{"id":"Villaciel","name":"\u84bc\u5929\u306e\u30f4\u30a3\u30e9\u30b7\u30a8\u30eb","className":"Villaciel","superClassName":"Base","sortKey":"\u305d\u3046\u3066\u3093\u306e\u3046\u3044\u3089\u3057\u3048\u308b","locale":"ja_jp"},{"id":"MagicaLogia:Korean","name":"\ub9c8\uae30\uce74\ub85c\uae30\uc544","className":"MagicaLogia_Korean","superClassName":"MagicaLogia","sortKey":"\u56fd\u969b\u5316:Korean:\ub9c8\uae30\uce74\ub85c\uae30\uc544","locale":"ko_kr"},{"id":"Chill","name":"Chill","className":"Chill","superClassName":"Base","sortKey":"\u3061\u308b","locale":"ja_jp"},{"id":"MagicaLogia:SimplifiedChinese","name":"\u9b54\u5bfc\u4e66\u5927\u6218","className":"MagicaLogia_SimplifiedChinese","superClassName":"MagicaLogia","sortKey":"\u56fd\u969b\u5316:Simplified Chinese:\u9b54\u5bfc\u4e66\u5927\u6218","locale":"zh_hans"},{"id":"MeikyuDays","name":"\u8ff7\u5bae\u30c7\u30a4\u30ba","className":"MeikyuDays","superClassName":"Base","sortKey":"\u3081\u3044\u304d\u3086\u3046\u3066\u3044\u3059","locale":"ja_jp"}]}')},6884:l=>{"use strict";l.exports=JSON.parse('{"ja_jp":{"success":"\u6210\u529f","failure":"\u5931\u6557","critical":"\u30af\u30ea\u30c6\u30a3\u30ab\u30eb","fumble":"\u30d5\u30a1\u30f3\u30d6\u30eb"},"zh_hans":{"success":"\u6210\u529f","failure":"\u5931\u8d25","fumble":"\u5927\u5931\u8d25","RTT":{"rtt_format":"\u968f\u673a\u7279\u6280\u8868(%<category_dice>d,%<row_dice>d) \uff1e %<text>s","rttn_format":"%<category_name>s\u9886\u57df\u968f\u673a\u7279\u6280\u8868(%<row_dice>d) \uff1e %<text>s"}},"zh_hant":{"success":"\u6210\u529f","failure":"\u5931\u6557"},"ko_kr":{"success":"\uc131\uacf5","failure":"\uc2e4\ud328","fumble":"\ud38c\ube14","RTT":{"rtt_format":"\ub79c\ub364 \ud2b9\uae30 \uacb0\uc815\ud45c(%<category_dice>d,%<row_dice>d) \uff1e %<text>s","rttn_format":"\uc9c0\uc815\ud2b9\uae30(%<category_name>s)\ud45c(%<row_dice>d) \uff1e %<text>s"}}}')},3034:l=>{"use strict";l.exports=JSON.parse('{"i18nList":[{"baseClassName":"SwordWorld2_0","locales":["ja_jp","zh_hans"]},{"baseClassName":"Cthulhu","locales":["ja_jp","zh_hans","zh_hant","ko_kr"]},{"baseClassName":"Kamigakari","locales":["ja_jp","ko_kr"]},{"baseClassName":"DoubleCross","locales":["ja_jp","ko_kr"]},{"baseClassName":"StellarKnights","locales":["ja_jp","ko_kr"]},{"baseClassName":"MonotoneMuseum","locales":["ja_jp","ko_kr"]},{"baseClassName":"Dracurouge","locales":["ja_jp","ko_kr"]},{"baseClassName":"Emoklore","locales":["ja_jp"]},{"baseClassName":"MagicaLogia","locales":["ja_jp","zh_hans","ko_kr"]},{"baseClassName":"FutariSousa","locales":["ja_jp","ko_kr"]},{"baseClassName":"DetatokoSaga","locales":["ja_jp","ko_kr"]},{"baseClassName":"Insane","locales":["ja_jp","ko_kr"]},{"baseClassName":"LogHorizon","locales":["ja_jp","ko_kr"]},{"baseClassName":"Nechronica","locales":["ja_jp","ko_kr"]},{"baseClassName":"Arianrhod","locales":["ja_jp"]},{"baseClassName":"KillDeathBusiness","locales":["ja_jp","ko_kr"]},{"baseClassName":"StratoShout","locales":["ja_jp","ko_kr"]},{"baseClassName":"BeginningIdol","locales":["ja_jp","ko_kr"]},{"baseClassName":"SwordWorld2_5","locales":["ja_jp","zh_hans"]},{"baseClassName":"SwordWorld","locales":["ja_jp","zh_hans"]},{"baseClassName":"Amadeus","locales":["ja_jp","ko_kr"]},{"baseClassName":"Fiasco","locales":["ja_jp","ko_kr"]}]}')}}]);